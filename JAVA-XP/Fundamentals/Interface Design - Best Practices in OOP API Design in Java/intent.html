<HTML>
<HEAD>
<TITLE>Understand the role of intent in design patterns</TITLE>
<META name="description" content="An object-oriented design idiom from Interface Design: Best Practices in Object-Oriented API Design in Java by Bill Venners.">
<META name="keywords" content="Java Design, Java Book, Object Oriented Design, Thread Safe Design">
<LINK rel="stylesheet" type="text/css" href="http://www.artima.com/artima.css">
</HEAD>
<BODY text="#000000" alink="#006666">
<TABLE width="100%" cellspacing="0">
<TR>
<TD align="left" valign="bottom">
<A href="http://www.artima.com/index.jsp"><IMG src="..\images\ac.gif" alt="artima.com" border="0" width="150" height="31"></A>
</TD>
<TD align="right">
<a href="http://www.artima.com/cgi-bin/redirect.cgi/aaae0156?REGION=Cyan&CAMPAIGN=Default&ACCOUNT=Artima&BANNER=ArtimaTraining" ><img src="..\cgi-bin\getimage.cgi\aaae0156\region=cyan&campaign=default&account=artima&banner" border=0 width=468 height=60 alt="ad" ></a>
</TD>
</TR>
</TABLE>
<TABLE width="100%" bgcolor="#006666">
<TR>
<TD align="center">
<DIV class="ml">
<A href="http://www.artima.com/search.html" class="hl">Search</A>&nbsp;|
<A href="http://www.artima.com/java/index.html" class="hl">Java</A>&nbsp;|
<A href="http://www.artima.com/javadesign/index.html" class="hl">Design</A>&nbsp;|
<A href="http://www.artima.com/jvm/index.html" class="hl">JVM</A>&nbsp;|
<A href="http://www.artima.com/jini/index.html" class="hl">Jini</A>&nbsp;|
<A href="http://www.artima.com/forums/index.jsp" class="hl">Forums</A>&nbsp;|
<A href="http://www.artima.com/javaseminars/index.html" class="hl">Seminars</A>&nbsp;|
<A href="http://lists.artima.com/mailman/listinfo/artima-newsletter/" class="hl">Subscribe</A>
</DIV>
</TD>
</TR>
</TABLE>
<BR>
<DIV class="vegies">
<DIV class="tc">
<SPAN class="sts">Interface Design by Bill Venners</SPAN><BR>
<SPAN class="ts">Understand the role of intent in design patterns</SPAN><BR>
</DIV>

<!--BEGIN_PRECISE_OBJECT_LINKS-->
<CENTER>
<FONT size="1" face="geneva, arial, sans-serif">
<STRONG>
<A href="index.html">Interface&nbsp;Design</A>&nbsp;|
<A href="contents.html">Contents</A>&nbsp;|
<A href="designpatterns.html">Previous</A>&nbsp;|
<A href="dessemantics.html">Next</A>
</STRONG>
</FONT>
</CENTER>
<!--END_PRECISE_OBJECT_LINKS-->

<H2>Design Patterns</H2>
<UL>
<LI>
Guideline: <EM>Be aware of composition and inheritance in design patterns.</EM>
<LI>Many design patterns are: composition for a particular reason
<LI>Observer: Define a one to many dependency between objects so that when one
object changes state, all its dependents are notified and updated automatically
<LI>Adapter: Convert the interface of a class into another interface the client expects
<LI>Decorator: Attach additional responsibilities to an object dynamically
<LI>Proxy: Provide a surrogate or place holder for another object to control access to it
<LI>State: Allow an object to alter its behavior when its internal state changes
<LI>Command: Encapsulate a request as an object, thereby letting you parameterize
clients with different requests, queue or log requests, and support undoable operations.
<LI>Strategy: Define a family of algorithms, encapsulate each one, and make them interchangable.
<LI>Inheritance shows up as tight-knit families of States, Strategies, etc...
<LI>Use Iterators to provide access to the elements of a collection.
<LI>Template method is delegation to a subclass.
</UL>

<P>
Difference between decorator and proxy is that I usually get an object that is already
a proxy to something else (because the intent is that the service provider wants to
control my access to the back-end object), but I usually add decorations myself to
a back-end object.

<P>
Ideas for examples: The actual stamp dispenser. A bicycle computer. Stack, Queue, and Dequeue.
For decorator, use Accounts, with OverdraftAccount, FeeAccount (charges fees on withdrawal
and or deposit), LinkedAccount (transfers funds from another account on overdraft),
MatchingAccount (matches deposited funds until a reservoir is exhausted, but can replenish
the reservoir): Consider all the combinations: OverdraftMatchingAccount, OverdraftFeeAccount,
LinkedFeeAccount, FeeLinkedAccount, FeeLinkedMatchingAccount, and so on. (Don't attempt to
show these combinations in a hierarchy, just list them. "You get an exploding hierarchy."
Could also have a MinimumBalanceAccount that forces that you keep a minimum balance in
the account, but maybe that's not such a good one because dropping below the min usually
results in a fee, not ... hey! maybe that's my notification example for sig of interfaces.

<P>
Show how inner classes actually get compiled in Iterator example.

<P>
Go throught remote proxy (over the net), virtual proxy (lazy initialization), protection proxy (minimize
access allowed, as in immutable or thread safe collection wrappers, smart reference (soft reference)

<P>
The difference between Proxy and Decorator is that the back-end is already proxied by a front-end when
the client gets ahold of it. The client can't get to the back-end, only the front-end. By contrast, it
is the client that usually connects front-ends and back-ends in a decorator scenario. Though both
are composition (with some common interface between front and back ends), the intent is different.

<P>
May want to add Composite in the mix.

<P>
Adapter is important in the sense that it points out that the interfaces of objects in a composition
relationship need not be compatible. More flexible than inheritance.

<P>
I grabbed this from the bottom of the state pattern one. Use it here as the first example of composition
for a purpose in design patterns.

<P>
<CENTER>
<IMG src="images\statefebe.gif"><BR><BR>
<STRONG> Figure 4-3. Composition and the state pattern.</STRONG>
</CENTER>

<P>
As shown in Figure 4-3, the state pattern is yet another example of using composition to achieve
a particular goal. In this
case the front-end object delegates responsibility to any of several back-end state objects, primarily to
transform a single, difficult to maintain class into many easier to maintain classes.
In the state pattern, the back-end state objects are unknown to the clients of the front-end.
The back-end objects are purely creatures of
the front-end object's implementation. The back-end object is varied throughout the life of the object.
Often, the back-end objects are shared among multiple front-end objects.

<P>
This last aspect of the state pattern's use of composition is mentioned by the Go4 book.
One benefit of the state pattern, says the Go4, is that
if the state objects
are stateless, they can be shared.
All four concrete <CODE>State</CODE> subclasses in the
<CODE>StampDispenser</CODE> example are stateless, which
in turn means they can be shared. And in fact they are shared.
Because the <CODE>State</CODE> subclasses are defined as singletons, all instances of
the <CODE>StampDispenser</CODE> front-end class will share the same back-end (singleton)
instances of the <CODE>State</CODE> subclasses.
Such stateless state objects, the Go4 book goes on to say, are flyweights. The
four <CODE>State</CODE> subclasses in the stamp dispenser
example are indeed flyweights, and <CODE>Has0State</CODE>
serves as a flyweight example in <A href="flyweights.html">Guideline 4</A>.
(May want to emphasize that state objects need not be stateless.)

<P>
The state pattern also involves inheritance, because the concrete state subclasses must all
inherit some common interface. In Java, the interface can be inherited from either a
superclass or superinterface. In the stamp dispenser example, all concrete state classes
subclass the abstract class <CODE>State</CODE>, forming a tight knit family of states.
This very family of states appears in <A href="abstractclasses.html">Guideline ?</A>, as an example of when to use
an abstract class over an interface.
</TD>
</TR>

</DIV>
<HR width="100%">
<TABLE width="100%">
<TR>
<TD align="left">
<DIV class="sp">
Last Updated: Sunday, March 3, 2002<BR>
<A href="http://www.artima.com/copyright.html">Copyright</A> &copy; 1996-2002 Artima Software, Inc. All Rights Reserved.
</DIV>
</TD>
<TD align="right">
<DIV class="sp">
URL: http://www.artima.com/interfacedesign/Intent.html<BR>
Artima.com is created by <A href="http://www.artima.com/consulting.html">Bill Venners</A>
</DIV>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>
