<HTML>
<HEAD>
<TITLE>Use checked exceptions for conditions that client code may reasonably be expected to handle</TITLE>
<META name="description" content="An object-oriented design idiom from Interface Design: Best Practices in Object-Oriented API Design in Java by Bill Venners.">
<META name="keywords" content="Java Design, Java Book, Object Oriented Design, Thread Safe Design">
<LINK rel="stylesheet" type="text/css" href="http://www.artima.com/artima.css">
</HEAD>
<BODY text="#000000" alink="#006666">
<TABLE width="100%" cellspacing="0">
<TR>
<TD align="left" valign="bottom">
<A href="http://www.artima.com/index.jsp"><IMG src="..\images\ac.gif" alt="artima.com" border="0" width="150" height="31"></A>
</TD>
<TD align="right">
<a href="http://www.artima.com/cgi-bin/redirect.cgi/4a1539c2?REGION=Cyan&CAMPAIGN=Default&ACCOUNT=Artima&BANNER=ArtimaTraining" ><img src="..\cgi-bin\getimage.cgi\4a1539c2\region=cyan&campaign=default&account=artima&banner" border=0 width=468 height=60 alt="ad" ></a>
</TD>
</TR>
</TABLE>
<TABLE width="100%" bgcolor="#006666">
<TR>
<TD align="center">
<DIV class="ml">
<A href="http://www.artima.com/search.html" class="hl">Search</A>&nbsp;|
<A href="http://www.artima.com/java/index.html" class="hl">Java</A>&nbsp;|
<A href="http://www.artima.com/javadesign/index.html" class="hl">Design</A>&nbsp;|
<A href="http://www.artima.com/jvm/index.html" class="hl">JVM</A>&nbsp;|
<A href="http://www.artima.com/jini/index.html" class="hl">Jini</A>&nbsp;|
<A href="http://www.artima.com/forums/index.jsp" class="hl">Forums</A>&nbsp;|
<A href="http://www.artima.com/javaseminars/index.html" class="hl">Seminars</A>&nbsp;|
<A href="http://lists.artima.com/mailman/listinfo/artima-newsletter/" class="hl">Subscribe</A>
</DIV>
</TD>
</TR>
</TABLE>
<BR>
<DIV class="vegies">
<DIV class="tc">
<SPAN class="sts">Interface Design by Bill Venners</SPAN><BR>
<SPAN class="ts">Use checked exceptions for conditions that client code may reasonably be expected to handle</SPAN><BR>
</DIV>

<!--BEGIN_PRECISE_OBJECT_LINKS-->
<CENTER>
<FONT size="1" face="geneva, arial, sans-serif">
<STRONG>
<A href="index.html">Interface&nbsp;Design</A>&nbsp;|
<A href="contents.html">Contents</A>&nbsp;|
<A href="abnormalconditions.html">Previous</A>&nbsp;|
<A href="exceptiontype.html">Next</A>
</STRONG>
</FONT>
</CENTER>
<!--END_PRECISE_OBJECT_LINKS-->

<H2>Exceptions and <CODE>throws</CODE></H2>
<UL>
<LI>
Guideline: <EM>Use a checked exception for conditions client code can reasonably be expected to handle.</EM>
<LI>
Java requires that a method declare in a <CODE>throws</CODE> clause the
exceptions that it may throw
<LI>
A method's <CODE>throws</CODE> clause indicates to client programmers what
exceptions they may have to deal with when they invoke the method
<LI>
Only exceptions that will cause a method to complete abruptly should
appear in its <CODE>throws</CODE> clause:
<BR><BR>
<PRE>
// In file VirtualPerson.java
class VirtualPerson {
    public void drinkCoffee(CoffeeCup cup)
        throws TooColdException,
        TemperatureException,
        UnusualTasteException {
        try {
            int i = (int) (Math.random() * 4.0);
            switch (i) {
            case 0:
                throw new TooHotException();
            case 1:
                throw new TooColdException();
            case 2:
                throw new UnusualTasteException();
            default:
                throw new TemperatureException();
            }
        }
        catch (TooHotException e) {
            System.out.println(
                "This coffee is too hot.");
            // Customer will wait until it cools
            // to an acceptable temperature.
        }
    }
    //...
}
</pre>
<LI>
The calling method must either catch the exception or declare it in
its own <CODE>throws</CODE> clause:
<BR><BR>
<PRE>
// In file VirtualCafe.java
class VirtualCafe {
    public static void serveCustomer(
        VirtualPerson cust, CoffeeCup cup)
        throws TemperatureException,
        UnusualTasteException {
        try {
            cust.drinkCoffee(cup);
        }
        catch (TooColdException e) {
            System.out.println(
                "This coffee is too cold.");
            // Add more hot coffee...
        }
    }
}
</pre>
</UL>

<HR align="left" width="100%" size="4" noshade>
<H2>Checked versus Unchecked</H2>
<UL>
<LI>
Only <EM>checked</em> exceptions need appear in <CODE>throws</CODE> clauses
<LI>
Whether an exception is "checked" or "unchecked" is determined by its
position in the hierarchy of throwable classes:
<BR><BR>
<IMG src="images\checked.gif">
</UL>

<HR align="left" width="100%" size="4" noshade>
<H2>Exceptions In Your Face</H2>
<UL>
<LI>
Placing an exception in a <CODE>throws</CODE> clause <EM>forces</em> client
programmers who invoke your method to deal with the exception, either by:
<UL>
<LI>Catching it, or
<LI>Declaring it in their own <CODE>throws</CODE> clause
</UL>
<LI>
<CODE>Error</CODE>s: For the JVM and Java API
<LI>
To make a checked exception, subclass <CODE>Exception</CODE> but not
<CODE>RuntimeException</CODE>
<LI>
To make an unchecked exception, subclass <CODE>RuntimeException</CODE>
<BR><BR>
<IMG src="images\checked.gif">
</UL>

<HR align="left" width="100%" size="4" noshade>
<H2>Why Checked Exceptions?</H2>
<UL>

<LI>
From the JLS: "This compile-time checking for the presence of exception
handlers is designed to reduce the number of exceptions which are not
properly handled."

<LI>
If you are throwing an exception for an abnormal condition that you feel
client programmers should consciously decide how to handle, throw a checked
exception.

<LI>
Unchecked exceptions indicate software bugs.

<LI>
Precisely because unchecked exceptions usually represent software bugs, they
often <EM>can't</EM> be handled somewhere with more context.
</UL>

</TD>
</TR>

</DIV>
<HR width="100%">
<TABLE width="100%">
<TR>
<TD align="left">
<DIV class="sp">
Last Updated: Sunday, March 3, 2002<BR>
<A href="http://www.artima.com/copyright.html">Copyright</A> &copy; 1996-2002 Artima Software, Inc. All Rights Reserved.
</DIV>
</TD>
<TD align="right">
<DIV class="sp">
URL: http://www.artima.com/interfacedesign/CheckedExceptions.html<BR>
Artima.com is created by <A href="http://www.artima.com/consulting.html">Bill Venners</A>
</DIV>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>
