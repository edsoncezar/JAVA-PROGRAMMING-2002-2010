<HTML>
<HEAD>
<TITLE>Thread Safety</TITLE>
<META name="description" content="Object-oriented design guidelines from Interface Design: Best Practices in Object-Oriented API Design in Java, by Bill Venners.">
<META name="keywords" content="Java Design, Java Book, Object Oriented Design, Thread Safe Design">
<LINK rel="stylesheet" type="text/css" href="http://www.artima.com/artima.css">
</HEAD>
<BODY text="#000000" alink="#006666">
<TABLE width="100%" cellspacing="0">
<TR>
<TD align="left" valign="bottom">
<A href="http://www.artima.com/index.jsp"><IMG src="..\images\ac.gif" alt="artima.com" border="0" width="150" height="31"></A>
</TD>
<TD align="right">
<a href="http://www.artima.com/cgi-bin/redirect.cgi/c0684b3e?REGION=Cyan&CAMPAIGN=Default&ACCOUNT=Artima&BANNER=ArtimaTraining" ><img src="..\cgi-bin\getimage.cgi\c0684b3e\region=cyan&campaign=default&account=artima&banner" border=0 width=468 height=60 alt="ad" ></a>
</TD>
</TR>
</TABLE>
<TABLE width="100%" bgcolor="#006666">
<TR>
<TD align="center">
<DIV class="ml">
<A href="http://www.artima.com/search.html" class="hl">Search</A>&nbsp;|
<A href="http://www.artima.com/java/index.html" class="hl">Java</A>&nbsp;|
<A href="http://www.artima.com/javadesign/index.html" class="hl">Design</A>&nbsp;|
<A href="http://www.artima.com/jvm/index.html" class="hl">JVM</A>&nbsp;|
<A href="http://www.artima.com/jini/index.html" class="hl">Jini</A>&nbsp;|
<A href="http://www.artima.com/forums/index.jsp" class="hl">Forums</A>&nbsp;|
<A href="http://www.artima.com/javaseminars/index.html" class="hl">Seminars</A>&nbsp;|
<A href="http://lists.artima.com/mailman/listinfo/artima-newsletter/" class="hl">Subscribe</A>
</DIV>
</TD>
</TR>
</TABLE>
<BR>
<DIV class="vegies">
<DIV class="tc">
<SPAN class="sts">Interface Design by Bill Venners</SPAN><BR>
<SPAN class="sts">Chapter 9</SPAN><BR>
<SPAN class="ts">Thread Safety</SPAN><BR>
</DIV>

<!--BEGIN_PRECISE_OBJECT_LINKS-->
<CENTER>
<FONT size="1" face="geneva, arial, sans-serif">
<STRONG>
<A href="index.html">Interface&nbsp;Design</A>&nbsp;|
<A href="contents.html">Contents</A>&nbsp;|
<A href="initcleanup.html">Previous</A>&nbsp;|
<A href="mobileobjects.html">Next</A>
</STRONG>
</FONT>
</CENTER>
<!--END_PRECISE_OBJECT_LINKS-->

<P>
The Guidelines:
<UL>
<LI>Guideline: <STRONG>Understand the Java monitor.</STRONG>
<LI>Guideline: <STRONG>Appreciate the significance of thread safety.</STRONG>
<LI>Guideline: <STRONG>Consider thread-safety when designing any concrete class.</STRONG>
<LI>Guideline: <STRONG>Provide a friendly way to ask an object to stop its threads.</STRONG>

<P>
In understand the Java monitor, also state that:
Don't depend upon prioritization or time slicing for
program correctness. Mention that in a real time VM, you can depend on
those things. Perhaps use IntBuffer here as an example, because it
shows both synchronized keywords and wait and notify. That'll be enough
for this guidelines book. In Object Design, can go into the nitty gritty
details of wait and notify.

<P>
In appreciate the significance of thread safety, go through RGBColor examples and
tables.

<P>
In consider thread-safety when designing any concrete class,
talk about applying thread safety consciously, including the option
of immutability and using thread-safe wrappers. Mention that in the semantic description,
things should be assumed to be thread safe, unless explicitly says that it isn't
thread safe.

<P>
In provide a friendly way for clients to ask a thread to stop,
Talk about stop(), suspend(), and resume(), and finally clauses as the way to release
resources. Describe how finally clauses are executed on the way up the call stack.

<P>

<P>
<LI><EM>Example: ?</EM>
</UL>
<!--
<UL>
<LI><A href="#conscious"><STRONG>Apply thread-safety consciously.</STRONG></A>
<LI><A href="#wrappers"><STRONG>Use thread-safe wrappers to give clients the
ultimate in choice and convenience.</STRONG></A>
<LI><A href="#aware"><STRONG>Stay aware of multiple threads.</STRONG></A>
<LI><A href="#priority"><STRONG>Don't depend upon prioritization (or time
slicing) for program correctness. Use synchronization.</STRONG></A>
<LI><A href="#deadlock"><STRONG>Understand (and avoid) deadlock.</STRONG></A>
<LI><A href="#coop"><STRONG>Do a yield() or sleep() occasionally to
accomodate cooperative multitasking systems.</STRONG></A>
</UL>

<HR width="100%">
<A name="conscious">
<STRONG>Apply thread-safety consciously.</STRONG>
</A>

<P>
Given that thread safety can have a performance cost, don't
make every class thread-safe -- only those classes that will actually
be used concurrently by multiple threads

<P>
Don't avoid making classes thread-safe that need to be thread-safe
out of fear of a performance impact

<HR width="100%">
<A name="wrappers">
<STRONG>Use thread-safe wrappers to give clients the
ultimate in choice and convenience.</STRONG>
</A>

<P>
If you can't change a non-thread-safe class, use a wrapper object

<P>
If you are creating a library of classes that will be used in both
thread-safe and non-thread-safe requirements, consider making wrappers
an option

<HR width="100%">
<A name="aware">
<STRONG>Stay aware of multiple threads.</STRONG>
</A>

<HR width="100%">
<A name="priority">
<STRONG>Don't depend upon prioritization (or time
slicing) for program correctness. Use synchronization.</STRONG>
</A>

<P>
Do a yield() or sleep() occasionally to accomodate cooperative
multitasking systems???

<HR width="100%">
<A name="deadlock">
<STRONG>Understand (and avoid) deadlock.</STRONG>
</A>

<HR width="100%">
<A name="coop">
<STRONG>Do a yield() or sleep() occasionally to
accomodate cooperative multitasking systems.</STRONG>
</A>
-->
</TD>
</TR>

</DIV>
<HR width="100%">
<TABLE width="100%">
<TR>
<TD align="left">
<DIV class="sp">
Last Updated: Sunday, March 3, 2002<BR>
<A href="http://www.artima.com/copyright.html">Copyright</A> &copy; 1996-2002 Artima Software, Inc. All Rights Reserved.
</DIV>
</TD>
<TD align="right">
<DIV class="sp">
URL: http://www.artima.com/interfacedesign/DesThreads.html<BR>
Artima.com is created by <A href="http://www.artima.com/consulting.html">Bill Venners</A>
</DIV>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>
