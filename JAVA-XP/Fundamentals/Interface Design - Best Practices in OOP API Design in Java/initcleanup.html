<HTML>
<HEAD>
<TITLE>Object Initialization and Cleanup</TITLE>
<META name="description" content="Object-oriented design guidelines from Interface Design: Best Practices in Object-Oriented API Design in Java by Bill Venners.">
<META name="keywords" content="Java Design, Java Book, Object Oriented Design, Thread Safe Design, Object Initialization, Object Finalization">
<LINK rel="stylesheet" type="text/css" href="http://www.artima.com/artima.css">
</HEAD>
<BODY text="#000000" alink="#006666">
<TABLE width="100%" cellspacing="0">
<TR>
<TD align="left" valign="bottom">
<A href="http://www.artima.com/index.jsp"><IMG src="..\images\ac.gif" alt="artima.com" border="0" width="150" height="31"></A>
</TD>
<TD align="right">
<a href="http://www.artima.com/cgi-bin/redirect.cgi/95384fde?REGION=Cyan&CAMPAIGN=Default&ACCOUNT=Artima&BANNER=ObjNJava" ><img src="..\cgi-bin\getimage.cgi\95384fde\region=cyan&campaign=default&account=artima&banner" border=0 width=468 height=60 alt="ad" ></a>
</TD>
</TR>
</TABLE>
<TABLE width="100%" bgcolor="#006666">
<TR>
<TD align="center">
<DIV class="ml">
<A href="http://www.artima.com/search.html" class="hl">Search</A>&nbsp;|
<A href="http://www.artima.com/java/index.html" class="hl">Java</A>&nbsp;|
<A href="http://www.artima.com/javadesign/index.html" class="hl">Design</A>&nbsp;|
<A href="http://www.artima.com/jvm/index.html" class="hl">JVM</A>&nbsp;|
<A href="http://www.artima.com/jini/index.html" class="hl">Jini</A>&nbsp;|
<A href="http://www.artima.com/forums/index.jsp" class="hl">Forums</A>&nbsp;|
<A href="http://www.artima.com/javaseminars/index.html" class="hl">Seminars</A>&nbsp;|
<A href="http://lists.artima.com/mailman/listinfo/artima-newsletter/" class="hl">Subscribe</A>
</DIV>
</TD>
</TR>
</TABLE>
<BR>
<DIV class="vegies">
<DIV class="tc">
<SPAN class="sts">Interface Design by Bill Venners</SPAN><BR>
<SPAN class="sts">Chapter 8</SPAN><BR>
<SPAN class="ts">Object Initialization and Cleanup</SPAN><BR>
</DIV>

<!--BEGIN_PRECISE_OBJECT_LINKS-->
<CENTER>
<FONT size="1" face="geneva, arial, sans-serif">
<STRONG>
<A href="index.html">Interface&nbsp;Design</A>&nbsp;|
<A href="contents.html">Contents</A>&nbsp;|
<A href="exceptiontype.html">Previous</A>&nbsp;|
<A href="desthreads.html">Next</A>
</STRONG>
</FONT>
</CENTER>
<!--END_PRECISE_OBJECT_LINKS-->

<P>
The Guidelines:
<UL>
<LI>Guideline: <STRONG>Force a proper initial state.</STRONG>
<LI>Guideline: <STRONG>Keep constructors and initializers focused on
initialization.</STRONG>
<LI>Guideline: <STRONG>Invoke the <CODE>this()</CODE> constructor with the most
parameters.</STRONG>
<LI>Guideline: <STRONG>Make clones of mutable referenced objects
in <CODE>clone()</CODE>.</STRONG>
<LI>Guideline: <STRONG>Watch out for transient variables when
deserializing.</STRONG>
<LI>Guideline: <STRONG>Don't depend upon "timely" finalization
for program correctness.</STRONG>

<LI>Guideline: <STRONG>Use finalizers knowledgeably.</STRONG>
</UL>
<!--
<UL>

<LI><A href="#properinit"><STRONG>Force a proper initial state.</STRONG></A>

<LI><A href="#focusinit"><STRONG>Keep constructors and initializers focused
on initialization.</STRONG></A>

<LI><A href="#mostparams"><STRONG>Invoke the <CODE>this()</CODE> constructor
with the most parameters.</STRONG></A>

<LI><A href="#clonemutables"><STRONG>Make clones of mutable referenced
objects in <CODE>clone()</CODE>.</STRONG></A>

<LI><A href="#transients"><STRONG>Watch out for transient variables when
deserializing.</STRONG></A>

<LI><A href="#timelyfinalization"><STRONG>Don't depend upon "timely"
finalization for program correctness.</STRONG></A>

<LI><A href="#finalknow"><STRONG>Use finalizers knowledgeably.</STRONG></A>

</UL>

<HR width="100%">
<A name="properinit">
<STRONG>Force a proper initial state.</STRONG>
</A>

<P>
Design an object's initializers and constructors such
     that the object cannot possibly be created in an invalid state.
(If an instance variable doesn't have a natural default value, force client programmers to
     pass an initial value (or data from which an initial value can be calculated) to every constructor in the class.
Check for invalid data passed to constructors. On detecting
     invalid data passed to a constructor, throw an exception.)

<HR width="100%">
<A name="focusinit">
<STRONG>Keep constructors and initializers focused on initialization.</STRONG>
</A>

<P>
Constructors and initializers should be about initialization, the
     whole initialization, and nothing but initialization.

<HR width="100%">
<A name="mostparams">
<STRONG>Invoke the <CODE>this()</CODE> constructor with the most
parameters.</STRONG>
</A>

<P>
Pass in defaults.

<HR width="100%">
<A name="clonemutables">
<STRONG>Make clones of mutable referenced objects
in <CODE>clone()</CODE>.</STRONG>
</A>

<HR width="100%">
<A name="transients">
<STRONG>Watch out for transient variables when
deserializing.</STRONG>
</A>

<HR width="100%">
<A name="timelyfinalization">
<STRONG>Don't depend upon "timely" finalization
for program correctness.</STRONG>
</A>

<P>
Don't design your Java programs such that correctness depends on "timely"
finalization.

<HR width="100%">
<A name="finalknow">
<STRONG>Use finalizers knowledgeably.</STRONG>
</A>

<P>
(Don't assume that a finalizer will be run by any particular thread.

<P>
Don't assume that finalizers will be run in any particular order.

<P>
Avoid designs that require finalizers to resurrect objects. If you must use resurrection, prefer cloning over straight
     resurrection.

<P>
Remember that exceptions thrown by finalizers are ignored.

<P>
If your program includes objects with finalizers that absolutely must be run before the program exits, invoke
     runFinalizersOnExit(true) in class Runtime or System.

<P>
Unless you are writing the finalizer for class Object, always invoke super.finalize() at the end of your finalizers.
-->
</TD>
</TR>

</DIV>
<HR width="100%">
<TABLE width="100%">
<TR>
<TD align="left">
<DIV class="sp">
Last Updated: Sunday, March 3, 2002<BR>
<A href="http://www.artima.com/copyright.html">Copyright</A> &copy; 1996-2002 Artima Software, Inc. All Rights Reserved.
</DIV>
</TD>
<TD align="right">
<DIV class="sp">
URL: http://www.artima.com/interfacedesign/InitCleanup.html<BR>
Artima.com is created by <A href="http://www.artima.com/consulting.html">Bill Venners</A>
</DIV>
</TD>
</TR>
</TABLE>
</BODY>
</HTML>
