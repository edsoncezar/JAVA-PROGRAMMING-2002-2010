<HTML>

<HEAD>
   <TITLE>Chapter 11 -- Using the Applet Viewer</TITLE>
   <META NAME="GENERATOR" CONTENT="Mozilla/3.0b5aGold (WinNT; I) [Netscape]">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#CE2910">










<H1><FONT COLOR=#FF0000>Chapter 11</FONT></H1>
<H1><B><FONT SIZE=5 COLOR=#FF0000>Using the Applet Viewer</FONT></B>
</H1>
<P>
<HR WIDTH="100%"></P>
<P>
<H3 ALIGN=CENTER><FONT COLOR="#000000"><FONT SIZE=+2>CONTENTS<A NAME="CONTENTS"></A>
</FONT></FONT></H3>
<UL>
<LI><A HREF="#Overview" >Overview</A>
<LI><A HREF="#Usage" >Usage</A>
<LI><A HREF="#Options" >Options</A>
<LI><A HREF="#Commands" >Commands</A>
<LI><A HREF="#ProfilingJavaApplets" >Profiling Java Applets</A>
<LI><A HREF="#Bugs" >Bugs</A>
<LI><A HREF="#Summary" >Summary</A>
</UL>
<HR>
<P>
The Java applet viewer (<TT><FONT FACE="Courier">AppletViewer</FONT></TT>)
is a tool used to run applets without the need for a Web browser.
In this chapter, you learn how the applet viewer works, as well
as how to use it to run Java applets. You then learn how to use
the applet viewer to debug programs, along with how to use it
in conjunction with the runtime interpreter to profile executing
Java code in an applet. You finish up the chapter by taking a
look at the documented bugs in the current release of the applet
viewer.
<H2><A NAME="Overview"><FONT SIZE=5 COLOR=#FF0000>Overview</FONT></A>
</H2>
<P>
The typical method of executing a Java applet is from within a
Web browser that has a Web page loaded containing the applet.
This is the typical scenario in which most Web users come into
contact with Java applets. As a Java developer, you have another
option for running Java applets that doesn't involve the use of
a Web browser. This option involves using the Java applet viewer,
which is a tool that serves as a minimal test bed for Java applets.
At times, you may not want to hassle with using a full-blown Web
browser to test an applet, in which case the applet viewer is
an ideal alternative.
<P>
Even though the applet viewer logically takes the place of a Web
browser, it functions very differently than a Web browser. The
applet viewer operates on HTML documents, but all it looks for
is embedded applet tags; any other HTML code in the document is
ignored. Each time the applet viewer encounters an applet tag
in an HTML document, it launches a separate applet viewer window
containing the respective applet.
<P>
The only drawback to using the applet viewer is that it won't
show you how an applet will run within the confines of a real
Web setting. Because the applet viewer ignores all HTML codes
except applet tags, it doesn't even attempt to display any other
information contained in the HTML document. So, once you've tested
your applet using the applet viewer, be sure you also test it
using a Web browser, just to make sure that it works OK in the
context of a real Web page.
<H2><A NAME="Usage"><FONT SIZE=5 COLOR=#FF0000>Usage</FONT></A>
</H2>
<P>
The Java applet viewer is a command-line tool, meaning that it
is invoked from a command prompt. The syntax for the applet viewer
follows:
<BLOCKQUOTE>
<TT><FONT FACE="Courier">appletviewer <I>Options</I> <I>URL</I></FONT></TT>
</BLOCKQUOTE>
<P>
The <TT><I><FONT FACE="Courier">URL</FONT></I></TT> argument specifies
a document URL containing an HTML page with an embedded Java applet.
The applet viewer launches a separate window for each applet embedded
in the HTML document. If the document doesn't contain any embedded
applets, the applet viewer will simply exit. Figure 11.1 shows
the applet viewer in action.
<P>
<A HREF="http://docs.rinet.ru/JavDev/f11-1.gif" ><B>Figure 11.1 : </B><I>The Animator applet running in the Java applet viewer.</I></A>
<P>
Figure 11.1 shows the Animator demo applet that comes with the
Java Developer's Kit running in the applet viewer. The applet
was launched in the applet viewer by changing to the directory
containing the Animator bytecode class and embedded HTML file,
and then executing the following statement at the command prompt:
<BLOCKQUOTE>
<TT><FONT FACE="Courier">appletviewer example1.html</FONT></TT>
</BLOCKQUOTE>
<P>
<TT><FONT FACE="Courier">example1.html</FONT></TT> is the HTML
file containing the embedded Java applet. As you can see, there's
nothing complicated about running Java applets using the applet
viewer. The applet viewer is a useful and easy-to-use tool for
testing Java applets in a simple environment.
<H2><A NAME="Options"><FONT SIZE=5 COLOR=#FF0000>Options</FONT></A>
</H2>
<P>
The <TT><I><FONT FACE="Courier">Options</FONT></I></TT> argument
to the applet viewer specifies how to run the Java applet. There
is currently only one option supported by the applet viewer, <TT><FONT FACE="Courier">-debug</FONT></TT>.
The <TT><FONT FACE="Courier">-debug</FONT></TT> option starts
the applet viewer in the Java debugger, which enables you to debug
applets. For more information about debugging Java programs using
the Java debugger, refer to <A HREF="ch15.htm" >Chapter 15</A>,
&quot;jdb: The Java Debugger.&quot;
<H2><A NAME="Commands"><FONT SIZE=5 COLOR=#FF0000>Commands</FONT></A>
</H2>
<P>
The applet viewer has a drop-down menu called Applet containing
a group of commands, as shown in Figure 11.2.
<P>
<A HREF="http://docs.rinet.ru/JavDev/f11-2.gif" ><B>Figure 11.2 : </B><I>The Java applet viewer with commands available in the drop-down menu.</I></A>
<P>
The <TT><FONT FACE="Courier">Restart </FONT></TT>command restarts
the currently loaded applet, resulting in a call to the <TT><FONT FACE="Courier">start</FONT></TT>
method for the applet. The <TT><FONT FACE="Courier">Restart</FONT></TT>
command does not reload the applet. Similar to <TT><FONT FACE="Courier">Restart</FONT></TT>,
the <TT><FONT FACE="Courier">Reload</FONT></TT> command reloads
the applet and then starts it. <TT><FONT FACE="Courier">Reload</FONT></TT>
is often a better command to use to restart applets because it
ensures that an applet is completely reinitialized.
<P>
The <TT><FONT FACE="Courier">Clone</FONT></TT> command launches
another instance of the applet viewer executing the same applet.
This command is useful when you want to run multiple copies of
an applet. For example, a multiuser network applet might support
multiple instances that can communicate with each other. You could
load one instance of the applet and then use the <TT><FONT FACE="Courier">Clone</FONT></TT>
command to start other instances.
<P>
The <TT><FONT FACE="Courier">Tag</FONT></TT> command displays
a window showing the HTML applet tag for the executing applet.
The Applet HTML Tag window is shown in Figure 11.3.
<P>
<A HREF="http://docs.rinet.ru/JavDev/f11-3.gif" ><B>Figure11.3 : </B><I>The Applet HTML Tag window displayed by the </I><B>Tag</B><I> command.</I></A>
<P>
The <TT><FONT FACE="Courier">Info</FONT></TT> command displays
a window showing information about the executing applet, including
general applet information and information relating to the parameters
used by the applet. This information is returned by the <TT><FONT FACE="Courier">getAppletInfo</FONT></TT>
and <TT><FONT FACE="Courier">getParameterInfo</FONT></TT> methods
of the <TT><FONT FACE="Courier">Applet</FONT></TT> class. The
Applet Info window is shown in Figure 11.4.
<P>
<A HREF="http://docs.rinet.ru/JavDev/f11-4.gif" ><B>Figure 11.4 :</B> <I>The Applet Info window displayed by the </I><B>Info</B><I> command.</I></A>
<P>
The <TT><FONT FACE="Courier">Edit</FONT></TT> command is disabled
in the current release of the applet viewer. Presumably, it will
be activated in a future release of the applet viewer, in which
case it will probably provide a way to alter the applet parameters
in the HTML document containing the applet tag.
<P>
The <TT><FONT FACE="Courier">Properties</FONT></TT> command displays
a window with access options relating to HTTP and firewall proxies
and servers, along with network and class access options. The
applet viewer Properties window is shown in Figure 11.5.
<P>
<A HREF="http://docs.rinet.ru/JavDev/f11-5.gif" ><B>Figure11.5 :</B> <I>The Applet viewer Properties window displayed by the </I><B>Properties</B><I> command.</I></A>
<P>
Finally, the <TT><FONT FACE="Courier">Close</FONT></TT> and <TT><FONT FACE="Courier">Quit</FONT></TT>
commands perform the same function, which is shutting down the
applet viewer. It's not clear why there are two different commands
for closing the applet viewer-it's presumably an oversight.
<H2><A NAME="ProfilingJavaApplets"><FONT SIZE=5 COLOR=#FF0000>Profiling
Java Applets</FONT></A></H2>
<P>
In the previous chapter, &quot;java: The Java Interpreter,&quot;
the profiler built into the Java runtime interpreter was discussed.
This profiler can be used to profile Java applets by running it
in conjunction with the applet viewer. In this case, the applet
viewer is launched from within the runtime interpreter, like this:
<BLOCKQUOTE>
<TT><FONT FACE="Courier">java -prof sun.applet.AppletViewer <I>URL</I></FONT></TT>
</BLOCKQUOTE>
<P>
<TT><I><FONT FACE="Courier">URL</FONT></I></TT> specifies the
name of the HTML file containing an applet tag (or tags). Notice
that the applet viewer is referenced using its fully qualified
class name, <TT><FONT FACE="Courier">AppletViewer</FONT></TT>.
When you finish running the applet, the interpreter writes a text
file named <TT><FONT FACE="Courier">java.prof</FONT></TT> to the
current directory. This file contains profile information for
the applet you just ran. Please refer to the previous chapter
for more information regarding the meaning of the contents of
this file.
<H2><A NAME="Bugs"><FONT SIZE=5 COLOR=#FF0000>Bugs</FONT></A>
</H2>
<P>
The latest release of the Java Developer's Kit as of this writing
is 1.02, which contains some known bugs. More specifically, the
following Java applet viewer bugs have been documented and acknowledged
by the JavaSoft development team:
<UL>
<LI><FONT COLOR=#000000>Transparent images draw incorrectly using
ATI video cards (Windows 95/NT version only).</FONT>
<LI><FONT COLOR=#000000>The Applet HTML Tag window does not display
the HTML Applet tag width and height correctly.</FONT>
<LI><FONT COLOR=#000000>File URLs can only be debugged in local
directories.</FONT>
</UL>
<P>
The first bug applies only to Windows 95/NT systems with ATI video
cards. On these systems, transparent images are drawn with their
colors reversed. This problem is related to the ATI Windows video
driver, for which a fix will no doubt appear in the near future.
<P>
The second bug has to do with the applet width and height shown
in the Applet HTML Tag window. Rather than displaying the applet
width and height as specified in the HTML tag, the window displays
the actual applet width and height, which can potentially be different.
<P>
The last bug appears when running the applet viewer in debug mode
and accessing file URLs that aren't in the current working directory.
The bug causes these URLs to throw exceptions when they are referenced.
For now, the solution is to set the current working directory
to the directory containing the class to be debugged or to reference
the applet by an HTTP URL (rather than a file URL).
<H2><A NAME="Summary"><FONT SIZE=5 COLOR=#FF0000>Summary</FONT></A>
</H2>
<P>
This chapter covered the Java applet viewer, which allows you
to run Java applets without the help of a Web browser. You learned
how to use the applet viewer, along with which options and commands
are available to tweak the execution of applets and obtain extra
information. You then learned how to use the runtime interpreter
profiler in conjunction with the applet viewer to profile Java
applets. The chapter finished up by taking a look at the bugs
present in the JDK 1.02 release of the applet viewer.
<P>
<HR WIDTH="100%"></P>

<CENTER><P><A HREF="ch10.htm"><IMG SRC="http://docs.rinet.ru/JavDev/pc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A><A HREF="#CONTENTS"><IMG SRC="http://docs.rinet.ru/JavDev/cc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A><A HREF="index.htm"><IMG SRC="http://docs.rinet.ru/JavDev/hb.gif" BORDER=0 HEIGHT=88 WIDTH=140></A><A HREF="ch12.htm"><IMG 
SRC="http://docs.rinet.ru/JavDev/nc.gif" BORDER=0 HEIGHT=88 WIDTH=140></A></P></CENTER>

<P>
<HR WIDTH="100%"></P>

</BODY>
</HTML>
