


















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Being a Descendent of Object</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="override.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="final.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/javaHeader.gif" width=26 height=26 align=bottom border=0 alt="Learning the Java Language | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>More Features of the Java Language</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Being a Descendent of Object
</h2>
<p>
<blockquote>

The
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.lang.Object.html"><code>Object</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.lang.Object.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> class sits at the top of the class hierarchy tree in the
Java platform. Every class in the Java system is a descendent, direct
or indirect, of the <code>Object</code> class.
This class defines the basic state
and behavior that all objects must have, such as the ability to compare
oneself to another object, to convert to a string, to wait on a
condition variable, to notify other objects that a condition variable
has changed, and to return the class of the object.
<p>
Your classes may want to override the following <code>Object</code> methods.
The <code>equals</code>/<code>hashCode</code> are listed together as
they must be overridden together.
<ul>
<li>
<code>clone</code>
<li>
<code>equals</code>/<code>hashCode</code>
<li>
<code>finalize</code>
<li>
<code>toString</code>
</ul>

Your class cannot override these <code>Object</code> methods (they are final):
<ul>
<li>
<code>getClass</code>
<li>
<code>notify</code>
<li>
<code>notifyAll</code>
<li>
<code>wait</code>
</ul>

<h4>The <code>clone</code> Method</h4>
<blockquote>
You use the <code>clone</code> method to create objects
from other objects of the same type.
By default, objects are not cloneable, so <code>Object</code>'s
implementation of this method
throws a <code>CloneNotSupportedException</code>.
If you want your class to be cloneable, you must implement the
<code>Cloneable</code> interface and override this method.
<p>
Your version of the <code>clone</code> method must provide for a
field-by-field copy of the object being cloned. Here's a partial
listing of a new version of the <code>Stack</code> class that
implements the <code>Cloneable</code> interface and overrides the
<code>clone</code> method (changes are indicated with a change in font):
<blockquote>
<pre>
public class Stack <em>implements Cloneable</em>
{
    private Vector items;

    // <em>code for Stack's methods and constructor not shown</em>

    <em>protected Object Clone() {
        try {
            Stack s = (Stack)super.clone();
            s.items = (Vector)items.clone();
            return s;
        } catch (CloneNotSupportedException e) {
            // this shouldn't happen because Stack is Cloneable
            throw new InternalError();
        }
    }</em>
}
</pre>
</blockquote>
The implementation for <code>Stack</code>'s <code>clone</code>
method is relatively simple because it can call <code>Object</code>'s
implementation of the <code>clone</code> method.
Also, the only member of <code>Stack</code>, a <code>Vector</code>,
is also cloneable.
Be careful: <code>clone</code> should not use
<code>new</code> to create the clone and should not call constructors.
</blockquote>

<h4>The <code>equals</code> and <code>hashCode</code> Methods</h4>
<blockquote>
You must override the <code>equals</code> and <code>hashCode</code>
methods together.
<p>
The <code>equals</code> method compares two objects for equality
and returns <code>true</code> if they are equal.
The <code>equals</code> method provided in the <code>Object</code>
class uses the identity function to determine if objects are equal
(if the objects compared are the exact same object the method returns
<code>true</code>).
<p>
However, for some classes, two distinct objects of that type might
be considered equal if they contain the same information.
Consider this code that tests two <code>Integer</code>s,
<code>one</code> and <code>anotherOne</code>,
for equality:
<blockquote>
<pre>
Integer one = new Integer(1), anotherOne = new Integer(1);

if (one.equals(anotherOne))
    System.out.println("objects are equal");
</pre>
</blockquote>
This program displays <code>objects are equal</code>
even though <code>one</code> and <code>anotherOne</code> reference
two distinct objects. They are considered equal because
the objects compared contain the same integer value.
<p>
Your classes should only override the <code>equals</code> method
if the identity function is not appropriate for your class.
If you override <code>equals</code>, then override <code>hashCode</code>
as well.
<p>
The value returned by <code>hashCode</code> is an <code>int</code>
that maps an object into a bucket in a hash table.
An object must always produce the same hash code.
However, objects can share hash codes (they aren't necessarily unique).
Writing a "correct" hashing function is easy--always
return the same hash code for the same object.
Writing an "efficient" hashing function, one that
provides a sufficient distribution of objects over the buckets,
is difficult and is out of the scope of the tutorial.
<p>
Even so, the hashing function for some classes is relatively obvious.
For example, an obvious hash code for an <code>Integer</code>
object is its integer value. For an example of a class that
overrides the <code>equals</code> and <code>hashCode</code> methods,
see the
<a href="http://docs.rinet.ru/Jtuta/together/bingo/example-swing/bingo/shared/BingoBall.java">
<code>BingoBall</code></a> class in
<a target="_top" href="..\..\together\bingo\index.html">BINGO!</a><a target="_top" href="..\..\together\bingo\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1_1.gif" width=20 height=20 border=0 alt="(in Putting It Together trail)"></a>.

</blockquote>

<h4>The <code>finalize</code> Method</h4>
<blockquote>
The <code>Object</code> class provides a method,
<code>finalize</code>,
that cleans up an object before it is garbage collected.
This method's role during garbage collection
was discussed previously in
<a href="..\javaoo\garbagecollection.html">
Cleaning Up Unused Objects</a>.
Also,
<a href="..\javaoo\finalize.html">
Writing a <code>finalize</code> Method</a>
showed you how to override the <code>finalize</code>
method to handle the finalization needs for your classes. 
</blockquote>

<h4>The <code>toString</code> Method</h4>
<blockquote>
<code>Object</code>'s <code>toString</code> method
returns a <code>String</code> representation of the object.
You can use <code>toString</code> along with
<code>System.out.println</code> to display
a text representation of an object, such
as the current thread:
<blockquote>
<pre>
System.out.println(Thread.currentThread().toString());
</pre>
</blockquote>
The <code>String</code> representation for an object
depends entirely on the object.
The <code>String</code> representation
of an <code>Integer</code> object
is the integer value displayed as text.
The <code>String</code> representation
of a <code>Thread</code> object contains
various attributes about the thread,
such as its name and priority.
For example, the previous line of code displays the following output:
<blockquote>
<pre>
Thread[main,5,main]
</pre>
</blockquote>
The <code>toString</code> method is very useful for debugging.
It behooves you to override this method in all your classes. 
</blockquote>

<h4>The <code>getClass</code> Method</h4>
<blockquote>
The <code>getClass</code> method is a final method
that returns a runtime representation of the class of this object. This
method returns a <code>Class</code> object.
You can query the <code>Class</code> object for various
information about the class, such as its name, its superclass, and
the names of the interfaces that it implements.
The following method gets
and displays the class name of an object:
<blockquote>
<pre>
void PrintClassName(Object obj) {
    System.out.println("The Object's class is " + obj.getClass().getName());
}
</pre>
</blockquote>
One handy use of the <code>getClass</code> method is to create a new instance
of a class without knowing what the class is at compile time. The following
sample
method creates a new instance of the same class as <code>obj</code>, which
can be any class that inherits from <code>Object</code> (which means that it could
be any class):
<blockquote>
<pre>
Object createNewInstanceOf(Object obj) {
    return obj.getClass().newInstance();
}
</pre>
</blockquote>
<p>
<hr>
<strong>Note</strong>:
You also can get a <code>Class</code> object from a class name using a class
literal. For example, to get the <code>Class</code> object for the
<code>String</code> class use <code>String.class</code>.
This is equivalent to, but more efficient than, calling
<code>Class.forName(String)</code>.
<hr>

</blockquote>


<h4>The <code>notify</code>, <code>notifyAll</code>,
    and <code>wait</code> Methods</h4>
<blockquote>
You cannot override <code>Object</code>'s
<code>notify</code> and <code>notifyAll</code> methods and its three
versions of <code>wait</code>.
This is because they are critical for ensuring that
threads are synchronized.
The use of these methods is covered in
<a target="_top" href="..\..\essential\threads\index.html">Doing Two or More Tasks at Once: Threads</a><a href="..\..\essential\threads\index.html"><img src="http://docs.rinet.ru/Jtuta/images/javaIcon.gif" width=20 height=20 border=0 alt="(in the Learning the Java Language trail)"></a>.
Take particular note of
the section titled
<a target="_top" href="..\..\essential\threads\multithreaded.html">Synchronizing Threads</a><a href="..\..\essential\threads\multithreaded.html"><img src="http://docs.rinet.ru/Jtuta/images/javaIcon.gif" width=20 height=20 border=0 alt="(in the Learning the Java Language trail)"></a>.
</blockquote>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="override.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="final.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/javaHeader.gif" width=26 height=26 align=top border=0 alt="Learning the Java Language | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>More Features of the Java Language</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
