




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Import the Certificate as a Trusted Certificate</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="rstep1.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="rstep3.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/security1_2Header.gif" width=26 height=26 align=bottom border=0 alt="Security in JDK 1.2  | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Signing Code and Granting It Permissions</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Import the Certificate as a Trusted Certificate
</h2>
<p>
<blockquote>

Before you can grant the signed code permission to read a specified
file, you need to import Susan's certificate as a trusted certificate
in your keystore. 

<p>Suppose that you have received
from Susan

<ul>
<li>the signed JAR file <code>sCount.jar</code>, which
contains the <code>Count.class</code> file, and <p>
<li>the file <code>SusanJones.cer</code>, which
contains the public key certificate for the public key corresponding
to the private key used to sign the JAR file.
</ul>

<p>Even though you created these files and they haven't
actually been transported anywhere, you can simulate 
being someone other than the creater and sender, Susan.
Pretend that you are now Ray.
Acting as Ray, you will create a keystore named
<code>raystore</code> and will use it to import the certificate
into an entry with an alias of <code>susan</code>.

<p>A keystore is created whenever you use a <code>keytool</code> 
command specifying a keystore that doesn't yet exist.
Thus we can create the <code>raystore</code> and import the 
certificate via a single <code>keytool</code> command. Do the following
in your command window.

<ol>
<li>Go to the directory containing the 
public key certificate file <code>SusanJones.cer</code>. (You should
actually already be there, since this lesson assumes that you stay
in a single directory throughout.)<p>

<li>Type the following command:

<blockquote>
<pre>
<b>keytool -import -alias susan -file SusanJones.cer -keystore raystore</b>
</pre>
</blockquote>

</ol>

Since the keystore doesn't yet exist, it will be created, and you will
be prompted for a keystore password; type whatever password you want.

<p>The <code>keytool</code> command will print out the certificate information 
and ask you to verify it, for example, by comparing the displayed certificate
fingerprints with those obtained from another (trusted) 
source of information. (Each fingerprint is a relatively short number 
that uniquely and 
reliably identifies the certificate.) For example, in the real world you might
call up Susan and ask her what the fingerprints should be. She can get the
fingerprints of the <code>SusanJones.cer</code> file she created by 
executing the command

<blockquote>
<pre>
<b>keytool -printcert -file SusanJones.cer</b>
</pre>
</blockquote>

If the fingerprints she sees are the same as the ones reported to you by
<code>keytool</code>, the certificate has not been modified
in transit. In that case you let <code>keytool</code> proceed with placing  
a trusted certificate entry in the keystore. 
The entry contains the public key certificate 
data from the file <code>SusanJones.cer</code> and is assigned the alias
<code>susan</code>.


</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="rstep1.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="rstep3.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/security1_2Header.gif" width=26 height=26 align=top border=0 alt="Security in JDK 1.2  | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Signing Code and Granting It Permissions</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
