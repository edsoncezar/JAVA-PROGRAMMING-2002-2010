




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Generate Public and Private Keys</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="step1.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="step3.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/security1_2Header.gif" width=26 height=26 align=bottom border=0 alt="Security in JDK 1.2  | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Generating and Verifying Signatures</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Generate Public and Private Keys
</h2>
<p>
<blockquote>

<p>In order to be able to create a digital signature, you need a private
key. (Its corresponding public key will be needed in order to verify
the authenticity of the signature.) 

<p>In some cases the <i>key pair</i> (private
key and corresponding public key) are already available 
in files. In that case the program can import and use the private key
for signing, as shown in 
<a href = "enhancements.html">Weaknesses and Alternatives</a>. 

<p>In other cases the program needs to generate the key pair.
A key pair is generated by using the <code>KeyPairGenerator</code> class.

<p>In this example you will generate a public/private key pair for the
Digital Signature Algorithm (DSA). You will generate keys
with a 1024-bit length.

<p>Generating a key pair requires several steps:

<p><b>Create a Key Pair Generator</b>

<blockquote>

<P>
The first step is to get a key-pair generator object for generating
keys for the DSA signature algorithm. 

<p>As with all
<a href = "..\summary\glossary.html#Engine">engine classes</a>,
the way to get a
<code>KeyPairGenerator</code> object for a particular type of algorithm
is to call the <code>getInstance</code> static factory method on the
<code>KeyPairGenerator</code> class. This method has two forms,
both of which hava a <code>String algorithm</code> first argument;
one form also has a <code>String provider</code> second argument.

<p>A caller may thus optionally specify the name of a
<a href = "..\summary\glossary.html#Provider">provider</a>,
which will 
guarantee that the implementation of the algorithm requested is from the
named provider. The sample code of this lesson always specifies the
default SUN provider built into the JDK.

<p>Put the following statement after the

<blockquote>
<pre>
    else try {
</pre>
</blockquote>

line in the file created in the previous step, <a href = "step1.html">
Prepare Initial Program Structure</a>:

<blockquote>
<pre>
        KeyPairGenerator keyGen = KeyPairGenerator.getInstance("DSA", "SUN");
</pre>
</blockquote>

</blockquote>

<p><b>Initialize the Key-Pair Generator</b>

<blockquote>

<p>The next step is to initialize the key-pair generator. 
All key-pair generators share the concepts of a keysize and a
source of randomness. The <code>KeyPairGenerator</code> class has an
<code>initialize</code> method that takes these two types of arguments. 

<p>The keysize  for a DSA key generator is the key length (in bits), which
you will set to 1024.

<p>The source of randomness must be an instance of the <code>SecureRandom</code>
class. This example requests one that uses the SHA1PRNG 
pseudo-random-number generation algorithm, as provided by
the built-in SUN provider. The example then passes this <code>SecureRandom</code>
instance to the key-pair generator initialization method.

<blockquote>
<pre>
        SecureRandom random = SecureRandom.getInstance("SHA1PRNG", "SUN");
        keyGen.initialize(1024, random);
</pre>
</blockquote>

<p>Note: The <code>SecureRandom</code> implementation attempts to completely randomize 
the internal state of the generator itself unless the caller follows the call to the 
<code>getInstance</code> method with a call to the <code>setSeed</code>
method. So if you had a specific seed value that you wanted used, you would
call the following prior to the <code>initialize</code> call:

<blockquote>
<pre>
        random.setSeed(seed);
</pre>
</blockquote>


</blockquote>



<p><b>Generate the Pair of Keys</b>

<blockquote>

The final step is to generate the key pair and to store the
keys in <code>PrivateKey</code> and <code>PublicKey</code> objects.

<blockquote>
<pre>
        KeyPair pair = keyGen.generateKeyPair();
        PrivateKey priv = pair.getPrivate();
        PublicKey pub = pair.getPublic();
</pre>
</blockquote>

<P>


</blockquote>


</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="step1.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="step3.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/security1_2Header.gif" width=26 height=26 align=top border=0 alt="Security in JDK 1.2  | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Generating and Verifying Signatures</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
