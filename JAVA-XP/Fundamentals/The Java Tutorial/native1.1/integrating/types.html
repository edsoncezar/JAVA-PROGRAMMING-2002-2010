



















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Mapping between Java and Native Types</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="declare.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="..\implementing\index.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/nativeHeader.gif" width=26 height=26 align=bottom border=0 alt="Java Native Interface | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Integrating Java and Native Programs</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Mapping between Java and Native Types
</h2>
<p>
<blockquote>


In this section, you will learn how to reference Java types in your
native method. You need to do this when you want to:
<ul>
<li>Access arguments
passed in to a native method from a Java application.</li>
<li> Create Java objects in your native method.</li>
<li> Have your native method return results to
the caller.</li>
</ul>

<h4>Java Primitive Types</h4>

<p> Your native method can directly access Java <strong>primitive</strong>
types such as booleans, integers, floats, and so on, that are passed
from programs written in Java. For example, the Java type <code>boolean</code> maps to the
native language type <code>jboolean</code> (represented as unsigned 8 bits), while the Java type <code>float</code> maps to the native language type <code>jfloat</code> (represented by 32
bits). The following table describes the mapping of Java primitive
types to native types.

<blockquote>
<h5>Primitive Types and Native Equivalents</h5>
<table border=1>
  <tr>
     <td>Java Type<td>  Native Type<td>Size in bits</td> 
  </tr>
     <td><code>boolean</code><td>  <code>jboolean</code><td>8, unsigned</td> 
  </tr>
     <td><code>byte</code><td>  <code>jbyte</code><td>8</td> 
  </tr>
     <td><code>char</code><td>  <code>jchar</code><td>16, unsigned</td> 
  </tr>
     <td><code>short</code><td>  <code>jshort</code><td>16</td> 
  </tr>
     <td><code>int</code><td>  <code>jint</code><td>32</td> 
  </tr>
     <td><code>long</code><td> <code>jlong</code><td>64</td> 
  </tr>
     <td><code>float</code><td>  <code>jfloat</code><td>32</td> 
  </tr>
     <td><code>double</code><td>  <code>jdouble</code><td>64</td> 
  </tr>
     <td><code>void</code><td>  <code>void</code><td>n/a</td> 
  </tr>
</table>
</blockquote>

<h4>Java Object Types</h4>

<p>
Java objects are passed by reference. All references to Java objects have the 
type <code>jobject</code>. For convenience and to avoid programming errors, the JNI implements a set of types that are conceptually all subclassed from (or are "subtypes" of) <code>jobject</code>, as follows:


<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/native1.1/native5.gif" WIDTH="626" HEIGHT="270" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>

<p>In our <code>Prompt.java</code> example, the native method
<code>getLine</code> takes a Java string as an argument and returns a Java string:
<blockquote>
<pre>
private native String getLine(String prompt);
</pre>
</blockquote>

 Its
corresponding native implementation has type <code>jstring</code> for both the argument and the return value:

<blockquote>
<pre>
JNIEXPORT jstring JNICALL Java_Prompt_getLine(JNIEnv *, jobject, jstring);
</pre>
</blockquote>

<p>
Graphically, this looks as follows:

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/native1.1/getLine.gif" WIDTH="586" HEIGHT="82" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
As mentioned above, <code>jstring</code> corresponds to the Java type
<code>String</code>. Notice that the second argument to <code>Java_Prompt_getLine</code>, which is the reference to the object
itself, has type <code>jobject</code>.

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="declare.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="..\implementing\index.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/nativeHeader.gif" width=26 height=26 align=top border=0 alt="Java Native Interface | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Integrating Java and Native Programs</em></strong></a>
</td>
</tr>
</table>
</body>
</html>


