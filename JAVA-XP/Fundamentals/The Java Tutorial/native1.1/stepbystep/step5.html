


















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Step 5: Create a Shared Library</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="step4.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="step6.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/nativeHeader.gif" width=26 height=26 align=bottom border=0 alt="Java Native Interface | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Compiling and Running a Java Program with a Native Method</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Step 5: Create a Shared Library
</h2>
<p>
<blockquote>

Remember in <a href=step1.html>Step 1: Write the Java Code</a> you
used the following method call to load a shared library named
<code>hello</code> into your program at runtime:

<blockquote>
<pre>
System.loadLibrary("hello");
</pre>
</blockquote>

Now you are ready to create this shared library.

<p> In the previous step, <a href="step4.html"> Step 4: Write the
Native Method Implementation</a>, you created a C file in which you wrote the implementation for the <code>displayHelloWorld</code>
native method.  You saved the native method in the file <code>HelloWorldImp.c</code>. Now, you
must compile <code>HelloWorldImp.c</code> into a shared library, which you name <code>hello</code> to
match the library name used in the <code>System.loadLibrary</code>
method.

<!-- appendix: put the text from _library.html link in the appendix -->
<p> Compile the native language code
that you created in the previous two steps into a shared library.  On
Solaris, you'll create a shared library, while on Windows 95/NT you'll
create a dynamic link library (DLL).  Remember to specify the path or
paths to all necessary header files. See <a href=_library.html>Creating and Loading Shared Libraries</a> for information on forming a shared library name.

<p> On Solaris, the following command builds a shared library
<code>libhello.so</code>:

<blockquote>
<pre>
cc -G -I/usr/local/java/include -I/usr/local/java/include/solaris \
      HelloWorldImp.c -o libhello.so
</pre>
</blockquote>

<p>
On Win32, the following command builds a dynamic link library 
<code>hello.dll</code> using Microsoft Visual C++ 4.0:

<blockquote>
<pre>
cl -Ic:\java\include -Ic:\java\include\win32 -LD HelloWorldImp.c -Fehello.dll
</pre>
</blockquote>

Of course, you need to specify the <code>include</code> path that
corresponds to the setup on your own machine.
<p>

<!-- appendix: the next reference to _library.html link is the same text that
     went into the appendix from above. -->
For more information on the system-dependent mechanisms for loading a shared library, see <a href=_library.html>Creating and Loading Shared Libraries</a>. 

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="step4.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="step6.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/nativeHeader.gif" width=26 height=26 align=top border=0 alt="Java Native Interface | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Compiling and Running a Java Program with a Native Method</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
