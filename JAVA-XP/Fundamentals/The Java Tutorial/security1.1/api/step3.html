


















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Step 3: Sign the Data</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="step2.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="step4.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1_1.gif" width=26 height=26 align=bottom border=0 alt="Security in JDK 1.1 | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Using the Security API to Generate and Verify a Signature</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Step 3: Sign the Data
</h2>
<p>
<blockquote>

<p>After we have created a public and private key, we are ready
to sign the data.

<p>In this example we will sign the data contained in a file.
We get the file name from the command line.

<p>A digital signature is created (or verified) using an instance of 
the Signature class.

<p>Signing data is done with the following steps:

<p><b>Get a Signature Object</b>:

<blockquote>

The following gets a Signature object for generating (or verifying)
signatures using the DSA algorithm. Note that this is the same
algorithm for which we generated keys in the previous step,
<a href = "step2.html">Step 2</a>.

<pre>
            Signature dsa = Signature.getInstance("SHA/DSA"); 
</pre>

<p>Note: When specifying the signature algorithm name,
you should also include the name of the message digest algorithm used
by the signature algorithm. The DSA algorithm is defined to use the
SHA-1 message digest algorithm. "SHA" is often used to refer to the
SHA-1 algorithm.

</blockquote>


<p><b>Initialize the Signature Object</b>

<blockquote>

<P>Before a Signature object can be used for signing (or
verifying), it must be initialized. The initialization
method for signing requires a private key.
We extract and use the private key from the key pair 
generated in the previous step:

<pre>
            PrivateKey priv = pair.getPrivate();

            dsa.initSign(priv);
</pre>

</blockquote>


<p><b>Supply the Signature Object the Data to be Signed</b>

<blockquote>

Our example will use the data from the file whose name is
specified as the first (and only) command-line argument.
We will read in the data a byte at a time, and supply it to
the Signature object by calling the <code>update</code> method:

<pre>
            FileInputStream fis = new FileInputStream(args[0]);
            byte b;
            while (fis.available() != 0) {
                b = (byte) fis.read();
                dsa.update(b);
                };

            fis.close();
</pre>

</blockquote>


<p><b>Generate the Signature</b>

<blockquote>

<p>Once we have supplied all the data to the Signature object,
we can generate the digital signature of that data:

<pre>
            byte[] sig = dsa.sign();
</pre>



</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="step2.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="step4.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1_1.gif" width=26 height=26 align=top border=0 alt="Security in JDK 1.1 | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Using the Security API to Generate and Verify a Signature</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
