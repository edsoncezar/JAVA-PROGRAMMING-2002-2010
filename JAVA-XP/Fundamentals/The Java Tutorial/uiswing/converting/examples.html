




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Some Conversion Examples</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="tips.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="problems.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Converting to Swing</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Some Conversion Examples
</h2>
<p>
<blockquote>

This section provides the AWT and Swing versions of
several example programs and talks about the interesting
aspects of the conversion.

<ul>
<li> <a href="#buttondemo">ButtonDemoApplet</a>--An
     applet that uses three buttons.
<li> <a href="#animator">AnimatorApplication</a>--An
     application that performs a simple animation.
<li> <a href="#texteventdemo">TextEventDemo</a>--An
     applet that illustrates using listeners on text components.
<li> <a href="#converter">Converter</a>--An application
     that converts distance measurements between U.S. and metric.
</ul>

The discussions don't analyze the conversions line-by-line.
However, you can see the differences
between the AWT and Swing versions of each program,
by using a program such as UNIX's <code>diff</code>
utility to compare both versions of the source code.

<a name="buttondemo">
<h4>Converting ButtonDemoApplet</h4>
</a>
<blockquote>
The first AWT to Swing conversion example we'll look at
is a simple applet that contains three buttons.
Here are two snapshots. The first shows the
AWT version of the applet running. The second
shows the Swing version.

<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/converting/13ui11.gif" WIDTH="390" HEIGHT="36" ALT=""><p>
<strong>AWT Version</strong>
</center>

<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/converting/SwingButtonDemo.gif" WIDTH="563" HEIGHT="65" ALT="">
<p>
<strong>Swing Version</strong>
</center>
<p>

You'll notice that the programs look a little different.
<ol>
<li> The buttons have a different border.
<li> The applets use different fonts for the text.
<li> The buttons in the Swing applet have icons as well as text.
<li> The buttons in the Swing applet show the button's mnemonic.
<li> The Swing applet is bigger.
</ol>
<p>
The first two differences exist simply because
the AWT and
the Java Look & Feel used by the Swing program
draw buttons differently and
have different default fonts.
The Java Look & Feel is
the look and feel that Swing programs use
unless either the user specifies a different one
or you explicitly set the look and feel
in your program's code.
<p>
Differences 3 and 4 are because 
we chose to take advantage of
two Swing button features
not supported by AWT buttons:
images and mnemonics.
<p>
The final difference is a side effect
of the previous four differences.
If you program is an applet,
remember to modify the &lt;APPLET&gt; tag
to adjust for any size changes in your program.
<p>
Although the programs look somewhat different
they behave the same.
When you click the left button,
it disables the middle button and itself,
and enables the right button.
When you click the right button,
it disables itself,
and enables the middle and left buttons.

<p>
The following table links
to the complete source code
and an HTML file containing a
sample &lt;APPLET&gt; tag
for each version of the program.
Compare the code and the
&lt;APPLET&gt; tags to see the
differences between the two programs.
<p>
[PENDING: Acknowledge EMBED and OBJECT tags,
which you create for Plug-in using
the converter the Plug-in team provides.]
<p>
<table border=1 cellpadding=5>
<tr>
<th> &nbsp; </th>
<th> Source Code</th>
<th> &lt;APPLET&gt; Tag <a href="#footnote">*</a> </th>
</tr>
<tr>
<th> AWT </th>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-1dot1/ButtonDemoApplet.java">
     <code>ButtonDemoApplet.java</code></a></td>
<td> <a href="example-1dot1\buttondemoapplet.html">
     <code>ButtonDemoApplet.html</code></a></td>
</tr>
<tr>
<th> Swing</td>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/ButtonDemoApplet.java">
     <code>ButtonDemoApplet.java</code></a><br>
     <a href="example-swing\images\left.gif">
     <code>left.gif</code></a><br>
     <a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/images/middle.gif">
     <code>middle.gif</code></a><br>
     <a href="example-swing\images\right.gif">
     <code>right.gif</code></a>
</td>
<td> <a href="example-swing\buttondemoapplet.html">
     <code>ButtonDemoApplet.html</code></a></td>
</tr>
</table>
<font size=-1>
<a name="footnote">
* Note that if your browser isn't configured
to run 1.1 or Swing programs,
visiting the <code>.html</code> files listed in the table
will produce errors. We provide the files
so that you can look at the applet tags.
Use shift-click to download the files.
</a>
</font>
</blockquote>

<a name="animator">
<h4>Converting AnimatorApplication</h4>
</a>
<blockquote>
<code>AnimatorApplication</code> is a template for animation programs.
This particular implementation "animates" a string
by changing the string periodically.
The program can be easily modified to animate images
in the same manner.
<p>
This section discusses two different solutions to
converting the animator program.
The first solution takes a minimalistic approach--the
code is changed only as necessary to get the program
to run with Swing.
The second solution is more complete--it changes
the code to adjust for differences in the way the AWT
and Swing programs paint and to take advantage of
a new class in Swing.
<p>
The AWT <code>AnimatorApplication</code> class
extends <code>Frame</code>.
The frame's
<code>paint</code> method
uses <code>drawString</code>
to paint a string in the frame.
A thread periodically wakes up,
changes the string to the next value,
and repaints the frame.
<p>
Both Swing versions
of the <code>AnimatorApplication</code> class
extend <code>JFrame</code>.
<p>
The minimalist version of the program
paints the same way the AWT version paints--by
calling the <code>drawString</code> method.
However in Swing
the painting code belongs in a method named <code>paintComponent</code>.
Furthermore, because a <code>JFrame</code> has a content pane,
the painting done in its <code>paintComponent</code> method has
no effect (the content pane just paints right over it).
So the painting code had to be moved out of the <code>JFrame</code>.
Instead, the program
defines a <code>JPanel</code> subclass,
<code>AnimappPanel</code>,
to do the painting,
and uses an instance of <code>AnimappPanel</code>
as the <code>JFrame</code>'s content pane.
<p>
The second solution is a more complete Swing solution.
Instead of creating a <code>JPanel</code> subclass to
draw a string,
this solution uses a <code>JLabel</code>,
which is specially tuned 
[PENDING: is "tuned" the right word to use?]
for painting strings.
Additionally,
the second solution uses
Swing's <code>Timer</code> class
instead of using a <code>Thread</code>
that sleeps periodically.

<p>
Here are the three different versions to compare:
<p>
<table border=1 cellpadding=5>
<tr>
<th> &nbsp; </th>
<th> Source Code</th>
</tr>
<tr>
<th> AWT </th>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-1dot1/AnimatorApplication.java">
     <code>AnimatorApplication.java</code></a></td>
</tr>
<tr>
<th> Minimalist Swing Solution</td>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/AnimatorApplication.java">
     <code>AnimatorApplication.java</code></a><br>
</td>
</tr>
<tr>
<th> Complete Swing Solution</td>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/AnimatorApplicationTimer.java">
     <code>AnimatorApplicationTimer.java</code></a><br>
</td>
</tr>
</table>

</blockquote>

<a name="texteventdemo">
<h4>Converting TextEventDemo</h4>
<blockquote>
Here's a snapshot of the Swing version
of the <code>TextEventDemo</code> applet.
The AWT version looks similar.

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/converting/SwingTextEventDemo.gif" WIDTH="511" HEIGHT="381" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
This program has a text field and a text area on the left,
both of which are editable.
The program listens for changes to the text
on the text field and the text area and
logs changes in the uneditable text area on the right.
<p>
AWT text areas supported scrolling directly.
Swing text areas don't. So, the Swing version
of this example creates a <code>JScrollPane</code>
for each text area.
The program uses a <code>GridBagLayout</code> to
position the components.
During the first pass of the conversion,
we forgot to change the <code>setConstraints</code>
call to set the constraints on the scroll pane instead
of the text area and ended up with a tiny little scroll pane.
<p>
The AWT version of this program registers a text listener
with <code>addTextListener</code>
to listen for changes on the text components.
The text listener implements a single method called
<code>textValueChanged</code>.
<p>
Swing text components do not have an <code>addTextListener</code>
method. Instead, the Swing version of this program
has to register a document listener on each text component's
document. A document listener implements three methods:
<code>insertUpdate</code>, <code>removeUpdate</code>,
and <code>changedUpdate</code>.
Allowing a program to listen
for specific types of changes.
<p>
Finally, the AWT version of the program
had to explicitly force the change log (the text area
on the right) to scroll
down to display the text that was added to
the bottom of the text area.
This code could be removed in the Swing
version because Swing text areas in scroll panes
handle this automatically.
<p>
Here's the code and &lt;APPLET&gt; tags to compare:
<p>
<table border=1 cellpadding=5>
<tr>
<th> &nbsp; </th>
<th> Source Code</th>
<th> &lt;APPLET&gt; Tag <a href="#footnote2">*</a> </th>
</tr>
<tr>
<th> AWT </th>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-1dot1/TextEventDemo.java">
     <code>TextEventDemo.java</code></a></td>
<td> <a href="example-1dot1\texteventdemo.html">
     <code>TextEventDemo.html</code></a></td>
</tr>
<tr>
<th> Swing</td>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/TextEventDemo.java">
     <code>TextEventDemo.java</code></a></td>
<td> <a href="example-swing\texteventdemo.html">
     <code>TextEventDemo.html</code></a></td>
</tr>
</table>
<font size=-1>
<a name="footnote2">
* Note that if your browser isn't configured
to run 1.1 or Swing programs,
visiting the <code>.html</code> files listed in the table
will produce errors. We provide the files
so that you can look at the applet tags.
Use shift-click to download the files.
</a>
</font>


</blockquote>

<a name="converter">
<h4>Converting Converter</h4>
</a>
<blockquote>
The <code>Converter</code> is an application that 
converts distance measurements between metric and U.S. units.
Here are snapshots of the AWT 
and Swing versions of the program:
<p>

<table>
<tr>
<th>AWT Converter</th>
<th>Swing Converter</th>
</tr>

<tr>
<td>
<IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/converting/AWTConverter.gif" WIDTH="274" HEIGHT="159" ALT="AWT Converter">
</td>
<td>

<IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/converting/Converter.gif" WIDTH="307" HEIGHT="178" ALT="Swing Converter"></td>
</tr>
</table>
<p>

Here's the source code for both versions:
<p>
<table border=1 cellpadding=5>
<tr>
<th> AWT Converter Source</th>
<th> Swing Converter Source</th>
</tr>
<tr>
<td> 
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-1dot1/Converter.java"><code>Converter.java</code></a><br>
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-1dot1/ConversionPanel.java"><code>ConversionPanel.java</code></a><br>
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-1dot1/Unit.java"><code>Unit.java</code></a>
</td>
<td>
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/Converter.java"><code>Converter.java</code></a><br>
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/ConversionPanel.java"><code>ConversionPanel.java</code></a><br>
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/Unit.java"><code>Unit.java</code></a><br>
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/ConverterRangeModel.java"><code>ConverterRangeModel.java</code></a><br>
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/FollowerRangeModel.java"><code>FollowerRangeModel.java</code></a><br>
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/DecimalField.java"><code>DecimalField.java</code></a><br>
<a href="http://docs.rinet.ru/Jtuta/uiswing/converting/example-swing/FormattedDocument.java"><code>FormattedDocument.java</code></a>
 </td>
</tr>

</table>

<P>
The <code>main</code> method for both versions is in the
<code>Converter</code> class.
Both versions use two instances of
<code>ConversionPanel</code>--one
for the metric system controls
and one for the U.S. system controls.
The <code>Converter</code> program keeps
several instances of <code>Unit</code>, each
of which contains a multiplier for a particular conversion.
<p>
The Swing version of the program has four additional classes.
These provide custom data models for the text fields and the sliders.

<p>
<a target="_top" href="..\overview\anatomy.html">The Anatomy of a Swing-Based program</a><a target="_top" href="..\overview\anatomy.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a> dissects the Swing version of the <code>Converter</code> program.
Read that section to familiarize yourself with the
program before proceding.

<p>
The Swing version of this program takes advantage of
the Swing API and improves upon the AWT version in these ways:

<ul>
<li> Draws a line border around and provides a text label for
     each <code>ConversionPanel</code> with a Swing compound border.
     In the AWT version, the <code>ConversionPanel</code> has to
     draw its own line border and uses an AWT <code>Label</code>
     for the panel's label.
     
<li> Uses a custom document for the text fields that ensures
     that the user enters only valid data.
     In the AWT version, the user can enter invalid data,
     such as characters, into the text fields.

<li> Provides a custom data model to contain the current value.
     This ensures that the current value for the program
     is kept in only one place.

<li> Uses Swing's <code>BoxLayout</code> class to layout
     the components within each <code>ConversionPanel</code>.
     [PENDING: why is this better?]

<li> [PENDING: more?]
</ul>

</blockquote>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="tips.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="problems.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Converting to Swing</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
