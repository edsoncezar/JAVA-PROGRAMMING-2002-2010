




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>How Do I Convert My Programs to Swing?</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="why.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="resources.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Converting to Swing</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    How Do I Convert My Programs to Swing?
</h2>
<p>
<blockquote>

The primary focus when converting a 1.1 AWT-based program
to Swing is to modify the program to use Swing components
instead of AWT components.
This page outlines the steps for doing this.
Each step applies to all programs--applications and
applets--unless specifically noted otherwise.

<h4>Step 1: Save a copy of the AWT-based program.</h4>
<blockquote>
You will need to copy all of the programs files,
including the <code>.java</code> files
and the <code>.class</code> files.
You will need this copy for several reasons:

<ul>
<li> Any users who can't run Swing programs will need to run the
     old AWT-based program.
<li> You'll need to refer to the source during the conversion process.
<li> After conversion, you should run both versions of your program
     side by side to compare them.
<li> After conversion, you can compare the source code of both versions
     to apply what you learned to other programs you need to convert.
</ul>

</blockquote>

<a name="step2">
<h4>Step 2: Remove any <code>java.awt</code> import statements.</h4>
</a>
<blockquote>
This step puts the compiler to work for you.
It's handy to remove all of the AWT imports
even if your program still uses some of the AWT
classes--like its layout managers--because,
without the AWT imports,
the compiler generates a "not found" error for
each AWT component used by your program and
the line number where it's used.
This helps to locate each
AWT component used by your program so that
you can replace it with its Swing equivalent.
In <a href="#step9">Step 9</a>,
you will add back in
the imports for the AWT classes that you really need.
</blockquote>

<h4>Step 3: If your program is an applet, 
     remove any <code>java.applet</code> import statements.</h4>
<blockquote>
You don't need the old <code>Applet</code> class or
the old <code>java.applet</code> package
because your Swing applet will be a subclass
of Swing's <code>JApplet</code> class.
So remove whichever of these import statements
is in your program:
<blockquote>
<pre>
import <code>java.applet.Applet</code>;
    <em>or</em>
import <code>java.applet.*</code>;
</pre>
</blockquote>
</blockquote>

<h4>Step 4: Import the main Swing package.</h4>
<blockquote>
Add the following import statement to your program.
<blockquote>
<pre>
import <code>javax.swing.*</code>;
</pre>
</blockquote>
This imports all of the Swing components
plus some of Swing's other classes.
If you want, you can be more meticulous and add one
import statement per Swing class you use.
</blockquote>

<h4>Step 5: Be aware of thread-safety issues!</h4>
<blockquote>
Before you go further,
remind yourself of this important fact:
<em>Although AWT is thread-safe, Swing is not.</em>
You must take this into consideration when
converting your programs.
<p>
Most programs modify components in
event handling methods and painting methods,
which are called from the event-dispatching thread.
Modifying a component in those methods is safe
because the event-dispatching thread
is guaranteed to be thread-safe.
[PENDING: check wording of previous sentence]
If your program modifies a component anywhere
else, you must take explicit action to make
it thread-safe.
<p>
This tutorial contains two sections about Swing and threads.
First,
<a target="_top" href="..\overview\threads.html">Threads and Swing</a><a target="_top" href="..\overview\threads.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a> provides conceptual coverage.
Next,
<a target="_top" href="..\misc\threads.html">How to Use Threads</a><a target="_top" href="..\misc\threads.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a> contains practical information and examples.
</blockquote>

<h4>Step 6: Change each AWT component to its
     closest Swing equivalent.</h4>
<blockquote>
The table provided in our resources section,
<a href="table.html">Swing Replacements for AWT Components</a>,
lists each AWT component
and its closest Swing equivalent.
Use it as a guide for choosing a replacement
for each AWT component used in your program.
<p>
In the best case,
the AWT component and its Swing replacement are source-compatible
and a simple name change is all that's required.
For example,
to convert from an AWT button to a Swing button,
you just change all occurrences of
<code>Button</code> to <code>JButton</code> in your program.
Here's a short example of an AWT code snippet and its
Swing equivalent to illustrate.
The underlined code shows the differences between the two programs.
<p>
<table border=1 cellpadding=5>
<tr>
<th>AWT Code</th><th>Swing Code</th>
</tr>
<tr>
<td>
<pre>
<u>Button</u> button = new <u>Button</u>("A Button");
button.addActionListener(this);
</pre>
</td>
<td>
<pre>
<u>JButton</u> button = new <u>JButton</u>("A Button");
button.addActionListener(this);
</pre>
</td>
</tr>
</table>
<p>
You'll be happy to learn that a large number of
Swing components are source-compatible with their
AWT counterparts.
You can refer to the javadoc for each Swing component class
to find out if it is source-compatible with its
AWT counterpart and to what degree.
<p>
Conversely,
some Swing components are not source-compatible with
the AWT component they replace.
So, for some AWT components,
you have to re-write some code
when replacing it with a Swing component.
Furthermore, you might choose to make unrequired changes
to take advantage of Swing features.
For example, you might want to add an image to your button,
or you might want to support accessibility by calling the
<code>setLabelFor</code> method on labels associated
with other components.
<a href="resources.html">Conversion Resources</a>
has information to help you with conversions
that require more than a simple name change and
optional conversions.
</blockquote>

<h4>Step 7: Investigate Swing's other components.</h4>
<blockquote>
You might be able to 
improve your UI by using features available only in Swing components
(such as images on buttons)
or by using Swing's more sophisticated
components not available in the AWT.
You might also be able to replace a component you wrote yourself
with a standard Swing component or a customized Swing component.
Components completely new to Swing
include <a href="..\components\table.html">tables</a>,
<a href="..\components\tree.html">trees</a>,
<a href="..\components\colorchooser.html">color choosers</a>,
and so on.
</blockquote>

<a name="step8">
<h4>Step 8: Change calls to the <code>add</code> 
    and <code>setLayout</code> methods.</h4>
</a>
<blockquote>
AWT programs add components directly to
and set the layout manager directly on
a top-level container (a frame, dialog, or applet).
In contrast, Swing programs add components to
and set the layout manager on
the top-level container's <em>content pane</em>.
The first row of the following table
shows some typical AWT code for adding components
to a frame and setting its layout manager.
The second and third rows show two different
Swing conversions.
<p>
<table border=1 cellpadding=5>
<tr>
<th>AWT code</th>
<td>
<pre>
frame.setLayout(new FlowLayout());
frame.add(button);
frame.add(label);
frame.add(textField);</pre>
</td>
</tr>
<tr>
<th>Obvious Swing Conversion<br>
    <em>(don't do this)</em>
</th>
<td>
<pre>
frame.<u>getContentpane().</u>setLayout(new FlowLayout());
frame.<u>getContentPane().</u>add(button);
frame.<u>getContentPane().</u>add(label);
frame.<u>getContentPane().</u>add(textField);</pre>
</td>
</tr>
<tr>
<th>Efficient Swing Conversion<br>
    <em>(do this instead)</em>
</th>
<td>
<pre>
<u>Container contentPane = frame.getContentPane();</u>
<u>contentPane</u>.setLayout(new FlowLayout());
<u>contentPane</u>.add(button);
<u>contentPane</u>.add(label);
<u>contentPane</u>.add(textField);</pre>
</td>
</tr>
</table>

<p>
You'll note that the Swing code
in the second row
calls <code>getContentPane</code> multiple times,
which is inefficient
if your program uses a lot of components.
The Swing code in the third row
improves the code,
by getting the content pane once,
caching it in a variable,
and using the variable to
add components to it and
set the layout manager.

</blockquote>

<a name="step9">
<h4>Step 9: Use the compiler to flesh out any more needed changes.</h4>
</a>
<blockquote>
After you've modified the source code as indicated
in the prevous steps,
use the compiler to <em>try</em> to compile your program.
<blockquote>
<pre>
javac MyClass.java
</pre>
</blockquote>
During this step,
you are basically getting the compiler to help you
identify any conversions you might have overlooked.
Don't expect your program to compile the first
time and do expect several iterations!
<p>
The compiler can help you:
<ul>
<li> Find each AWT component that you forgot
     to convert to its Swing equivalent.
     If you removed all of the <code>java.awt</code> import
     statements from your program as suggested in
     <a href="#step2">step 2</a>, the compiler will
     display an error message like this for each
     AWT component remaining in your program.
<blockquote>
<pre>
TextEventDemo.java:23: Class Button not found in type declaration.
	Button button = new Button("Clear");
	^
</pre>
</blockquote>

<li> Identify which AWT classes your program still needs.
     If you removed all of the <code>java.awt</code> import
     statements from your program as suggested in
     <a href="#step2">step 2</a>, the compiler will
     display an error message like this for
     AWT classes you still need.
  
<blockquote>
<pre>
TextEventDemo.java:17: Class BorderLayout not found in type declaration.
	BorderLayout layout = new BorderLayout();
	^
</pre>
</blockquote>
     The AWT classes you might still need in a Swing program
     are layout managers, <code>Color</code>,
     <code>Dimension</code>, <code>Point</code>,
     <code>Insets</code>, and so on.
     Add one import statement per AWT class.
     Or, if you're sure that you've replaced all the AWT components
     with Swing components, import the entire
     <code>java.awt</code> AWT package again.
<p>

<li> Locate any source-incompatibilities between the
     AWT component and its Swing replacement.
     These typically show up as compiler errors about undefined methods.
     For example, although AWT text components have an
     <code>addTextListener</code> method,
     Swing text components don't.
     The compiler generates an error message like the following one
     indicating that <code>JTextField</code> doesn't have such a method.
<blockquote>
<pre>
TextEventDemo.java:22: Method addTextListener(TextEventDemo. MyTextListener) not found in class javax.swing.JTextField.
	textField.addTextListener(new MyTextListener("Text Field"));
	                         ^
</pre>
</blockquote>
  
<li> Remove uses of deprecated API.
     Use the compiler's <code>-deprecation</code> flag
     to get details about any deprecated classes or methods
     used by your program and the line numbers where they are used.

<blockquote>
<pre>
javac -deprecation MyClass.java
</pre>
</blockquote>

      Refer to the javadoc for the deprecated class or method
      for information about what classes or methods to use instead.
</ul>

Fix all problems reported by the compiler
until the program compiles.
</blockquote>

<h4>Step 10: Run the Swing program.</h4>
<blockquote>
Use the interpreter or the Applet Viewer to run your program:
<blockquote>
<pre>
java MyClass      <em>or</em>     appletviewer MyApplet.html
</pre>
</blockquote>
<p>
If you forgot to modify any
calls to <code>add</code> or <code>setLayout</code>,
you will discover that during this step.
If you did, the runtime system displays a message like this one
(the error message for <code>setLayout</code> is similar):
<blockquote>
<pre>
java.lang.Error: Do not use MultiListener.add() use MultiListener.getContentPane().add() instead
	at javax.swing.JApplet.createRootPaneException(Compiled Code)
	at javax.swing.JApplet.addImpl(Compiled Code)
	at java.awt.Container.add(Compiled Code)
	at MultiListener.init(Compiled Code)
	at sun.applet.AppletPanel.run(Compiled Code)
	at java.lang.Thread.run(Compiled Code)
</pre>
</blockquote>
Go back to the source,
search for <code>add</code> or <code>setLayout</code>,
fix the problem, then compile and run again.

<p>
If you program is an applet, consider how your users
will run it. Refer to
<a href="tips.html#applet">Converting Applets</a>.
</blockquote>

<h4>Step 11: Compare the Swing Version to the AWT version.</h4>
<blockquote>
Although you probably want the programs to be similar,
be open to improvements offered by Swing and
any differences inherent in the two GUIs.
<p>
[PENDING: add something about choosing the L&F? Anything else?]
</blockquote>

<h4>Step 12: Clean up!</h4>
<blockquote>
Now is the time to clean up your code.
If you hacked any code together to get around some of AWT's
deficiencies or bugs, clean it up now!
</blockquote>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="why.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="resources.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Converting to Swing</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
