




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Working with Text</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="drawingshapes.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="usingimages.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Working with Text
</h2>
<p>
<blockquote>

Support for working with primitive text is spread between the AWT
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Graphics.html"><code>Graphics</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Graphics.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>, 
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Font.html"><code>Font</code>,</a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Font.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>, and 
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.FontMetrics.html"><code>FontMetrics</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.FontMetrics.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> classes.
Of course, 
you can save yourself a lot of trouble
by using a text-drawing component instead --
a 
<a target="_top" href="..\components\label.html">label</a><a target="_top" href="..\components\label.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a> or
<a target="_top" href="..\components\text.html">text component</a><a target="_top" href="..\components\text.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a>, for instance.

<p>

<blockquote>
<hr>
<strong>Java<sup><font size=-2>TM</font></sup> 2 Note:</strong>
If you are using Java 2 (JDK<sup><font size=-2>TM</font></sup> 1.2),
you can use the full-featured text support in
the Java<sup><font size=-2>TM</font></sup> 2D API.
See the
<a target="_top" href="..\..\2d\index.html">Text</a><a href="..\..\2d\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1-2.gif" width=20 height=20 border=0 alt="(in the 2D Graphics trail)"></a> section in the 2D Graphics trail for more information.
However, we still recommend that you avoid drawing 
your own text,
and use a standard Swing component instead.
<hr>
</blockquote>

<p>

<h4>Painting Text</h4>
<blockquote>

The <code>Graphics</code> class provides three methods 
for painting text:
<code>drawBytes</code>,
<code>drawChars</code>, and
<code>drawString</code>.
Here is an example 
of code that paints a string to the screen:

<blockquote>
<pre>
g.drawString("Hello World!", x, y);
</pre>
</blockquote>

For the text painting methods,
<code>x</code> and
<code>y</code>
are integers that specify the position
of the <em>lower left</em> corner of the text.
To be precise, the <code>y</code> coordinate
specifies the <em>baseline</em> of the text --
the line that most letters rest on --
which doesn't include room for the tails (<em>descenders</em>)
on letters such as "y".
Be sure to make <code>y</code> large
enough to allow vertical space for the text,
but small enough to allow room for descenders.

<p>

Here's a figure that shows the baseline,
as well as the ascender and descender lines.
You'll learn more about ascenders and descenders
a bit later.

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/painting/13ui38.gif" WIDTH="353" HEIGHT="69" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote><p>

Here is a picture of a simple applet that illustrates
what can happen when you're not careful
about where you position your text:

<p>
<blockquote><a href="textxy.html" target="_blank"><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/painting/TextXY.gif" WIDTH="299" HEIGHT="59" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT="Click this figure to run the applet."></a><br><em>This is a picture of the applet's GUI.  To run the applet, click the picture.  The applet will appear in a new browser window.</em></blockquote>
The top string is probably cut off,
since its <code>y</code> argument is <code>5</code>, 
which leaves only 5 pixels above the baseline for the string --
not enough for most fonts.
The middle string probably shows up just fine,
unless you have a huge default font.
Most of the letters in the bottom string display fine,
except for letters with descenders.
All descenders in the bottom string are cut off,
since the code that displays this string doesn't allow room for them.
You can find the applet's source code in
<a href=http://docs.rinet.ru/Jtuta/uiswing/painting/example-swing/TextXY.java><code>TextXY.java</code></a>.

<p>

<blockquote>
<hr>
<strong>Note:</strong>
The text-painting methods' interpretation of
<code>x</code> and
<code>y</code>
is different from that of the shape-painting methods.
When painting a shape (such as a rectangle),
<code>x</code> and
<code>y</code>
specify the <em>upper</em> left corner of the shape's bounding rectangle,
instead of the lower left corner.
<hr>
</blockquote>

</blockquote>
<h4>
<a name=fontMetrics>
Getting Information about a Font: FontMetrics
</a>
</h4>
<blockquote>

The shape-painting example from 
<a href="drawingshapes.html#eg2">Example 2: A Shape Sampler</a>
could be improved by choosing a font
that's smaller than the usual default font.
The following example does this
and also enlarges the shapes
to take up the space freed by the font's smaller height.
Here is a picture of the improved applet:


<p>
<hr>
<blockquote><a href="http://docs.rinet.ru:8080/Jtuta/uiswing/painting/FontDemo.html" target="_blank"><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/painting/FontDemo.gif" WIDTH="547" HEIGHT="97" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT="Click this figure to run the applet."></a><br><em>This is a picture of the applet's GUI.  To run the applet, click the picture.  The applet will appear in a new browser window.</em></blockquote><hr>
<p>

You can find its code in
<a href="http://docs.rinet.ru/Jtuta/uiswing/painting/example-swing/FontDemo.java"><code>FontDemo.java</code></a>.

The example chooses the appropriate font
by using a <code>FontMetrics</code> object 
to get details of the font's size.
For example, the following loop 
ensures that the longest string displayed 
by the applet ("drawRoundRect()")
fits within the space each shape is allotted.

<blockquote>
<pre>
boolean fontFits = false;
Font currentFont = biggestFont;
FontMetrics currentMetrics = getFontMetrics(currentFont);
int size = currentFont.getSize(); 
String name = currentFont.getName();
int style = currentFont.getStyle();
                    
while (!fontFits) {
    if ( (currentMetrics.getHeight() <= maxCharHeight)
      && (currentMetrics.stringWidth(longString)
          <= xSpace)) { 
         fontFits = true;
    } else {
         if (size <= minFontSize) {
         fontFits = true;
    } else {
         currentFont = new Font(name, style, --size);
         currentMetrics = getFontMetrics(currentFont);
    }
}
                
</pre>
</blockquote>

The example code above uses the <code>Graphics</code>
<code>getFont</code>,
<code>setFont</code>, and
<code>getFontMetrics</code>
methods to get and set the current font
and to get the <code>FontMetrics</code> object that corresponds to the font.
From the <code>FontMetrics</code>
<code>getHeight</code> and
<code>stringWidth(String)</code> methods,
the example code gets
vertical and horizontal size information about the font.

<p>

The following figure shows some of the information
that a <code>FontMetrics</code> object can provide about a font's size.

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/painting/13ui41.gif" WIDTH="433" HEIGHT="145" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
<p>

Here's a summary of the <code>FontMetrics</code> methods
that return information about a font's vertical size:
<p>

<dl>
<dt> <code>getAscent</code>, <code>getMaxAscent</code>
<dd> The <code>getAscent</code> method
     returns the number of pixels 
     between the ascender line and the baseline.
     Generally, the ascender line represents
     the typical height of capital letters.
     Specifically, the ascent and descent values
     are chosen by the font's designer
     to represent the correct text "color",
     or density of ink, 
     so that the text appears as the designer planned it.
     The ascent typically provides enough room 
     for almost all of the characters in the font,
     except perhaps for accents on capital letters.
     The <code>getMaxAscent</code> method accounts
     for these exceptionally tall characters.

     <p>

<dt> <code>getDescent</code>, <code>getMaxDescent</code>
<dd> The <code>getDescent</code> method
     returns the number of pixels 
     between the baseline and the descender line.
     In most fonts, all characters fall within the descender line
     at their lowest point.
     Just in case, though, you can use
     the <code>getMaxDescent</code> method to get
     a distance guaranteed to encompass all characters.

     <p>

<dt> <code>getHeight</code>
<dd> Returns the number of pixels normally found
     between the baseline of one line of text 
     and the baseline of the next line of text.
     Note that this includes an allowance for leading.

     <p>

<dt> <code>getLeading</code>
<dd> Returns the suggested distance (in pixels)
     between one line of text and the next.
     Specifically the leading is the distance
     between the descender line of one line of text
     and the ascender line of the next line of text.
     By the way, <em>leading</em> is pronounced
     <em>LEDDing.</em>
</dl>
<p>

Note that the font size
(returned by the <code>Font</code> class <code>getSize</code> method)
is an abstract measurement.
Theoretically, it corresponds to the ascent plus the descent.
Practically, however, 
the font designer decides exactly how tall a "12 point" font
(for example) is.
For example, 12-point Times is often slightly shorter
than 12-point Helvetica.
Typically, font size is measured in <em>points</em>,
which are approximately 1/72 of an inch.

<p>

The following list shows the methods that
<code>FontMetrics</code> provides 
to return information about the horizontal size
of a font's characters.
These methods take into account
the spacing around each character.
More precisely, each method returns 
<em>not</em> the number of pixels taken up
by a particular character (or characters),
but the number of pixels by which the <em>current point</em>
will be advanced when that character (or characters) is shown.
We call this the <em>advance width</em>
to distinguish it from the character or text width.

<p>
<!--It'd be nice to have a figure illustrating this.-->

<dl>
<dt><code>getMaxAdvance()</code>
<dd>The advance width (in pixels) of the widest character in the font.

<dt><code>bytesWidth(byte[], int, int)</code>
<dd>The advance width of the text represented
    by the specified array of bytes.
    The first integer argument specifies
    the starting offset of the data within the byte array.
    The second integer argument specifies
    the maximum number of bytes to check.

<dt><code>charWidth(int)</code>,
    <code>charWidth(char)</code> 
<dd>The advance width of the specified character.

<dt><code>charsWidth(char[], int, int)</code> 
<dd>The advance width of the string
    represented by the specified character array.

<dt><code>stringWidth(String)</code>
<dd>The advance width of the specified string.

<dt><code>getWidths()</code>
<dd>The advance width of each of the first 256 characters in the font.
</dl>


</blockquote>
</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="drawingshapes.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="usingimages.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
