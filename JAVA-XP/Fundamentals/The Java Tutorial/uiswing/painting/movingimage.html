




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Moving an Image Across the Screen</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="animloop.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="imagesequence.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Moving an Image Across the Screen
</h2>
<p>
<blockquote>


This page features an example applet 
that moves one image (a rocketship)
in front of a background image (a field of stars).
You could implement this in one of two ways --
either using one label per image,
or using one custom component that paints both images.
Because this lesson features painting,
this section features the custom component approach,
as implemented in
<a href="http://docs.rinet.ru/Jtuta/uiswing/painting/example-swing/MovingImageTimer.java"><code>MovingImageTimer.java</code></a>.

<blockquote>
<hr>
<strong>Note:</strong>
You can also see an alternate implementation,
which uses labels and a layered pane.
You can find it in 
<a href="http://docs.rinet.ru/Jtuta/uiswing/painting/example-swing/MovingLabels.java"><code>MovingLabels.java</code></a>,
which you can run by visiting
<a href="movinglabels.html"><code>MovingLabels.html</code></a>.
<hr>
</blockquote>

<p>

Below are the two images this applet uses.

<p>

rocketship.gif:

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/painting/rocketship.gif" WIDTH="85" HEIGHT="62" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
<p>
starfield.gif:

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/painting/starfield.gif" WIDTH="500" HEIGHT="100" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
<p>

Here's a picture of the applet's GUI.
Remember that you can click on the applet
to stop or start the animation.

<blockquote><a href="movingimagetimer.html" target="_blank"><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/painting/MovingImage.gif" WIDTH="499" HEIGHT="99" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT="Click this figure to run the applet."></a><br><em>This is a picture of the applet's GUI.  To run the applet, click the picture.  The applet will appear in a new browser window.</em></blockquote>

<blockquote>
<hr>
<strong>Note:</strong>
The rocketship image has a transparent background.
The transparent background makes
the rocketship image appear to have a rocketship shape,
no matter what color background it's painted on top of.
If the rocketship background weren't transparent,
then instead of the illusion of a rocketship moving through space,
you'd see a rocketship on top of a rectangle 
moving through space.
<hr>
</blockquote>

<p>

<p>

The code for performing this animation isn't complex.
Essentially, it's the applet animation template 
plus a few additional lines of code.
The additional code loads the images,
paints the background image,
and then uses a simple algorithm 
to determine where to paint the moving image.
Here is the new code:
[PENDING: update this]
<blockquote>
<pre>
<em>...//Where the GUI is constructed:</em>
[PENDING: put getImage calls here]

<em>...//In the paintComponent method:</em>
    super.paintComponent(g); //paint any space not covered
                             //by the background image
    int compWidth = getWidth();
    int compHeight = getHeight();

    //If we have a valid width and height for the
    //background image, paint it.
    imageWidth = background.getWidth(this);
    imageHeight = background.getHeight(this);
    if ((imageWidth > 0) && (imageHeight > 0)) {
        g.drawImage(background,
                    (compWidth - imageWidth)/2,
                    (compHeight - imageHeight)/2, this);
    }

    //If we have a valid width and height for the
    //foreground image, paint it.
    imageWidth = foreground.getWidth(this);
    imageHeight = foreground.getHeight(this);
    if ((imageWidth > 0) && (imageHeight > 0)) {
        g.drawImage(foreground,
                    ((frameNumber*5)
                      % (imageWidth + compWidth))
                      - imageWidth,
                    (compHeight - imageHeight)/2,
                    this);
    }
}
</pre>
</blockquote>

You might think that this program
doesn't need to clear the background,
since it uses a background image.
However, clearing the background is still necessary.
One reason is that the applet usually starts painting before 
the images are fully loaded.
If the rocketship image loaded before the background image,
you would see parts of multiple rocketship 
until the background image loaded.
Another reason is that
if the applet painting area were wider than the background image,
for some reason,
then you'd see multiple rocketships to either side of the background image.

<p>

You could solve the first problem
by delaying all painting until both images are fully loaded.
The second problem could be solved 
by scaling the background image to fit the entire applet area.
You'll learn how to wait for images to be fully loaded in
<a href=improvingimageanim.html>Improving
the Appearance and Performance of Image Animation</a>,
later in this lesson.
Scaling is described in
<a href=drawingimages.html>Displaying Images</a>.


</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="animloop.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="imagesequence.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
</body>
</html>

