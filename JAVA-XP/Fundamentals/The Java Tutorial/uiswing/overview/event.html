




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Event Handling</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="layout.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="draw.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Swing Features and Concepts</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Event Handling
</h2>
<p>
<blockquote>

Every time the user types a character
or pushes a mouse button,
an event occurs.
Any object can be notified of the event.
All it has to do is 
implement the appropriate interface
and be registered as an <em>event listener</em>
on the appropriate <em>event source</em>.
Swing components can generate many kinds of events.
Here are a few examples:

<blockquote>
<table>
<tr>
<th align=left> Act that results in the event
<th align=left> Listener type
<tr>
<td> User clicks a button,
     presses Return while typing in a text field,
     or chooses a menu item
<td> <code>ActionListener</code>
<tr>
<td> User closes a frame (main window)
<td> <code>WindowListener</code>
<tr>
<td> User presses a mouse button
     while the cursor is over a component
<td> <code>MouseListener</code>
<tr>
<td> User moves the mouse over a component
<td> <code>MouseMotionListener</code>
<tr>
<td> Component becomes visible
<td> <code>ComponentListener</code>
<tr>
<td> Component gets the keyboard focus
<td> <code>FocusListener</code>
<tr>
<td> Table or list selection changes
<td> <code>ListSelectionListener</code>
</table>
</blockquote>
<p>

Each event is represented by an object
that gives information about the event
and identifies the event source.
Event sources are typically components,
but other kinds of objects
can also be event sources.
As the following figure shows, each event source can
have multiple listeners registered on it.
Conversely, a single listener
can register with multiple event sources.

<blockquote>
<pre>
event       event object     /----> event listener
source ---------------------------> event listener
                             \----> event listener

Caption: <strong>Multiple listeners
can register to be notified of events 
of a particular type from a particular source.</strong>
</pre>
</blockquote>

Whenever you want to detect events from a particular component,
first check the how-to section for that component.
All of the component how-to sections can be found in
the
<a target="_top" href="..\components\index.html">Using Swing Components</a><a target="_top" href="..\components\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a> lesson.
The how-to sections give examples of handling the events
that you're most likely to care about.
In
<a target="_top" href="..\components\frame.html">How to Make Frames</a><a target="_top" href="..\components\frame.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a>, for instance,
 you'll find an example
of writing a window listener
that exits the application when the frame closes.


<h4>
<a name="code">How to Implement an Event Handler</a>
</h4>
<blockquote>

Every event handler
requires three bits of code:

<ol>
<li> In the declaration for the event handler class,
     code that specifies that the class
     either implements a listener interface
     or extends a class that implements a listener interface.
     For example:
     <blockquote>
     <pre>
public class MyClass implements ActionListener {
     </pre>
     </blockquote>
<p>
<li> Code that registers an instance of the event handler class
     as a listener upon one or more components.
     For example:
     <blockquote>
     <pre>
someComponent.addActionListener(instanceOfMyClass);
     </pre>
     </blockquote>
<p>
<li> Code that implements the methods in the listener interface.
     For example:
     <blockquote>
     <pre>
public void actionPerformed(ActionEvent e) {
    <em>...//code that reacts to the action...</em>
}
     </pre>
     </blockquote>
</ol>

<p>

Let's investigate a typical event-handling scenario
by looking at how buttons (<code>JButton</code>) handle mouse clicks.
To detect when the user clicks an on-screen button
(or does the keyboard equivalent),
a program must have an object 
that implements the <code>ActionListener</code> interface.
The program must register this object
as an action listener on the button
(the event source),
using the <code>addActionListener</code> method.
When the user clicks the on-screen button,
the button fires an action event.
This results in the invocation of the action listener's
<code>actionPerformed</code> method
(the only method in the <code>ActionListener</code> interface).
The single argument to the method is an <code>ActionEvent</code> object
that gives information about the event and its source.

<blockquote>
<pre>
              ActionEvent
button ----------------------------> action listener
                          

Caption: <strong>When the user clicks a button, the button's action listeners
are notified.</strong>
</pre>
</blockquote>

<p>

Event handlers can be instances of any class.
Often, an event handler that has only a few lines of code
is implemented using an <em>anonymous inner class</em> --
an unnamed class defined inside of another class.
Anonymous inner classes can be somewhat confusing at first,
but once you're used to them
they make code clearer
by keeping the implementation of an event handler
close to where the event handler is registered.
For information about using inner classes, 
see 
<a target="_top" href="..\events\generalrules.html#innerclasses">Using Adapters and Inner Classes to Handle Events</a><a target="_top" href="..\events\generalrules.html#innerclasses"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a>.

<p>

For more information about implementing event handlers, see
<a target="_top" href="..\events\index.html">Writing Event Listeners</a><a target="_top" href="..\events\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a>.

</blockquote>
<h4>
<a name="thread">Threads and Event Handling</a>
</h4>
<blockquote>
Event-handling code executes in a single thread, the
<em>event-dispatching thread</em>.
This ensures that each event handler
will finish executing before the next one executes.
For instance, the <code>actionPerformed</code> method
in the preceding example executes in the event-dispatching thread.
Painting code also executes in the event-dispatching thread.
This means that while the <code>actionPerformed</code> 
method is executing,
the program's GUI is frozen --
it won't repaint or respond to mouse clicks, for example.

<blockquote>
<hr>
<strong>Important:</strong>
The code in event handlers should execute very quickly!
Otherwise, your program's perceived performance 
will be poor.
If you need to perform some lengthy operation as the result of
an event,
do it by starting up another thread
(or somehow sending a request to another thread)
to perform the operation.
For help on using threads, see
<a target="_top" href="..\misc\threads.html">How to Use Threads</a><a target="_top" href="..\misc\threads.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a>.
<hr>
</blockquote>




</blockquote>
</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="layout.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="draw.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Swing Features and Concepts</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
