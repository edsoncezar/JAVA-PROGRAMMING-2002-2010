




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>How to Write a Document Listener</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="containerlistener.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="focuslistener.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Writing Event Listeners</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    How to Write a Document Listener
</h2>
<p>
<blockquote>

A Swing text component uses a
<a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/text/Document.html"><code>Document</code></a><a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/text/Document.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> to hold and edit its text.
Document events occur when the content of a document changes in any way.
You attach a document listener to a text component's document,
rather than to the text component itself.

<h4>Document Event Methods</h4>
<blockquote>
The <code>DocumentListener</code> interface contains these three methods:
<dl>
<dt> <strong><code>void changedUpdate(DocumentEvent)</code></strong>
<dd> Called when the style of some of the text in the
     listened-to document changes.
     This sort of event is generated only from a <code>StyledDocument</code>--
     a <code>PlainDocument</code> does not generate these events.
<p>
<dt> <strong><code>void insertUpdate(DocumentEvent)</code></strong>
<dd> Called when text is inserted into the listened-to document.
<p>
<dt> <strong><code>void removeUpdate(DocumentEvent)</code></strong>
<dd> Called when text is removed from the listened-to document.
</dl>
</blockquote>

<a name="eg">
<h4>Examples of Handling Document Events</h4>
</a>
<blockquote>
Two examples described in other sections have
document listeners:
<ul>
<li>
The document listener described in
<a target="_top" href="..\components\text.html#doclisteners">Listening for Changes on a Document</a><a target="_top" href="..\components\text.html#doclisteners"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a> updates a change log every time text in
the listened to document changes.
The source to the example is in
<a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/TextComponentDemo.java">
<code>TextComponentDemo.java</code></a>.
<li>
The document listener described in
<a target="_top" href="..\components\textfield.html#documentlistener">Using a Document Listener on a Text Field</a><a target="_top" href="..\components\textfield.html#documentlistener"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a> updates a numeric value based on several other values
entered into text fields by the user.
You can find the source in
<a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/TextFieldDemo.java">
<code>TextFieldDemo.java</code></a>.
</ul>

Both of those sections made an important point
that is worth repeating here:
<blockquote>
<strong>
Never modify the contents of
document from within a document listener.
Your program might deadlock.
Instead, provide a custom document for your text component.
</strong>
</blockquote>

</blockquote>

<h4>The DocumentEvent Interface</h4>
<blockquote>
Each document event method has a single parameter:
an instance of a class that implements the
<a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/event/DocumentEvent.html"><code>DocumentEvent</code></a><a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/event/DocumentEvent.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> interface.
Typically, the object passed into this method
will be an instance of
<a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/text/AbstractDocument.DefaultDocumentEvent.html"><code>DefaultDocumentEvent</code></a><a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/text/AbstractDocument.DefaultDocumentEvent.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> which is defined in <code>AbstractDocument</code>.
<p>

To get the document that generated the event, you can use
<code>DocumentEvent</code>'s <code>getDocument</code>
method. Note that <code>DocumentEvent</code> does
not inherit from <code>EventObject</code>
like the other event classes. Thus it does not
inherit the <code>getSource</code> method.
<p>
In addition to <code>getDocument</code>,
the <code>DocumentEvent</code> class provides these handy methods:
<dl>
<dt><strong><code>int getLength()</code></strong>
<dd>Returns the length of the change.

<dt><strong><code>int getOffset()</code></strong>
<dd>Returns the location within the document
    of the first character changed.

<dt><strong><code>ElementChange getChange(Element)</code></strong>
<dd>Returns details about what elements in the document have
    changed and how.
<a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/event/DocumentEvent.ElementChange.html"><code>ElementChange</code></a><a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/event/DocumentEvent.ElementChange.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> is an interface defined
within the <code>DocumentEvent</code> interface.

<dt><strong><code>EventType getType()</code></strong>
<dd>Returns the type of change that occurred.
<a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/event/DocumentEvent.EventType.html"><code>EventType</code></a><a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/event/DocumentEvent.EventType.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>    is a class defined
    within the <code>DocumentEvent</code> interface
    that enumerates the possible
    changes that can occur on a document:
    insert text, remove text, and change text style.
</dl>

</blockquote>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="containerlistener.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="focuslistener.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Writing Event Listeners</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
