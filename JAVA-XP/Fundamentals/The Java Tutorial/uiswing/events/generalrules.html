




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>General Rules for Writing Event Listeners</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="intro.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="eventsandcomponents.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Writing Event Listeners</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    General Rules for Writing Event Listeners
</h2>
<p>
<blockquote>

[PENDING: update for Swing]
<p>

When the AWT calls an event-listener method, that method executes in
the AWT event thread. Because all other event-handling and drawing
methods are executed in that same thread, a slow event-listener method
can make the program seem unresponsive and slow to repaint itself.
<blockquote>
<hr>
<strong>Important</strong>: Make sure your event-listener methods
execute quickly!
<hr>
</blockquote>
If you need to perform some lengthy operation as the result of an
event, do it by starting up another thread (or sending a request to
another thread) to perform the operation. For help on using threads,
see the lesson Doing Two or More Tasks at Once: Threads (page 327).
[PENDING: link to threads and swing information instead]
<p>
The next subsection introduces you to the ancestor of all AWT event
classes, the AWTEvent class. After that,
<a href="#innerclasses">
Using Adapters and Inner Classes to Handle AWT Events</a>
gives you hints for avoiding clutter in your code.

<a name="awteventclass">
<h4>The AWTEvent Class</h4>
</a>
<blockquote>
Each method in each AWT event listener interface has a single argument:
an instance of a class that descends from the java.awt.AWTEvent class.
The AWTEvent class doesn't define any methods or API that you
ordinarily need to use. However, it does inherit a useful method from
the java.util.EventObject class:
<dl>
<dt> <strong>Object getSource()</strong>
<dd> Returns the object that generated the event.
</dl>
Note that the getSource method returns an Object. Whenever possible,
AWTEvent subclasses define similar methods with more restricted return
types. For example, the ComponentEvent class defines a getComponent
method that returns the Component that generated the event.
<p>
Figure 68 shows the class hierarchy for the AWT event classes. As it
shows, many but not all of the AWT event classes inherit from the
ComponentEvent class.
<p>
The class hierarchy of the AWT event classes. 

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/events/13ui11a.gif" WIDTH="" HEIGHT="" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
</blockquote>

<a name="standard">
<h4>Standard AWT Events</h4>
</a>
<blockquote>
The AWT defines nearly a dozen kinds of event listeners. You can tell
what kinds of events a component can generate by looking at the kinds
of event listeners you can register on it. For example, the Component
class defines these listener registration methods:
<ul>
<li> addComponentListener
<li> addFocusListener
<li> addKeyListener
<li> addMouseListener
<li> addMouseMotionListener
</ul>
Thus, every class that inherits from Component supports component,
focus, key, mouse, and mouse-motion listeners. However, most Component
instances don't generate these events; a component generates only those
events for which listeners have registered on it. For example, if a
mouse listener is registered on a particular component, but the
component has no other listeners, then the component will generate only
mouse events--no component, focus, key, or mouse-motion events.
</blockquote>

<a name="innerclasses">
<h4>Using Adapters and Inner Classes to Handle Events</h4>
</a>
<blockquote>
This section tells you how to use 
adapters and inner classes
to reduce clutter in your code.
If you don't care about this subject,
feel free to skip to the
<a href="eventsandcomponents.html">next section</a>.

<p>

Most listener interfaces,
unlike <code>ActionListener</code>,
contain more than one method.
For example, 
the <code>MouseListener</code> interface
contains five methods:
<code>mousePressed</code>,
<code>mouseReleased</code>,
<code>mouseEntered</code>,
<code>mouseExited</code>, and
<code>mouseClicked</code>.
Even if you care only about mouse clicks,
if your class directly implements <code>MouseListener</code>, 
then you must implement all five <code>MouseListener</code> methods.
Methods for those events you don't care about
can have empty bodies.
Here's an example:

<blockquote>
<pre>
//An example with cluttered but valid code.
public class MyClass implements MouseListener {
    ...
	someObject.addMouseListener(this);
    ...
    /* Empty method definition. */
    public void mousePressed(MouseEvent e) {
    }

    /* Empty method definition. */
    public void mouseReleased(MouseEvent e) {
    }

    /* Empty method definition. */
    public void mouseEntered(MouseEvent e) {
    }

    /* Empty method definition. */
    public void mouseExited(MouseEvent e) {
    }

    public void mouseClicked(MouseEvent e) {
	<em>...//Event handler implementation goes here...</em>
    }
}
</pre>
</blockquote>

Unfortunately, the resulting collection of empty method bodies 
can make code harder to read and maintain.  
To help you avoid cluttering your code with empty method bodies,
the AWT and Swing provide
an <em>adapter</em> class
for each listener interface
with more than one method.
[PENDING: this is not entirely true for Swing.]
(<a href="handling.html">Handling Common Events</a>
lists all the listeners and their adapters.)
For example, 
the <code>MouseAdapter</code> class
implements the <code>MouseListener</code> interface.
An adapter class implements empty versions
of all its interface's methods.

<p>

To use an adapter,
you create a subclass of it,
instead of directly implementing a listener interface.
For example, by extending <code>MouseAdapter</code>,
your class inherits empty definitions
of all five of the methods
that <code>MouseListener</code> contains.

<blockquote>
<pre>
/*
 * An example of extending an adapter class instead of
 * directly implementing a listener interface.
 */
public class MyClass extends MouseAdapter {
    ... 
	someObject.addMouseListener(this);
    ... 
    public void mouseClicked(MouseEvent e) {
	<em>...//Event handler implementation goes here...</em>
    }
}
</pre>
</blockquote>

<p>

What if you don't want your event-handling class
to inherit from an adapter class?
For example, 
suppose you write an applet,
and you want your <code>Applet</code> subclass
to contain some code to handle mouse events.
Since the Java language doesn't permit multiple inheritance,
your class can't
extend both the <code>Applet</code> and <code>MouseAdapter</code>
classes.
The solution is to define 
an <em>inner class</em> --
a class inside of
your <code>Applet</code> subclass --
that extends the <code>MouseAdapter</code> class,

<blockquote>
<pre>
//An example of using an inner class.
public class MyClass extends Applet {
    ...
	someObject.addMouseListener(new MyAdapter());
    ...
    class MyAdapter extends MouseAdapter {
        public void mouseClicked(MouseEvent e) {
	    <em>...//Event handler implementation goes here...</em>
        }
    }
}
</pre>
</blockquote>

Here's another example of using an inner class:

<blockquote>
<pre>
//An example of using an anonymous inner class.
public class MyClass extends Applet {
    ...
	someObject.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
	        <em>...//Event handler implementation goes here...</em>
            }
	});
    ...
    }
}
</pre>
</blockquote>

Inner classes work well even if your event handler
needs access to private instance variables
from the enclosing class.
As long as you don't declare an inner class to be <code>static</code>,
an inner class can refer to instance variables and methods
just as if its code is in the containing class.
To make a local variable available to an inner class,
just save a copy of the variable
as a <code>final</code> local variable.

<blockquote>
<hr>
<strong>Note:</strong>
Some 1.1 compilers don't let an inner class use private instance variables
of the enclosing class.
A workaround is to remove the <code>private</code> specifier
from the instance variable's declaration.
<hr>
</blockquote>

<p>

For more information about inner classes, see 
<a target="_top" href="..\..\java\more\nested.html">Implementing Nested Classes</a><a href="..\..\java\more\nested.html"><img src="http://docs.rinet.ru/Jtuta/images/javaIcon.gif" width=20 height=20 border=0 alt="(in the Learning the Java Language trail)"></a>.
</blockquote>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="intro.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="eventsandcomponents.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Writing Event Listeners</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
