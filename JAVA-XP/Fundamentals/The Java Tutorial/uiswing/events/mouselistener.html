




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>How to Write a Mouse Listener</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="listselectionlistener.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="mousemotionlistener.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Writing Event Listeners</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    How to Write a Mouse Listener
</h2>
<p>
<blockquote>

Mouse events tell you
when the user uses the mouse
(or similar input device)
to interact with a component.
Mouse events occur when 
the cursor enters or exits a component's on-screen area
and when the user presses or releases 
the mouse button.
Because tracking the cursor's motion
involves significantly more system overhead
than tracking other mouse events,
mouse-motion events are separated 
into a separate listener type 
(see <a href="mousemotionlistener.html">How to Write a Mouse Motion Listener</a>).
<p>
[PENDING: mention swing's MouseInputAdapter dodad]

<p>

<h4>Mouse Event Methods</h4>
<blockquote>

The
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.MouseListener.html"><code>MouseListener</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.MouseListener.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> interface 
and its corresponding adapter class, 
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.MouseAdapter.html"><code>MouseAdapter</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.MouseAdapter.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>, contain these methods:

<dl>
<dt> <strong><code>void mouseClicked(MouseEvent)</code></strong>
<dd> Called
     just after the user clicks the listened-to component.
<dt> <strong><code>void mouseEntered(MouseEvent)</code></strong>
<dd> Called
     just after the cursor enters the bounds
     of the listened-to component.
<dt> <strong><code>void mouseExited(MouseEvent)</code></strong>
<dd> Called
     just after the cursor exits the bounds
     of the listened-to component.
<dt> <strong><code>void mousePressed(MouseEvent)</code></strong>
<dd> Called
     just after the user presses a mouse button
     while the cursor is over the listened-to component.
<dt> <strong><code>void mouseReleased(MouseEvent)</code></strong>
<dd> Called
     just after the user releases a mouse button
     after a mouse press over the listened-to component.
</dl>

<p>

One complication affects mouse-entered,
mouse-exited, and mouse-released events.
When the user drags 
(presses and holds the mouse button and then moves the mouse),
then the component that the cursor was over
when the drag started
is the one that receives all subsequent mouse and mouse-motion events
up to and including the mouse button release.
That means that no other component
will receive a single mouse event --
not even a mouse-released event --
while the drag is occurring.

</blockquote>

<h4>Examples of Handling Mouse Events</h4>
<blockquote>

The following applet contains a mouse listener.
At the top of the applet
is a blank area
(implemented, strangely enough, 
by a class named <code>BlankArea</code>).
The mouse listener listens for events 
both on the <code>BlankArea</code>
and on its container,
which is an instance of <code>MouseEventDemo</code>.
Each time a mouse event occurs,
a descriptive message is displayed 
under the blank area.
By moving the cursor on top of the blank area
and occasionally pressing mouse buttons,
you can generate mouse events.

<p>

<blockquote><a href="mouseeventdemo.html" target="_blank"><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/events/MouseEventDemo.gif" WIDTH="450" HEIGHT="200" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT="Click this figure to run the applet."></a><br><em>This is a picture of the applet's GUI.  To run the applet, click the picture.  The applet will appear in a new browser window.</em></blockquote>
<p>

<blockquote>
<hr>
<strong>Try this:</strong>
<ol>
<li> <strong>Move the cursor into the yellow rectangle
     at the top of the applet.</strong>
     <br>
     You'll see one or more mouse-entered events.
<li> <strong>Press and hold the mouse button.</strong>
     <br>
     You'll see a mouse-pressed event.
     You might see some extra mouse events,
     such as mouse-exited and then mouse-entered.
<li> <strong>Release the mouse button.</strong>
     <br>
     You'll see a mouse-released event.
     If you didn't move the mouse,
     a mouse-clicked event will follow.
<li> <strong>Press and hold the mouse button,
     and then drag the mouse so that the cursor ends up
     outside the applet's area.
     Release the mouse button.</strong>
     <br>
     You'll see a mouse-pressed event,
     followed by a mouse-exited event,
     followed by a mouse-released event.
     You are <em>not</em> notified
     of the cursor's motion.
     To get mouse-motion events,
     you need to implement a 
     <a href="mousemotionlistener.html">mouse-motion listener.</a>
</ol>
<hr>
</blockquote>

You can find the applet's code in
<a href="http://docs.rinet.ru/Jtuta/uiswing/events/example-swing/MouseEventDemo.java"><code>MouseEventDemo.java</code></a>
and
<a href="http://docs.rinet.ru/Jtuta/uiswing/events/example-swing/BlankArea.java"><code>BlankArea.java</code></a>.
Here is the applet's mouse event handling code:

<blockquote>
<pre>
public class MouseEventDemo ... implements MouseListener {
	<em>...//where initialization occurs:</em>
        //Register for mouse events on blankArea and applet (panel).
        blankArea.addMouseListener(this);
        addMouseListener(this);
    ...

    public void mousePressed(MouseEvent e) {
       saySomething("Mouse pressed; # of clicks: "
                    + e.getClickCount(), e);
    }

    public void mouseReleased(MouseEvent e) {
       saySomething("Mouse released; # of clicks: "
                    + e.getClickCount(), e);
    }

    public void mouseEntered(MouseEvent e) {
       saySomething("Mouse entered", e);
    }

    public void mouseExited(MouseEvent e) {
       saySomething("Mouse exited", e);
    }

    public void mouseClicked(MouseEvent e) {
       saySomething("Mouse clicked (# of clicks: "
                    + e.getClickCount() + ")", e);
    }

    void saySomething(String eventDescription, MouseEvent e) {
        textArea.append(eventDescription + " detected on "
                        + e.getComponent().getClass().getName()
                        + "." + newline);
    }
}
</pre>
</blockquote>

<p>

You can find more examples of mouse listeners
in the following source files:

<ul>
<li><a href="http://docs.rinet.ru/Jtuta/applet/overview/example-1dot1/SimpleClick.java"><code>SimpleClick.java</code></a>
<li><a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/GlassPaneDemo.java"><code>GlassPaneDemo.java</code></a>
<li><a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/TableSorter.java"><code>TableSorter.java</code></a>
<li><a href="http://docs.rinet.ru/Jtuta/uiswing/misc/example-swing/AnimatorApplicationTimer.java"><code>AnimatorApplicationTimer.java</code></a>
</ul>

<p>

</blockquote>
<a name="mousevent">
<h4>The MouseEvent Class</h4>
</a>
<blockquote>
Each mouse event method has a single parameter: a
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.MouseEvent.html"><code>MouseEvent</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.MouseEvent.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> object.
The <code>MouseEvent</code> class defines
the following useful methods:

<p>
<dl>
<dt><strong><code>int getClickCount()</code></strong>
<dd>Returns the number of quick, consecutive clicks the user has made
    (including this event).
<p>
<dt><strong><code>int getX()</code></strong>
<dt><strong><code>int getY()</code></strong>
<dt><strong><code>Point getPoint()</code></strong>
<dd>Return the (x,y) position
    at which the event occurred,
    relative to the component that generated the event.
<dt><strong><code>boolean isPopupTrigger()</code></strong>
<dd>Returns true if the mouse event should cause a popup menu
    to appear. Because popup triggers are platform dependent,
    if your program uses popup menus,
    you should call <code>isPopupTrigger</code>
    for all mouse-pressed and mouse-released events
    generated by components over which the popup can appear.
    See [PENDING] for more information about popup menus.
</dl>
<p>

The <code>MouseEvent</code> class inherits the following
handy method from
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.ComponentEvent.html"><code>ComponentEvent</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.ComponentEvent.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>.
<dl>
<dt><strong><code>Component getComponent</code></strong>
<dd> Returns the component that generated the event.
     You can use this method instead of the <code>getSource</code> method.
</dl>
<p>
The <code>MouseEvent</code> class inherits many useful methods from
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.InputEvent.html"><code>InputEvent</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.event.InputEvent.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>:
<p>
<dl>
<dt><strong><code>void consume()</code></strong>
<dd>Causes the event not to be processed by the component's peer.
    You might use this method to discard letters typed into a text
    field that accepts only numbers.
    [PENDING: Update for SWING. Does this still exist? Not mention
    it anymore?]

<dt><strong><code>int getWhen()</code></strong>
<dd>Returns the timestamp of when this event occurred.
    The higher the timestamp,
    the more recently the event occurred.
<p>
<dt><strong><code>boolean isAltDown()</code></strong>
<br><strong><code>boolean isControlDown()</code></strong>
<br><strong><code>boolean isMetaDown()</code></strong>
<br><strong><code>boolean isShiftDown()</code></strong>
<dd>Returns the state of individual modifier keys
    at the time the event was generated.
<p>
<dt><strong><code>int getModifiers()</code></strong>
<dd>Returns the state of all the modifier keys and
    mouse buttons
    when the event was generated.
    You can use this method to determine which
    mouse button was pressed (or newly released) when a
    mouse event was generated.
    The <code>InputEvent</code> class defines these constants
    for use with the <code>getModifiers</code> method:
    <code>ALT_MASK</code>,
    <code>BUTTON1_MASK</code>,
    <code>BUTTON2__MASK</code>,
    <code>BUTTON3_MASK</code>,
    <code>CTRL_MASK</code>,
    <code>META_MASK</code>, and
    <code>SHIFT_MASK</code>.
    For example, the following expression is true
    if the right button was pressed:
<blockquote>
<pre>
(mouseEvent.getModifiers() & InputEvent.BUTTON3_MASK)
== InputEvent.BUTTON3_MASK
</pre>
</blockquote>

   The 
<a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/api/com.sun.java.swing.SwingUtilities.html"><code>SwingUtilities</code></a><a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/api/com.sun.java.swing.SwingUtilities.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>   class 
   contains convenience methods for determining whether 
   a particular mouse button has been pressed:

   <dl>
   <dt><code>static boolean isLeftMouseButton(MouseEvent)</code>
   <br><code>static boolean isMiddleMouseButton(MouseEvent)</code>
   <br><code>static boolean isRightMouseButton(MouseEvent)</code>
   </dl>
</dl>

</blockquote>
</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="listselectionlistener.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="mousemotionlistener.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Writing Event Listeners</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
