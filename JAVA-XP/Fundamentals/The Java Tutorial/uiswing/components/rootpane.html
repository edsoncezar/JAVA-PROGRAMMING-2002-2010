




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>How to Use Root Panes</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="layeredpane.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="widgets.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Using Swing Components</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    How to Use Root Panes
</h2>
<p>
<blockquote>

In general, you don't directly create a 
<a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/JRootPane.html"><code>JRootPane</code></a><a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/JRootPane.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> object.
Instead, you get a <code>JRootPane</code>
(whether you want it or not!)
when you instantiate 
<a href="internalframe.html"><code>JInternalFrame</code></a> or
one of the top-level Swing containers --
<a href="..\start\swingapplet.html"><code>JApplet</code></a>,
<a href="dialog.html"><code>JDialog</code></a>,
<a href="frame.html"><code>JFrame</code></a>, and
<a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/JWindow.html"><code>JWindow</code></a><a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/JWindow.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>.

<p>

The section 
[PENDING]
tells you the basics of using root panes --
getting the content pane,
setting its layout manager, and 
adding Swing components to it.
This section tells you more about root panes,
including the components that make up a root pane
and how you can use them.
Another place to get information about root panes 
is The Swing Connection, especially the article
<a
href="http://java.sun.com/products/jfc/tsc/swingdoc-archive/frames_panes.html">Understanding Containers</a>.

<p>
[PENDING: Insert figure that shows front and side views
of a JRootPane in a JFrame.]
<p>

As the preceding figure shows, a root pane has four parts:  

<dl>
<dt> <strong>The glass pane</strong>
<dd> Hidden, by default.
     If you make the glass pane visible, 
     then it's like a sheet of glass over
     all the other parts of the root pane.
     It's completely transparent
     (unless you implement the glass pane's
     <code>paint</code> method so that it does something)
     and it intercepts input events for the root pane.
     In the <a href="#glasspane">next section</a>, 
     you'll see an example of using a glass pane.
<dt> <strong>The layered pane</strong>
<dd> Serves to position its contents, 
     which consist of the content pane 
     and the optional menu bar.
     Can also hold other components
     in a specified Z order.
     For information, 
     see <a href="layeredpane.html">How to Use Layered Panes</a>.
<dt> <strong>The content pane</strong>
<dd> The container of the root pane's visible components,
     excluding the menu bar.
     For information on using the content pane, see
     <a href="..\start\swingtour.html#jframe">
     Setting Up the Top-Level Container</a> and
     [PENDING: link to what was previously in
     "generalCompRules.html#rootpane"--Building a Swing GUI.
     [PENDING: consolidate, clarify content pane coverage.]
<dt> <strong>The optional menu bar</strong>
<dd> The home for the root pane's container's menus.
     If the container has a menu bar, 
     you generally use the container's
     <code>setMenuBar</code> 
     or <code>setJMenuBar</code> method
     to put the menu bar in the appropriate place.
     For more information on using menus and menu bars, see
     <a href="menu.html">How to Use Menus</a>.
</dl>

<h4>
<a name="glasspane">
The Glass Pane
</a>
</h4>
<blockquote>

The glass pane is useful when you want
to be able to catch events or draw
over an area 
that already contains one or more components.
For example, 
you can deactivate mouse events for a multi-component region
by having the glass pane intercept the events.
Or you can display a wait cursor over an entire root pane
using the glass pane.

<p>

Here's a picture of an application
that demonstrates glass pane features.
It contains a check box that lets you set
whether the glass pane is "visible" --
whether it can get events and 
paint itself onscreen.
When the glass pane is visible, 
it blocks all input events from reaching 
the components in the content pane.
It also draws a red dot in the place 
where it last detected a mouse-pressed event.

<p>

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/components/GlassPaneDemo.gif" WIDTH="378" HEIGHT="85" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
<p>

<blockquote>
<hr>
<strong>Try this:</strong>
<ol>
<li> Compile and run the application.
     The source file is
<a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/GlassPaneDemo.java"><code>GlassPaneDemo.java</code></a>.
     <br>
     See <a href="..\start\index.html">Getting Started with Swing</a> if you need help.

<li> Click Button 1.
     <br>
     The button's appearance changes to show that it's been clicked.
<li> Click the check box so that the glass pane becomes "visible,"
     and then click Button 1 again.
     <br> 
     The button does <em>not</em> detect the mouse-pressed event
     because the glass pane intercepts it.
     When the glass pane detects the event,
     it beeps and draws a red circle
     where you clicked.
<li> Click the check box again so that the glass pane is hidden.
     <br>
     When the root pane detects an event over the check box,
     it forwards it to the check box.
     Otherwise, the check box would not respond to clicks.
</ol>
<hr>
</blockquote>

<p>

The following code from 
     <a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/GlassPaneDemo.java"><code>GlassPaneDemo.java</code></a>
shows and hides the glass pane.
This program happens to create its own glass pane, 
setting it using the <code>JFrame</code> <code>setGlassPane</code> method.
However, if a glass pane doesn't do any drawing,
the program might simply attach listeners to the default glass pane,
as returned by <code>getGlassPane</code>.

<blockquote>
<pre>
<em>...//where GlassPaneDemo's UI is initialized:</em>
JCheckBox changeButton =
        new JCheckBox("Glass pane \"visible\"");
changeButton.setSelected(false);
changeButton.addItemListener(new ItemListener() {
    public void itemStateChanged(ItemEvent e) {
        myGlassPane.setVisible(e.getStateChange()
                               == ItemEvent.SELECTED);
    }
});
</pre>
</blockquote>

<p>

The next code snippet
implements the mouse-event handling for the glass pane.
If a mouse event occurs over the check box or menu bar,
then the glass pane redispatches the event 
so that the check box or menu component receives it.
So that the check box and menu behave properly,
they also receive all drag events that started
with a press in the button or menu bar.
[PENDING: Does that matter for the menu?
Should I also track drags that start within the popped up menu?]

<blockquote>
<pre>
<em>...//In the implementation of the glass pane's mouse listener:</em>
public void mouseMoved(MouseEvent e) {
    redispatchMouseEvent(e, false);
}

<em>.../* The mouseDragged, mouseClicked, mouseEntered,
    * mouseExited, and mousePressed methods have the same
    * implementation as mouseMoved*/...</em>

public void mouseReleased(MouseEvent e) {
    redispatchMouseEvent(e, true);
    inDrag = false;
}

private void redispatchMouseEvent(MouseEvent e, boolean repaint) {
    boolean inButton = false;
    boolean inMenuBar = false;
    Point glassPanePoint = e.getPoint();
    Component component = null;
    Container container = contentPane;
    Point containerPoint = SwingUtilities.convertPoint(
                                    glassPane,
                                    glassPanePoint,
                                    contentPane);
    int eventID = e.getID();

    if (containerPoint.y < 0) {
        inMenuBar = true;
        <em>//...set container and containerPoint accordingly...</em>
        testForDrag(eventID);
    }

    component = SwingUtilities.getDeepestComponentAt(
                                    container,
                                    containerPoint.x,
                                    containerPoint.y);

    if (component.equals(liveButton)) {
        inButton = true;
        testForDrag(eventID);
    }

    if (inMenuBar || inButton || inDrag) {
        <em>...//Redispatch the event to component...</em>
    }

    if (repaint) {
        toolkit.beep();
        glassPane.setPoint(glassPanePoint);
        glassPane.repaint();
    }
}

private void testForDrag(int eventID) {
    if (eventID == MouseEvent.MOUSE_PRESSED) {
        inDrag = true;
    }
}
</pre>
</blockquote>

Here is the code 
that implements the drawing for the glass pane:

<blockquote>
<pre>
<em>...//where GlassPaneDemo's UI is initialized:</em>
myGlassPane = new MyGlassPane(...);
frame.setGlassPane(myGlassPane);
...
/**
 * We have to provide our own glass pane so that it can paint.
 */
class MyGlassPane extends JComponent {
    Point point = null;

    public void paint(Graphics g) {
    	if (point != null) {
	    g.setColor(Color.red);
    	    g.fillOval(point.x - 10, point.y - 10, 20, 20);
    	}
    }
    ...
}
</pre>
</blockquote>


</blockquote>
<h4>
<a name="api">The Root Pane API</a>
</h4>
<blockquote>

The tables that follow list the API
for using root panes, glass panes,
and content panes.
For more information on using content panes,
go [PENDING: where?].
Here are the tables in this section:

<ul>
<li><a href="#rootpane">Using a Root Pane</a>
<li><a href="#glasspane">Setting or Getting the Glass Pane</a>
<li><a href="#contentpane">Setting or Getting the Content Pane</a>
</ul>

<p>

The API for using other parts of the root pane
is described elsewhere:
<ul>
<li> <a href="layeredpane.html#api">The Layered Pane API</a>
<li> <a href="menu.html#api">The Menu API</a>
</ul>

<p>

<table border=1> 
<caption><a name="rootpaneapi">Using a Root Pane</a></caption>
<tr>
<th align=left>Method
<th align=left>Purpose
 
<tr>
<td><font size=2><code>JRootPane getRootPane()</code></font>
    <br>
    <em>(in
    <code>JApplet</code>,
    <code>JDialog</code>,
    <code>JFrame</code>,
    <code>JInternalFrame</code>, and
    <code>JWindow</code>)</em>
<td>Get the root pane of the
    applet, dialog, frame, internal frame, or window.

<tr>
<td><font size=2><code>JRootPane SwingUtilities.getRootPane(Component)</code></font>
<td>If the component contains a root pane,
    returns that root pane.
    Otherwise, returns the root pane (if any)
    that contains the component.

<tr>
<td><font size=2><code>JRootPane getRootPane()</code></font>
    <br>
    <em>(in <code>JComponent</code>)</em>
<td>Invokes the <code>SwingUtilities</code>
    <code>getRootPane</code> method 
    on the <code>JComponent</code>.

<tr>
<td><font size=2><code>void setDefaultButton(JButton)
    <br>
    JButton getDefaultButton()</code></font>
<td>Set or get which button (if any)
    is the default button in the root pane.
    A look-and-feel-specific action, 
    such as pressing Enter,
    causes the button's action to be performed.
</table>

<p>

<table border=1> 
<caption><a name="glasspaneapi">Setting or Getting the Glass Pane</a></caption>
<tr>
<th align=left>Method
<th align=left>Purpose

<tr>
<td><font size=2><code>setGlassPane(Component)
    <br>
    Component getGlassPane()</code></font>
    <br>
    <em>(in
    <code>JApplet</code>,
    <code>JDialog</code>,
    <code>JFrame</code>,
    <code>JInternalFrame</code>,
    <code>JRootPane</code>, and
    <code>JWindow</code>)
<td>Sets or gets the glass pane.

</table>
 
<table border=1> 
<caption><a name="contentpaneapi">Using the Content Pane</a></caption>
<tr>
<th align=left>Method
<th align=left>Purpose
 
<tr>
<td><font size=2><code>setContentPane(Container)
    <br>
    Container getContentPane()</code></font>
    <br>
    <em>(in
    <code>JApplet</code>,
    <code>JDialog</code>,
    <code>JFrame</code>,
    <code>JInternalFrame</code>,
    <code>JRootPane</code>, and
    <code>JWindow</code>)
<td>Set or get the content pane.

</table>


</blockquote>
<h4>
<a name="eg">Examples that Use Root Panes</a>
</h4>
<blockquote>
Every Swing program uses a root pane.
The examples in the following list
illustrate some of the common or interesting uses.
Also see these:
<ul>
<li> <a href="layeredpane.html#eg">Examples that Use Layered Panes</a>
<li> <a href="menu.html#eg">Examples that Use Menus</a>
<li> <a href="frame.html#eg">Examples that Use Frames</a>
     (for examples of using content panes)
</ul>

<p>
<table>
<tr>
<th align=left> Example
<th align=left> Where Described
<th align=left> Notes

<tr>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/GlassPaneDemo.java"><code>GlassPaneDemo.java</code></a>
<td> This page
<td> Uses a glass pane.
     Redispatches events.

</table>

</blockquote>
</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="layeredpane.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="widgets.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Using Swing Components</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
