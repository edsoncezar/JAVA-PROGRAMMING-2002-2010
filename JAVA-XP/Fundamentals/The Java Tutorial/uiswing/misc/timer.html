




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>How to Use Timers</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="threads.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="..\layout\index.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Using Other Swing Features</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    How to Use Timers
</h2>
<p>
<blockquote>

The
<a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/Timer.html"><code>Timer</code></a><a target="_top" href="http://java.sun.com/products/jfc/swingdoc-api/javax/swing/Timer.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> class fires one or more <code>ActionEvent</code>s after a specified delay.
Timers are useful in the following situations:

<ol>
<li> Doing something after a delay.
     For example, many Swing components, such as buttons,
     use a timer to determine when to display a tool tip.
<li> Showing periodic progress.
     The first example that follows, <code>ProgressBarDemo</code>, does this.
<li> Performing animation. 
     See 
<a target="_top" href="..\painting\animloop.html">Creating an Animation Loop with Timer</a><a target="_top" href="..\painting\animloop.html"><img src="http://docs.rinet.ru/Jtuta/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a>     for an example and discussion.
</ol>

Let's look at an example of situation #2.
Here's a picture of a small demo application that
uses a <code>Timer</code> and a progress bar
to display the progress of a long-running task.

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/uiswing/misc/ProgressBarDemo.gif" WIDTH="294" HEIGHT="178" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
<blockquote>
<hr>
<strong>Try this:</strong>
<ol>
<li> Compile and run the application.
     The main source file is
     <a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/ProgressBarDemo.java"><code>ProgressBarDemo.java</code></a>.
     <br>
     See <a href="..\start\index.html">Getting Started with Swing</a> if you need help.

<li> Push the <strong>Start</strong> button.
     Watch the progress bar as the task makes progress.
</ol>
<hr>
</blockquote>

Once the task has begun, the timer
causes the progress bar to update every second until the task completes. 
Here's the code from
<a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/ProgressBarDemo.java"><code>ProgressBarDemo.java</code></a>
that creates the timer and, when the user
presses the <strong>Start</strong> button, starts it:
<blockquote>
<pre>
timer = new Timer(ONE_SECOND, new TimerListener());
. . .
timer.start();
</pre>
</blockquote>
Below is the code that implements the action listener
that is notified each time the timer goes off:
<blockquote>
<pre>
class TimerListener implements ActionListener {
    public void actionPerformed(ActionEvent evt) {
        progressBar.setValue(task.getCurrent());
        if (task.done()) {
	    Toolkit.getDefaultToolkit().beep();
	    <strong>timer.stop();</strong>
	    startButton.setEnabled(true);
        }
    }
}
</pre>
</blockquote>
The bold line of code stops the timer
when the task completes.
<p>

<blockquote>
<hr>
<strong>Note</strong>: The <code>actionPerformed</code>
method defined in the <code>Timer</code>'s action listener is invoked in
the event-dispatching thread. That means that you never have to use the
<code>invokeLater</code> method in it.
For more information about using Swing components and threads
in the same program, refer to <a href="threads.html">Threads and Swing</a>.
<hr>


</blockquote>
<h4>
<a name="api">The Timer API</a>
</h4>
<blockquote>
The following tables list the commonly used
<code>Timer</code> constructors and methods.
The API for using timers falls into three categories:

<ul>
<li><a href="#operation">Fine Tuning the Timer's Operation</a>
<li><a href="#running">Running the Timer</a>
<li><a href="#firing">Listening to the Timer Fire</a>
</ul>

<p>

<table border=1>
<caption><a name="operation">Fine Tuning the Timer's Operation</a></caption>
<tr>
<th>Method or Constructor
<th>Purpose

<tr>
<td><font size=2><code>Timer(int, ActionListener)</code></font>
<td>Create a timer set up with a delay and a listener. This is
    <code>Timer</code>'s only constructor.

<tr>
<td><font size=2><code>void setDelay(int)
    <br>
    int getDelay()</code></font>
<td>Set or get the delay between firings.

<tr>
<td><font size=2><code>void setInitialDelay(int)
    <br>
    int getInitialDelay()</code></font>
<td>Set or get the delay for the initial firing.
    If you don't set the initial delay, 
    then it's the same
    as the delay between firings.

<tr>
<td><font size=2><code>void setRepeats(boolean)
    <br>
    boolean isRepeats()</code></font>
<td>Set or get whether the timer repeats.
    [PENDING: Default value is true?]

<tr>
<td><font size=2><code>void setCoalesce(boolean)
    <br>
    boolean isCoalesce()</code></font>
<td>Set or get whether the timer coalesces multiple, pending firings
    into a single firing.

</table>

<p>

<table border=1>
<caption><a name="running">Running the Timer</a></caption>
<tr>
<th>Method
<th>Purpose

<tr>
<td><font size=2><code>void start()
    <br>
    void restart()</code></font>
<td>Turn the timer on. <code>restart</code> cancels any pending
    firings.

<tr>
<td><font size=2><code>void stop()</code></font>
<td>Turn the timer off.

<tr>
<td><font size=2><code>boolean isRunning()</code></font>
<td>Get whether the timer is running.

</table>

<p>

<table border=1>
<caption><a name="firing">Listening to the Timer Fire</a></caption>
<tr>
<th>Method
<th>Purpose

<tr>
<td><font size=2><code>void addActionListener(ActionListener)
    <br>
    void removeActionListener(ActionListener)</code></font>
<td>Add or remove an action listener.
</table>
</blockquote>

<h4>
<a name="eg">Examples that Use Timer</a>
</h4>
<blockquote>
This table shows the examples that use <code>Timer</code>
and where those examples are described.
<p>
<table>
<tr>
<th align=left> Example
<th align=left> Where Described

<tr>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/ProgressBarDemo.java">ProgressBarDemo.java</a>
<td> This section and <a href="..\components\progress.html">How to Monitor Progress</a>

<tr>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/misc/example-swing/AnimatorApplicationTimer.java">AnimatorApplicationTimer.java</a>
<td> This section.

<tr>
<td> <a href="http://docs.rinet.ru/Jtuta/uiswing/components/example-swing/SliderDemo.java">SliderDemo.java</a>
<td> <a href="..\components\slider.html">How to Use Sliders</a>

</table>

</blockquote>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="threads.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="..\layout\index.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a GUI with JFC/Swing | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Using Other Swing Features</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
