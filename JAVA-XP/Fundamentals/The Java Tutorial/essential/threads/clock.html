


















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Implementing the Runnable Interface</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="simple.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="lifecycle.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/coreHeader.gif" width=26 height=26 align=bottom border=0 alt="Essential Java Classes | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Doing Two or More Tasks At Once: Threads</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Implementing the Runnable Interface
</h2>
<p>
<blockquote>

The <code>Clock</code> applet shown below displays the
current time and updates its display every second.
You can scroll this page and perform other tasks while the
clock continues to update because the code that updates the
clock's display runs within its own thread.
<p>
<applet codebase=http://docs.rinet.ru:8080/Jtuta/essential/threads/example code=Clock.class width=60 height=10>
</applet>

<blockquote><hr><strong>Note:</strong> Because some old browsers don't support 1.1, the above applet is a <em>1.0</em> version (here is the <a href="http://docs.rinet.ru/Jtuta/essential/threads/example/Clock.java">1.0 code</a>; here's the <a href="http://docs.rinet.ru/Jtuta/essential/threads/example-1dot1/Clock.java">1.1 code</a>).  To run the <em>1.1</em> version of the applet, go to <a href="example-1dot1\clock.html"><code>example-1dot1/Clock.html</code></a>. For more information about running applets, refer to <a href="..\..\information\examples.html">About Our Examples</a>.<hr></blockquote>
<p>
The <code>Clock</code> applet uses a different technique
than <code>SimpleThread</code>
for providing the <code>run</code> method for its thread.
Instead of subclassing <code>Thread</code>,
<code>Clock</code> implements the <code>Runnable</code> interface
(and therefore implements the run method defined in it).
<code>Clock</code> then creates a thread with itself as
the <code>Thread</code>'s target.
When created in this way, the <code>Thread</code> gets its <code>run</code>
method from its target.
The code that accomplishes this is shown in
bold here:

<blockquote>
<pre>
import java.awt.Graphics;
import java.util.*;
import java.text.DateFormat;
import java.applet.Applet;

public class Clock extends Applet <strong>implements Runnable</strong> {
    private Thread clockThread = null;
    public void start() {
        if (clockThread == null) {
            <strong>clockThread = new Thread(this, "Clock");</strong>
            clockThread.start();
        }
    }
    <strong>public void run() {
        Thread myThread = Thread.currentThread()
        while (clockThread == myThread) {
            repaint();
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e){
            // the VM doesn't want us to sleep anymore,
            // so get back to work
            }
        }
    }</strong>
    public void paint(Graphics g) {
        // get the time and convert it to a date
        Calendar cal = Calendar.getInstance();
        Date date = cal.getTime();
        // format it and display it
        DateFormat dateFormatter = DateFormat.getTimeInstance();
        g.drawString(dateFormatter.format(date), 5, 10);
    }
    // overrides Applet's stop method, not Thread's
    public void stop() {
        clockThread = null;
    }
}

</pre>
</blockquote>
The <code>Clock</code> applet's <code>run</code> method loops
until the browser asks it to stop.
During each iteration of the loop,
the clock repaints its display.
The <code>paint</code> method figures out what time it is,
formats it in a localized way, and displays it.
You'll see more of the <code>Clock</code> applet in
<a href="lifecycle.html">The Life Cycle of a Thread</a>
which uses it to teach you about the life of a thread.

<h4>Deciding to Use the <code>Runnable</code> Interface</h4>
<blockquote>
You have now seen two ways to provide the run method for a Java
thread:
<ol>
<li>
Subclass the <code>Thread</code> class defined in the
<code>java.lang</code> package and override
the <code>run</code> method.
<p>
<hr>
<strong>Example</strong>:
See the <code>SimpleThread</code> class described in 
<a href="simple.html">
Subclassing <code>Thread</code> and Overriding <code>run</code></a>.
<hr>

<li>
Provide a class that implements the <code>Runnable</code> interface (also defined in the <code>java.lang</code> package) and therefore implements the <code>run</code> method. In this case, a <code>Runnable</code> object provides the <code>run</code> method to the thread. 
<p>
<hr>
<strong>Example</strong>:
See the <code>Clock</code> applet just shown.
<hr>
</ol>
There are good reasons for choosing either of these options over the
other. However, for most cases,
including that of the <code>Clock</code> applet, the
following rule of thumb will guide you to the best option.
<p>
<hr>
<strong>Rule of Thumb</strong>:
If your class must subclass some other class
(the most common example being <code>Applet</code>),
you should use <code>Runnable</code> as described in option #2. 
<hr>
<p>
To run in a Java-enabled browser, the <code>Clock</code> class has to be a subclass
of the <code>Applet</code> class. Also, the <code>Clock</code> applet needs a thread so that it
can continuously update its display without taking over the process in
which it is running. (Some browsers might create a new thread for each
applet so as to prevent a misbehaved applet from taking over the main
browser thread. However, you should not count on this when writing your
applets; your applets should create their own threads when doing
computer-intensive work.) But since the Java language does not support
multiple class inheritance, the <code>Clock</code> class cannot be a
subclass of both <code>Thread</code> and <code>Applet</code>.
Thus the <code>Clock</code> class must use the <code>Runnable</code>
interface to provide its threaded behavior.

</blockquote>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="simple.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="lifecycle.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/coreHeader.gif" width=26 height=26 align=top border=0 alt="Essential Java Classes | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Doing Two or More Tasks At Once: Threads</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
