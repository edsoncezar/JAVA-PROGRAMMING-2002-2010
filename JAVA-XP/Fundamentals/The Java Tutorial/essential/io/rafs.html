


















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Working with Random Access Files</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="serialization.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="rafio.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/coreHeader.gif" width=26 height=26 align=bottom border=0 alt="Essential Java Classes | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Reading and Writing (but no 'rithmetic)</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Working with Random Access Files
</h2>
<p>
<blockquote>

The input and output streams in this lesson so far 
have been sequential access streams--streams whose contents must
be read or written sequentially. While still incredibly useful, sequential
access files are a consequence of a sequential medium such as magnetic tape.
Random access files, on the other hand, permit nonsequential, or random,
access to the contents of a file.
<p>
So why might you need random access files. Consider the archive format known
as "zip." Zip archives contain files and are typically compressed to save
space. Zip archives also contain a dir-entry at the end that indicates
where the various files contained within the zip archive begin:

<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/essential/30file.gif" WIDTH="304" HEIGHT="136" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
Suppose that you want to extract a specific file from a zip archive.
If you use a sequential access stream, you have to do the following:
<ul>
<li>
Open the zip archive.
<li>
Search through the zip archive until you located the file you wanted to extract.
<li>
Extract the file.
<li>
Close the zip archive.
</ul>
On average, using this algorithm, you'd have to read half the
zip archive before finding the file that you wanted to extract.
You can extract the same file from the zip archive more efficiently
using the seek feature of a random access file:
<ul>
<li>
Open the zip archive.
<li>
Seek to the dir-entry and locate the entry for the file
you want to extract from the zip archive.
<li>
Seek (backwards) within the zip archive to the position of the file to extract.
<li>
Extract the file.
<li>
Close the zip archive.
</ul>
This algorithm is more efficient because you only read the dir-entry and the
file that you want to extract.
<p>
The 
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.io.RandomAccessFile.html"><code>RandomAccessFile</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.io.RandomAccessFile.html"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> class
in the <code>java.io</code> package implements a random access file.

<h4><a href="rafio.html">Using Random Access Files</a></h4>
<blockquote>
Unlike the input and output stream classes in <code>java.io</code>, <code>RandomAccessFile</code> is
used for both reading and writing files. You create a <code>RandomAccessFile</code> object
with different arguments depending on whether you intend to read or write.
</blockquote>

<h4><a href="raffilters.html">Writing Filters for Random Access Files</a></h4>
<blockquote>
<code>RandomAccessFile</code> is somewhat disconnected from the input and output
streams in <code>java.io</code>--it doesn't inherit from the <code>InputStream</code> or <code>OutputStream</code>.
This has some disadvantages in that you can't apply the same filters
to <code>RandomAccessFiles</code> that you can to streams. However, <code>RandomAccessFile</code>
does implement the <code>DataInput</code> and <code>DataOutput</code> interfaces, so if you 
design a filter that works for either <code>DataInput</code> or <code>DataOutput</code>, it will
work on some sequential access files (the ones that implemented <code>DataInput</code>
or <code>DataOutput</code>) as well as any <code>RandomAccessFile</code>.
</blockquote>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="serialization.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="rafio.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/coreHeader.gif" width=26 height=26 align=top border=0 alt="Essential Java Classes | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Reading and Writing (but no 'rithmetic)</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
