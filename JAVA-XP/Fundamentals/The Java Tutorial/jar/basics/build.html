


















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Creating a JAR File</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="index.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="view.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1_1.gif" width=26 height=26 align=bottom border=0 alt="JAR Files | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Using JAR Files: The Basics</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Creating a JAR File
</h2>
<p>
<blockquote>


The basic format of the command for creating a JAR file is:
<blockquote>
<pre>
jar cf <i>jar-file input-file(s)</i>
</pre>
</blockquote>

Let's look at the options and arguments used in this command:
<ul>
<li>The <tt>c</tt> option indicates that you want to <em>create</em> 
a JAR file.
<li>The <tt>f</tt> option indicates that you want the output to go to 
a <em>file</em> rather than to stdout.
<li><tt>jar-file</tt> is the name that you want the resulting JAR 
file to have. You can use any filename for a JAR file. By convention, 
JAR filenames are given a <tt>.jar</tt> extension, though 
this is not required.
<li>The <tt>input-file(s)</tt> argument is a space-delimited list 
of one or more files that you want to be placed in your JAR file. The 
<tt>input-file(s)</tt> argument can contain the wildcard <tt>*</tt> symbol. 
If any of the "input-files" are directories, the contents of those 
directories are added to the JAR archive recursively.
</ul>
<p>
The <tt>c</tt> and <tt>f</tt> options can appear in either  
order, but there must not be any space between them.
<p>
This command will generate a compressed JAR file and place it in the 
current directory. The command will also generate a default 
<a href="manifest.html">manifest file</a> for the JAR archive.
<p>
You can add any of these additional options to the <tt>cf</tt> options 
of the basic command:
<table border=1 cellpadding=3>
<tr><th>Option</th><th>Description</th></tr>
<tr><td align=center><tt>v</tt></td> <td>Produces <em>verbose</em> 
output on stderr (in version 1.1) or stdout (in version 1.2) while 
the JAR file is being built.  The verbose 
output tells you the name of each file as it's added to the JAR file.</td>
</tr>  
<tr><td align=center><tt>0</tt> (zero)</td><td>Indicates that you don't want the JAR 
file to be compressed.</td></tr>
<tr><td align=center><tt>M</tt></td> <td>Indicates that the default manifest file should 
not be produced.</td></tr>
<tr><td align=center><tt>m</tt></td> <td>Used to include manifest information from an 
existing manifest file.  The format for using this option is:
<blockquote><pre>
jar cmf existing-manifest jar-file input-file(s)
</pre></blockquote>
See <a href="mod.html">Modifying a Manifest</a> for more information 
about his option.</td></tr>
<tr><td align=center><tt>-C</tt></td> <td>To change directories during execution of the 
command. Version 1.2 only.  See below for an example.</td></tr>
</table>

<p>
In version 1.1, the JAR-file format supports only ASCII filenames. 
Version 1.2 adds support for UTF8-encoded names.

<a name="example">
<h3>An Example</h3></a>
<blockquote>
Let's look at an example. The 
JDK<font size="-2"><sup>TM</sup></font> demos include 
a simple <tt>TicTacToe</tt> applet.  This demo contains a bytecode class 
file, audio files, and images all housed in a directory called 
<tt>TicTacToe</tt> having this structure:


<blockquote><IMG SRC="http://docs.rinet.ru/Jtuta/figures/jar/jar1.gif" WIDTH="386" HEIGHT="94" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>

The <tt>audio</tt> and <tt>images</tt> subdirectories contain sound 
files and GIF images used by the applet.
<p>
To package this demo into a single JAR file 
named <tt>TicTacToe.jar</tt>, you would run this command from inside 
the <tt>TicTacToe</tt> directory:
<blockquote>
<pre>
jar cvf TicTacToe.jar TicTacToe.class audio images
</pre></blockquote>
The <tt>audio</tt> and <tt>images</tt> arguments represent directories, 
so the Jar tool will recursively place them and their contents in 
the JAR file. 
The generated JAR file <tt>TicTacToe.jar</tt> will be placed in the 
current directory. Because the command used the <tt>v</tt> 
option for verbose output, you'd see something similar to this output 
when you run the command:
<blockquote>
<pre>
adding: TicTacToe.class (in=3825) (out=2222) (deflated 41%)
adding: audio/ (in=0) (out=0) (stored 0%)
adding: audio/beep.au (in=4032) (out=3572) (deflated 11%)
adding: audio/ding.au (in=2566) (out=2055) (deflated 19%)
adding: audio/return.au (in=6558) (out=4401) (deflated 32%)
adding: audio/yahoo1.au (in=7834) (out=6985) (deflated 10%)
adding: audio/yahoo2.au (in=7463) (out=4607) (deflated 38%)
adding: images/ (in=0) (out=0) (stored 0%)
adding: images/cross.gif (in=157) (out=160) (deflated -1%)
adding: images/not.gif (in=158) (out=161) (deflated -1%)
</pre></blockquote>
<p>
You can see from this output that the JAR file <tt>TicTacToe.jar</tt> 
is compressed.  The Jar tool compresses files by default. You 
can turn off the compression feature by using the <tt>0</tt> (zero) option, 
so that the command would look like:
<blockquote>
<pre>
jar cvf0 TicTacToe.jar TicTacToe.class audio images
</pre></blockquote>
<p>
You might want to avoid compression, for example, to increase the 
speed with which a JAR file could be loaded by a browser.  Uncompressed 
JAR files can generally be loaded more quickly than compressed files 
because the need to decompress the files during loading is eliminated. 
However, there's a tradeoff in that download time over a network may 
be longer for larger, uncompressed files.
<p>
The Jar tool will accept arguments that use the wildcard <tt>*</tt> symbol. 
As long as there weren't any unwanted files in the <tt>TicTacToe</tt> 
directory, you could have used this alternative command to construct 
the JAR file:
<blockquote>
<pre>
jar cvf TicTacToe.jar *
</pre></blockquote>
<p>
Though the verbose output doesn't indicate it, the Jar tool 
automatically adds a manifest file 
to the JAR archive with pathname <tt>META-INF/MANIFEST.MF</tt>. 
See the <a href="manifest.html">Understanding the Manifest</a> section for information about 
manifest files.
<p>
In the above example, the files in the archive retained their 
relative pathnames and directory structure. 
The Jar tool in version 1.2 of the Java<font size="-2"><sup>TM</sup></font> 
Development Kit provides the <tt>-C</tt> option that you can use to 
create a JAR file in which the relative paths of the archived files 
are not preserved.  It's modeled after GZIP's <tt>-C</tt> option.
<p>
As an example, suppose you wanted put audio files and gif images used 
by the TicTacToe demo into a JAR file, and that you wanted all the files 
to be on the top level, with no directory hierarchy.  You could 
accomplish that by issuing this command from the parent directory of 
the <tt>images</tt> and <tt>audio</tt> directories:
<blockquote>
<pre>
jar cf ImageAudio.jar -C images * -C audio *
</pre></blockquote>
The <tt>-C&nbsp;images</tt> part of this command directs the Jar tool to 
go to the <tt>images</tt> directory, and the <tt>*</tt> following 
<tt>-C&nbsp;images</tt> directs the Jar tool to 
archive all the contents of that directory. The <tt>-C&nbsp;audio&nbsp;*</tt> 
part of the command then does the same with the 
<tt>audio</tt> directory. The resulting JAR 
file would have this table of contents:
<blockquote>
<pre>
META-INF/MANIFEST.MF
cross.gif
not.gif
beep.au
ding.au
return.au
yahoo1.au
yahoo2.au
</pre></blockquote>
By contrast, suppose that you used a command that didn't employ 
the <tt>-C</tt> option:
<blockquote>
<pre>
jar cf ImageAudio.jar images audio
</pre></blockquote>
The resulting JAR file would have this table of contents:
<blockquote>
<pre>
META-INF/MANIFEST.MF
images/cross.gif
images/not.gif
audio/beep.au
audio/ding.au
audio/return.au
audio/yahoo1.au
audio/yahoo2.au
</pre></blockquote>

</blockquote>


 
</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="index.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="view.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1_1.gif" width=26 height=26 align=top border=0 alt="JAR Files | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Using JAR Files: The Basics</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
