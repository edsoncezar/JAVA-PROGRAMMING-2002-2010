


















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Writing a SimpleBean</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="..\beanbox\index.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="..\properties\index.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1_1.gif" width=26 height=26 align=bottom border=0 alt="JavaBeans | "></a>
</td>
<td align=right>
<a href="..\toc.html#writingbean"><strong><em>Contents</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p>
<h1>
     Writing a SimpleBean
</h1>
<p>
<blockquote>



<p>
In this section you will learn more about Beans and the
BeanBox by
<ul>
 <li>Creating a simple Bean
 <li>Compiling and saving the Bean into a
     Java Archive (JAR) file
 <li>Loading the Bean into the ToolBox
 <li>Dropping a Bean instance into the BeanBox
 <li>Inspecting the Bean's properties, methods, and events
 <li>Generating an introspection report
</ul>

<p>
Your Bean will be named <code>SimpleBean</code>.
Here are the steps to create it and view it in the BeanBox:
<ol>
 <li><b>Write the <code>SimpleBean</code> code</b>. Put it in a file
     named <code>SimpleBean.java</code>, in the directory
     of your choice. Here's the code:
<blockquote>
<pre>   

import java.awt.*;
import java.io.Serializable;
         
public class SimpleBean extends Canvas
                     implements Serializable{
 
  //Constructor sets inherited properties
  public SimpleBean(){
   setSize(60,40);
   setBackground(Color.red);
  }

}
</pre>  
</blockquote>
<p>  
<code>SimpleBean</code> extends the
<a href="http://java.sun.com/products/jdk/1.1/api/java.awt.Canvas.html"><code>java.awt.Canvas</code></a>
component. <code>SimpleBean</code> also implements the
<a href="http://java.sun.com/products/jdk/1.1/api/java.io.Serializable.html">java.io.Serializable</a> interface,
a requirement for all Beans. <code>SimpleBean</code> sets the background
color and component size.

 <p>
 <li><b>Make sure the <code>CLASSPATH</code>
     environment variable is set</b> to point to all
     needed <code>.class</code> (or <code>.jar</code>) files. Here
     are some URLs that will help you to set CLASSPATH correctly:
     <ul>
      <li>The
          <a href="http://java.sun.com/docs/books/tutorial/java/more/managingfiles.html">
          Managing Source and Class Files</a> lesson gives good advice
          on how and <i>when</i> to set your CLASSPATH.

      <li>The JDK Tool Reference Page provides complete CLASSPATH information for both
          <a href="http://java.sun.com/products/jdk/1.1/docs/tooldocs/win32/index.html">Windows</a> and
          <a href="http://java.sun.com/products/jdk/1.1/docs/tooldocs/solaris/index.html">Solaris</a>
          platforms.
     </ul>
     <p>

 <li><b>Compile the Bean:</b>
     <pre>
      javac SimpleBean.java
     </pre>
     This produces the class file <code>SimpleBean.class</code>
     <p>
 <li><b>Create a manifest file</b>. Use your favorite text editor
     to create a file, we'll call it <code>manifest.tmp</code>,
     that contains the following text:
     <pre>
     Name: SimpleBean.class
     Java-Bean: True
     </pre>
 <li><b>Create the JAR file</b>. The JAR file will contain the
     manifest and the <code>SimpleBean</code> class file:
     <pre>
     jar cfm SimpleBean.jar manifest.tmp SimpleBean.class
     </pre>
     See the <a href="http://java.sun.com/docs/books/tutorial/jar/index.html">
     JAR File Format</a> trail, and the  
     <a href="http://java.sun.com/products/jdk/1.1/docs/guide/jar/index.html">
     JDK JAR file documentation</a> for complete information on JAR files.
     <p>

<li><b>Load the JAR file</b> into the ToolBox. Select
     the File|LoadJar... menu item. This will bring up a
     file browser. Navigate to the <code>SimpleBean.jar</code> location and
     select it. <code>SimpleBean</code> will appear at the bottom
     of the ToolBox. (Note that when the BeanBox is
     started, all Beans in JAR files in the
     <code>beans/jars</code> directory are automatically
     loaded into the ToolBox).
     <p>
<li><b>Drop a <code>SimpleBean</code> instance into the BeanBox</b>.
     Click on the word <code>SimpleBean</code> in the ToolBox. The cursor
     will change to a crosshair. Move the cursor to a spot within the
     BeanBox and click. SimpleBean will appear as a
     painted rectangle with a hatched border. This border means
     that <code>SimpleBean</code> is selected. The
     <code>SimpleBean</code> properties will appear in the
     Properties sheet.
</ol>
 
<p>
You can resize <code>SimpleBean</code>, because it inherits from
<code>Canvas</code>, by dragging a corner. You will see the cursor
change to a right angle when over a corner. You can also reposition
<code>SimpleBean</code> within the BeanBox by dragging on any non-corner
portion of the hatched border. You will see the cursor change to crossed
arrows when in  position to move the Bean.

<h3>SimpleBean Makefiles</h3>
<blockquote>
<p>
Below are two makefiles (Unix and Windows) set up to
create <code>SimpleBean</code>.

<blockquote>
<pre>
<hr>
# gnumake file

CLASSFILES= SimpleBean.class

JARFILE= SimpleBean.jar

all: $(JARFILE)

# Create a JAR file with a suitable manifest.
$(JARFILE): $(CLASSFILES) $(DATAFILES)
        echo "Name: SimpleBean.class" >> manifest.tmp
        echo "Java-Bean: True" >> manifest.tmp
        jar cfm $(JARFILE) manifest.tmp *.class
        @/bin/rm manifest.tmp

# Compile the sources
%.class: %.java
        export CLASSPATH; CLASSPATH=. ; \
        javac $&lt;

# make clean
clean:
        /bin/rm -f *.class
        /bin/rm -f $(JARFILE)
<hr>
</pre>
</blockquote>
<p>
Here is the Windows <code>nmake</code> version:
<blockquote>
<hr>
<pre>
# nmake file
CLASSFILES= simplebean.class

JARFILE= simplebean.jar

all: $(JARFILE)

# Create a JAR file with a suitable manifest.

$(JARFILE): $(CLASSFILES) $(DATAFILES)
        jar cfm $(JARFILE) &lt;&lt;manifest.tmp *.class
Name: SimpleBean.class
Java-Bean: True
&lt;&lt;

.SUFFIXES: .java .class

{sunw\demo\simple}.java{sunw\demo\simple}.class :
        set CLASSPATH=.
        javac $&lt;

clean:
        -del sunw\demo\simple\*.class
        -del $(JARFILE)
</pre>
<hr>
</blockquote>
<p>

You can use these makefiles as templates for creating your own
Bean makefiles. The example Bean makefiles, in the
<code>beans/demo</code> directory, also show you how to use
makefiles to build and maintain your Beans.
</blockquote>
<p> 

<h3>Inspecting SimpleBean Properties and Events</h3>
<blockquote>
<p>
The Properties sheet displays the selected Bean's properties.
With <code>SimpleBean</code> selected, the Properties
sheet displays four propeties: <code>foreground</code>,
<code>background</code>, <code>font</code>, and <code>name</code>.
We declared no properties in <code>SimpleBean</code>
(see the <a href="..\properties\index.html"> Properties</a> section to learn 
how to declare properties), so these are properties inherited from
<code>Canvas</code>. Clicking on each property brings up a property
editor. The BeanBox provides default property editors
for the primitive types, plus <code>Font</code> and <code>Color</code>
types. You can find the sources for these property editors in
<code>beans/apis/sun/beans/editors</code>.
 
<p>
Beans communicate with other Beans by sending and
receiving event notifications.
To see which events <code>SimpleBean</code> can send, choose
the Edit|Events BeanBox menu item. A list of events,
grouped by the Java interface in which the event method is
declared, will be displayed. Under each interface
group is a list of event methods. These are all
inherited from Canvas.
 
<p>
You will learn more about 
<a href="..\properties\properties.html">properties</a> and
<a href="..\events\index.html">events</a> in 
upcoming sections.
</blockquote>
 
<h3><a name=report>Generating Bean Introspection Reports</a></h3>
<blockquote>
<p>
Introspection is the process of discovering a
Bean's design-time features by one of two
methods:
<ul>
  <li>Low-level reflection, which uses design
      patterns to discover your Bean's features
  <li>By examining an associated
      <a href="..\beaninfo\index.html"><i>bean information</i></a>
      class that explicitly describes your Bean's features.
</ul>

<p>
You can generate a Bean introspection report
by choosing the the Edit|Report menu item. The
report lists Bean events, properties, and methods,
and their characteristics.

<p>
By default Bean reports are sent
to the <code>java</code> interpreter's standard output, which is the window
where you started the BeanBox. You can redirect the
report to a file by changing the java interpreter
command in <code>beanbox/run.sh</code> or
<code>run.bat</code> to:
<blockquote>
<pre>
java sun.beanbox.BeanBoxFrame &gt; beanreport.txt
</pre>
</blockquote>

</blockquote>
<p>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="..\beanbox\index.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="..\properties\index.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1_1.gif" width=26 height=26 align=top border=0 alt="JavaBeans | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Writing a SimpleBean</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
