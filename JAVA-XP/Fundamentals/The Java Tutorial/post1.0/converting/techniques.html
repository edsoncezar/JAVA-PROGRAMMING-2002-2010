


















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Special Coding Techniques</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="converting.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="convertingio.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1_1.gif" width=26 height=26 align=bottom border=0 alt="To 1.1 -- And Beyond! | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Migrating to 1.1</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Special Coding Techniques
</h2>
<p>
<blockquote>

This section discusses two techniques
for writing code
that can optionally use 1.1 API
while remaining compatible with 1.0.
If 1.0 compatibility isn't an issue for you,
then skip this section.

<p>

The first technique lets your program
dynamically determine whether to invoke 1.0 or 1.1 API.
The second technique
lets you override deprecated methods
without causing compiler warnings.


<h4>
<a name="mixedcode">
Mixing 1.0 and 1.1 Code in a 1.0-Compatible Program
</a>
</h4>
<blockquote>
This technique consists of enclosing a 1.1 method invocation 
in a <code>try</code> statement and
putting alternative 1.0 code in the corresponding <code>catch</code> statement.
Here's an example:

<blockquote>
<pre>
//Draw an unclosed polygon.
try {
    g.drawPolyline(xPoints, yPoints, numPoints); //1.1 API
} catch (NoSuchMethodError e) {
    g.drawPolygon(xPoints, yPoints, numPoints);  //1.0 equivalent
}
</pre>
</blockquote>


</blockquote>
<h4>
<a name="override">
Overriding Deprecated Methods
</a>
</h4>
<blockquote>

You might find yourself in the following situation:

<ul> 
<li> You're writing 1.1-based code.
<li> It can be called by 1.0 code.
<li> You need to override a method that has been deprecated.
</ul>

In this situation,
you might wonder which version of the method you should override:
the deprecated method or its replacement.
If you simply override the replacement,
then your code won't work correctly
with 1.0 code that calls it.
(If no 1.0 code will call the method,
then this solution is fine.)
If you simply override the deprecated version,
then you'll see compilation warnings
and you'll have 1.0 dependencies 
embedded in your code.

<p>

The solution is to override <em>both</em> methods.
Override the deprecated method so that
it calls the replacement method,
and override the replacement method
to provide the appropriate functionality.
In your implementation of the deprecated method,
use the <code>@deprecated</code> documentation tag
to indicate that you are intentionally overriding the method
to provide backwards compatibility.
For example:

<blockquote>
<pre>
/** @deprecated */
public Dimension preferredSize() {
    return getPreferredSize();
}

public Dimension getPreferredSize() {
    <em>...//implementation goes here</em>
}
</pre>
</blockquote>

This solution takes advantage of a loophole:
The compiler doesn't warn you when you override
a deprecated method
<em>and</em>
you mark the overriding method as deprecated.
For example, the preceding code results in no warnings when compiled.
However, if code that <em>calls</em> the preceding code
is compiled,
a deprecation warning occurs.

<p>

The solution described in this section
helps you write code that 
is backwards compatible,
compiles cleanly, and
is easy to understand.
When you no longer have to provide 1.0 compatibility,
it'll be easy to find and remove the deprecated code.
</blockquote>


</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="converting.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="convertingio.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/jdk1_1.gif" width=26 height=26 align=top border=0 alt="To 1.1 -- And Beyond! | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Migrating to 1.1</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
