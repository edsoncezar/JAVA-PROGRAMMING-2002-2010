


















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Convenience Implementations</title>
</head>
<body BGCOLOR="#ffffff">










<table width="100%">
<tr>
<td align=left>
<a href="wrapper.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="..\algorithms\index.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/security1_2Header.gif" width=26 height=26 align=bottom border=0 alt="Collections | "></a>
</td>
<td align=right>
<a href="..\toc.html#implementations"><strong><em>Contents</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/Jtuta/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p>
<h1>
     Convenience Implementations
</h1>
<p>
<blockquote>

This section describes several mini-implementations that can be more
convenient and more efficient then the general purpose implementations
when you don't need the full power of a general purpose implementation.
All of the implementations in this section are made available via
static factory methods or exported constants, rather than public classes.

<h4>List-view of an Array</h4>
<blockquote>
The
<a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Arrays.html#asList"><code>Arrays.asList</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Arrays.html#asList"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>method returns a <code>List</code>-view of its array argument.  Changes to
the <code>List</code> write through to the array and vice-versa.  The size of 
the collection is that of the array, and cannot be changed.  If the
<code>add</code> or <code>remove</code> method is called on the
<code>List</code>, an <code>UnsupportedOperationException</code> will result.
<p>
The normal use of this implementation is as a bridge between array-based and
collection-based APIs.  It allows you to pass an array to a method expecting a
<code>Collection</code> or a <code>List</code>.  However, this implementation
has another use.  If you need a fixed-size <code>List</code>, it's more
efficient than any general-purpose <code>List</code> implementation.  Here's
the idiom:
<blockquote>
<pre>    List l = Arrays.asList(new Object[size]);</blockquote></pre>
Note that a reference to the backing array is not retained.
</blockquote>

<h4>Immutable Multiple-Copy List</h4>
<blockquote>
Occasionally you'll need an immutable <code>List</code> consisting of multiple
copies of the same element.  The
<a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Collections.html#nCopies"><code>Collections.nCopies</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Collections.html#nCopies"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>method returns such a <code>List</code>.  This implementation has two
main uses.  The first is to initialize a newly created <code>List</code>.  For
example, suppose you want an <code>ArrayList</code> initially consisting of
1000 null elements.  The following incantation does the trick:
<blockquote>
<pre>    List l = new ArrayList(Collections.nCopies(1000, null));</pre>
</blockquote>
Of course, the initial value of each element needn't be null.
The second main use is to grow an existing <code>List</code>.
For example, suppose you want to add 69 copies of the string
<code>fruit bat</code> to the end of a <code>List</code>.  It' not clear why you'd want
to do such a thing, but let's just suppose you did.  Here's how you'd do it:
<blockquote>
<pre>    lovablePets.addAll(Collections.nCopies(69, "fruit bat"));</pre>
</blockquote>
By using the form of <code>addAll</code> that takes an index as well as a
<code>Collection</code>, you can add the new elements to the middle of a
<code>List</code> instead of at the end.
</blockquote>

<h4>Immutable Singleton Set</h4>
<blockquote>
Sometimes you'll need an immutable <i>singleton</i> <code>Set</code>,
which consists of a single, specified element.  The
<a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Collections.html#singleton"><code>Collections.singleton</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Collections.html#singleton"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>method returns such a <code>Set</code>.  One use of this implementation
is this idiom to remove all occurrences of a specified element from
a <code>Collection</code>:
<blockquote>
<pre>    c.removeAll(Collections.singleton(e));</pre>
</blockquote>
There's a related idiom to remove from a <code>Map</code> all elements that
map to a specified value.  For example, suppose you have a <code>Map</code>,
<code>profession</code>, that maps people to their line of work.  Suppose you
want to eliminate all of the lawyers.  This one-liner will do the deed:
<blockquote>
<pre>    profession.values().removeAll(Collections.singleton(LAWYER));</pre>
</blockquote>
One more use of this implementation is to provide a single input value to a
method that is written to accept a <code>Collection</code> of values.
</blockquote>

<h4>Empty Set and Empty List Constants</h4>
<blockquote>
The <code>Collections</code> class provides two constants, representing the
empty <code>Set</code> and the empty <code>List</code>,
<a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Collections.html#EMPTY_SET"><code>Collections.EMPTY_SET</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Collections.html#EMPTY_SET"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>and
<a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Collections.html#EMPTY_LIST"><code>Collections.EMPTY_LIST</code></a><a target="_top" href="http://java.sun.com/products/jdk/1.2/docs/api/java.util.Collections.html#EMPTY_LIST"><img src="http://docs.rinet.ru/Jtuta/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>.  It's not clear that these constants really qualify as implementations, but
this lesson seemed like as good a place to mention them as any.  The main use
of these constants is as input to methods that take a <code>Collection</code>
of values, when you don't want to provide any values at all.

</blockquote>
</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="wrapper.html"><img src="http://docs.rinet.ru/Jtuta/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="..\algorithms\index.html"><img src="http://docs.rinet.ru/Jtuta/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="..\..\trailmap.html"><img src="http://docs.rinet.ru/Jtuta/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/Jtuta/images/security1_2Header.gif" width=26 height=26 align=top border=0 alt="Collections | "></a>
</td>
<td align=right>
<a href="..\toc.html#implementations"><strong><em>Contents</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
