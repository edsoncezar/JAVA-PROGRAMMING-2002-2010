<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Swing and Java 2D</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="375-379.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="382-387.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>Plan to add three buttons to your toolbar, and that raises a problem. Because the toolbar is a composite of controls, calling <TT>e.getSource()</TT> in an <TT>actionPerformed()</TT> method does <I>not</I> return the button that was clicked. How can you determine which button was clicked? You can do that by setting up a separate action listener for each button.</P>
<P>You can call your new action listener class <TT>Command</TT>, and pass an ID value for the current button (1 for the first button, 2 for the second, and so on) to <TT>Command</TT>&#146;s constructor, as well as a <TT>this</TT> keyword, so you can reach the applet object from the Command class (you need to reach the applet object so you can place text into the applet&#146;s text field):</P>
<PRE>
    public void init() &#123;

        JToolBar toolBar = new JToolBar();

        JButton button1 = new JButton("Button 1", new &#8658;
 ImageIcon("image.jpg"));
&#8594;        Command command1 = new Command(1, this);
           .
           .
           .
</PRE>
<P>Having created the new action listener object for the first button, add that object to that button, then add the button to the toolbar itself this way:
</P>
<PRE>
    public void init() &#123;

        JToolBar toolBar = new JToolBar();

        JButton button1 = new JButton("Button 1", new &#8658;
 ImageIcon("image.jpg"));
        Command command1 = new Command(1, this);
&#8594;       button1.addActionListener(command1);
&#8594;       toolBar.add(button1);
           .
           .
           .
</PRE>
<P>Then we do the same for the second and third buttons, finally adding the prepared toolbar to the applet as well as the text field:
</P>
<PRE>
    public void init() &#123;

        JToolBar toolBar = new JToolBar();

        JButton button1 = new JButton("Button 1",
 new ImageIcon("image.jpg"));
        Command command1 = new Command(1, this);
        button1.addActionListener(command1);
        toolBar.add(button1);

&#8594;        JButton button2 = new JButton("Button 2", new &#8658;
 ImageIcon("image.jpg"));
&#8594;        Command command2 = new Command(2, this);
&#8594;        button2.addActionListener(command2);
&#8594;        toolBar.add(button2);
&#8594;
&#8594;        JButton button3 = new JButton("Button 3", new &#8658;
 ImageIcon("image.jpg"));
&#8594;        Command command3 = new Command(3, this);
&#8594;        button3.addActionListener(command3);
&#8594;        toolBar.add(button3);
&#8594;
&#8594;        add(toolBar);
&#8594;
&#8594;        text = new TextField(20);
&#8594;        add(text);
    &#125;
</PRE>
<P>Now you&#146;re ready to design your Command action listener class.
</P>
<H4 ALIGN="LEFT"><A NAME="Heading7"></A><FONT COLOR="#000077">Designing the Command Action Listener Class</FONT></H4>
<P>You need to take two parameters in the <TT>Command</TT> class&#146;s constructor: the ID for the current button and a <TT>this</TT> keyword pointing to the applet object. You store those items this way in the <TT>Command</TT> object:</P>
<PRE>
 class Command implements ActionListener &#123;

&#8594;    int commandID;
&#8594;    SwingToolbar toolbarApplet;

    public Command(int commandID, SwingToolbar toolbarApplet)&#123;
&#8594;        this.commandID = commandID;
&#8594;        this.toolbarApplet = toolbarApplet;
    &#125;
</PRE>
<P>Now that you&#146;ve given each button its own ID value, you can check that ID with a <TT>switch</TT> statement in <TT>Command&#146;s</TT> <TT>actionPerformed()</TT> method:</P>
<PRE>
    class Command implements ActionListener &#123;

    int commandID;
    SwingToolbar toolbarApplet;

    public Command(int commandID, SwingToolbar toolbarApplet)&#123;
        this.commandID = commandID;
        this.toolbarApplet = toolbarApplet;
    &#125;

    public void actionPerformed(ActionEvent e)&#123;
&#8594;        switch(commandID) &#123;
&#8594;            case 1:
              .
              .
              .
&#8594;            case 2:
              .
              .
              .
&#8594;            case 3:
              .
              .
              .
        &#125;
    &#125;
</PRE>
<P>After you identify the button&#146;s ID, you can place the matching message, &#147;Button 1 clicked.&#148;, &#147;Button 2 clicked.&#148;, and so on, into the applet&#146;s text box. You reach the applet object this way, placing the correct message in the text field there:
</P>
<PRE>
    public void actionPerformed(ActionEvent e)&#123;
        switch(commandID) &#123;
            case 1:
&#8594;               toolbarApplet.text.setText("Button 1 clicked.");
&#8594;                break;
            case 2:
&#8594;               toolbarApplet.text.setText("Button 2 clicked.");
&#8594;                break;
            case 3:
&#8594;               toolbarApplet.text.setText("Button 3 clicked.");
&#8594;                break;
        &#125;
    &#125;
</PRE>
<P>And that&#146;s it&#151;open the applet in the applet viewer now, as shown in Figure 12.6. As you can see in that figure, your three buttons appear with their images in the toolbar. Clicking one of the buttons displays the appropriate message, as also shown in Figure 12.6. Your toolbar example is a success.
</P>
<P><A NAME="Fig8"></A><A HREF="images\12-08.jpg"><IMG SRC="images\12-08t.jpg"></A>
<BR><A HREF="images\12-08.jpg"><FONT COLOR="#000077"><B>FIGURE 12.6:</B></FONT></A>&nbsp;&nbsp;Using a Swing toolbar<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="375-379.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="382-387.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

