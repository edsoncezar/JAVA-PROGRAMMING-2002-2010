<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Setting and Modifying Text and Fonts</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="405-410.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="414-420.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>The next step is to set up the variables <TT>fontname</TT>, <TT>type</TT>, and <TT>size</TT> according to how the user wants them so that you can use them to set up the <TT>Font</TT> object. To do so, just check the various boolean flags you have set up and set these three variables accordingly:</P>
<PRE>
 public void paint(Graphics g)
 &#123;
       String fontname = "Roman";
       int type = Font.PLAIN;
       int size = 24;
       Font font;

&#8594;      if(bBoldFlag)&#123;
            type = type | Font.BOLD;
&#8594;      &#125;
&#8594;      if(bItalicFlag)&#123;
&#8594;           type = type | Font.ITALIC;
&#8594;      &#125;
&#8594;      if(bLargeFlag)&#123;
&#8594;           size = 48;
&#8594;      &#125;
&#8594;      if(bRomanFlag)&#123;
&#8594;           fontname = "Roman";
&#8594;      &#125;
&#8594;      if(bCourierFlag)&#123;
&#8594;           fontname = "Courier";
&#8594;      &#125;         .
                 .
                 .
</PRE>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>TIP:&nbsp;&nbsp;</B>Because text can be italic and bold at the same time, you can use the bitwise OR operator <TT>(|)</TT> to combine font types. For example, valid font types include: <TT>Font.PLAIN | Font.ITALIC</TT> or <TT>Font.BOLD | Font.ITALIC</TT>.<HR></FONT>
</BLOCKQUOTE>
<P>At this point, then, you have the font&#146;s name, its size, and its type (i.e., plain or bold, italic or not). Now create the <TT>Font</TT> object, and install it in your <TT>Graphics</TT> object using the <TT>setFont()</TT> method as follows:</P>
<PRE>
 public void paint(Graphics g)
 &#123;
      String fontname = "Roman";
      int type = Font.PLAIN;
      int size = 24;
      Font font;

      if(bBoldFlag)&#123;
           type = type | Font.BOLD;
      &#125;         .
                .
                .
&#8594;     font = new Font(fontname, type, size);
&#8594;     g.setFont(font);
 &#125;
</PRE>
<P>And now the font the user selected, in the font style they want, is installed. When you draw text in the <TT>Graphics</TT> object with <TT>drawString()</TT>, the text will appear in this new font.</P>
<P>However, suppose you want to do more&#151;suppose you want to make sure the text appears centered in the applet. You can do that with a <TT>FontMetrics</TT> object, which you&#146;ll learn about next.</P>
<H3><A NAME="Heading5"></A><FONT COLOR="#000077">Working with the <I>FontMetrics</I> Class
</FONT></H3>
<P>To make sure your text string is centered in the applet, you have to know how much space the string will take up on the screen, both horizontally and vertically. You can do that with a <TT>FontMetrics</TT> object (in addition, you&#146;ll have to find out how wide and how tall your applet is in pixels). First, add a new <TT>FontMetrics</TT> object to your applet:</P>
<PRE>
&#8594;import java.applet.Applet;
 import java.awt.*;
 import java.awt.event.*;

 public class scribbler extends Applet implements ActionListener,
 KeyListener &#123;

     String text = "";
     int x = 0;
     int y = 0;

     Button boldbutton, italicbutton, largebutton;
     Button romanbutton, courierbutton, clearbutton;
     boolean bBoldFlag = false;
     boolean bItalicFlag = false;
     boolean bLargeFlag = false;
     boolean bRomanFlag = true;
     boolean bCourierFlag = false;
&#8594;    FontMetrics fontmetrics;
          .
          .
          .
</PRE>
<P>Then create this <TT>FontMetrics</TT> object, passing it the <TT>font</TT> object you set up so it will be able to return information about strings displayed in that font:</P>
<PRE>
     public void paint(Graphics g)
     &#123;
          String fontname = "Roman";
          int type = Font.PLAIN;
          int size = 24;
          Font font;

          if(bBoldFlag)&#123;
               type = type | Font.BOLD;
          &#125;
          if(bItalicFlag)&#123;
               type = type | Font.ITALIC;
          &#125;
          if(bLargeFlag)&#123;
               size = 48;
          &#125;
          if(bRomanFlag)&#123;
               fontname = "Roman";
          &#125;
          if(bCourierFlag)&#123;
               fontname = "Courier";
          &#125;

          font = new Font(fontname, type, size);
          g.setFont(font);

&#8594;         fontmetrics = getFontMetrics(font);
               .
               .
               .
</PRE>
<P>The <TT>FontMetric</TT> class methods appear in Table 13.2.</P>
<TABLE WIDTH="100%"><CAPTION ALIGN=LEFT><B>Table 13.2:</B> The <TT>FontMetric</TT> class methods
<TR>
<TH COLSPAN="2"><HR>
<TR>
<TH WIDTH="35%" ALIGN="LEFT">Method
<TH WIDTH="65%" ALIGN="LEFT">Does This
<TR>
<TH COLSPAN="2"><HR>
<TR>
<TD><TT>FontMetrics(Font)</TT>
<TD>Creates a <TT>FontMetrics</TT> object using given font
<TR>
<TD><TT>bytesWidth(byte[], int, int)</TT>
<TD>Returns the width of a byte array
<TR>
<TD><TT>charWidth(int)</TT>
<TD>Gets the width of a given character
<TR>
<TD><TT>charWidth(char)</TT>
<TD>Gets the width of a given character
<TR>
<TD><TT>charsWidth(char[], int, int)</TT>
<TD>Gets the width of the character array
<TR>
<TD><TT>getAscent()</TT>
<TD>Gets the font ascent
<TR>
<TD><TT>getDescent()</TT>
<TD>Gets the font descent
<TR>
<TD><TT>getFont()</TT>
<TD>Gets the font
<TR>
<TD><TT>getHeight()</TT>
<TD>Gets the total height of this font
<TR>
<TD><TT>getLeading()</TT>
<TD>Gets the standard line spacing for this font
<TR>
<TD><TT>getMaxAdvance()</TT>
<TD>Gets the maximum advance width of any character
<TR>
<TD><TT>getMaxAscent()</TT>
<TD>Gets the maximum ascent of characters
<TR>
<TD><TT>getMaxDescent()</TT>
<TD>Gets the maximum descent of characters
<TR>
<TD><TT>getWidths()</TT>
<TD>Gets the widths of the first 256 characters
<TR>
<TD><TT>stringWidth(String)</TT>
<TD>Gets the width of a given string
<TR>
<TD><TT>toString()</TT>
<TD>Gets the string representation for an object
<TR>
<TD COLSPAN="2"><HR>
</TABLE>
<H4 ALIGN="LEFT"><A NAME="Heading6"></A><FONT COLOR="#000077">Getting the Width of a Text String</FONT></H4>
<P>Now you can retrieve the width of the text this way:
</P>
<PRE>
 width = fontmetrics.stringWidth(text);
</PRE>
<P>and the height this way:
</P>
<PRE>
 height = fontmetrics.getHeight();
</PRE>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>The height of the line of text is a constant&#151;it&#146;s not dependent on the string length&#151;so you don&#146;t have to pass the line of text itself to the <TT>getHeight()</TT> method.<HR></FONT>
</BLOCKQUOTE>
<P>You&#146;ll also need the height and width of your applet, and you&#146;ll find those values with the <TT>Applet</TT> method <TT>size()</TT>, which returns an object of the Java <TT>Dimension</TT> class. The <TT>width</TT> and <TT>height</TT> members of this <TT>Dimension</TT> object will give you the width and height of your applet.</P>
<P>The last thing to keep in mind is that when you pass the location of a string to <TT>drawString()</TT> so that it can appear on the screen, the location you pass is actually the bottom left of the string on the screen&#151;<I>not</I> the top left as many Windows programmers expect.</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="405-410.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="414-420.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

