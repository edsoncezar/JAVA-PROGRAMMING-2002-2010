<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Setting and Modifying Text and Fonts</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="398-401.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="405-410.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>So far, then, you&#146;ve made your Bold, Italic, Large, Roman, and Courier buttons active. All that remains is to activate the Clear Text button, which the user clicks when they want to clear the text they&#146;ve typed. You can store that text in a <TT>String</TT> object named <TT>text</TT>:</P>
<PRE>
 import java.applet.Applet;
 import java.awt.*;
 import java.awt.event.*;

 public class scribbler extends Applet implements ActionListener &#123;

&#8594;       String text = ;

        Button boldbutton, italicbutton, largebutton;
        Button romanbutton, courierbutton, clearbutton;
        boolean bBoldFlag = false;
        boolean bItalicFlag = false;
        boolean bLargeFlag = false;
        boolean bRomanFlag = true;
        boolean bCourierFlag = false;
            .
            .
            .
</PRE>
<P>And now you should clear the <TT>text</TT> object by simply setting it to a null or empty string when the user clicks the Clear button:</P>
<PRE>
     public void actionPerformed(ActionEvent event)&#123;
          if(event.getSource() == boldbutton)&#123;
               bBoldFlag = !bBoldFlag;
               requestFocus();
          &#125;
          if(event.getSource() == italicbutton)&#123;
               bItalicFlag = !bItalicFlag;
               requestFocus();
          &#125;
          if(event.getSource() == largebutton)&#123;
               bLargeFlag = !bLargeFlag;
               requestFocus();
          &#125;
          if(event.getSource() == romanbutton)&#123;
               bRomanFlag = true;
               bCourierFlag = false;
               requestFocus();
          &#125;
          if(event.getSource() == courierbutton)&#123;
               bCourierFlag = true;
               bRomanFlag = false;
               requestFocus();
          &#125;
&#8594;          if(event.getSource() == clearbutton)&#123;
&#8594;               text = "";
&#8594;               requestFocus();
&#8594;         &#125;
          repaint();
     &#125;
</PRE>
<P>Note that you also include a call to <TT>repaint()</TT> at the end of the <TT>action</TT> method. This is so the user can see the result of clicking a button immediately, without having to wait for the new key to be struck. And that brings us to the question, just how do we read direct keyboard input in Java?</P>
<H3><A NAME="Heading3"></A><FONT COLOR="#000077">Working with the Keyboard</FONT></H3>
<P>So far, you&#146;ve used text fields and text areas to handle all of your keyboard input. It is possible, however, to read keys directly in Java using the <TT>keyTyped()</TT> method. To use this method, you have to implement the KeyListener interface, and you do that as follows:</P>
<PRE>
 import java.applet.Applet;
 import java.awt.*;
 import java.awt.event.*;

&#8594;public class scribbler extends Applet implements ActionListener,
 KeyListener &#123;

     String text = "";

     Button boldbutton, italicbutton, largebutton;
     Button romanbutton, courierbutton, clearbutton;
     boolean bBoldFlag = false;
     boolean bItalicFlag = false;
     boolean bLargeFlag = false;
     boolean bRomanFlag = true;
     boolean bCourierFlag = false;

     public void init()
     &#123;
          boldbutton = new Button("Bold font");
          boldbutton.addActionListener(this);

          italicbutton = new Button("Italic font");
          italicbutton.addActionListener(this);

          largebutton = new Button("Large font");
          largebutton.addActionListener(this);

          romanbutton = new Button("Roman font");
          romanbutton.addActionListener(this);

          courierbutton = new Button("Courier font");
          courierbutton.addActionListener(this);

          clearbutton = new Button("Clear text");
          clearbutton.addActionListener(this);

          add(boldbutton);
          add(italicbutton);
          add(largebutton);
          add(romanbutton);
          add(courierbutton);
          add(clearbutton);

&#8594;         addKeyListener(this);
          requestFocus();
     &#125;
</PRE>
<P>Now you&#146;re ready to add the three key-handling methods of the KeyListener interface, <TT>keyTyped()</TT>, <TT>keyPressed()</TT>, and <TT>keyReleased()</TT>, each of which is passed a <TT>KeyEvent</TT> object:</P>
<PRE>
     public void keyTyped(KeyEvent e) &#123;&#125;

     public void keyPressed(KeyEvent e) &#123;&#125;

     public void keyReleased(KeyEvent e) &#123;&#125;
</PRE>
<P>We&#146;ll use the <TT>keyTyped()</TT> method here:</P>
<PRE>
     public void keyTyped(KeyEvent e) &#123;
                    .
                    .
                    .
     &#125;
</PRE>
<P>Here, you want to add the just-typed key to the string of text you already have in memory: the <TT>String</TT> object named <TT>text</TT>. You get that key by using the KeyEvent <TT>getKeyChar()</TT> method, and you add it to the text string the user has already typed as follows:</P>
<PRE>
     public void keyTyped(KeyEvent e) &#123;
&#8594;          text = text &#43; e.getKeyChar();
                    .
                    .
                    .
     &#125;
</PRE>
<P>The real work of the applet is done in the<TT> paint()</TT> method, and you can force a paint event now with the <TT>repaint()</TT> method:</P>
<PRE>
     public void keyTyped(KeyEvent e) &#123;
          text = text &#43; e.getKeyChar();
&#8594;         repaint();
     &#125;
</PRE>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>Unless you are familiar with C&#43;&#43;, you may be surprised to see a line like
<PRE>
text = text &#43; e.getKeyChar();
</PRE>
<P>because <TT>text</TT> is an object of the Java <TT>String</TT> class. However, in Java and in C&#43;&#43;, operators like the <TT>&#43;</TT> operator can be overloaded to work with objects of various classes. The <TT>&#43;</TT> operator is overloaded to work with <TT>String</TT> objects.<HR></FONT>
</BLOCKQUOTE>
</P>
<P>Let&#146;s write the <TT>paint()</TT> method now; that&#146;s where the guts of this applet are.</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="398-401.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="405-410.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

