<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Adding Scroll Bars</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="143-147.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="152-156.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>The first step is to set the scroll bar&#146;s thumb position to the place the user scrolled it to. That might seem funny, but it turns out that unless you update the scroll bar&#146;s thumb yourself, it will spring back when the user releases it to the position it occupied before it was scrolled. The reason that you have to move it yourself is that the user may have moved the thumb to some location you consider &#147;forbidden,&#148; and Java allows you the option of not accepting the user&#146;s scroll actions in that case. To set the thumb&#146;s new location, use the <TT>Scrollbar</TT> class&#146;s <TT>setValue()</TT> method, and to get its current value, use the <TT>getValue()</TT> method. To place the thumb at the location the user moved it to, execute this code:</P>
<PRE>
  import java.applet.Applet;
  import java.awt.event.*;
  import java.awt.*;

  public class scroller extends Applet implements AdjustmentListener &#123;

      TextField text1;
      Scrollbar scroll1, scroll2;

      public void init()&#123;
           text1 = new TextField(20);
           add(text1);
           scroll1 = new Scrollbar(Scrollbar.HORIZONTAL, 1, 10, 1, 100);
           add(scroll1);
           scroll1.addAdjustmentListener(this);
           scroll2 = new Scrollbar(Scrollbar.VERTICAL, 1, 10, 1, 100);
           add(scroll2);
           scroll2.addAdjustmentListener(this);
      &#125;

      public void adjustmentValueChanged(AdjustmentEvent e)&#123;
           if(e.getAdjustable() == scroll1) &#123;
&#8594;          scroll1.setValue(scroll1.getValue());
                          .
                          .
                          .
           &#125;
      &#125;
  &#125;
</PRE>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>WARNING:&nbsp;&nbsp;</B>Don&#146;t forget to set the scroll bar thumb to its new value when it has been scrolled, or it will appear to &#147;jump&#148; back on its own when the user releases it.<HR></FONT>
</BLOCKQUOTE>
<P>Because <TT>scroll1</TT>, the horizontal scroll bar, was scrolled, we need to display the new setting of that scroll bar in the text field <TT>text1</TT> . To do so, convert the value of <TT>scroll1</TT> to an integer and display it in <TT>text1</TT> this way:</P>
<PRE>
  import java.applet.Applet;
  import java.awt.event.*;
  import java.awt.*;

  public class scroller extends Applet implements AdjustmentListener &#123;

      TextField text1;
      Scrollbar scroll1, scroll2;

      public void init()&#123;
           text1 = new TextField(20);
           add(text1);
           scroll1 = new Scrollbar(Scrollbar.HORIZONTAL, 1, 10, 1, 100);
           add(scroll1);
           scroll1.addAdjustmentListener(this);
           scroll2 = new Scrollbar(Scrollbar.VERTICAL, 1, 10, 1, 100);
           add(scroll2);
           scroll2.addAdjustmentListener(this);
      &#125;

      public void adjustmentValueChanged(AdjustmentEvent e)&#123;
           if(e.getAdjustable() == scroll1) &#123;
                scroll1.setValue(scroll1.getValue());
&#8594;               text1.setText("Horizontal position: " &#43;
 scroll1.getValue());
           &#125;
      &#125;
  &#125;
</PRE>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>TIP:&nbsp;&nbsp;</B>You can concatenate&#151;that is, join&#151;strings in Java with the &#43; operator as in the line <TT>text1.setText(&#147;horizontal position:&#148; &#43; scroll1.getValue());</TT>.<HR></FONT>
</BLOCKQUOTE>
<P>Do the same for <TT>scroll2</TT> as you did for <TT>scroll1</TT> with the following code to display <TT>scroll2</TT>&#146;s value:</P>
<PRE>
  import java.applet.Applet;
  import java.awt.event.*;
  import java.awt.*;

  public class scroller extends Applet implements AdjustmentListener &#123;

      TextField text1;
      Scrollbar scroll1, scroll2;

      public void init()&#123;
           text1 = new TextField(20);
           add(text1);
           scroll1 = new Scrollbar(Scrollbar.HORIZONTAL, 1, 10, 1, 100);
           add(scroll1);
           scroll1.addAdjustmentListener(this);
           scroll2 = new Scrollbar(Scrollbar.VERTICAL, 1, 10, 1, 100);
           add(scroll2);
           scroll2.addAdjustmentListener(this);
      &#125;

      public void adjustmentValueChanged(AdjustmentEvent e)&#123;
           if(e.getAdjustable() == scroll1) &#123;

                scroll1.setValue(scroll1.getValue());
                text1.setText("Horizontal position: " &#43;
 scroll1.getValue()); &#125;
&#8594;          if(e.getAdjustable() == scroll2) &#123;
&#8594;               scroll2.setValue(scroll2.getValue());
&#8594;               text1.setText("Vertical position: " &#43;
 scroll2.getValue());
&#8594;          &#125;
      &#125;
  &#125;
</PRE>
<P>Your scroll bar applet is ready to go. As shown below, the user can move the scroll bar thumbs, and their new position will be reported in the text fields. Your scrolling applet is a success! The code for this applet appears in <TT>scroller.java</TT>.</P>
<P><A NAME="Fig3"></A><A HREF="images\06-03.jpg"><IMG SRC="images\06-03t.jpg"></A></P>
<P><B>scroller.java</B></P>
<PRE>
  import java.applet.Applet;
  import java.awt.event.*;
  import java.awt.*;

  public class scroller extends Applet implements AdjustmentListener &#123;

      TextField text1;
      Scrollbar scroll1, scroll2;

      public void init()&#123;
           text1 = new TextField(20);
           add(text1);
           scroll1 = new Scrollbar(Scrollbar.HORIZONTAL, 1, 10, 1, 100);
           add(scroll1);
           scroll1.addAdjustmentListener(this);
           scroll2 = new Scrollbar(Scrollbar.VERTICAL, 1, 10, 1, 100);
           add(scroll2);
           scroll2.addAdjustmentListener(this);
      &#125;
      public void adjustmentValueChanged(AdjustmentEvent e)&#123;
           if(e.getAdjustable() == scroll1) &#123;
                scroll1.setValue(scroll1.getValue());
                text1.setText("Horizontal position: " &#43;
 scroll1.getValue());
           &#125;
           if(e.getAdjustable() == scroll2) &#123;
                scroll2.setValue(scroll2.getValue());
           &#125;
      &#125;
  &#125;
</PRE>
<P>There is a special Java layout manager&#151;the BorderLayout manager&#151;that is perfect for use with scroll bars, although even many Java experts do not know about it. Let&#146;s use this layout to add power to the following applet.
</P>
<H3><A NAME="Heading5"></A><FONT COLOR="#000077">Using Scroll Bars and BorderLayouts</FONT></H3>
<P>The BorderLayout manager will allow you to surround your applet with scroll bars, as shown in Figure 6.3. When the user scrolls the horizontal or vertical scroll bars, you can report the new settings of the changed scroll bar in the text field, as shown in Figure 6.4.
</P>
<P><A NAME="Fig4"></A><A HREF="images\06-04.jpg"><IMG SRC="images\06-04t.jpg"></A>
<BR><A HREF="images\06-04.jpg"><FONT COLOR="#000077"><B>FIGURE 6.3</B></FONT></A>&nbsp;&nbsp;Using the BorderLayout manager to place the scroll bars</P>
<P><A NAME="Fig5"></A><A HREF="images\06-05.jpg"><IMG SRC="images\06-05t.jpg"></A>
<BR><A HREF="images\06-05.jpg"><FONT COLOR="#000077"><B>FIGURE 6.4</B></FONT></A>&nbsp;&nbsp;Reporting the new position of the scroll bar<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="143-147.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="152-156.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

