<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Java Graphics!</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="323-325.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="331-335.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>You will then connect the dots, drawing a line from one point to the next, which will display a continuous freehand drawing on the screen. You can draw all these line segments with the <TT>Graphics</TT> <TT>drawLine()</TT> method:</P>
<PRE>
     public void paint (Graphics g) &#123;
          int loop_index;
          int drawWidth, drawHeight;

          if(bLineFlag &amp;&amp; bMouseUpFlag)&#123;
               g.drawLine(ptAnchor.x, ptAnchor.y, ptDrawTo.x, &#8658;
 ptDrawTo.y);
           &#125;
           if(bOvalFlag &amp;&amp; bMouseUpFlag)&#123;
                drawWidth = ptDrawTo.x - ptAnchor.x;
                drawHeight = ptDrawTo.y - ptAnchor.y;
                g.drawOval(ptAnchor.x, ptAnchor.y, drawWidth, &#8658;
 drawHeight);
                     .
                     .
                     .
           if(bDrawFlag)&#123;
                for(loop_index = 0; loop_index &lt; ptindex - 1; &#8658;
 loop_index&#43;&#43;)&#123;
&#8594;                    g.drawLine(pts[loop_index].x, pts[loop_index].y, &#8658;
 pts[loop_index &#43; 1].x, pts[loop_index &#43; 1].y);
                &#125;
           &#125;
      &#125;
</PRE>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>You may wonder why you used lines to connect the points you stored when the mouse moved across our applet, instead of just drawing the points themselves. The reason is that the <TT>mouseDrag()</TT> method is not called for each pixel the mouse moves over&#151;there are only a limited number of mouse events generated each second, and if you just drew the individual points you got, you&#146;d end up with a series of unconnected points trailing over the screen.<HR></FONT>
</BLOCKQUOTE>
<P>That&#146;s all there is to it&#151;now run the dauber applet, and click the Draw button. When you do, you can draw freehand with the mouse, as shown in Figure 10.16. That&#146;s it for freehand drawing&#151;and that&#146;s it for the dauber applet. You&#146;ve come far in this applet&#151;from handling the mouse to drawing graphics like lines, circles, ovals, rectangles, and more. You&#146;ve gotten a good start in graphics handling. You can find the code for this applet in <TT>dauber.java</TT>.</P>
<P><A NAME="Fig20"></A><A HREF="images\10-20.jpg"><IMG SRC="images\10-20t.jpg"></A>
<BR><A HREF="images\10-20.jpg"><FONT COLOR="#000077"><B>FIGURE 10.16</B></FONT></A>&nbsp;&nbsp;Your dauber applet supports freehand drawing.</P>
<P><B>dauber.java</B></P>
<PRE>
 import java.awt.Graphics;
 import java.awt.*;
 import java.awt.event.*;
 import java.lang.Math;
 import java.applet.Applet;

 public class dauber extends Applet implements ActionListener, &#8658;
 MouseListener, MouseMotionListener &#123;

      Button buttonDraw, buttonLine, buttonOval, buttonRect, &#8658;
 button3DRect, buttonRounded;

      Point pts[] = new Point[1000];
      Point ptAnchor, ptDrawTo;
      int ptindex = 0;

      boolean bMouseDownFlag = false;
      boolean bMouseUpFlag = false;
      boolean bDrawFlag = false;
      boolean bLineFlag = false;
      boolean bOvalFlag = false;
      boolean bRectFlag = false;
      boolean b3DRectFlag = false;
      boolean bRoundedFlag = false;

      public void init() &#123;

           buttonDraw = new Button("Draw Freehand"); 
           buttonLine = new Button("Line");
           buttonOval = new Button("Oval");
           buttonRect = new Button("Rect");
           button3DRect = new Button("3D Rect");
           buttonRounded = new Button("Round");

           add(buttonDraw);
           buttonDraw.addActionListener(this);
           add(buttonLine);
           buttonLine.addActionListener(this);
           add(buttonOval);
           buttonOval.addActionListener(this);
           add(buttonRect);
           buttonRect.addActionListener(this);
           add(button3DRect);
           button3DRect.addActionListener(this);
           add(buttonRounded);
           buttonRounded.addActionListener(this);
           addMouseListener(this);
           addMouseMotionListener(this);

     &#125;

     public void mousePressed(MouseEvent e)&#123;
          bMouseDownFlag = true;
          bMouseUpFlag = false;
          ptAnchor = new Point(e.getX(), e.getY());
     &#125;

     public void mouseReleased(MouseEvent e)&#123;
          bMouseDownFlag = false;
          bMouseUpFlag = true;
          ptDrawTo = new Point(e.getX(), e.getY());
               if(!bLineFlag)&#123;
               ptDrawTo = new Point(Math.max(e.getX(), ptAnchor.x), &#8658;
 Math.max(e.getY(), ptAnchor.y));
                ptAnchor = new Point(Math.min(e.getX(), ptAnchor.x), &#8658;
 Math.min(e.getY(), ptAnchor.y));
           &#125;
           repaint();
      &#125;

      public void mouseDragged(MouseEvent e)&#123;
           if(bDrawFlag)&#123;
                pts[ptindex] = new Point(e.getX(), e.getY());
                ptindex&#43;&#43;;
                repaint();
           &#125;
      &#125;

      public void mouseClicked(MouseEvent e)&#123;&#125;

      public void mouseEntered(MouseEvent e)&#123;&#125;

      public void mouseExited(MouseEvent e)&#123;&#125;

      public void mouseMoved(MouseEvent e)&#123;&#125;

      public void paint (Graphics g) &#123;
           int loop_index;
           int drawWidth, drawHeight;

           if(bLineFlag &amp;&amp; bMouseUpFlag)&#123;
                g.drawLine(ptAnchor.x, ptAnchor.y, ptDrawTo.x, &#8658;
 ptDrawTo.y);
           &#125;

           if(bOvalFlag &amp;&amp; bMouseUpFlag)&#123;
                drawWidth = ptDrawTo.x - ptAnchor.x;
                drawHeight = ptDrawTo.y - ptAnchor.y;
                g.drawOval(ptAnchor.x, ptAnchor.y, drawWidth, &#8658;
 drawHeight);
           &#125;
           if(bRectFlag &amp;&amp; bMouseUpFlag)&#123;
                drawWidth = ptDrawTo.x - ptAnchor.x;
                drawHeight = ptDrawTo.y - ptAnchor.y;
                g.drawRect(ptAnchor.x, ptAnchor.y, drawWidth, &#8658;
 drawHeight);
           &#125;
           if(b3DRectFlag &amp;&amp; bMouseUpFlag)&#123;
                drawWidth = ptDrawTo.x - ptAnchor.x;
                drawHeight = ptDrawTo.y - ptAnchor.y;
                g.draw3DRect(ptAnchor.x, ptAnchor.y, drawWidth, &#8658;
 drawHeight, true);
           &#125;
           if(bRoundedFlag &amp;&amp; bMouseUpFlag)&#123;
                drawWidth = ptDrawTo.x - ptAnchor.x;
                drawHeight = ptDrawTo.y - ptAnchor.y;
                g.drawRoundRect(ptAnchor.x, ptAnchor.y, drawWidth, &#8658;
 drawHeight, 10, 10);
           &#125;
           if(bDrawFlag)&#123;
                for(loop_index = 0; loop_index &lt; ptindex - 1; &#8658;
 loop_index&#43;&#43;)&#123;
                     g.drawLine(pts[loop_index].x, pts[loop_index].y, &#8658;
 pts[loop_index &#43; 1].x, pts[loop_index &#43; 1].y);
                &#125;
           &#125;
      &#125;

      public void actionPerformed(ActionEvent e)&#123;
           if(e.getSource() == buttonDraw)&#123;
                bDrawFlag = !bDrawFlag;
                bLineFlag = false;
                bOvalFlag = false;
                bRectFlag = false;
                b3DRectFlag = false;
                bRoundedFlag = false;
           &#125;
           if(e.getSource() == buttonLine)&#123;
                bLineFlag = !bLineFlag;
                bDrawFlag = false;
                bOvalFlag = false;
                bRectFlag = false;
                b3DRectFlag = false;
                bRoundedFlag = false;
           &#125;
           if(e.getSource() == buttonOval)&#123;
                bOvalFlag = !bOvalFlag;
                bLineFlag = false;
                bDrawFlag = false;
                bRectFlag = false;
                b3DRectFlag = false;
                bRoundedFlag = false;
           &#125;
           if(e.getSource() == buttonRect)&#123;
                bRectFlag = !bRectFlag;
                bLineFlag = false;
                bOvalFlag = false;
                bDrawFlag = false;
                b3DRectFlag = false;
                bRoundedFlag = false;
           &#125;
           if(e.getSource() == button3DRect)&#123;
                b3DRectFlag = !b3DRectFlag;
                bLineFlag = false;
                bOvalFlag = false;
                bRectFlag = false;
                bDrawFlag = false;
                bRoundedFlag = false;
           &#125;
           if(e.getSource() == buttonRounded)&#123;
                bRoundedFlag = !bRoundedFlag;
                bLineFlag = false;
                bOvalFlag = false;
                bRectFlag = false;
                b3DRectFlag = false;
                bDrawFlag = false;
           &#125;
      &#125;
 &#125;
</PRE>
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="323-325.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="331-335.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

