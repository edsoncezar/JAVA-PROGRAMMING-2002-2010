<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Java Graphics!</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="299-303.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="307-310.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>The location at which the mouse went down is passed to you with the <TT>e.getX()</TT> and <TT>e.getY()</TT> methods, and you want to store that location in the anchor point object, <TT>ptAnchor</TT>. You can do so by creating a new object of the <TT>Point</TT> class, passing the <TT>x</TT> and <TT>y</TT> coordinates as arguments to the <TT>Point</TT> class&#146;s constructor:</P>
<PRE>
      public void mousePressed(MouseEvent e)&#123;
&#8594;          ptAnchor = new Point(e.getX(), e.getY());
                .
                .
                .
      &#125;
</PRE>

<TABLE BORDER="2" BORDERCOLOR="#0000" ALIGN="CENTER">
<TR><TD><FONT SIZE="+1"><B>Do Extra Anchor Points Waste Memory?</B></FONT>
<P>Memory-frugal C&#43;&#43; programmers may worry about lines of code like
</P>
<PRE>
   ptAnchor = new Point(x, y);
</PRE>
<P>because the user may click the mouse button several times while using your applet and so execute this line each time. What happens to the old anchor points&#151;do those objects just remain in memory, taking up space? Should you delete them?
</P>
<P>It turns out there is not a delete operator in Java like the one in C&#43;&#43;. But that&#146;s not a big problem, because when no object variables refer to a particular object, Java deallocates that object&#146;s memory automatically (a process called <I>automatic garbage collection</I>). If you want to save memory space by getting rid of objects that are no longer needed, simply set their variables to null, for example:</P>
<PRE>
   framewindow = null;
</PRE>
</TABLE>

<P>Now that the mouse button is down, set the mouse boolean flags, <TT>bMouseDownFlag</TT> and <TT>bMouseUpFlag</TT> to indicate the following:</P>
<PRE>
      public void mousePressed(MouseEvent e)&#123;
&#8594;          bMouseDownFlag = true;
&#8594;          bMouseUpFlag = false;
           ptAnchor = new Point(e.getX(), e.getY());
      &#125;
</PRE>
<P>You&#146;ll set the same flags when the mouse button goes back up in the <TT>mouseReleased()</TT> method.</P>
<H4 ALIGN="LEFT"><A NAME="Heading15"></A><FONT COLOR="#000077">Using <I>mouseReleased()</I> in Dauber
</FONT></H4>
<P>You can set the mouse boolean flags like this in the <TT>mouseReleased()</TT> method:</P>
<PRE>
      public void mouseReleased(MouseEvent e)&#123;
&#8594;          bMouseDownFlag = false;
&#8594;          bMouseUpFlag = true;
                .
                .
                .
      &#125;
</PRE>
<P>Note that when the mouse button goes up the user is indicating the end point of the graphics figure&#151;the drawto point. You can record the drawto point as follows, using the <TT>x</TT> and <TT>y</TT> location of the mouse.</P>
<PRE>
      public void mouseReleased(MouseEvent e)&#123;
           bMouseDownFlag = false;
           bMouseUpFlag = true;

&#8594;          ptDrawTo = new Point(e.getX(), e.getY());
                     .
                     .
                     .
      &#125;
</PRE>
<P>Now you have the two points you&#146;ll need to draw your figure, <TT>ptAnchor</TT> and <TT>ptDrawTo</TT>. The actual drawing should be done in the <TT>paint()</TT> method&#151;that is where you are passed an object of the <TT>Graphics</TT> class to use in painting your applet. To force the <TT>paint</TT> event to occur, call <TT>repaint()</TT> in the <TT>mouseReleased()</TT> method as follows:</P>
<PRE>
      public void mouseReleased(MouseEvent e)&#123;
           bMouseDownFlag = false;
           bMouseUpFlag = true;

           ptDrawTo = new Point(e.getX(), e.getY());
&#8594;          repaint();
      &#125;
</PRE>
<P>Now you&#146;re ready to draw. So let&#146;s start with one of the most common graphics figures&#151;the line.
</P>
<H4 ALIGN="LEFT"><A NAME="Heading16"></A><FONT COLOR="#000077">Drawing Lines in Dauber</FONT></H4>
<P>When the user clicks the Line button, they can draw lines in the applet, stretching from the point you called <TT>ptAnchor</TT> to the point you called <TT>ptDrawTo</TT>, as shown in Figure 10.7.</P>
<P><A NAME="Fig10"></A><A HREF="images\10-10.jpg"><IMG SRC="images\10-10t.jpg"></A>
<BR><A HREF="images\10-10.jpg"><FONT COLOR="#000077"><B>FIGURE 10.7</B></FONT></A>&nbsp;&nbsp;The line extends from the anchor point to the drawto point.</P>
<P>Now that the mouse button has been released, the <TT>paint()</TT> method is called, and you can draw the line. Add the <TT>paint()</TT> method now:</P>
<PRE>
      public void paint (Graphics g) &#123;
                .
                .
                .
      &#125;
</PRE>
<P>Because there can be many causes for the paint event, first check to make sure that the mouse button went up&#151;by checking the variables <TT>bMouseUpFlag</TT> and <TT>bLineFlag</TT> to make sure you are supposed to be drawing a line. If so, you should draw your figure as follows:</P>
<PRE>
 public void paint (Graphics g) &#123;

&#8594;     if(bLineFlag &amp;&amp; bMouseUpFlag)&#123;
                .
                .
                .
           &#125;
      &#125;
</PRE>
<P>If you are expected to draw a line, the line is to stretch from the anchor point to the drawto point. Use the <TT>Graphics</TT> class&#146;s <TT>drawLine()</TT> method to draw this line, and pass it the start and end coordinates of the line as follows:</P>
<PRE>
      public void paint (Graphics g) &#123;

           if(bLineFlag &amp;&amp; bMouseUpFlag)&#123;
&#8594;               g.drawLine(ptAnchor.x, ptAnchor.y, ptDrawTo.x, &#8658;
 ptDrawTo.y);
           &#125;
      &#125;
</PRE>
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="299-303.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="307-310.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

