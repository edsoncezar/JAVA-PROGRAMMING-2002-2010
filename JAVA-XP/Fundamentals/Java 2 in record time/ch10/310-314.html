<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Java Graphics!</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="307-310.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="314-319.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<H4 ALIGN="LEFT"><A NAME="Heading17"></A><FONT COLOR="#000077">Creating Circles and Ovals in Dauber</FONT></H4>
<P>When the user clicks the Oval tool button, they can draw circles and ovals, as shown in Figure 10.9.
</P>
<P><A NAME="Fig12"></A><A HREF="images\10-12.jpg"><IMG SRC="images\10-12t.jpg"></A>
<BR><A HREF="images\10-12.jpg"><FONT COLOR="#000077"><B>FIGURE 10.9</B></FONT></A>&nbsp;&nbsp;Drawing a circle</P>
<P>Let&#146;s work on creating circles now. You can do that with the <TT>Graphics</TT> class&#146;s <TT>drawOval()</TT> method (with which you can draw both ovals and circles). This method&#151;like the other graphics methods you&#146;ll see in this chapter&#151;works slightly differently from the <TT>drawLine()</TT> method you just used. In <TT>drawLine()</TT>, you only needed to pass the (x, y) coordinates of the beginning and end of the line. With other graphics methods like <TT>drawOval()</TT> and <TT>drawRect()</TT>, you need to pass the upper-left corner of the figure&#146;s bounding rectangle and its width and height:</P>
<P><A NAME="Fig13"></A><A HREF="images\10-13.jpg"><IMG SRC="images\10-13t.jpg"></A></P>
<P>It looks as if you can pass the anchor point as the upper-left corner of the figure&#146;s bounding rectangle. However, there is no special reason that the user would have placed the anchor point at the upper left&#151;in fact, the anchor point may even be at the lower right. Therefore, reorder the anchor point and the drawto point to make sure that the anchor point is at the upper left and the drawto point is at the lower right. (The Java graphics methods require that you pass them the point you know to be the upper left of the image you want to draw.)
</P>
<P>You can reorder these points in the <TT>mouseReleased()</TT> method, just before you paint the graphics figure the user has requested in your applet. As mentioned, you won&#146;t need to rearrange the two bounding points for the <TT>drawLine()</TT> method, but you will for the other graphics methods. For that reason, first make sure you are not drawing a line by checking the <TT>bLineFlag</TT> variable in an <TT>if</TT> statement, as follows:</P>
<PRE>
     public void mouseReleased(MouseEvent e)&#123;
          bMouseDownFlag = false;
          bMouseUpFlag = true;
          ptDrawTo = new Point(e.getX(), e.getY());
&#8594;          if(!bLineFlag)&#123;
                .
                .
                .
          &#125;
          repaint();
     &#125;
</PRE>
<P>If you are not drawing a line, you can continue on, rearranging the point named <TT>ptAnchor</TT> to be the top left of your figure&#146;s bounding rectangle and the ptDrawTo point to be the bottom left of the bounding rectangle. You can do that simply by numerically comparing values in each of these points.</P>
<P>You can use the Java <TT>Math</TT> class&#146;s <TT>min()</TT> and <TT>max()</TT> methods to compare values. The <TT>min()</TT> method takes two values and returns the lesser; the <TT>max()</TT> method takes two values and returns the greater. That means that you can sort the anchor and drawto points as follows:</P>
<PRE>
     public void mouseReleased(MouseEvent e)&#123;
          bMouseDownFlag = false;
          bMouseUpFlag = true;
          ptDrawTo = new Point(e.getX(), e.getY());
          If(!bLineFlag)&#123;
&#8594;         ptDrawTo = new Point(Math.max(e.getX(), ptAnchor.x), &#8658;
 Math.max(e.getY(), ptAnchor.y));
&#8594;                ptAnchor = new Point(Math.min(e.getX(), ptAnchor.x), &#8658;
 Math.min(e.getY(), ptAnchor.y));
          &#125;
          repaint();
     &#125;
</PRE>
<P>Here you are using the Java <TT>Math</TT> class, and that class is part of the <TT>java.lang</TT> package. You need to import that class in the beginning of your applet as follows so Java can find the <TT>min()</TT> and <TT>max()</TT> methods:</P>
<PRE>
 import java.awt.Graphics;
 import java.awt.*;
 import java.awt.event.*;
&#8594;import java.lang.Math;
 import java.applet.Applet;

 public class dauber extends Applet implements ActionListener, &#8658;
 MouseListener, MouseMotionListener &#123;

      Button buttonDraw, buttonLine, buttonOval, buttonRect, &#86584;
 button3DRect, buttonRounded;
           .
           .
           .
</PRE>
<P>Now you&#146;re ready to draw ovals and circles with the <TT>drawOval()</TT> method. Place the code to draw these figures in the <TT>paint()</TT> method, which currently looks like this:</P>
<PRE>
      public void paint (Graphics g) &#123;
           int loop_index;
           int drawWidth, drawHeight;

           if(bLineFlag &amp;&amp; bMouseUpFlag)&#123;
                g.drawLine(ptAnchor.x, ptAnchor.y, ptDrawTo.x, &#8658;
 ptDrawTo.y);
           &#125;
&#8594;          if(bOvalFlag &amp;&amp; bMouseUpFlag)&#123;
&#8594;               drawWidth = ptDrawTo.x - ptAnchor.x;
&#8594;               drawHeight = ptDrawTo.y - ptAnchor.y;
&#8594;               g.drawOval(ptAnchor.x, ptAnchor.y, drawWidth, &#8658;
 drawHeight);
                     .
                     .
                     .
     &#125;
</PRE>
<P>Here, by examining the boolean flag <TT>bMouseUpFlag</TT>, check to make sure that the user has released the mouse button and that you should draw the oval or circle. If the flag is set, you are supposed to draw a figure. Next, check the <TT>bOvalFlag</TT> boolean flag to see if you are supposed to be drawing an oval:</P>
<PRE>
     public void paint (Graphics g) &#123;
          int loop_index;
          int drawWidth, drawHeight;

          if(bLineFlag &amp;&amp; bMouseUpFlag)&#123;
               g.drawLine(ptAnchor.x, ptAnchor.y, ptDrawTo.x, &#8658;
 ptDrawTo.y);
           &#125;
&#8594;          if(bOvalFlag &amp;&amp; bMouseUpFlag)&#123;
                     .
                     .
                     .
&#8594;          &#125;
</PRE>
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="307-310.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="314-319.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

