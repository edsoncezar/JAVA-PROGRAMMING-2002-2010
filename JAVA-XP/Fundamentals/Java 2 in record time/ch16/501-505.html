<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Working with Multi-Threaded Programs and JAR Files</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="497-501.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="505-510.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
</P>
<P>When the user clicks the Suspend button, you will suspend the animation thread and the disk will stop rotating. When the user clicks the Resume button, you will resume the thread, and the disk will start rotating again. Let&#146;s put this idea to work now. Start by adding the two buttons you&#146;ll need, <TT>suspendButton</TT> and <TT>resumeButton</TT>, to the spinner applet and by implementing the ActionListener interface:</P>
<PRE>
  import java.awt.*;
  import java.awt.event.*;
  import java.applet.Applet;

&#8594;public class spinner extends Applet implements
ActionListener, Runnable
  &#123;

  Image spinImages[] = new Image[4];
  Image nowImage;
  int spinIndex = 0;
  Thread spinThread;
&#8594;Button suspendButton, resumeButton;
                .
                .
                .
</PRE>
<P>Next, add the buttons to your layout:
</P>
<PRE>
import java.awt.*;
import java.awt.event.*;
import java.applet.Applet;

public class spinner extends Applet implements ActionListener,
Runnable &#123;

     Image spinImages[] = new Image[4];
     Image nowImage;
     int spinIndex = 0;
     Thread spinThread;
&#8594;    Button suspendButton, resumeButton;

     public void init() &#123;
          spinImages[0] = getImage(getCodeBase(), "spin1.gif");
          spinImages[1] = getImage(getCodeBase(), "spin2.gif");
          spinImages[2] = getImage(getCodeBase(), "spin3.gif");
          spinImages[3] = getImage(getCodeBase(), "spin4.gif");
&#8594;          suspendButton = new Button("Suspend");
&#8594;          add(suspendButton);
&#8594;          suspendButton.addActionListener(this);
&#8594;          resumeButton = new Button("Resume");
&#8594;          add(resumeButton);
&#8594;          resumeButton.addActionListener(this);
     &#125;
</PRE>
<P>At this point, you can add the <TT>actionPerformed()</TT> method and check which button was clicked:</P>
<PRE>
import java.awt.*;
import java.awt.event.*;
import java.applet.Applet;

public class spinner extends Applet implements
ActionListener,h:\userRunnable &#123;

     Image spinImages[] = new Image[4];
     Image nowImage;
     int spinIndex = 0;
     Thread spinThread;
     Button suspendButton, resumeButton;

     public void init() &#123;
          spinImages[0] = getImage(getCodeBase(), "spin1.gif");
          spinImages[1] = getImage(getCodeBase(), "spin2.gif");
          spinImages[2] = getImage(getCodeBase(), "spin3.gif");
          spinImages[3] = getImage(getCodeBase(), "spin4.gif");
          suspendButton = new Button("Suspend");
          add(suspendButton);
          suspendButton.addActionListener(this);
          resumeButton = new Button("Resume");
          add(resumeButton);
          resumeButton.addActionListener(this);
     &#125;

&#8594;     public void actionPerformed(ActionEvent e)&#123;
&#8594;          if(e.getSource() == suspendButton)&#123;
                    .
                    .
                    .
&#8594;          &#125;
&#8594;          if(e.getSource() == resumeButton)&#123;
                    .
                    .
                    .
&#8594;          &#125;
&#8594;     &#125;
</PRE>
<P>If the user has clicked the Suspend button, you want to suspend the animation thread. In Java 1.0 and 1.1, that meant using the <TT>Thread</TT> class&#146;s <TT>suspend()</TT> method&#151; but not anymore, since that method is now deprecated (Sun considers the <TT>suspend()</TT> method inherently deadlock-prone).</P>
<P>Instead, you can now handle thread suspension in a way much like the way you stop threads&#151; by using flags to coordinate your actions. Here, you&#146;ll introduce a new flag, <TT>goFlag</TT>; when you set this 