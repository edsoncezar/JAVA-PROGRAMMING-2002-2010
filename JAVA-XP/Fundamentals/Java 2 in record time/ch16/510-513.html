<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Working with Multi-Threaded Programs and JAR Files</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="505-510.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="513-517.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>Next, you can arrange for the two threads to start when the user clicks the Start Threads button:
</P>
<PRE>
 import java.awt.*;
 import java.awt.event.*;
 import java.applet.Applet;

 public class numbers extends Applet implements Runnable,
 ActionListener &#123;

     Thread Thread1, Thread2;
     TextField text1, text2;
     Button button1;

     public void init() &#123;
          text1 = new TextField(20);
          text2 = new TextField(20);
          add(text1);
          add(text2);
          button1 = new Button("Start threads");
          add(button1);
          button1.addActionListener(this);
     &#125;

&#8594;     public void actionPerformed(ActionEvent e)&#123;
&#8594;          if(e.getSource() == button1)&#123;
&#8594;               Thread1 = new Thread(this);
&#8594;               Thread1.start();
&#8594;               Thread2 = new Thread(this);
&#8594;               Thread2.start();
&#8594;          &#125;
&#8594;     &#125;
</PRE>
<P>Now let&#146;s work on the <TT>run()</TT> method.</P>
<H4 ALIGN="LEFT"><A NAME="Heading8"></A><FONT COLOR="#000077">Implementing the run() Method</FONT></H4>
<P>Both of your threads execute the same <TT>run()</TT> method. You&#146;ll have to distinguish them somehow as they are supposed to write to different text fields. Add the <TT>run()</TT> method now:</P>
<PRE>
     public void run() &#123;
          .
          .
          .
     &#125;
</PRE>
<P>You&#146;ll have each thread print out, say, 1000 integers by setting up a <TT>for</TT> loop:</P>
<PRE>
     public void run() &#123;
&#8594;         int loop_index;
&#8594;         for(loop_index = 1; loop_index &lt; 1000; loop_index&#43;&#43;)&#123;
                    .
                    .
                    .
&#8594;          &#125;
     &#125;
</PRE>
<P>Now you will place the ascending integers into the appropriate text fields: <TT>text1</TT> for <TT>Thread1</TT> and <TT>text2</TT> for <TT>Thread2</TT>. To do so, you have to know which thread is executing in this copy of the <TT>run()</TT> method. You can keep track by <I>naming</I> the threads.</P>
<H4 ALIGN="LEFT"><A NAME="Heading9"></A><FONT COLOR="#000077">Naming Java Threads</FONT></H4>
<P>You can give names to threads when you create them. Open the <TT>actionPerformed()</TT> method now:</P>
<PRE>
     public void actionPerformed(ActionEvent e)&#123;
          if(e.getSource() == button1)&#123;
               Thread1 = new Thread(this);
               Thread1.start();
               Thread2 = new Thread(this);
               Thread2.start();
          &#125;
     &#125;
</PRE>
<P>Give the threads the names &#147;threadname1&#148; and &#147;threadname2&#148; by passing those strings to the thread&#146;s constructors:
</P>
<PRE>
     public void actionPerformed(ActionEvent e)&#123;
          if(e.getSource() == button1)&#123;
&#8594;              Thread1 = new Thread(this, "threadname1");
               Thread1.start();
&#8594;              Thread2 = new Thread(this, "threadname2");
               Thread2.start();
          &#125;
     &#125;
</PRE>
<P>Now in the <TT>run()</TT> method, you can test which thread is executing by using the <TT>getName()</TT> method. But how do you refer to the current thread so that you can use that method? You do that with the <TT>Thread</TT> class&#146;s <TT>currentThread()</TT> method. This means that you can test if <TT>Thread1</TT> is executing the <TT>run()</TT> method as follows:</P>
<PRE>
     public void run() &#123;
          int loop_index;
          for(loop_index = 1; loop_index &lt; 1000;
          loop_index&#43;&#43;)&#123;
&#8594;              if(((Thread.currentThread()).
    getName()).equals &#8584; ("threadname1"))&#123;
                    .
                    .
                    .
               &#125;
          &#125;
     &#125;
</PRE>
<P>If <TT>Thread1</TT> <I>is</I> executing the <TT>run()</TT> method, you can display the thread&#146;s output in the text field <TT>text1</TT> as follows:</P>
<PRE>
     public void run() &#123;
&#8594;          String out_string;
           int loop_index;
&#8594;          out_string = new String();
           for(loop_index = 1; loop_index &lt; 1000; loop_index&#43;&#43;)&#123;
               if(((Thread.currentThread()). getName()).
equals &#8584; ("threadname1"))&#123;
&#8594;                    text1.setText(out_string. valueOf(loop_index));
                          .
                          .
                          .
               &#125;
          &#125;
     &#125;
</PRE>
<P>Now you can do the same for <TT>Thread2</TT>, testing for the thread name &#147;threadname2&#148; as follows:</P>
<PRE>
     public void run() &#123;
          String out_string;
          int loop_index;
          out_string = new String();
          for(loop_index = 1; loop_index &lt; 1000; loop_index&#43;&#43;)&#123;
               if(((Thread.currentThread()). getName()).
               equals &#8584; ("threadname1"))&#123;
                    text1.setText(out_string. valueOf(loop_index));
               &#125;
&#8594;             if(((Thread.currentThread()).getName()).equals
                    &#8584; ("threadname2"))&#123;
                    .
                    .
                    .
               &#125;
          &#125;
     &#125;
</PRE>
<P>If the current thread is <TT>Thread2</TT>, you can display its output in the text field <TT>text2</TT> this way:</P>
<PRE>
     public void run() &#123;
          String out_string;
          int loop_index;
          out_string = new String();
          for(loop_index = 1; loop_index &lt; 1000; loop_index&#43;&#43;)&#123;
              if(((Thread.currentThread()). getName()).
              equals &#8584; ("threadname1"))&#123;
                   text1.setText(out_string. valueOf(loop_index));
               &#125;
&#8594;       if(((Thread.currentThread()). getName()).
              equals&#8584; ("threadname2"))&#123;
&#8594;                    text2.setText(out_string. valueOf(loop_index));
&#8594;       &#125;
          &#125;
     &#125;
</PRE>
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="505-510.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="513-517.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

