<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Displaying and Stretching Images</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="341-345.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="351-353.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>Now draw the image with <TT>drawImage()</TT>. All you have to do is to pass the image and the coordinates you want it drawn in&#151;<TT>drawImage()</TT> will stretch the image as required&#151;and a reference to an <TT>ImageObserver</TT> object. This object watches the process of drawing images, and in this case, you&#146;ll just pass a reference to your <TT>applet</TT> object with a <TT>this</TT> keyword:</P>
<PRE>
      public void paint (Graphics g) &#123;
           int drawWidth, drawHeight;

           if(bMouseUpFlag)&#123;
                drawWidth = ptDrawTo.x - ptAnchor.x;
                drawHeight = ptDrawTo.y - ptAnchor.y;
                g.drawRect(ptAnchor.x, ptAnchor.y, drawWidth,
 drawHeight);
&#8594;                    g.drawImage(image, ptAnchor.x, ptAnchor.y,
 drawWidth, drawHeight, this);
           &#125;
      &#125;
</PRE>
<P>And that&#146;s all there is to drawing images&#151;now the user can draw an image using the mouse, as shown below. The code for this applet appears in <TT>imagesizer.java</TT>.</P>
<P><B>imagesizer.java</B></P>
<PRE>
 import java.awt.*;
 import java.awt.event.*;
 import java.lang.Math;
 import java.applet.Applet;

 public class imagesizer extends Applet implements MouseListener &#123;

      Image image;
      boolean bMouseDownFlag = false;
      boolean bMouseUpFlag = false;
      Point ptAnchor, ptDrawTo;

      public void init() &#123;
           image = getImage(getCodeBase(), "figure.jpg");
           addMouseListener(this);
      &#125;

      public void mousePressed(MouseEvent e)&#123;
           bMouseDownFlag = true;
           bMouseUpFlag = false;
           ptAnchor = new Point(e.getX(), e.getY());
      &#125;

      public void mouseReleased(MouseEvent e)&#123;
           bMouseDownFlag = false;
           bMouseUpFlag = true;

           ptDrawTo = new Point(Math.max(e.getX(), ptAnchor.x), &#8658;
 Math.max(e.getY(), ptAnchor.y));
           ptAnchor = new Point(Math.min(e.getX(), ptAnchor.x), &#8658;
 Math.min(e.getY(), ptAnchor.y));
           repaint();
      &#125;

      public void mouseClicked(MouseEvent e)&#123;&#125;

      public void mouseEntered(MouseEvent e)&#123;&#125;

      public void mouseExited(MouseEvent e)&#123;&#125;

      public void paint (Graphics g) &#123;
           int drawWidth, drawHeight;

           if(bMouseUpFlag)&#123;
                drawWidth = ptDrawTo.x - ptAnchor.x;
                drawHeight = ptDrawTo.y - ptAnchor.y;
                g.drawRect(ptAnchor.x, ptAnchor.y, drawWidth, &#8594;
 drawHeight);
                g.drawImage(image, ptAnchor.x, ptAnchor.y, drawWidth, &#8584;
 drawHeight, this);
           &#125;
      &#125;
 &#125;
</PRE>
<P>Now that you&#146;ve seen how to load an image in, let&#146;s take a look at how to &#147;interact&#148; with an image. In this case, you&#146;ll see how to support image maps, those clickable maps you see on the World Wide Web.
</P>
<H3><A NAME="Heading4"></A><FONT COLOR="#000077">Using Image Maps</FONT></H3>
<P>An image map is an image you can click in a Web browser to move to a new URL. An image map might have several active areas, as shown in Figure 11.3.
</P>
<P><A NAME="Fig4"></A><A HREF="images\11-04.jpg"><IMG SRC="images\11-04t.jpg"></A>
<BR><A HREF="images\11-04.jpg"><FONT COLOR="#000077"><B>FIGURE 11.3</B></FONT></A>&nbsp;&nbsp;An image map with three active areas</P>
<P>When the user clicks one of these areas, the Web browser takes them to a new URL. The image map we&#146;ll use in this example, <TT>imap.gif</TT>, appears below, where we have hyperlinks to Sun and to Sybex. When the user clicks one of those labeled rectangles, the Web browser will open the appropriate URL.</P>
<P><A NAME="Fig5"></A><A HREF="images\11-05.jpg"><IMG SRC="images\11-05t.jpg"></A></P>
<P>Let&#146;s begin this example now. Create a new file called <TT>imap.java</TT>. You&#146;ll need a place to store your image after you load it in and before displaying it, so you can create a new <TT>Image</TT> object named &#147;<TT>image</TT>&#148;:</P>
<PRE>
 public class imap extends Applet
 &#123;
&#8594;          Image image;
        .
        .
        .
</PRE>
<P>You can load your image map in from the file <TT>imap.gif </TT>and store it in the object named <TT>image</TT> in the <TT>init()</TT> method, as follows:</P>
<PRE>
 public class imap extends Applet &#123;

      Image image;

      public void init()&#123;
&#8594;               image = getImage(getCodeBase(), "imap.gif");
      &#125;
</PRE>
<P>Next, display the image in your applet by adding a <TT>paint()</TT> method:</P>
<PRE>
      public void paint (Graphics g) &#123;
           g.drawImage(image, 10, 10, 240, 155, this);
      &#125;
</PRE>
<P>Although the image is displayed, it&#146;s still just a part of your applet, so the normal <TT>mousePressed</TT> and <TT>mouseReleased</TT> events will occur even when you click the image. That&#146;s the key to Java image maps&#151;you just find the location that the user clicked in your applet to see if they have clicked an active area.</P>
<P>You can add mouse support to your applet now by adding a MouseListener and the mouse methods as follows:</P>
<PRE>
 import java.applet.Applet;
 import java.awt.*;
&#8594;     import java.awt.event.*;

&#8594;     public class imap extends Applet implements MouseListener&#123;

      Image Imap;

      public void init()&#123;
           Imap = getImage(getCodeBase(), "imap.gif");
           addMouseListener(this);
      &#125;
&#8594;         public void mousePressed(MouseEvent e)&#123;
                    .
                    .
                    .
&#8594;         &#125;

&#8594;         public void mouseClicked(MouseEvent e)&#123;&#125;

&#8594;         public void mouseReleased(MouseEvent e)&#123;&#125;

&#8594;         public void mouseEntered(MouseEvent e)&#123;&#125;

&#8594;         public void mouseExited(MouseEvent e)&#123;&#125;
</PRE>
<P>Open the <TT>mousePressed()</TT> method now:</P>
<PRE>
     public void mousePressed(MouseEvent e)&#123;
                    .
                    .
                    .
     &#125;
</PRE>
<P>First, you need to get the location of the mouse and store it in the variables x and y:
</P>
<PRE>
     public void mousePressed(MouseEvent e)&#123;
&#8594;              int x = e.getX();
&#8594;              int y = e.getY();
                    .
                    .
                    .
     &#125;
</PRE>
<H4 ALIGN="LEFT"><A NAME="Heading5"></A><FONT COLOR="#000077">Checking an Image Map&#146;s Hotspots</FONT></H4>
<P>Now you need to determine the location in your image of the <I>hotspots</I>&#151;the locations that cause the browser to do something when clicked&#151;once you do that, you can check if the mouse went down in one of them.</P>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>TIP:&nbsp;&nbsp;</B>To determine the location of the hotspots in your image map, you can use the Windows Paint program; as you move the mouse, the Paint program indicates the current mouse location (in pixels). The Paint program only uses .BMP files. However, many Web browsers, such as the free Microsoft Internet Explorer, can convert image files for you.<HR></FONT>
</BLOCKQUOTE>
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="341-345.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="351-353.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

