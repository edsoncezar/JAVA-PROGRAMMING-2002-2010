<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:Understanding Graphics Animation</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="425-430.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="435-438.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>If the button has indeed been clicked, set up a <TT>for</TT> loop, using a loop index named <TT>loop_index</TT>, that will loop 150 times:</P>
<PRE>
 import java.applet.Applet;
 import java.awt.*;
 import java.awt.event.*;

 public class canvaser extends Applet implements ActionListener &#123;

      BoxCanvas boxcanvas;
      Button button1;

      public void init()&#123;
           boxcanvas = new BoxCanvas();
           boxcanvas.resize(100, 100);
           add(boxcanvas);
           button1 = new Button("Move Rectangle");
           add(button1);
           button1.addActionListener(this);
      &#125;

      public void actionPerformed(ActionEvent event)&#123;
           if(event.getSource() == button1)&#123;
&#8594;for(loop_index = 0; loop_index &lt; 150; loop_index&#43;&#43;)&#123;
                     .
                     .
                     .
                &#125;
           &#125;
      &#125;
 &#125;
</PRE>
<P>And you use the <TT>Canvas</TT> control&#146;s <TT>setLocation()</TT> method (all controls have this method built in to move the <TT>Canvas</TT> control across the screen):</P>
<PRE>
 import java.applet.Applet;
 import java.awt.*;
 import java.awt.event.*;

 public class canvaser extends Applet implements ActionListener &#123;

      BoxCanvas boxcanvas;
      Button button1;

      public void init()&#123;
           boxcanvas = new BoxCanvas();
           boxcanvas.resize(100, 100);
           add(boxcanvas);
           button1 = new Button("Move Rectangle");
           add(button1);
           button1.addActionListener(this);
      &#125;

      public void actionPerformed(ActionEvent event)&#123;
           if(event.getSource() == button1)&#123;
                for(loop_index = 0; loop_index &lt; 150; loop_index&#43;&#43;)&#123;
&#8594;                    boxcanvas.setLocation(loop_index, 0);
                &#125;
           &#125;
      &#125;
 &#125;
</PRE>
<P>All that remains now is to create the <TT>BoxCanvas</TT> class. You can create that class now, extending the Java <TT>Canvas</TT> class. Add the following code to the end of the <TT>canvaser.java</TT> file:</P>
<PRE>
 class BoxCanvas extends java.awt.Canvas &#123;
           .
           .
           .
 &#125;
</PRE>
<P>Here, you want to draw a box in the control, so override the <TT>paint()</TT> method and draw that box with the <TT>drawRect()</TT> method:</P>
<PRE>
 class BoxCanvas extends java.awt.Canvas &#123;

      public void paint (Graphics g) &#123;
&#8594;          g.drawRect(10, 50, 40, 40);
      &#125;
 &#125;
</PRE>
<P>You can run the applet now, as shown below. When you click the button, the box moves across the screen, from left to right. Your first animation&#151;created simply by moving a <TT>Canvas</TT> control&#151;is a success. The code for this applet appears in <TT>canvaser.java</TT>.</P>
<P><A NAME="Fig3"></A><A HREF="images\14-03.jpg"><IMG SRC="images\14-03t.jpg"></A></P>
<P><B>canvaser.java</B></P>
<PRE>
 import java.applet.Applet;
 import java.awt.*;
 import java.awt.event.*;

 public class canvaser extends java.applet.Applet implements
 ActionListener &#123;

      BoxCanvas boxcanvas;
      Button button1;

      public void init()&#123;
           boxcanvas = new BoxCanvas();
           boxcanvas.resize(100, 100);
           add(boxcanvas);
           button1 = new Button("Move Rectangle");
           add(button1);
           button1.addActionListener(this);
      &#125;

      public void actionPerformed(ActionEvent event)&#123;
           if(event.getSource() == button1)&#123;
                for(loop_index = 0; loop_index &lt; 150; loop_index&#43;&#43;)&#123;
                     boxcanvas.setLocation(loop_index, 0);
                &#125;
           &#125;
      &#125;
 &#125;

 class BoxCanvas extends java.awt.Canvas &#123;

      public void paint (Graphics g) &#123;
           g.drawRect(10, 50, 40, 40);
      &#125;
 &#125;
</PRE>
<P>The &#147;canvaser&#148; example showed you a quick and easy method of animation, but of course moving an image around is relatively crude. Java offers a great deal more animation power. Let&#146;s explore the other standard Java animation techniques now.
</P>
<H3><A NAME="Heading3"></A><FONT COLOR="#000077">Your First True Animation</FONT></H3>
<P>A <I>thread</I> is an execution stream; so far, all the programs you&#146;ve learned to create have only had one thread. But Java programs can have a number of threads, each executing code in the same program, and each running at the same time. This is called <I>multi-threading</I>, and it&#146;s one of the reasons that Java animation is so powerful. With multi-threading, you can run the animation at the same time as the rest of your applet, without interference. Let&#146;s take a look at this now.</P>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>You&#146;ll see a great deal more about threads in Skill 15.<HR></FONT>
</BLOCKQUOTE>
<P>You can create an example of an animation applet with a circular image in it, as shown in Figure 14.3. When the applet runs, you can have your graphics image appear to spin. You&#146;ll use four images to create the illusion of motion in this applet, flashing these images on the screen, one at a time.
</P>
<P><A NAME="Fig4"></A><A HREF="images\14-04.jpg"><IMG SRC="images\14-04t.jpg"></A>
<BR><A HREF="images\14-04.jpg"><FONT COLOR="#000077"><B>FIGURE 14.3</B></FONT></A>&nbsp;&nbsp;An applet with a circular image</P>
<P>These four images appear below. You can use a small colored disk and animate it to give the impression that it is spinning.
</P>
<P><A NAME="Fig5"></A><A HREF="images\14-05.jpg"><IMG SRC="images\14-05t.jpg"></A></P>
<P>Let&#146;s put this technique to work now. Create a new file named <TT>spinner.java</TT> and install the usual starting code there:</P>
<PRE>
 import java.awt.*;
 import java.applet.Applet;

 public class spinner extends Applet &#123;
                  .
                  .
                  .
 &#125;
</PRE>
<P>You can start your new applet by reading in the four images, which you might save in the four files <TT>spin1.gif</TT> through <TT>spin4.gif</TT>. First, set up an <TT>Image</TT> array named <TT>spinImages[]</TT>to hold those images:</P>
<PRE>
 import java.awt.*;
 import java.applet.Applet;
 public class spinner extends Applet &#123;

&#8594;     Image spinImages[] = new Image[4];
                .
                .
                .
</PRE>
<P>Next, load the images themselves in the <TT>init()</TT> method:</P>
<PRE>
 import java.awt.*;
 import java.applet.Applet;

 public class spinner extends Applet&#123;

      Image spinImages[] = new Image[4];

&#8594;     public void init() &#123;
&#8594;          spinImages[0] = getImage(getCodeBase(), "spin1.gif");
&#8594;          spinImages[1] = getImage(getCodeBase(), "spin2.gif");
&#8594;          spinImages[2] = getImage(getCodeBase(), "spin3.gif");
&#8594;          spinImages[3] = getImage(getCodeBase(), "spin4.gif");
&#8594;     &#125;
</PRE>
<P>Now your images are ready to go, and you&#146;re ready to introduce multi-threading to your applet.
</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="425-430.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="435-438.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

