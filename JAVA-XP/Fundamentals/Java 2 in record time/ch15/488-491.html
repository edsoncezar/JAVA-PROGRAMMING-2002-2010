<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:More Graphics Animation Power</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="484-487.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="..\ch16\493-497.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>When the <TT>cardindex</TT> variable reaches a value of 4, you can reset it to 0 again in the fourth case, starting the animation over, as follows:</P>
<PRE>
 public void run() &#123;
          while(animateFlag)&#123;
               switch(&#43;&#43;cardindex)&#123;
                    case 1:
                         cardlayout.show(this, "first");
                         try &#123;Thread.sleep(300);&#125;
                         catch(InterruptedException e) &#123; &#125;
                         break;
                    case 2:
                         cardlayout.show(this, "second");
                         try &#123;Thread.sleep(300);&#125;
                         catch(InterruptedException e) &#123; &#125;
                         break;
                    case 3:
                         cardlayout.show(this, "third");
                         try &#123;Thread.sleep(300);&#125;
                         catch(InterruptedException e) &#123; &#125;
                         break;
                    case 4:
&#8594;                         cardindex = 0;
&#8594;                         break;
               &#125;
                repaint();
           &#125;
      &#125;
 &#125;
</PRE>
<P>And you&#146;re almost finished; all that remains is to create the <TT>cardPanel</TT> class, which is based on the <TT>Panel</TT> class:</P>
<PRE>
 class cardPanel extends Panel &#123;
          .
          .
          .
 &#125;
</PRE>
<P>Add a constructor to your <TT>cardPanel</TT> class, which can take a single parameter, <TT>settext</TT>, the label of the panel (the label will hold the text &#147;One,&#148; &#147;Two,&#148; and so on):</P>
<PRE>
 class cardPanel extends Panel &#123;

      cardPanel(String settext)&#123;
      &#125;
 &#125;
</PRE>
<P>Next, install three labels in the panel, as follows:
</P>
<PRE>
 class cardPanel extends Panel &#123;
&#8594;    Label label1, label2, label3;

     cardPanel(String settext)&#123;
          .
          .
          .
     &#125;
 &#125;
</PRE>
<P>And create those labels, placing the correct text in each of them, including the text you were passed in the <TT>settext</TT> string:</P>
<PRE>
 class cardPanel extends Panel &#123;
     Label label1, label2, label3;

     cardPanel(String settext)&#123;
&#8594;         label1 = new Label("Welcome to Java");
&#8594;         add(label1);
&#8594;         label2 = new Label("This is");
&#8594;         add(label2);
&#8594;         label3 = new Label("Card " &#43; settext);
&#8594;         add(label3);
     &#125;
 &#125;
</PRE>
<P>Your carder applet is ready to go. Run it now and you will see the panels appear and disappear in succession, as shown below. The code for this applet appears in <TT>carder.java</TT>.</P>
<P><A NAME="Fig13"></A><A HREF="images\15-13.jpg"><IMG SRC="images\15-13t.jpg"></A></P>
<P><B>carder.java</B></P>
<PRE>
 import java.awt.*;
 import java.applet.Applet;

 public class carder extends Applet implements Runnable&#123;

     cardPanel panel1, panel2, panel3;

     int cardindex = 0;
     Thread cardThread;
     boolean animateFlag = true;
     CardLayout cardlayout;

     public void init() &#123;
          cardlayout = new CardLayout();
          setLayout(cardlayout);
          panel1 = new cardPanel("One");
          panel2 = new cardPanel("Two");
          panel3 = new cardPanel("Three");
          add("first", panel1);
          add("second", panel2);
          add("third", panel3);
          cardlayout.show(this, "first");
     &#125;

     public void start() &#123;
          cardThread = new Thread(this);
          cardThread.start();
     &#125;

     public void stop() &#123;
          animateFlag = false;
     &#125;

     public void run() &#123;
          while(animateFlag)&#123;
               switch(&#43;&#43;cardindex)&#123;
                    case 1:
                         cardlayout.show(this, "first");
                         try &#123;Thread.sleep(300);&#125;
                         catch(InterruptedException e) &#123; &#125;
                         break;
                    case 2:
                         cardlayout.show(this, "second");
                         try &#123;Thread.sleep(300);&#125;
                         catch(InterruptedException e) &#123; &#125;
                         break;
                    case 3:
                         cardlayout.show(this, "third");
                         try &#123;Thread.sleep(300);&#125;
                         catch(InterruptedException e) &#123; &#125;
                         break;
                    case 4:
                         cardindex = 0;
                         break;
               &#125;
                repaint();
           &#125;
      &#125;
 &#125;

 class cardPanel extends Panel &#123;
     Label label1, label2, label3;

     cardPanel(String settext)&#123;
          label1 = new Label("Welcome to Java");
          add(label1);
          label2 = new Label("This is");
          add(label2);
          label3 = new Label("Card " &#43; settext);
          add(label3);
     &#125;
 &#125;
</PRE>
<P>You&#146;ve seen a lot in this skill, including double-buffering, user-directed animation, and using the card layout manager. You&#146;ve also been introduced to a very powerful Java technique: multi-threading. We&#146;ll explore multi-threading further in Skill 16.
</P>
<H3><A NAME="Heading11"></A><FONT COLOR="#000077">Are You up to Speed?</FONT></H3>
<P><B>Now you can . . .</B></P>
<DL>
<DD><B>&#149;</B>&nbsp;&nbsp;develop complex graphics off-screen, rather than in front of the user, and display the graphics when they are ready
<DD><B>&#149;</B>&nbsp;&nbsp;use the card layout to animate panels of controls, flashing the card panel you want onto the screen as required
<DD><B>&#149;</B>&nbsp;&nbsp;create user-directed animation
<DD><B>&#149;</B>&nbsp;&nbsp;use XOR drawing techniques
</DL>
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="484-487.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="..\ch16\493-497.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

