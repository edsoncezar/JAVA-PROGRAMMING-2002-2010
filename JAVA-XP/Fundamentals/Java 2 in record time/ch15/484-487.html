<HTML>
<HEAD>

<TITLE>Java 1.2 In Record Time:More Graphics Animation Power</TITLE>




<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="479-483.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="488-491.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<H4 ALIGN="LEFT"><A NAME="Heading10"></A><FONT COLOR="#000077">Animating Control Panels</FONT></H4>
<P>You can animate your panels by setting up a new thread, so call that thread <TT>cardThread</TT>:</P>
<PRE>
 import java.awt.*;
 import java.applet.Applet;

 public class carder extends Applet implements Runnable&#123;

     cardPanel panel1, panel2, panel3;

&#8594;    Thread cardThread;
     CardLayout cardlayout;

     public void init() &#123;
          cardlayout = new CardLayout();
          setLayout(cardlayout);
          panel1 = new cardPanel("One");
          panel2 = new cardPanel("Two");
          panel3 = new cardPanel("Three");
          add("first", panel1);
          add("second", panel2);
          add("third", panel3);
          cardlayout.show(this, "first");
     &#125;
</PRE>
<P>Create and start <TT>cardThread</TT> in the <TT>start()</TT> method, as follows:</P>
<PRE>
     public void start() &#123;
          cardThread = new Thread(this);
          cardThread.start();
     &#125;
</PRE>
<P>And stop it in the <TT>stop()</TT> method as you have before:</P>
<PRE>
     public void stop() &#123;
&#8594;         animateFlag = false;
     &#125;
</PRE>
<P>In the <TT>run()</TT> method, you&#146;ll cycle between all three cards, showing them one after the other. Add the <TT>run()</TT> method now, as follows:</P>
<PRE>
     public void run() &#123;
          .
          .
          .
     &#125;
</PRE>
<P>First, set up your infinite loop for the animation:
</P>
<PRE>
     public void run() &#123;
          while(animateFlag)&#123;
               .
               .
               .
          &#125;
     &#125;
</PRE>
<P>Next, set up an index&#151;<TT>cardindex</TT>&#151;to keep track of what panel you are currently showing:</P>
<PRE>
 import java.awt.*;
 import java.applet.Applet;

 public class carder extends Applet implements Runnable&#123;

     cardPanel panel1, panel2, panel3;

&#8594;    int cardindex = 0;
     Thread cardThread;
     boolean animateFlag = true;
     CardLayout cardlayout;

     public void init() &#123;
          cardlayout = new CardLayout();
          setLayout(cardlayout);
          panel1 = new cardPanel("One");
          panel2 = new cardPanel("Two");
          panel3 = new cardPanel("Three");
          add("first", panel1);
          add("second", panel2);
          add("third", panel3);
          cardlayout.show(this, "first");
     &#125;
</PRE>
<P>You can increment that index and use a <TT>switch</TT> statement to place the correct panel on the screen. You use a <TT>switch</TT> statement because you can&#146;t pass your <TT>cardindex</TT> directly to the card layout manager. Instead of passing your <TT>cardindex</TT> directly to the card layout manager, you need to pass <TT>String</TT> objects like <TT>first</TT> and <TT>second</TT>. To do so, you&#146;ll use a <TT>switch</TT> statement that looks like this:</P>
<PRE>
               switch(&#43;&#43;cardindex)&#123;
                    case 1:
                         [code 1]
                            .
                            .
                            .
                         break;
                    case 2:
                         [code 2]
                            .
                            .
                            .
                         break;
                    case 3:
                         [code 3]
                            .
                            .
                            .
                         break;
                    case 4:
                         [code 4]
                            .
                            .
                            .
                         break;
               &#125;
</PRE>
<P>Here, increment <TT>cardindex</TT> and then execute code in the case that matches the new value in that variable. For example, if <TT>cardindex</TT> holds 3 after being incremented, the code labeled <TT>[code 3]</TT> above will be executed up to the <TT>break</TT> statement. When execution reaches the <TT>break</TT> statement, it leaves the <TT>switch</TT> statement.</P>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>If you do not put a <TT>break</TT> statement at the end of a case, execution &#147;falls through&#148; to the following case in a <TT>switch</TT> statement. In addition, instead of a <TT>case</TT> statement, the default statement&#151;usually placed at the end of a list of <TT>case</TT> statements&#151;handles all remaining cases.<HR></FONT>
</BLOCKQUOTE>
<P>In code, your <TT>switch</TT> statement looks like this:</P>
<PRE>
     public void run() &#123;
          while(animateFlag)&#123;
               switch(&#43;&#43;cardindex)&#123;
                    case 1:

                    case 2:

                    case 3:

                    case 4:
               .
               .
               .
     &#125;
</PRE>
<P>You&#146;ll handle <TT>case 1</TT> now. Here, you want to show the first card and also pause for 300 milliseconds:</P>
<PRE>
 public void run() &#123;
          while(animateFlag)&#123;
               switch(&#43;&#43;cardindex)&#123;
                    case 1:
&#8594;                        cardlayout.show(this, "first");
&#8594;                        try &#123;Thread.sleep(300);&#125;
&#8594;                        catch(InterruptedException e) &#123; &#125;
&#8594;                         break;
                    case 2:

                    case 3:

                    case 4:

               &#125;
</PRE>
<P>That shows the first card. Now you can do the same for the other cards, as follows:
</P>
<PRE>
 public void run() &#123;
          while(animateFlag)&#123;
               switch(&#43;&#43;cardindex)&#123;
                    case 1:
                         cardlayout.show(this, "first");
                         try &#123;Thread.sleep(300);&#125;
                         catch(InterruptedException e) &#123; &#125;
                         break;
&#8594;                   case 2:
&#8594;                        cardlayout.show(this, "second");
&#8594;                        try &#123;Thread.sleep(300);&#125;
&#8594;                        catch(InterruptedException e) &#123; &#125;
&#8594;                        break;
&#8594;                   case 3:
&#8594;                        cardlayout.show(this, "third");
&#8594;                        try &#123;Thread.sleep(300);&#125;
&#8594;                        catch(InterruptedException e) &#123; &#125;
&#8594;                        break;
                    case 4:
                &#125;
                repaint();
           &#125;
      &#125;
 &#125;
</PRE>
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="479-483.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="488-491.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

