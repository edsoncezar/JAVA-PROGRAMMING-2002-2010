<HTML>
<HEAD>


<TITLE>Industrial Strength Java:Advanced Data Structures:EarthWeb Inc.-</TITLE>





<P><CENTER>
<a href="0262-0265.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0270-0274.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-266"><P>Page 266</P></A>



<PRE>

      //set the value of the left node
      public void setLeft(BinaryTree newLeft) {
            left = newLeft;
      }

      //set the value of the right node
      public void setRight(BinaryTree newRight) {
            right = newRight;
      }
      //set the value of the left node
      public BinaryTree getLeft() {
            return left;
      }

      //set the value of the right node
      public BinaryTree getRight() {
            return right;
      }
</PRE>





<P>The insert() method in listing 8.9c will insert a new BinaryTree in its proper location
in the tree. The method functions by performing the following steps:
</P>

<OL>
<LI>          It first checks to see whether the value that is being inserted is equal to the value <BR>
of the current node. If this occurs, an error message is generated, and the
method exits.
<LI>     The insert() method next checks to see whether the new value is less than
the current one. If it is, one of two things happens&#151;if there is a left child, the left
child is told to manage the node and begins at step one. If there is no left child, a
new node is created as the left node with the key of the new value.
<LI>     If condition 2 does not return true, the insert() method checks to see whether
the new value is greater than the current value. If it is, one of two things will
happen&#151;if a right child exists, the right child will be commanded to manage the node, and
it begins at step one. If no right child exists, a new node is created as the left
node, with the key of the new value.
</OL>

<P>Listing 8.9c The insert() Method of the BinaryTree Class
</P>

<PRE>
      //inserts the new key at its correct position, also sets num
      //descendents, and height
      public void insert(int newKey) {
           //does the node already exist in this tree?
           if (newKey ==  key)

</PRE>


<A NAME="PAGENUM-267"><P>Page 267</P></A>



<PRE>
                 ModalOK.createModalOK(&quot;Key Already Exists&quot;);
           //is the new value less than the current value? if so we
           //insert to the left
           else if (newKey &lt;  key) {
            this.setNumDescendents(this.getNumDescendents() + 1);
            //if left is not null we have more children and pass the
            //value down
            if (left != null) {
                left.insert(newKey);
            }
            //otherwise we stick a new node on the left
            else
                left = new BinaryTree(newKey, this);
        }
        //is the new value greater than the current value? if so we
        //insert to the right

        else if (newKey &gt;  key) {
                 this.setNumDescendents(this.getNumDescendents() + 1);
            //if right is not null we have more children and pass the
            value down
            if (right != null) {
                right.insert(newKey);
            }
            //otherwise we stick a new node on the right
                  else
                right = new BinaryTree(newKey, this);
        }
    }
}
</PRE>

<H4><A NAME="ch08_ 16">
Dealing with Problems: An Error Dialog Box
</A></H4>

<P>Although the code in listings 8.9a through 8.9c ensures that your data is in a
manageable form, it needs some sort of interface if the user is to learn about manipulation of
binary trees. You will now develop an interface that the user will use to view and manipulate
data. Part of this interface is a small dialog box to display an error message that notifies the
user when he does things, such as attempting to insert a duplicate node or inserting a value
that is not an integer.
</P>

<P>The class is rather simple and does not need an object diagram; in fact, it only
supports two methods. Following is a list of the features the dialog box will need to support.
</P>

<UL>
<LI>          The dialog box needs to stop the user from interacting with the application until
he
</UL>

<A NAME="PAGENUM-268"><P>Page 268</P></A>


<UL>
tells the dialog box that he understands the issue at hand.
<LI>          The dialog box needs to stop disallow input until the user acknowledges the issue.
<LI>          The dialog box needs to support an obvious method by which the user can let
the dialog box know the user understands the issue at hand.
<LI>          The dialog box needs to display any amount of text, yet retain a uniform look.
</UL>

<P>The first bullet above can be implemented by making the dialog box modal. A
button marked OK that, when clicked, dismisses the box will bring support for the second
bullet. The third bullet is addressed by enabling the caller to pass in a String object and
then display that String in the dialog box. This dialog box extends java.awt.Dialog and
takes advantage of the pack() method, which forced the Frame to take up the minimum
space required by its components. Thus, the box will always be the same size relative to
the String length. Finally, use the GridBagLayout manager to keep the button size relative
to the String size.
</P>


<P>The code for the dialog box is shown in listing 8.10. In the class's constructor the screen
is built; including display of the error message, and OK button. After OK is clicked, an
event is sent to the action() method, and the action() method will close the dialog box.
</P>

<P>Listing 8.10A Modal Dialog Box That Will Display Any Text
</P>

<PRE>
package industrial;
import java.awt.*;
//the error dialog
class ModalOK extends Dialog {
      private Button okButton;            //the button which the user will
                                          //click to dismiss the box

      private static Frame createdFrame;  //the frame used to house
                                          //dialog box

       public ModalOK(Frame parent, String theMessage) {
             super(parent, true);     //tell Dialog that we are modal

             //set the layout manager
             GridBagLayout gb = new GridBagLayout();
             GridBagConstraints constraints = new GridBagConstraints();
</PRE>

<A NAME="PAGENUM-269"><P>Page 269</P></A>



<PRE>
             setLayout(gb);

             //create the widgets
             okButton = new Button(&quot;OK&quot;);
             Label message = new Label(theMessage);

             //place the widgets on the screen
             constraints.fill = GridBagConstraints.NONE;
             constraints.anchor = GridBagConstraints.CENTER;
             constraints.ipadx = 20;
             constraints.ipady = 20;
             constraints.weightx = 1.0;
             constraints.weighty = 1.0;
             constraints.gridwidth = GridBagConstraints.REMAINDER;
             constraints.gridheight = GridBagConstraints.RELATIVE;

             gb.setConstraints(message, constraints);
             add(message);

             constraints.ipadx = 0;
             constraints.ipady = 0;
             constraints.weightx = 0.0;
             constraints.weighty = 0.0;
             constraints.gridwidth = 1;
             constraints.gridheight = GridBagConstraints.REMAINDER;

             gb.setConstraints(okButton, constraints);
             add(okButton);

             //force our dialog box to take minimum of space
             pack();
       }

       //trap the ok click
       public boolean action(Event e, Object arg) {
             //if the user clicked on the OK button close the dialog box
             if(e.target == okButton) {
                   hide();
                   if(createdFrame != null)
                         createdFrame.hide();
             }
             return true;
       }
</PRE>


<P><CENTER>
<a href="0262-0265.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0270-0274.html">Next</A>
</CENTER></P>






</BODY>
</HTML>



