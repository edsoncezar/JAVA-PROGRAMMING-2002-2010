<HTML>
<HEAD>


<TITLE>Industrial Strength Java:Advanced Data Structures:EarthWeb Inc.-</TITLE>





<P><CENTER>
<a href="0258-0261.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0266-0269.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-262"><P>Page 262</P></A>




<P><a href="images\ch08fg09.jpg"><img src="images\tn_ch08fg09.jpg"></a><BR>
Figure 8.9
The object diagram for the BinaryTree class.
</P>



<P>and cover the node that contains 42. See how you now have two binary trees with roots
at the node, which contains 10, and also the node that contains 43? This is good because
it lets you develop a single class and allow it to relate to other classes of the same
type. Figure 8.9 shows the object diagram for the node class.
</P>

<P>The methods listed in figure 8.9 should not surprise you; you may have predicted the
list before you even saw it. The one method that might draw your attention is insert().
In Queue and Stack, you saw classes manipulating nodes&#151;but here the nodes are
manipulating themselves?! This occurs partly because you have empowered each node to act as
an intelligent independent object. Not only does it know its height and number of
descendants, but it also knows how to add a new node onto itself. Remember that not only
are instances of BinaryTree nodes in a tree, but they can also be separate binary trees.
</P>



<P>You may be wondering how a node inserts another node onto
itself. The following list presents the thought processes a
BinaryTree object will go through when deciding where to place a new node.
</P>


<OL>
<LI>          Compare the value of the new node to the current value.
<LI>     If the new value is equal to the current value, present the user
         with an error message, as your tree will contain only unique
         nodes.
</OL>

<BR><BR>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
NOTE
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
An oft-debated topic in binary search tree research is what to
do with nodes that are equal to each other. One school says
to place them to the left, and the other says to place them to
the right. Although it matters little which way you go, I
have chosen to reject duplicate nodes all together. This
enables the application to stay neutral in the
left/right child fight and enables me to do some interesting
UI development when it comes to presenting error messages.
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>

<A NAME="PAGENUM-263"><P>Page 263</P></A>


<OL START="3">
<LI>     If the new value is less than the current value, look at the left
               node. If that node exists, tell it to deal with the new node.
               If the left node is null, however, you can insert the new value
               as the left node.
</OL>


<P><a href="images\ch08fg10.jpg"><img src="images\tn_ch08fg10.jpg"></a><BR>
Figure 8.10
Each node is intelligent enough to decide where
to insert a new node.
</P>


<OL START="4">
<LI>     If the new value is less than the current value, look at the
               right node. If that node exists, tell it to deal with the new
               node. However, if the right node is null, you can insert the
               new value as the right node.
</OL>

<P>It is easy to see that the process will continue over and over until <BR>
a null node is reached. The process is further illustrated by
figure 8.10.
</P>

<P>Before jumping into the code for the BinaryTree class, a few
more features of the class must be covered. Tracking the number
of children a node has is a rather elegant solution, which is based
on the fact that when inserting a new node, you only visit nodes that
</P>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
NOTE
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
A potential point of confusion in listing 8.9c is the
reference to a class called ModalOK. This class will be
introduced when UI issues are covered later in the chapter and is
simply a modal dialog box  that displays the error message passed to it.
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>

<A NAME="PAGENUM-264"><P>Page 264</P></A>


<P>are going to be parents of that new node. Therefore, every time you discover that the new node's value is less
than or greater than the current node's value during an insertion, you tell the current node
to increase its child count. 
</P>



<P>Although a node's children are constantly growing, the
node's height is fixed when that node is inserted. Because a new node
is one level below its parent, you can set the height of a node
by adding one to the value of its parent's height. So after you
have decided where to insert a new node, you have to find out what
the height of the new node's parent is and add one to it. If the
parent does not exist, you can conclude that the node is the root of the <BR>
tree and has a height of 0. Take a look at the code in listings
8.9a through 8.9c where the BinaryTree class is actually written.
</P>

<P>In listing 8.9a is the constructor that is used when creating a
new BinaryTree node. It is passed an int that is used as the key for
the node (or quantity, or value), and also another BinaryTree, which
is the parent of this new node. Additionally the node sets its height equal to 0 if its parent
is null, or 1 + the height of its parent if its parent is not null.
</P>


<P>Listing 8.9a The Constructor for the BinaryTree
</P>

<PRE>
package industrial;
//this is the meat of the program. the class is a node of the tree, and our
//tree will be made up of as many nodes as is necessary.
public class BinaryTree {
      //the data stored in the node
      private int key;
      //these three nodes are &quot;pointers&quot; to succors (or predecessors)
      private BinaryTree left;
      private BinaryTree right;
      private BinaryTree parent;
      //the height of the current node
      private int height=0;
      //the number of descendants of the current node
      private int numDescendents;
      //an error dialog which is created when necessary
      private ModalOK theError;

      //constructor, creates a new tree with the given int as its value
      public BinaryTree(int theKey, BinaryTree p) {
            key = theKey;            //set the current key
            parent = p;              //the parent (or null for the root)
            numDescendents = 0;      //the number of descendants always
                        //zero for a new node
</PRE>


<A NAME="PAGENUM-265"><P>Page 265</P></A>



<PRE>
            //the parent is null we are at the root otherwise
            //the current height is one more than the parent's height
            if (parent != null)
                  height = (parent.getHeight() + 1);
            else
                  height = 0;

            //a new node has no children (yet)
            left=null;
            right=null;
      }
</PRE>

<P>Listing 8.9b contains a series of utility methods that enable the viewing and alteration
of BinaryTree's private member data.
</P>




<P>Listing 8.9b Utility Methods Used to Enable Access to Private Member Data
</P>

<PRE>
      //returns the height of the current node
      public int getHeight()
            { return height; }

      //returns the number of descendants of the current node
      public int getNumDescendents()
            { return numDescendents; }

      //sets the height of the current node to h
      private void setHeight(int h)
            { height = h; }

      //sets the number of descendants of the current node to nd
      private void setNumDescendents(int nd)
            { numDescendents = nd; }

      //returns the current value of key
      public int getKey() {
            return key;
      }

      //allows us to alter the value of key
      private void setKey(int k) {
            key = k;
      }
</PRE>


<P><CENTER>
<a href="0258-0261.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0266-0269.html">Next</A>
</CENTER></P>






</BODY>
</HTML>



