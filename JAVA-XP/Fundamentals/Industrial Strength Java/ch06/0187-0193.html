<HTML>

<HEAD>



<TITLE>Industrial Strength Java:Advanced AWT:EarthWeb Inc.-</TITLE>



















<P><CENTER>

<a href="0181-0186.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0194-0196.html">Next</A>

</CENTER></P>



<A NAME="PAGENUM-187"><P>Page 187</P></A>






<PRE>

                 theParent,tellResponse(this, ((Button)evt.target)

                                  &Acirc;getLabel());

             }

             return true;

       }

}



</PRE>








<P>

<B>

The Decision Class

</B>

</P>



<P>A final dialog box you must implement is a slightly modified version of the

previous Question class. It is common to prompt the user to answer a question, allow a

free-text answer, and support OK and Cancel buttons. However, it is also common for an

application to prompt the user to answer a question using only the OK and Cancel

buttons. Creating this class involves little difficulty: Simply remove the TextField from the

Ques-     tion dialog box. You also must modify the action method to send tellResponse() OK

or Cancel instead of the text in the TextField.

</P>



<P>Listing 6.6 illustrates the Decision class. Figure 6.4 illustrates this dialog box

supporting the continuing password dialog box.

</P>



<P>Listing 6.6 The Decision Class Prompts the User with a Question

</P>




<PRE>

package industrial;

import java.awt.*;

//Decision class prompts the user for an answer to either accept or

//cancel some question. When the user answers, the parent will be notified

//through Its tellResponse() method.

public class Decision extends Dialog {



      //GUI controls

      private       Label                   text;

      private            Button                  okButton;

      private            Button                  cancelButton;

      private            String                  theChoice = null;

      private            FrameWork            theParent;



      //Decision class allows the user to answer a user specificed question

      //with either OK or Cancel. In either case, the object which owns

      //the class will be notified through its tellRespose() method.

      public Decision(FrameWork parent, String incomingText) {

            super(parent, true);



            //assign the parent

            theParent = parent;

</PRE>


<PRE>
continues
</PRE>






<A NAME="PAGENUM-188"><P>Page 188</P></A>



<P>Listing 6.6 Continued

</P>




<PRE>

            //create the components

            text = new Label(incomingText);

            okButton = new Button(&quot;OK&quot;);

            cancelButton = new Button(&quot;Cancel&quot;);

            //use the GridBagLayout manager to draw the screen

            GridBagLayout myLayout = new GridBagLayout();

            GridBagConstraints constraints = new GridBagConstraints();

            this.setLayout(myLayout);



            constraints.weightx = 100;

            constraints.weighty = 100;

            constraints.gridx = 0;

            constraints.gridy = 0;

            constraints.gridwidth = 6;

            constraints.gridheight = 1;

            myLayout.setConstraints(text, constraints);

            this.add(text);



            constraints.gridx = 5;

            constraints.gridy = 3;

            constraints.gridwidth = 1;

            constraints.gridheight = 1;

            myLayout.setConstraints(okButton, constraints);

            this.add(okButton);

            constraints.gridx = 2;

            myLayout.setConstraints(cancelButton, constraints);

            this.add(cancelButton);

           this.pack();

            this.show();

      }





      //place a border around the dialog

      public Insets insets() {

            return new Insets(15, 15, 15, 15);

      }



      //trap the action generated when a user clicks on a button

      public boolean action(Event evt, Object arg) {

            //did the event occur over a button

            if(evt.target instanceof Button)

 {theParent.tellResponse(this,((Button)evt.target).getLabel());



</PRE>






<A NAME="PAGENUM-189"><P>Page 189</P></A>











<P><a href="images\ch06fg04.jpg"><img src="images\tn_ch06fg04.jpg"></a><BR>

Figure 6.4

The Decision class notifying the user of more

password trouble.

</P>








<PRE>

                  this.hide();

                  return true;

            }

            return super.action(evt, arg);

      }

}

</PRE>










<H4><A NAME="ch06_ 9">

Finishing the Application Framework

</A></H4>



<P>To complete this chapter, two tasks remain. First, you must integrate the various pieces

of the framework together. Then, you must develop a small proof-of-concept application

with the framework.

</P>



<B>

Finishing the Framework

</B>



<P>Listing 6.7 provides the completed framework. Most of the framework was created

during this chapter; the rest is simply glue used to hold it together.

</P>



<P>Listing 6.7 The Completed Application Framework

</P>




<PRE>

package industrial;

import java.awt.*;

import java.awt.image.*;

import java.io.*;

//Generic application framework. Can be subclassed by users to either

//create an instant GUI to a text-based application, or used as a

//starting point for new applications.

public class FrameWork extends Frame {



      //menu components. we make everything public to allow for access

      //from other classes, packages, etc... while the framework is

      //great for any application users should be able to modify anything

      //they desire w/o editing this class.

      public      MenuBar        myMenuBar;

</PRE>


<PRE>
continues
</PRE>






<A NAME="PAGENUM-190"><P>Page 190</P></A>



<P>Listing 6.7 Continued

</P>




<PRE>

      public      Menu           fileMenu;

      public      MenuItem       fileNew;

      public      MenuItem       fileOpen;

      public      MenuItem       fileSave;

      public      MenuItem       fileQuit;

      public      Menu           editMenu;

      public      MenuItem       editUndo;

      public      MenuItem       editCut;

      public      MenuItem       editCopy;

      public      MenuItem       editPaste;





      //file dialogs

      public FileDialog myOpenDialog;

      public FileDialog mySaveDialog;





       //constructor, creates a new Frame with the title passed as a

       //parameter

          public FrameWork(String title) {

            super.setBackground(Color.white);

            super.resize(300, 200);

            super.setTitle(title);

            this.initMenus();

      }





      //set up a border around the Frame ... asthetic reasons only

      public Insets insets() {

            return new Insets(10, 10, 10, 10);

      }

      //this class will create all menus and add them to the menubar

      public void initMenus() {

            //create the menus

            myMenuBar = new MenuBar();

            //add the menubar to the frame

            this.setMenuBar(myMenuBar);

            fileMenu = new Menu(&quot;File&quot;, true);

            editMenu = new Menu(&quot;Edit&quot;, true);



            //create choices for the file menu

            fileNew = new MenuItem(&quot;New Frame&quot;);

            fileOpen = new MenuItem(&quot;Open...&quot;);

            fileSave = new MenuItem(&quot;Save...&quot;);

</PRE>






<A NAME="PAGENUM-191"><P>Page 191</P></A>






<PRE>

            fileQuit = new MenuItem(&quot;Quit&quot;);



            //add choices to the file menu

            fileMenu.add(fileNew);

            fileMenu.add(fileOpen);

            fileMenu.add(fileSave);



            fileMenu.addSeparator();

            fileMenu.add(fileQuit);

            //add the file menu

            myMenuBar.add(fileMenu);



             //create the choices for the edit menu

                editUndo = new MenuItem(&quot;Undo&quot;);

                editCut = new MenuItem(&quot;Cut&quot;);

                editCopy = new MenuItem(&quot;Copy&quot;);

                editPaste = new MenuItem(&quot;Paste&quot;);



            //add choices to the edit menu

                editMenu.add(editUndo);

                editMenu.addSeparator();

                editMenu.add(editCut);

                editMenu.add(editCopy);

                editMenu.add(editPaste);



            //add the component menu

            myMenuBar.add(editMenu);

      }





      //create a new frame, a utility method called when File--&gt;New is

      //selected users may want to overload with this method or to trap

      //the New selection is an action method which precedes this class.

      public void createNewFrame(String title) {

            FrameWork newFrame = new FrameWork(title);

            newFrame.resize(300, 200);

            newFrame.show();

      }





      //create open dialog

      public void createOpenDialog() {

            myOpenDialog = new FileDialog(this, &quot;Open File&quot;,

            FileDialog.LOAD);

            myOpenDialog.setDirectory(&quot;.&quot;);

            myOpenDialog.setFile(&quot;openFile.txt&quot;);



</PRE>


<PRE>
continues
</PRE>








<A NAME="PAGENUM-192"><P>Page 192</P></A>





<P>Listing 6.7 Continued

</P>






<PRE>

            myOpenDialog.show();

      }





      //create save dialog

      public void createSaveDialog() {

            mySaveDialog = new FileDialog(this, &quot;Save File As&quot;,

            FileDialog.SAVE);



            mySaveDialog.setDirectory(&quot;.&quot;);

            mySaveDialog.setFile(&quot;newFile.txt&quot;);

            mySaveDialog.show();

      }





      //display the String arg in a modal dialog

      public void doResponse(String arg) {

            ModalOK       theResponse = new ModalOK(this, arg);



            theResponse.pack();

            theResponse.show();

      }





      //catch menu choices

      public boolean action(Event evt, Object arg) {

            if(&quot;New Frame&quot;.equals(arg)) {

                  this.createNewFrame(&quot;New Frame&quot;);

              return true;

            }

            else if(&quot;Open...&quot;.equals(arg)) {

                  this.createOpenDialog();

                return true;

            }

            else if(&quot;Save...&quot;.equals(arg)) {

                  this.createSaveDialog();

                return true;

            }

            else if(&quot;Quit&quot;.equals(arg)) {

                  System.exit(0);

              return true;

            }

            return super.action(evt, arg);

      }



</PRE>






<A NAME="PAGENUM-193"><P>Page 193</P></A>








<PRE>



    //will be given info when a dialog is dismissed, it is up to a child

    //class to override this method to actually deal with any amount

    //of user interaction.

    public void tellResponse(Object arg, String answer) {

    }

    //handleEvent must be overidden to trap Event.WINDOW_DESTROY.

    //By placing this method here in the framework, child classes

    //will not have to worry about catching this event.

      public boolean handleEvent(Event e) {

            if(e.id == Event.WINDOW_DESTROY) {

                  this.hide();

                  return true;

            }

            return super.handleEvent(e);

      }

}

</PRE>


<P>

<B>

Putting the Application Framework to Use

</B>

</P>

<P>At this point, you should have support both for standard menus and a series of

dialogs. Together the classes form a flexible, reusable framework.

</P>



<P>To demonstrate the application's functions, create a small application that extends

the framework and accomplishes the following tasks: adds new menu options, creates

dialog boxes, and traps dialog choices though a tellResponse() method. Additionally, the

demo application uses the createOpenDialog() method in the dialog parent to draw the open

file dialog. Using this method allows the application to call getFile() to identify the

selected file. Simply print the file name as files stream into an application in an

application-specific manner.

</P>



<P>Listing 6.8 illustrates the demo application. Figure 6.5 shows the application in

various states.

</P>



<P>Listing 6.8 A Small Application to Demonstrate the Application Framework

</P>




<PRE>

import industrial.*;

import java.awt.*;

//Class DemoApplication, proves the funcitonality of the application

//framework.

</PRE>


<PRE>
continues
</PRE>








<P><CENTER>

<a href="0181-0186.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0194-0196.html">Next</A>

</CENTER></P>











</BODY>
</HTML>







