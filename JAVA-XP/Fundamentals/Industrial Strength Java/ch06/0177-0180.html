<HTML>
<HEAD>


<TITLE>Industrial Strength Java:Advanced AWT:EarthWeb Inc.-</TITLE>





<P><CENTER>
<a href="0173-0176.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0181-0186.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-177"><P>Page 177</P></A>

<PRE>

        fileOpen = new MenuItem(&quot;Open...&quot;);
        fileSave = new MenuItem(&quot;Save...&quot;);
        fileQuit = new MenuItem(&quot;Quit&quot;);
        //add choices to the file menu
        fileMenu.add(fileNew);
        fileMenu.add(fileOpen);
        fileMenu.add(fileSave);
        fileMenu.addSeparator();
        fileMenu.add(fileQuit);

        //add the file menu
        myMenuBar.add(fileMenu);

        //create the choices for the edit menu
        editUndo = new MenuItem(&quot;Undo&quot;);
        editCut = new MenuItem(&quot;Cut&quot;);
        editCopy = new MenuItem(&quot;Copy&quot;);
        editPaste = new MenuItem(&quot;Paste&quot;);

        //add choices to the edit menu
        editMenu.add(editUndo);
        editMenu.addSeparator();
        editMenu.add(editCut);
        editMenu.add(editCopy);
        editMenu.add(editPaste);

        //add the component menu
        myMenuBar.add(editMenu);
}
</PRE>

<H4><A NAME="ch06_ 6">
Moving the Menu Code to Completion
</A></H4>

<P>In addition to declaring all classes public, the framework class needs one
additional modification. If you allow child classes to modify the menu structure of a menu
bar created within its parent class, you must refrain from calling the show() method. Chapter
5 called this method in the constructor of FileFrame after adding menus to the Frame.
This process must follow that order precisely; after you call show(), you cannot easily
modify the menu structure.
</P>

<P>In the modified version of the menu code, the child classes should have the capability
to
</P>


<A NAME="PAGENUM-178"><P>Page 178</P></A>


<P>fully modify the menu bar. Thus, you should refrain from calling show() and instead
allow the child classes to call this method. Actually, this situation enables framework users
to wait to display the frame until completing certain tasks, such as loading an image.
</P>





<H4><A NAME="ch06_ 7">
Event-Trapping
</A></H4>

<P>In addition to offering support for visually creating menus, the framework must
contain built-in support for trapping the events generated when the user selects a menu
option. Again, you can borrow the action() method from code developed in listing 5.6. Here,
you implement basic support for the menu options and allow child classes to override
the method to handle unique situations. More often than not, all significant
event-trapping occurs in child classes. By implementing the action() method, however, you
provide framework users with a set of guidelines for implementing their own version of
the method.
</P>

<P>Listing 6.2 illustrates the action() method, as well as helper methods called by
action(). These helper methods create items such as an Open File dialog box, a Save File
dialog box, or a new top-level Frame. Because the parent class traps the menu choices
associated with the helper methods, you must override only the helper method itself instead
of trapping the menu choice again. In addition, you can take advantage of the helper
methods' ability to perform some specific tasks. With the Open File dialog helper method,
for example, simply wait until the dialog box is dismissed, then call getFile() to find out
the name of the selected file, and finally stream in that file. Thus, you never have to open
and create the dialog box itself. (The &Acirc; symbol indicates a line that would fit on the
previous line were this a computer screen.)
</P>

<P>Listing 6.2 Methods to Trap Menu Selections and to Respond to Specific<BR>
Helper Tasks
</P>

<PRE>
//create a new frame, a utility method called when Fill--&gt;New is
//selected
public void createNewFrame(String title) {
        FrameWork newFrame = new FrameWork(title);
        newFrame.resize(300, 200);
        newFrame.show();
}
//create open dialog
public void createOpenDialog() {
        myOpenDialog = new FileDialog(this, &quot;Open File&quot;,
FileDialog.LOAD);

</PRE>



<A NAME="PAGENUM-179"><P>Page 179</P></A>


<PRE>
        myOpenDialog.setDirectory(&quot;.&quot;);
        myOpenDialog.setFile(&quot;openFile.txt&quot;);
        myOpenDialog.show();
}
//create save dialog
public void createSaveDialog() {
        mySaveDialog = new FileDialog(this, &quot;Save File As&quot;,
             &Acirc;FileDialog.SAVE);
        mySaveDialog.setDirectory(&quot;.&quot;);
        mySaveDialog.setFile(&quot;newFile.txt&quot;);
        mySaveDialog.show();
}
//display the String arg in a modal dialog
public void doResponse(String arg) {
        ModalOK         theResponse = new ModalOK(this, arg);

        theResponse.pack();
        theResponse.show();
}
//trap menu choices
public boolean action(Event evt, Object arg) {
        if(&quot;New Frame&quot;.equals(arg)) {
                this.createNewFrame(&quot;New Frame&quot;);
        return true;
        }
        else if(&quot;Open...&quot;.equals(arg)) {
                this.createOpenDialog();
        return true;
        }
        else if(&quot;Save...&quot;.equals(arg)) {
                this.createSaveDialog();
        return true;
        }
        else if(&quot;Quit&quot;.equals(arg)) {
                System.exit(0);
        return true;
        }
        return super.action(evt, arg);
}
</PRE>

<H4><A NAME="ch06_ 8">
Responding to User Input
</A></H4>

<P>A series of flexible dialog boxes is important to the success of this application
frame-
</P>



<A NAME="PAGENUM-180"><P>Page 180</P></A>



<P>work. An application must communicate with a user not only through menus, but
via dialog boxes. With code reuse, you can modify some of the code created in Chapter 5 <BR>
to serve as a dialog box repository.
</P>






<P>
This modification involves implementing a flexible, consistent means of understanding
the user's answers to questions posed in the dialog boxes. You always can institute a
unique manner to deal with each new dialog box, but doing so can make your code hard to
read. Instead, institute a method, similar to the action() method, to be called when the dialog
is dismissed. This method uses a series of if statements to determine how to process
the user's answer.
</P>

<P>If for one moment you think that this is going to be difficult to implement, realize
that basically the same situation exists in the action() method. Create a method
called tellResponse(), which passes both a reference to the calling object and a string
representing the user's answer to the question posed in the dialog box. Processing the answer
now involves testing&#151;through a series of
&quot;if&quot; statements&#151;for the proper &quot;reaction&quot; method
to call. Because the framework does not contain a vested interest in the answer to any
dialog box, the version of tellResponse() in the framework itself will not contain any
arguments. These are instead implemented in a child class.
</P>

<B>
The Question Class
</B>

<P>For an illustration of exactly how this notification occurs, refer to the Question class
in listing 6.3. A Question object prompts the user with a question, and the user types
an answer and clicks either OK or Cancel. Of course, if the user clicks Cancel, no action
is taken. If this happens, pass a reference to the Question object through tellResponse();
a null String indicates that the user clicked Cancel. Otherwise, pass not only a reference
to the Question object, but also the text the user entered. This created dialog passes
a reference to the object which owns it, and the tellResponse() method notifies that
object when the dialog is dismissed.
</P>

<P>Listing 6.3 Setting a Dialog Box to Prompt the User to Answer Either OK or
Cancel to a Question
</P>

<PRE>
package industrial;
import java.awt.*;
//Question class allows the user to answer a user specified question
//with either OK or Cancel. In either case, the object which owns the
//class will be notified through its tellResponse() method.
public class Question extends Dialog {



</PRE>

<P><CENTER>
<a href="0173-0176.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0181-0186.html">Next</A>
</CENTER></P>






</BODY>
</HTML>



