<HTML>

<HEAD>



<TITLE>Industrial Strength Java:Advanced AWT:EarthWeb Inc.-</TITLE>



















<P><CENTER>

<a href="0177-0180.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0187-0193.html">Next</A>

</CENTER></P>



<A NAME="PAGENUM-181"><P>Page 181</P></A>






<PRE>





        //GUI controls

        private        Label                 text;

        private        TextField             theTextField;

        private        Button                okButton;

        private        Button                cancelButton;

        private        String                 theAnswer = null;

        private        FrameWork              theParent;

        //constructor, accepts a string as a parameter and uses

        //it as the question. Also accepts a reference to the object

        //which owns the dialog.

        public Question(FrameWork parent, String incomingText) {

            super(parent, true);

            theParent = parent;



            //create the components

            text = new Label(incomingText);

            theTextField = new TextField(20);

            okButton = new Button(&quot;OK&quot;);

            cancelButton = new Button(&quot;Cancel&quot;);

            //use the GridBagLayout manager to draw the screen

            GridBagLayout myLayout = new GridBagLayout();

            GridBagConstraints constraints = new GridBagConstraints();

            this.setLayout(myLayout);



            constraints.weightx = 100;

            constraints.weighty = 100;

            constraints.gridx = 0;

            constraints.gridy = 0;

            constraints.gridwidth = 6;

            constraints.gridheight = 1;

            myLayout.setConstraints(text, constraints);

            this.add(text);



            constraints.gridy = 1;

            myLayout.setConstraints(theTextField, constraints);

            this.add(theTextField);

            constraints.gridx = 5;

            constraints.gridy = 3;

            constraints.gridwidth = 1;

            constraints.gridheight = 1;

            myLayout.setConstraints(okButton, constraints);

            this.add(okButton);

            constraints.gridx = 3;

            myLayout.setConstraints(cancelButton, constraints);

            this.add(cancelButton);



            this.pack();

            this.show();

      }



</PRE>


<PRE>
continues
</PRE>






<A NAME="PAGENUM-182"><P>Page 182</P></A>





<P>

Listing 6.3 Continued

</P>




<PRE>

      //place a border around the dialog

      public Insets insets() {

            return new Insets(15, 15, 15, 15);

      }



      public String getLabel() {

            return text.getText();

      }



      //trap the action generated when a user clicks on a button

      public boolean action(Event evt, Object arg) {

            //did the event occur over a button

            if(evt.target instanceof Button) {

                  //notify the owner that the dialog has been dismissed

                  if(((Button)evt.target).getLabel().equals(&quot;OK&quot;)) {

                        theParent.tellResponse(this,theTextField.getText());

                  }

                  else {

                        theParent.tellResponse(this, null);

                  }

                  this.hide();

                  return true;

            }

            return super.action(evt, arg);

       }

}

</PRE>




<P>The Question dialog box offers a dialog standard to most applications. You also

should offer support dialog boxes that both pose a question to the user and allow him to click

Yes

</P>









<P><a href="images\ch06fg01.jpg"><img src="images\tn_ch06fg01.jpg"></a><BR>

Figure 6.1

The Question dialog box posing.

</P>





<A NAME="PAGENUM-183"><P>Page 183</P></A>



<P>or No. A third type of dialog, the ModalOK, comes from the ModalOK class, which

was implemented in listing 5.2, modified to call the tellResponse() method. Finally, you

should offer a dialog class that prompts the user to answer a question with OK or Cancel (see

Fig. 6.1).<BR>

</P>







<B>

The YesNo class

</B>



<P>Listing 6.4 illustrates a class called YesNo. This class passes a string and displays

that string aside two buttons: a Yes label and a No label. When a user clicks on either

button, the action() method closes the dialog box and notifies the parent. As with all

Dialog classes, the tellResponse() method is called when the dialog is dismissed. In this case,

the YesNo class passed to tellResponse() will be a reference to the calling object and a

string, which will either contain the value &quot;Yes&quot; or &quot;No.&quot;

</P>



<P>Listing 6.4 The YesNo Class Prompts the User to Answer a Question with <BR>

Either Yes or No

</P>


<PRE>

package industrial;

import java.awt.*;

//YesNo class allows the user to answer a user specified question

//with either Yes or No. In either case, the object which owns the class

//will be notified through its tellResponse() method.

public class YesNo extends Dialog {



      //GUI controls

      private       Label                   text;

      private            Button                  okButton;

      private            Button                  cancelButton;

      private            String                  theChoice = null;

      private            FrameWork            theParent;



      //constructor, accepts a string as a parameter and uses

      //it as the question. Also accepts a reference to the object which

      //owns the dialog.

      public YesNo(FrameWork parent, String incomingText) {

            super(parent, true);



            //assign the parent

            theParent = parent;



            //create the components

            text = new Label(incomingText);

</PRE>


<PRE>
continues
</PRE>






<A NAME="PAGENUM-184"><P>Page 184</P></A>





<P>Listing 6.4 Continued

</P>






<PRE>

            okButton = new Button(&quot;Yes&quot;);

            cancelButton = new Button(&quot;No&quot;);

            //use the GridBagLayout manager to draw the screen

            GridBagLayout myLayout = new GridBagLayout();

            GridBagConstraints constraints = new GridBagConstraints();

            this.setLayout(myLayout);



            constraints.weightx = 100;

            constraints.weighty = 100;

            constraints.gridx = 0;

            constraints.gridy = 0;

            constraints.gridwidth = 6;

            constraints.gridheight = 1;

            myLayout.setConstraints(text, constraints);

            this.add(text);



            constraints.gridx = 5;

            constraints.gridy = 3;

            constraints.gridwidth = 1;

            constraints.gridheight = 1;

            myLayout.setConstraints(okButton, constraints);

            this.add(okButton);

            constraints.gridx = 2;

            myLayout.setConstraints(cancelButton, constraints);

            this.add(cancelButton);



            this.pack();

            this.show();

      }





      //place a border around the dialog

      public Insets insets() {

            return new Insets(15, 15, 15, 15);

      }

     //trap the action generated when a user clicks on a button

      public boolean action(Event evt, Object arg) {

            //did the event occur over a button

            if(evt.target instanceof Button) {

                  theParent.tellResponse(this,((Button)evt.target).getLabel());

                  this.hide();

                  return true;

            }

            return super.action(evt, arg);

</PRE>








<A NAME="PAGENUM-185"><P>Page 185</P></A>







<P><a href="images\ch06fg02.jpg"><img src="images\tn_ch06fg02.jpg"></a><BR>

Figure 6.2

The YesNo dialog box prompting the user to continue or not.

</P>






<PRE>

      }

}

</PRE>






<P>Figure 6.2 illustrates the YesNo dialog box prompting a user with a possible follow-up

to the question posed in figure 6.1.

</P>









<B>

The ModalOK Class, Revisited

</B>



<P>As previously stated, this chapter implements a modified version of the ModalOK

dialog box. Instead of simply closing the dialog box, the action() method now also calls

the tellResponse() method in the object that owns the dialog box. Listing 6.5 illustrates

the new ModalOK class. Figure 6.3 illustrates the dialog box informing the user of a

rather unfortunate situation.

</P>



<P>Listing 6.5Presenting the User with a Statement and Enabling Her to Click OK

</P>




<PRE>

package industrial;

import java.awt.*;

//A modal dialog enables the user to enter input and click OK.

public class ModalOK extends Dialog {

      private Button okButton;          //the button which the user will

                                        //click to dismiss the box

      private FrameWork theParent;      //reference to the dialog's owner



       public ModalOK(FrameWork parent, String theMessage) {

            super(parent, false);     //tell Dialog that we are modal



             //set up the parent reference

             theParent = parent;



             //set the layout manager

             GridBagLayout gb = new GridBagLayout();

             GridBagConstraints contraints = new GridBagConstraints();

             setLayout(gb);



             //create the widgets

</PRE>


<PRE>

                                                     continues

</PRE>




<A NAME="PAGENUM-186"><P>Page 186</P></A>





<P>Listing 6.5 Continued

</P>




<PRE>

             okButton = new Button(&quot;OK&quot;);

             Label message = new Label(theMessage);



             //place the widgets on the screen

             contraints.fill = GridBagConstraints.NONE;

             contraints.anchor = GridBagConstraints.CENTER;

             contraints.ipadx = 20;

             contraints.ipady = 20;

             contraints.weightx = 1.0;

             contraints.weighty = 1.0;

             contraints.gridwidth = GridBagConstraints.REMAINDER;

             contraints.gridheight = GridBagConstraints.RELATIVE;



             gb.setConstraints(message, contraints);

             add(message);



             contraints.ipadx = 0;

             contraints.ipady = 0;

             contraints.weightx = 0.0;

             contraints.weighty = 0.0;

             contraints.gridwidth = 1;

             contraints.gridheight = GridBagConstraints.REMAINDER;



             gb.setConstraints(okButton, constraints);

             add(okButton);



             //force our dialog box to take minimum of space

             pack();



             //display the dialog

             show();

       }



       //trap the ok click

       public boolean action(Event evt, Object arg) {

           //if the user clicked on the OK button close the dialog box,

           //and call tellResponse()

             if(evt.target instanceof Button) {

                   this.hide();

</PRE>






<P><a href="images\ch06fg03.jpg"><img src="images\tn_ch06fg03.jpg"></a><BR>

Figure 6.3

The ModalOK dialog box relaying a message from the

application to the user.

</P>





<P><CENTER>

<a href="0177-0180.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0187-0193.html">Next</A>

</CENTER></P>











</BODY>
</HTML>







