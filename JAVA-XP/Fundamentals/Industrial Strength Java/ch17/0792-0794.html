<HTML>
<HEAD>


<TITLE>Industrial Strength Java:JDBC:EarthWeb Inc.-</TITLE>





<P><CENTER>
<a href="0788-0791.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0795-0798.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-792"><P>Page 792</P></A>


<P>Listing 17.9Continued
</P>

<PRE>
call<U>_</U>stmt.setString(5, User_Address);
try {
      call_stmt.executeUpdate();
      }
 catch (SQLException e) {}
 boolean successful = call_stmt.getBoolean(1);
 if (successful)
      send_user_message(&quot;Transaction successful!&quot;);
          // send_user_message displays a message on the screen
else
     send_user_message(&quot;Transaction failed!&quot;);
</PRE>

<P>To execute a stored procedure, it is necessary to use the
Callable-     Statement interface. The CallableStatement interface extends
the PreparedStatement interface that was used earlier. The
Callable-     Statement object is created by using the
prepareCall method of the Connection object. The prepareCall method takes a special
escape sequence (refer to &quot;{call ....}&quot;). The curly braces form an
escape sequence that instructs the driver and the driver manager that this
is a stored procedure. The second line of code uses a version of the
call statement that returns a result value. The result value is indicated
by the first question mark. Every result value must be registered as
an OUT parameter with the CallableStatement. This is accomplished 
by using the registerOutParameter as shown on the fifth line.
The java.sql.Types.Bit data type has been used because the stored
pro-     cedure is expected to return a Boolean value. The second line
of code has several ? symbols apart from the result value. Here,
these are used as IN parameters. Actually, these can be used as either
IN or OUT parameters. If they are used as OUT parameters, they
must be registered with the CallableStatement, in a manner similar to
the result value. The IN parameters are specified by using the setXXX (XXX represents
Int, String, and so on) methods of the PreparedStatement interface. The four IN
parameters that are required for this procedure are set between the sixth and ninth lines. The
command &quot;call_stmt.executeUpdate();&quot; actually executes the CallableStatement.
</P>

<P>The statement &quot;Boolean successful =
call_stmt.getBoolean(1);&quot; extracts the Boolean
value returned by the stored procedure to check if the transaction was successful. The last
four lines of code are fairly straightforward.
</P>

<BR>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
NOTE
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
It is possible that some drivers may send the call
statement to the database when the prepareCall method is
invoked. Others wait until the executeUpdate method of the
Call-  ableStatement is invoked. So, it is good programming
prac-  tice to try to catch exceptions for both the prepareCall
and executeUpdate methods.
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>


<A NAME="PAGENUM-793"><P>Page 793</P></A>


<P><B>
Step Four: Cleaning Up
</B></P>

<P>Now that the transaction has been completed, it is good practice to release all
resources that the application might have obtained. Each of the Statement objects used can
be released using the close() method. For example, the following code releases the
resources held by Statement object, stmt1:
</P>

<PRE>
          stmt1.close();
</PRE>

<P>This process should be repeated for each Statement object created by the application.
</P>

<P>Finally, the database connections should be released. This is also achieved by using
the close() method. For example, the following closes Connection object, connection1,
and releases the resources held by this connection:
</P>

<PRE>
          connection1.close();
</PRE>

<P>Thus, JDBC aided H2O in creating the web shop that they desired. This was achieved
by leveraging their system infrastructure using this modern technology.
</P>

<H3><A NAME="ch17_ 31">
Comparison of JDBC with Existing <BR>Database Access Technologies
for <BR>the World Wide Web
</A></H3>

<P>The use of the World Wide Web as a medium for business brought into existence
many technologies that enable database access over the web. Notable among these
technologies is Common Gateway Interface, or CGI, as it is known. In this section, the JDBC
approach is compared to some of the existing web-based database access technologies, namely
the following:
</P>

<UL>
<LI>          CGI scripts
<LI>          Java API for databases
<LI>          Vendor tools for database access from the web
</UL>


<A NAME="PAGENUM-794"><P>Page 794</P></A>



<H4><A NAME="ch17_ 32">
CGI Scripts
</A></H4>

<P>Common Gateway Interface scripts are a common technology that can be used to access
a database from the web. CGI is used to interact with databases on a server. These scripts
can be implemented by using a variety of languages including C, C++, Perl, Python, and so
on. They interact with a user through the medium of HTML documents. They present
their output information by creating HTML documents
on the fly.
</P>

<P>Prior to Java and JDBC, CGI scripts epitomized the term &quot;dynamic&quot; web interaction.
CGI scripts could communicate with a database on a server by using either an
Application Programming Interface or an embedded SQL. They could present the required
information to the user by using a well-understood and easy-to-use medium&#151;HTML.
</P>

<P>However, there are several shortcomings to using CGI scripts. CGI scripts are not
truly &quot;dynamic&quot;; they actually run on the back-end server. So, the server bears
the complete responsibility of all the required computation. This produces &quot;fat&quot; servers and
&quot;thin&quot; clients, which are not desirable system characteristics. In contrast, the combination
of JDBC and Java is a truly &quot;dynamic&quot; duo. The client performs a lot of processing while
the server is used only when actual database access is required. Furthermore, the
JavaAPI includes a package called java.awt, which is devoted to the creation and manipulation
of graphical components. AWT stans for Abstract Windowing Toolkit. The java.awt
package provides a very flexible and powerful means of designing user interfaces. HTML,
though simple to use, lacks some of the features provided by
java.awt.
</P>

<P>Most importantly, CGI scripts are known to be weak
security links in a system. There are several well-documented sources that describe the security concerns with CGI. In
comparison, JDBC provides a more secure environment. However, it is only fair to say that
the JDBC is relatively new&#151;not everything is known about it yet.
</P>

<P>However, considering client/server design issues, JDBC is a
much better approach than CGI scripts. Some of the important reasons
are as follows:
</P>

<UL>
<LI>          JDBC does not have the problem of a &quot;fat&quot; server and
&quot;thin&quot; client.
<LI>          JDBC can be used with any DBMS that provides a
JDBC driver. It can also be used with any DBMS that can
be accessed through an ODBC driver. This can be
accomplished by using the JDBC-ODBC bridge (provided by JavaSoft
and Intersolv).
<LI>          JDBC provides metadata about the SQL query results.
</UL>

<BR>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
NOTE
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
Information regarding CGI security issues can be found
at http://www.cerf.     net/~paulp/cgi-security.
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>


<P><CENTER>
<a href="0788-0791.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0795-0798.html">Next</A>
</CENTER></P>






</BODY>
</HTML>



