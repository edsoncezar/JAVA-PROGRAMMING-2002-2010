<HTML>
<HEAD>


<TITLE>Industrial Strength Java:Applets:EarthWeb Inc.-</TITLE>





<P><CENTER>
<a href="0095-0098.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0104-0108.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-99"><P>Page 99</P></A>


<P><a href="images\ch04fg02.jpg"><img src="images\tn_ch04fg02.jpg"></a><BR>
Figure 4.2 Providing user directions for applets in browser windows.
</P>

<P>The web page consists of two different frames: one houses the applet, and the other
houses directions for use. If you squint and look toward the bottom of the applet, you notice
some buttons that offer different help screens. These buttons do not bring up a Java window
with help information, but rather instruct the lower frame to display a different help screen.
The HTML changes occur when the applet tells the browser to load a different HTML file
into the bottom frame.
</P>

<P>The applet in figure 4.2 uses JDBC to connect to a large database developed as
an intranet-based solution for a large retail store. Because the entire applet is rather large, it
is not possible to display all the code here. However, you should learn how the
buttons control the HTML on the bottom frame.
</P>

<P><B>
Frame HTML
</B></P>

<P>Obviously, you must understand frame layout before beginning any level of
development. Frames were first introduced as a part of Netscape Navigator 2.0 and have since
been incorporated into Microsoft Internet Explorer. The HTML in listing 4.3 creates the
layout for the web page, which figure 4.2 illustrates.
</P>


<A NAME="PAGENUM-100"><P>Page 100</P></A>


<P>Listing 4.3HTML to Generate the Frame Layout Shown in Figure 4.2
</P>

<PRE>
&lt;HTML&gt;
&lt;HEAD&gt;&lt;TITLE&gt;Intranet Database Server Access Point&lt;/TITLE&gt;&lt;/HEAD&gt;
&lt;FRAMESET ROWS=&quot;50%, 50%&quot;&gt;
&lt;FRAME SRC=&quot;DatbaseAccess.html&quot; NAME=&quot;applet&quot;&gt;
&lt;FRAME SRC=&quot;Direction.html&quot; NAME=&quot;directions&quot;&gt;
&lt;/FRAMESET&gt;
&lt;/HTML&gt;
</PRE>

<P>Of particular note in the HTML for listing 4.3 is
the NAME attribute, which each frame uses to identify itself. NAME attributes exist as targets when you ask the browser to load
a new URL. Before you actually begin the code for the buttons, you should understand
the process that occurs when the browser is asked to display a new web page. First, the
applet must obtain its AppletContext by placing a call to
getAppletContext(). Afterwards, the applet simply must ask the browser to show the new document, which
the showDocument() method manages.
</P>

<P>Two versions of showDocument() actually exist. Calling it simply with an URL, as
in <a href="http://library.cs.tuiasi.ro/programming/java/industrial_strenght_java/ch04/showdocument("http://www.luke.org")">
showDocument(&quot;http://www.luke.org&quot;)</A>, loads that URL into the current web page.
This often produces a less-than-desirable situation, however: After you jump to a new
page, you lose your applet. If you intend to send the user away for good, you can definitely
use this version.
</P>

<P>More often, you should use the second version, which targets the location of the new
page. This version uses a string as a second parameter, which identifies the target for the
new URL. In the case of the HTML frame layout above, for example, use the NAME
attribute of one of the frames. In addition to the targets defined by the user when building a
framed page, four additional targets (detailed in table 4.2) can be used.
</P>

<P>Table 4.2
</P>

<P>Acceptable Targets When Using showDocument() to Change the
Current HTML Page
</P>

<TABLE>

<TR><TD>
Target Parameter
</TD><TD>
Purpose
</TD></TR><TR><TD>
_Self (default)
</TD><TD>
Shows the document in the
current window
</TD></TR><TR><TD>
_Parent
</TD><TD>
Shows the document in the parent frame; if called from a page that is
a frame in a larger layout, this will display in the page that
actually defines the frame layout
</TD></TR><TR><TD>
_Top
</TD><TD>
Shows the document in the top-most frame
</TD></TR><TR><TD>
_Blank
</TD><TD>
Shows the document in a new window or frame
</TD></TR></TABLE>


<A NAME="PAGENUM-101"><P>Page 101</P></A>


<P>These target parameters should appear familiar to you&#151;they are the same ones used
when targeting frames in standard HTML.
</P>

<P><B>
Further Use Of Targets
</B></P>

<P>Now take a peek at the code for the database query applet in listings 4.4a and 4.4b.
This code catches button actions and calls methods to display the proper HTML pages in
the directions frame.
</P>

<P>Listing 4.4aControlling the Web Browser with an Applet
</P>

<PRE>
//The following show methods will display a specific document in the
//directions frame. They take advantage of Netscape 2.0 Frames, and the
//overloaded version of showDocument() which allows a target for the
//new document to be specified.
public void showAbout() {
      try{     URL newLocation = new URL(getDocumentBase(),
      &Acirc;&quot;about.html&quot;);
                 this.getAppletContext().showDocument(newLocation,
                 &Acirc;&quot;directions&quot;);
      }
      catch(Exception e) { this.showStatus(&quot;ERR: Issues With File&quot;); }
}
public void showSearching() {
      try{     URL newLocation = new URL(getDocumentBase(),
      &Acirc;&quot;searching.html&quot;);
               this.getAppletContext().showDocument(newLocation,
                                 &Acirc;&quot;directions&quot;);
      }
      catch(Exception e) { this.showStatus(&quot;ERR: Issues With File&quot;); }
}
public void showFAQ() {
      try{     URL newLocation = new URL(getDocumentBase(), &quot;faq.html&quot;);
               this.getAppletContext().showDocument(newLocation,
                                 &Acirc;&quot;directions&quot;);
            }
      catch(Exception e) { this.showStatus(&quot;ERR: Issues With File&quot;); }
}
public void showMore() {
      try{     URL newLocation = new URL(getDocumentBase(),
              &Acirc;&quot;moreHelp.html&quot;);
               this.getAppletContext().showDocument(newLocation,
                                 &Acirc;&quot;directions&quot;);
            }
      catch(Exception e) { this.showStatus(&quot;ERR: Issues With File&quot;); }
}
</PRE>

<A NAME="PAGENUM-102"><P>Page 102</P></A>


<P>Listing 4.4bTrapping a Users Action and Showing the User the Desired
Web Page
</P>

<PRE>
//deal with client clicks
public boolean action (Event evt, Object arg) {
      if (&quot;About&quot;.equals(arg)) {
            this.showAbout();
            return true;
      }
      else if (&quot;Searching&quot;.equals(arg)) {
            this.showSearching();
            return true;
      }
      else if (&quot;FAQ&quot;.equals(arg)) {
            this.showFAQ();
            return true;
      }
      else if (&quot;More Help&quot;.equals(arg)) {
            this.showMore();
            return true;
      }
      return false;
}
</PRE>

<P><B>
Putting Your Knowledge to the Test
</B></P>

<P>Before moving on to developing applet frameworks, stop for a minute and apply
the previous information. Here, write a small applet that enables the user to find out
information about a dog named Shaker. The applet enables the user to click buttons to look at
a picture and to hear the dog bark. Additionally, the applet enables the user to click
on different buttons that ask the browser to show different web pages about the dog.
</P>

<P>From this applet description, note the options that must be offered to the user:
</P>

<UL>
<LI>     See a picture
<LI>     Hear a sound
<LI>     View different web pages
</UL>

<P>The information provides biographical data about Shaker, and additional links
offer connections to other dog-related sites. Recall listing 4.4a and 4.4b where you learned
to use the showDocument() method to display differnt web pages based on button
clicks. Here you will take advantage of that code and write the Shaker applet with all
options 
</P>


<A NAME="PAGENUM-103"><P>Page 103</P></A>


<P>offered as buttons.
</P>

<P>Because the applet relies on a frame's NAME attribute, you must name each
frame. Listing 4.5 illustrates the HTML layout for the page that houses both the applet and
the information about Shaker. Note that &quot;theApplet.html&quot; is an HTML page that loads
an applet and the page. &quot;Shaker.html&quot; is a default page that includes basic information
about Shaker. In the same folder, two additional HTML files exist: &quot;bio.html,&quot; which loads
when someone requests Shaker's biographical data, and &quot;links.html,&quot; which loads when
the client asks for links to other dog sites.
</P>

<BR>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
NOTE
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
Many people consider the ability to spawn multiple frames to be
a security risk. With little trouble, you could spawn an entirely
new window and make it look like an actual web browser.
You could then wait for the user to give information, such as
credit card numbers, to a web site and snatch it right away. As
a preventative measure, the browser appends the string
&quot;Unsigned Java Applet Window&quot; to the frame when
a Java applet spawns a new frame.
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>
<P>After deciding which HTML files you need, you can begin coding this applet.
</P>

<P>When displaying the image of Shaker, you could either load it
onto the main page or load the image into a separate frame. For
purely aesthetic reasons, you will choose the latter. Users then can place
the frame anywhere on their page, or even close it if they are
finished looking at it. In fact, users can create many different image frames
on the same screen.
</P>

<P>Now that this chapter has covered the applet's procedure and
specific methods, get ready to write some code! This applet is rather
small and contains only two classes. One extends java.applet.Applet,
and the other both extends java.awt.Frame and displays the picture
of Shaker. The event-handling code is a slight modification of the
code from listing 4.4b. Listings 4.5a through 4.5d illustrate the
completed applet.
</P>

<P>Listing 4.5aA Simple Applet Demonstrating Three Applet-Specific Methods
</P>

<PRE>
import java.net.*;
import java.awt.*;
import java.applet.*;

public class ShakerNET extends java.applet.Applet {
      //image of shaker
      Image            shaker1;
      //his bark
      AudioClip        bark;
      //MediaTracker is used to make sure that the
      //image is fully loaded 
      MediaTracker     theTracker;
</PRE>
<PRE>
                                                           continues
</PRE>

<P><CENTER>
<a href="0095-0098.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0104-0108.html">Next</A>
</CENTER></P>






</BODY>
</HTML>



