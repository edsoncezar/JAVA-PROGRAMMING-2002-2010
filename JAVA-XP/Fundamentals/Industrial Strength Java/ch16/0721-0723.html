<HTML>
<HEAD>


<TITLE>Industrial Strength Java:Jeeves and Java Servlets:EarthWeb Inc.-</TITLE>





<P><CENTER>
<a href="0717-0720.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0724-0726.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-721"><P>Page 721</P></A>


<P>tools based around the AdminServlet that help avoid common administrative errors.
</P>

<P>By default, access to the administration pages and servlets is controlled through the
digest authentication method previously described. These pages and servlets also can be
accessed through HTTPS so that the administrative operations are protected from tampering
and disclosure. A user must provide the proper password to access administration functions.
</P>

<P><B>
Non-Root UID/GID
</B></P>

<P>Servers on Unix systems have a special security problem. Unix only permits programs
run as &quot;root&quot; to bind to the well-known ports from 1 to 1023. These ports are usually
protected in multiuser systems to prevent ordinary users from running servers (such as
a mailer or web server) on these standard ports. Because the default HTTP server TCP
port is 80, Unix web servers need to start up as &quot;root&quot; just to bind to this port.
However, permitting complex programs run as &quot;root&quot; is generally a big security risk.
</P>

<P>The Unix version of Jeeves enables you to control which Unix user ID to use after
your server binds to the TCP port. This facility enables you to run Jeeves as your default
server without worries that a malicious servlet can exploit &quot;root&quot; access to system resources
and disrupt your system. In fact, Jeeves can be set up so that &quot;root&quot; access is needed
only when initially setting up the server. Then all normal administrative tasks can occur
without requiring special access privileges. You must have a version of Jeeves that includes
a special native library that supports the setUser() method.
</P>

<P><B>
Security Sandbox
</B></P>

<P>For running untrusted servlets, Jeeves provides a secured environment that isolates
the untrusted servlet from the rest of the HTTP server. The server administrator makes
the decision of whether to trust a servlet. For example, the server could trust all local
servlets and not trust any servlet loaded from the network. A server could trust servlets by
verifying a digital signature of a trusted development source. Trusted servlets execute on
a thread in the main server's thread group. Untrusted servlets execute in a thread
group separate from the server's group. Using a separate thread group prevents a servlet
from trying to interfere with the main task processing. The untrusted servlet environment
limits access to network resources, files, and server configuration information by adding
a servlet security manager which checks for risky operations and blocks them. Execution
of untrusted servlets is shown in figure 16.3.
</P>


<A NAME="PAGENUM-722"><P>Page 722</P></A>


<P><a href="images\ch16fg03.jpg"><img src="images\tn_ch16fg03.jpg"></a><BR>
Figure 16.3 Untrusted servlet handling.
</P>

<H4><A NAME="ch16_ 10">
Built-in Servlets
</A></H4>

<P>Because the Servlet API is efficient and powerful, many of the features often
coded directly into an HTTP server are implemented as Jeeves servlets. This use of
servlets simplifies the HTTP server code and enables server administrators and users to
customize server features by providing additional servlets. Jeeves includes several standard
servlets to provide the functions commonly available in HTTP servers. These core servlets are
as follows:
</P>

<UL>
<LI>     File servlet
(FileServlet) accesses files and directories
<LI>     Server-side include servlet
(SSIncludeServlet) processes server-side include files
<LI>     Error servlet
(ErrorServlet) creates custom error responses
<LI>     Invoker servlet
(InvokerServlet) invokes an arbitrary servlet
<LI>     Imagemap servlet (ImagemapServlet) handles image maps on the server
<LI>     CGI invoker servlet
(CGIServlet) runs CGI programs
<LI>     Administration servlet
(AdminServlet) performs administrative tasks
<LI>     FTP proxy servlet
(ProxyServlet) handles proxy requests
<LI>     Forms servlet
(FormServlet) processes a form
</UL>

<P>Generally, the standard servlets are not designed to be subclassed; most provide
only public service() and sendResponse() methods. However, the ErrorServlet and
FormServlet are designed to be modified to provide custom error messages and perform custom
forms processing.
</P>

<A NAME="PAGENUM-723"><P>Page 723</P></A>

<P><B>
FileServlet
</B></P>

<P>The FileServlet provides the normal static content file serving functions expected of
an HTTP server. The URL path translation rules are setup to default requests
not handled  by other servlets to the FileServlet. The FileServlet only supports GET and
HEAD requests; an error is returned for any other HTTP method. If the requested file is
a directory, the servlet returns the contents of a welcome file residing in the
requested directory. The default name of the welcome file is index.html. If the welcome file is
not found, the servlet returns a formatted directory listing. You can change the name of
the welcome file by adding a welcome=&quot;pagename.html&quot; entry to httpd.properties.
</P>

<P>If a file is requested, the servlet determines the correct content type by matching the
file extension against those in the mime.properties file. The FileServlet has an internal
cache to hold the contents of frequently requested documents. If the file size is less than
a configured value, the file is read into an internal buffer and cached. The file caching size
is specified by the ramcache.entry.size entry in the httpd.properties file; the default value
is 8,000 bytes.
</P>

<P>If the MIME type of the file is java-internal/parsed-HTML, the content type is set to
text/html, and the FileServlet calls the server-side include servlet for additional processing
of the file. By default, the extension of files that contain server-side includes is .shtml,
as specified in the mime.properties file.
</P>

<P><B>
Server-Side Include Servlet
</B></P>

<P>If the MIME type of the file is java-internal/parsed-html, the
SSIncludeServlet further processes the file to resolve any references to servlets embedded in the document.
By default, these files have extensions of .shtml. As the document is written to the client,
the SSIncludeServlet scans for the newly defined &lt;servlet&gt; HTML tag. When this tag
is encountered, the servlet identified in the attributes of the tag is invoked and its output
is sent to the client in place of the &lt;servlet&gt; &lt;/servlet&gt; HTML element.
</P>

<P>The server-side includes supported by SSIncludeServlet are not the same as that
supported by many other HTTP servers, such as NCSA and Netscape, that embed
server-side include commands inside HTML comments. Jeeves server-side includes can only be used
to invoke servlets and insert the output into the current document. The syntax for
invoking servlets follows:
</P>

<PRE>
&lt;servlet name=Name code=Code.class codebase=CodeBase
initParam1=initArg1 initParam2=initArg2 ...&gt;
&lt;param name=param1 value=val1&gt;
&lt;param name=param2 value=val2&gt;
</PRE>
<PRE>
                                                           continues 
</PRE>


<P><CENTER>
<a href="0717-0720.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0724-0726.html">Next</A>
</CENTER></P>






</BODY>
</HTML>



