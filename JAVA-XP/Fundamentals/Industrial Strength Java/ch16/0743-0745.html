<HTML>
<HEAD>


<TITLE>Industrial Strength Java:Jeeves and Java Servlets:EarthWeb Inc.-</TITLE>





<P><CENTER>
<a href="0739-0742.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0746-0749.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-743"><P>Page 743</P></A>

<UL> 
<LI>     HtmlTable. Supports building of tables from row elements
<LI>     HtmlRow. Supports the HTML to define a row of a table
</UL>


<P>All the classes in this package implement the HtmlElement
interface, which lets you specify text for the HTML tag and write
the resulting HTML to an output stream. By creating objects
that represent the various HTML tags and calling methods to add
data and attributes to the tags, you can generate the most
common HTML elements and avoid some simple errors, such as ending
tags in the wrong order. However, it may be simpler to hand-generate
the HTML, particularly for simple, static pages. The examples in
the section &quot;Writing Servlets&quot; make use of the classes from
the java.servlet.html package to generate dynamic response pages.
</P>

<P>The parameter layout of these methods is similar for all classes.
The first parameter is the information that is to be added to
the HtmlElement. Methods are often defined to handle the addition
of Strings, HtmlElements, or Vectors.
</P>

<P>The second parameter is eitherthe tag or attributes for a tag
implied by the method. For example, addLink() implies an &quot;a&quot; tag, so
the second parameter is interpreted as attributes of the tag. For
tags, do not include the &lt;, &gt;, or / characters in the tag string; these
characters are automatically supplied where needed. Multiple tags are
specified using a comma-delimited string.
</P>

<P>These HTML support classes do not check the actual HTML
to verify that the tags and keys are legal and used correctly. It
only ensures that tags are terminated in the correct order; for example,
it verifies whether &lt;/body&gt; occurs before the &lt;/html&gt; command.
</P>

<P><B>
HtmlElement Interface
</B></P>

<P>The HtmlElement interface defines two methods provided by all classes in
the java.servlet.html package. These are as follows:
</P>

<UL>
<LI>     wrap(). Adds HTML tag pairs (such as &lt;h1&gt; and &lt;/h1&gt;) to the element such that
it follows previously added tags and encloses the text of the element. The tag or
tags are specified as the argument to wrap(). Conceptually, an HtmlElement
has beginning tags,text, and ending tags.
<LI>     write(). Writes the HTML to an OutputStream.
</UL>

<BR>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
NOTE
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
The methods in this package do not automatically
add double quotes to enclose literal strings used as
HTML attributes. You must add double quotes if your string
has embedded spaces or other special control characters.<BR>
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
NOTE
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
These HTML generation classes are new to the Jeeves Alpha
2 release. The contents of the java.servlet.html package and the
API are likely to evolve in future releases. The final API may
be significantly different from that discussed in this section.
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>


<A NAME="PAGENUM-744"><P>Page 744</P></A>


<P><B>
HtmlText Class
</B></P>

<P>HtmlText is a fundamental class in the package because it supports text enclosed
by HTML tags.
</P>

<UL>
<LI>     add(String), add(String, String tag). Adds the text, which can be
optionally wrapped in the tag.
<LI>     addTag(String), addTag(String, String). Adds a single, non-paired tag, such
as &lt;p&gt;, with optional tag attributes.
</UL>

<P><B>
HtmlContainer Class
</B></P>

<P>HtmlContainer is a base class for elements that herarchically contain other
HTML elements. Conceptually, an HtmlContainer has beginning tags, a list of HtmlElements,
and ending tags. For example, an HtmlPage is a subclass of HtmlContainer.
</P>

<P>HtmlContainer supports wrap(), write(), and the various types of add() and
addTag() methods. Unique to HtmlContainer are the following methods:
</P>

<UL>
<LI>     addImg(String). Adds an &lt;IMG&gt; tag where the String is the URL of the
image's source (SRC attribute).
<LI>     addLink(String text, String
URL). Adds a link (anchor tag) where &quot;text&quot; is
the text occuring between the tags and &quot;URL&quot; is the URL for the link (HREF
attribute).
</UL>

<P><B>
HtmlPage Class
</B></P>

<P>The HtmlPage class represents a complete HTML page that has a header, title, and
body sections. Create a new HtmlPage with a String that is the page's title. HtmlPage
automatically creates the &lt;html&gt;&lt;head&gt;&lt;title&gt;, &lt;/title&gt;&lt;/head&gt;&lt;body&gt;, and
&lt;/body&gt;&lt;/html&gt; commands. All HtmlElements added to an HtmlPage are added into the body area of
the page.
</P>

<H3><A NAME="ch16_ 21">
Writing Servlets
</A></H3>

<P>Together the Servlet API and the Jeeves HTTP server provide an environment that
makes writing servlets very easy. All servlets must implement the
java.servlet. Servlet interface by subclassing either GenericServlet or HttpServlet.
When an HTTP request is received, the server translates the URL into a reference to a
specific servlet class, as was previously described in the &quot;Jeeves HTTP Server
Overview&quot; section. If this is the first request for the 
</P>


<A NAME="PAGENUM-745"><P>Page 745</P></A>


<P>servlet, the servlet class is dynamically loaded, and its init() method is called to
perform any necessary servlet-specific initialization. In most cases, the servlet has already
been loaded in which case its service() method is just called.
</P>

<P>Note that Jeeves is a multithreaded server and several different threads can
concurrently executing the service() method of the same servlet object. For example, a single
instance of the FileServlet object serves all requests to load files. Consequently, servlets must
be designed to operate in multithreaded environment. The easiest way to ensure this is
to store all information about the request being processed in local variables and not store it <BR>
as instance variables in the object. For cases where access to a single
resource must be controlled, you must use the standard Java synchronization techniques based on
the &quot;synchronized&quot; keyword. In most cases, you can just add the &quot;synchronized&quot; modifier
to the declaration for service() or sendResponse() and effectively modify the servlet to
serve only one client at a time.
</P>

<P>The following sections contain examples of a simple servlet, form processing servlets,
an error response servlet, and a server-side include servlet.
</P>

<H4><A NAME="ch16_ 22">
Simple Servlet
</A></H4>

<P>To learn how to write a servlet, build a simple servlet that displays a table of the
various HTTP information available from the request. Subclass HttpServlet and override
the service() method as shown in the following code:
</P>

<PRE>
public class SimpleServlet extends HttpServlet {
  public void SimpleServlet() {
  }

  public void service (HttpServletRequest req, HttpServletResponse res)
    throws ServletException, IOException {
</PRE>

<P>Your servlet can create its response using either the HttpServletResponse passed to
the service() method or by resetting the HttpServletResponse and writing the response
header directly to the ServletOutputStream.
</P>

<P>Before calling service(), Jeeves sets the HttpServletResponse status to 200 or &quot;OK,&quot;
the &quot;Date:&quot; header field is set to the current date and time, and the &quot;Server:&quot; header field is
set to identify the server. If there is an error or &quot;OK&quot; is not the correct status, the servlet
can specify both an error code and some descriptive text. If only an error code is given,
the code is translated into a standard status text string. Normally you would not change
these values.
</P>

<P><CENTER>
<a href="0739-0742.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0746-0749.html">Next</A>
</CENTER></P>






</BODY>
</HTML>



