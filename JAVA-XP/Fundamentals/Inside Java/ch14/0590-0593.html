<HTML>
<HEAD>


<TITLE>Inside Java:The New, Improved AWT: Menus, Events, and More New Features:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0586-0589.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0594-0597.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-590"><P>Page 590</P></A>



<P>Lines 98_107 create and add a menu labeled &quot;Submenu&quot; to the &quot;Options&quot; menu.
Menu items then are added to the submenu, as depicted in figure 14.3.
</P>
<PRE>
098           Menu suboptMenu = new Menu(&quot;Submenu&quot;);
099           optionsMenu.add(suboptMenu);
100
101           MenuItem miSubitem1 = new MenuItem(&quot;Sub Item 1&quot;);
102           miSubitem1.addActionListener(this);
103           suboptMenu.add(miSubitem1);
104
105           MenuItem miSubitem2 = new MenuItem(&quot;Sub Item 2&quot;);
106           miSubitem2.addActionListener(this);
107           suboptMenu.add(miSubitem2);
</PRE>

<P>You now know how to create menus that reside on the menu bar. In the
following section, you learn how to create pop-up menus.
</P>

<P>
<a href="images\ch14fg03.jpg"><img src="images\tn_ch14fg03.jpg"></a><BR>
Figure 14.3
<I>MenuDemo application display showing 
a submenu.</I>
</P>


<H4><A NAME="ch14_ 10">
Pop-Up Menus
</A></H4>

<P>Creating a pop-up menu is similar to creating a menu bar menu with one
important difference. Instead of having a menu bar as its parent, a pop-up menu's parent is a
GUI component. Two pop-up menus, for example, exist in the MenuDemo
application&#151;popMenu1 and popMenu2. The main frame owns popMenu1, while popMenu2 is
owned by the btn2 button, which is labeled &quot;Pops.&quot; These pop-up menus are depicted in
figure 14.4.
</P>

<P><B>Creating Pop-Up Menus
</P></B>

<P>To build a pop-up menu, you can follow these steps. The steps do not necessarily
have
</P>


<A NAME="PAGENUM-591"><P>Page 591</P></A>


<P>
<a href="images\ch14fg04.jpg"><img src="images\tn_ch14fg04.jpg"></a><BR>
Figure 14.4
<I>MenuDemo application display showing a pop-up menu.</I>
</P>


<P>to be performed in this order. The corresponding lines of code from listing 14.1
are provided to illustrate each step.
</P>

<OL>
<LI>          Create an instance of PopupMenu.<BR>
     Line 129 of listing 14.1 shows popMenu1 being created. This action is similar to
     step 3 in the previous section, &quot;Steps for Creating a Menu Bar Menu.&quot;
<PRE>
     129           popMenu1 = new PopupMenu();
</PRE>
<LI>          Add the pop-up menu to its parent component.<BR>
     Line 130 adds popMenu1 to the main frame of the application.
<PRE>

     130           add(popMenu1);
</PRE>
          This action is similar to step 4 in the previous section, &quot;Steps for Creating a
Menu Bar Menu.&quot; The main frame is now the pop-up menu's parent, so the pop-up
menu lies within the main frame's containment hierarchy.
</P>
<P>
          The process for adding a menu item to a pop-up menu is identical to the process
for adding a menu item to a menu bar menu. Consider the similarity between steps 3,
4, and 5 in this section to steps 5, 6, and 7 in the previous section, &quot;Steps for
Creating a Menu Bar Menu.&quot;
<LI>          Create one or more menu items to put in the pop-up menu.
<PRE>
     132           MenuItem miTarts = new MenuItem(&quot;Tarts&quot;);
</PRE>
<LI>          Optionally associate an event listener to the menu item.
<PRE>
     133           miTarts.addActionListener(this);
</PRE>
<LI>          Add the menu item to the menu using the
add() method of the PopupMenu class.
<PRE>
134           popMenu1.add(miTarts);
</PRE>
</OL>


<A NAME="PAGENUM-592"><P>Page 592</P></A>




<P>You also can add separators and submenus to a pop-up menu in the same manner
that you would add them to a menu bar menu, as previously described.
</P>

<P><B>Activating Pop-Up Menus
</P></B>

<P>For the pop-up menu to be activated by a mouse event, the event must be trapped.
In this example, line 22 adds a mouse event listener to the main frame.
</P>
<PRE>
022           addMouseListener(new Madapt(this));
</PRE>

<P>Whenever the user presses and releases the mouse, the
mouseReleased() method in lines 187_196 is called.
</P>
<PRE>
187       public void mouseReleased(MouseEvent evt) {
188           Component comp = (Component)evt.getSource();
189           // Find out if the mouse event was a pop-up menu request.
190           if (evt.isPopupTrigger()) {
191               if (evt.getSource() == md.btn2)
192                   md.popMenu2.show(comp, evt.getX(), evt.getY());
193               else
194                   md.popMenu1.show(comp, evt.getX(), evt.getY());
195           }
196       }
</PRE>

<P>Line 190 calls the isPopupTrigger() method of the MouseEvent to find out if this event
was caused by a pop-up menu request. A pop-up menu request is a
platform-dependent mouse click (such as button 2 on MS-Windows, and button 3 on Sun Solaris.)
</P>

<P>Line 188 identifies the component that fired the event, which in this case is the
component that the user clicked. This is necessary because the PopupMenu
show() method (in lines 192 and 194) shows the pop-up menu at a position relative to this component.
The show() method of the Popup class is defined as follows:
</P>
<PRE>
public void show(Component origin, int x, int y)
</PRE>


<P>Note that the user can cause btn1 (labeled Popups) to trigger popMenu1, even
though the main frame, not btn1, owns popMenu1. This is because btn1 rests in the
containment hierarchy of the main frame. A pop-up menu can be triggered from any component in
the containment hierarchy of the pop-up menu's owner.
</P>

<P>Now that you know how to create menu bar menus and pop-up menus, the next
section
</P>

<A NAME="PAGENUM-593"><P>Page 593</P></A>

<P>presents shortcut keys, a menu feature new to JDK 1.1.

<H4><A NAME="ch14_ 11">
Assigning Shortcut Keys
</A></H4>

<P><I>Shortcut keys</I>, also known as <I>keyboard
equivalents</I> or <I>accelerator keys</I>, enable the
user to make menu choices from the keyboard. Users who are experienced with an
application often appreciate shortcut keys because they help the user to navigate the
application more quickly. Shortcut keys also reduce the need for the use of a mouse for people
who either prefer not to or can't use one.
</P>

<P>The Ctrl key (or Command key on Macintosh) is used in conjunction with an
alphanumeric key to produce a shortcut key. The Shift key also can be used in addition to
the other two keys. Therefore, Ctrl+s, Ctrl+Shift+q, and Ctrl+3 are all valid shortcut keys,
but Shift+z is not.
</P>

<P>Lines 115 and 116 offer an example of how to create a menu item that also can be
invoked with a shortcut key.
</P>
<PRE>
115           MenuItem miAbout = new MenuItem(&quot;About&#133;&quot;,
116                                   new MenuShortcut(`a'));
</PRE>

<P>As a result, a platform-specific label appears beside the menu item (for example
&quot;Ctrl+a&quot; on MS-Windows), and the menu item can be invoked by pressing Ctrl+a on the
keyboard. This is depicted in figure 14.3, but due to a bug in JDK 1.1 beta 3, the labels
aren't quite correct.
</P>

<P>The new class java.awt.MenuShortcut has been added in JDK 1.1 to enable you to
create shortcut keys. Table 14.5 shows some of the constructors and methods of
the MenuShortcut class, which is derived from an event class. For a complete list, refer
to the following Web page:
</P>
<PRE>

http://java.sun.com/products/JDK/1.1/docs/api/java.awt.MenuShortcut.html
</PRE>

<P>The form of the MenuShortcut class constructor used in line 116 takes one
parameter, which is the alphanumeric key used in the key combination that makes up this
shortcut. The MenuShortcut instance is passed as the second parameter to a MenuItem
constructor that is new to JDK 1.1, which creates the menu item with the specified shortcut key.
</P>

<P><B>Table 14.5
</P></B>
<P>Some Constructors and Methods in the MenuShortcut Class
</P>
<TABLE>

<TR><TD>
Constructor/Method
</TD><TD>
Description
</TD></TR><TR><TD>
MenuShortcut(int)
</TD><TD>
Creates a menu shortcut with the specified key.
</TD></TR></TABLE>

<P><CENTER>
<a href="0586-0589.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0594-0597.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

