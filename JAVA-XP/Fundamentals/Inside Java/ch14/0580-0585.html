<HTML>
<HEAD>


<TITLE>Inside Java:The New, Improved AWT: Menus, Events, and More New Features:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0575-0579.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0586-0589.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-580"><P>Page 580</P></A>


<P><B>Table 14.3, Continued
</P></B>
<P>Some Constructors and Methods in the MenuItem Class
</P>
<TABLE>

<TR><TD>
Constructor/Method
</TD><TD>
Description
</TD></TR><TR><TD>
void deleteShortcut()
</TD><TD>
Removes the menu shortcut from this menu item.
</TD></TR><TR><TD>
void setActionCommand(String)
</TD><TD>
Sets the action command string to the specified
string. This is embedded into the ActionEvent when
an ActionEvent is fired.
</TD></TR><TR><TD>
void addActionListener
(ActionListener)
</TD><TD>
Registers an event listener to receive action events.
</TD></TR></TABLE>

<P>
Next, we will discuss the CheckboxMenuItem. A CheckboxMenuItem works like a
check box, in that it stores a true or false state.
</P>

<H4><A NAME="ch14_ 8">
The CheckboxMenuItem Class
</A></H4>

<P>The CheckboxMenuItem class is a specialization of the MenuItem class that represents
a menu item, which toggles between true and false when selected by the user. An
example of a CheckboxMenuItem method is getState(), which returns the current true or false
state of the item. Listing 14.1 creates a CheckboxMenuItem.
</P>

<H4><A NAME="ch14_ 9">
Menu Bar Menus
</A></H4>

<P>Listing 14.1 (program MenuDemo.java on the CD-ROM accompanying this book)
shows an application that serves as nothing more than a simple example of how you can
create menu bar menus and pop-up menus in a Java program. Figures 14.2, 14.3, and
14.4 display this application's user interface, which consists of a frame containing
two buttons. When you click on the menu titles in the menu bar, the menu items
appear. When you click the appropriate mouse button on the button labeled &quot;Pops,&quot; a
pop-up menu appears that contains varieties of &quot;pops&quot; (cola, soda, and root beer.) When
you click the appropriate mouse button on the button labeled &quot;Popups,&quot; or anywhere else
in the frame, a different pop-up menu appears that contains things that &quot;pop up&quot; (pop
tarts, weasels, clowns, and daisies.)  This example also demonstrates how to assign
shortcut keys to menu items. The sections following the listing will cover these topics in
more detail.
</P>

<P>Listing 14.1
</P>

<A NAME="PAGENUM-581"><P>Page 581</P></A>


<PRE>
Line==================Java Source=================
001   //////////
002   // MenuDemo.java  Demonstrates how to code menus
003   // that use shortcut keys, and pop-up menus.
004   //
005   // Author: James L. Weaver  JDK 1.1 beta3
006   //////////
007   package chapter14.code.menudemo;
008
009   import java.awt.*;
010   import java.awt.event.*;
011
012   public class MenuDemo extends Frame
013                       implements ActionListener {
014
015       public PopupMenu popMenu1, popMenu2;
016       Button btn1, btn2;
017
018       public MenuDemo() {
019           super(&quot;Java Menu Demonstration&quot;);
020
021           // Create and assign a listener to catch mouse events
022           addMouseListener(new Madapt(this));
023           addWindowListener(new Wadapt());
024           setSize(300, 200);
025           setLayout(new FlowLayout());
026
027           btn1 = new Button(&quot;Popups&quot;);
028           btn1.addMouseListener(new Madapt(this));
029           add(btn1);
030           btn2 = new Button(&quot;Pops&quot;);
031           btn2.addMouseListener(new Madapt(this));
032           add(btn2);
033
034           buildMenu();
035           buildPopup1();
036           buildPopup2();
037           setVisible(true);
038           btn1.requestFocus();
</PRE>
<PRE>
<I>
                                                               continues
</I>
</PRE>


<A NAME="PAGENUM-582"><P>Page 582</P></A>


<P>Listing 14.1, Continued
</P>
<PRE>
039       }
040
041       private void buildMenu() {
042           // Create a menu bar and set in the frame.
043           MenuBar mb = new MenuBar();
044           setMenuBar(mb);
045
046           // Create and populate a File menu.
047           Menu fileMenu = new Menu(&quot;File&quot;);
048           mb.add(fileMenu);
049
050           MenuItem miNew = new MenuItem(&quot;New&quot;);
051           miNew.addActionListener(this);
052           fileMenu.add(miNew);
053
054           MenuItem miOpen = new MenuItem(&quot;Open&quot;);
055           miOpen.addActionListener(this);
056           fileMenu.add(miOpen);
057
058           MenuItem miSave = new MenuItem(&quot;Save&quot;);
059           miSave.addActionListener(this);
060           fileMenu.add(miSave);
061
062           fileMenu.addSeparator();
063
064           MenuItem miExit = new MenuItem(&quot;Exit&quot;);
065           miExit.addActionListener(this);
066           fileMenu.add(miExit);
067
068           // Create and populate an Options menu
069           // that contains three checkable items,
070           // a separator, and a submenu.
071           Menu optionsMenu = new Menu(&quot;Options&quot;);
072           mb.add(optionsMenu);
073
074           CheckboxMenuItem miBold =
075                   new CheckboxMenuItem(&quot;Bold&quot;, true);
</PRE>

<A NAME="PAGENUM-583"><P>Page 583</P></A>


<PRE>
076           // Assign the Ctrl+b shortcut key.
077           miBold.setShortcut(new MenuShortcut(`b'));
078           miBold.addActionListener(this);
079           optionsMenu.add(miBold);
080
081           CheckboxMenuItem miItalics =
082                   new CheckboxMenuItem(&quot;Italics&quot;, false);
083           // Assign the Ctrl+i shortcut key.
084           miItalics.setShortcut(new MenuShortcut(`i'));
085           miItalics.addActionListener(this);
086           optionsMenu.add(miItalics);
087
088           // Assign the Ctrl+u shortcut key.
089           CheckboxMenuItem miUnder =
090                   new CheckboxMenuItem(&quot;Under&quot;, false);
091           miUnder.setShortcut(new MenuShortcut(`u'));
092           miUnder.addActionListener(this);
093           optionsMenu.add(miUnder);
094
095           optionsMenu.addSeparator();
096
097           // Create and populate a submenu to the Options menu.
098           Menu suboptMenu = new Menu(&quot;Submenu&quot;);
099           optionsMenu.add(suboptMenu);
100
101           MenuItem miSubitem1 = new MenuItem(&quot;Sub Item 1&quot;);
102           miSubitem1.addActionListener(this);
103           suboptMenu.add(miSubitem1);
104
105           MenuItem miSubitem2 = new MenuItem(&quot;Sub Item 2&quot;);
106           miSubitem2.addActionListener(this);
107           suboptMenu.add(miSubitem2);
108
109           // Create and populate a Help menu.
110           Menu helpMenu = new Menu(&quot;Help&quot;);
111           mb.add(helpMenu);
112           mb.setHelpMenu(helpMenu);
113
114           // Assign the Ctrl+a shortcut key.
</PRE>
<PRE>
<I>
                                                                      continues
</I>
</PRE>


<A NAME="PAGENUM-584"><P>Page 584</P></A>


<P>Listing 14.1, Continued
</P>
<PRE>
115           MenuItem miAbout = new MenuItem(&quot;About&#133;&quot;,
116                                   new MenuShortcut(`a'));
117           miAbout.addActionListener(this);
118           helpMenu.add(miAbout);
119
120           // Assign the Shift+c shortcut key.
121           MenuItem miContents = new MenuItem(&quot;Contents&quot;,
122                                   new MenuShortcut(`c', true));
123           miContents.addActionListener(this);
124           helpMenu.add(miContents);
125       }
126
127       private void buildPopup1() {
128           // Create a pop-up menu and attach it to this frame.
129           popMenu1 = new PopupMenu();
130           add(popMenu1);
131
132           MenuItem miTarts = new MenuItem(&quot;Tarts&quot;);
133           miTarts.addActionListener(this);
134           popMenu1.add(miTarts);
135
136           MenuItem miWeasels = new MenuItem(&quot;Weasels&quot;);
137           miWeasels.addActionListener(this);
138           popMenu1.add(miWeasels);
139
140           MenuItem miClowns = new MenuItem(&quot;Clowns&quot;);
141           miClowns.addActionListener(this);
142           popMenu1.add(miClowns);
143
144           MenuItem miDaisies = new MenuItem(&quot;Daisies&quot;);
145           miDaisies.addActionListener(this);
146           popMenu1.add(miDaisies);
147       }
148
149       private void buildPopup2() {
150           // Create a pop-up menu and attach it to a button.
151           popMenu2 = new PopupMenu();
</PRE>

<A NAME="PAGENUM-585"><P>Page 585</P></A>


<PRE>
152           btn2.add(popMenu2);
153
154           MenuItem miCola = new MenuItem(&quot;Cola&quot;);
155           miCola.addActionListener(this);
156           popMenu2.add(miCola);
157
158           MenuItem miSoda = new MenuItem(&quot;Soda&quot;);
159           miSoda.addActionListener(this);
160           popMenu2.add(miSoda);
161
162           MenuItem miRoot = new MenuItem(&quot;Root Beer&quot;);
163           miRoot.addActionListener(this);
164           popMenu2.add(miRoot);
165       }
166
167       public void actionPerformed(ActionEvent evt) {
168           System.out.println(((MenuItem)evt.getSource()).getLabel());
169       }
170
171       public static void main(String args[]) {
172           MenuDemo menuFrame = new MenuDemo();
173           return;
174       }
175   }
176
177   class Madapt extends MouseAdapter
178   {
179       MenuDemo md;
180
181       public Madapt(MenuDemo md) {
182           // Save a reference to the MenuDemo instance
183           // to access the pop-up menus.
184           this.md = md;
185       }
186
187       public void mouseReleased(MouseEvent evt) {
188           Component comp = (Component)evt.getSource();
189           // Find out if the mouse event was a pop-up menu request.
190           if (evt.isPopupTrigger()) {
</PRE>
<PRE>
<I>
                                                                                continues
</I>
</PRE>


<P><CENTER>
<a href="0575-0579.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0586-0589.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

