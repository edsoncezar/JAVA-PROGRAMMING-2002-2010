<HTML>
<HEAD>


<TITLE>Inside Java:The New, Improved AWT: Menus, Events, and More New Features:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0623-0626.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0633-0638.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-627"><P>Page 627</P></A>


<P>you are designing custom components. If, for example, the user configures his
desktop color scheme to make the background color for components bright red, you
probably want your custom component to have that same background color. This enables
your component to blend in with the user interface rather than always being the
arbitrary colors that you chose when you designed it.
</P>
<P>You can determine what the current desktop colors are by checking certain final
static variables in the java.awt.SystemColor class. SystemColor.menu, for example, holds
an instance of Color that represents the current background color of the menu. Table
14.7 contains a list of the desktop attributes and the associated SystemColor static variables.
</P>

<P><B>Table 14.7</B>
</P>

<P>Desktop Attributes and Their Associated
java.awt.SystemColor Variables
</P>
<TABLE>

<TR><TD>
Desktop Attribute
</TD><TD>
SystemColor Variable
</TD></TR><TR><TD>
Background color of desktop
</TD><TD>
SystemColor.desktop
</TD></TR><TR><TD>
Background color for captions
</TD><TD>
SystemColor.activeCaption
</TD></TR><TR><TD>
Text color for captions
</TD><TD>
SystemColor.activeCaptionText
</TD></TR><TR><TD>
Border color for caption text
</TD><TD>
SystemColor.activeCaptionBorder
</TD></TR><TR><TD>
Background color for inactive    
captions
</TD><TD>
 SystemColor.inactiveCaption
</TD></TR><TR><TD>
Text color for inactive captions
</TD><TD>
SystemColor.inactiveCaptionText
</TD></TR><TR><TD>
Border color for inactive     
captions
</TD><TD>
SystemColor.inactiveCaptionBorder
</TD></TR><TR><TD>
Background for windows
</TD><TD>
SystemColor.window
</TD></TR><TR><TD>
Color of window border frame
</TD><TD>
SystemColor.windowBorder
</TD></TR><TR><TD>
Text color inside windows
</TD><TD>
SystemColor.windowText
</TD></TR><TR><TD>
Background for menus
</TD><TD>
SystemColor.menu
</TD></TR><TR><TD>
Text color for menus
</TD><TD>
SystemColor.menuText
</TD></TR><TR><TD>
Color for highlight
</TD><TD>
SystemColor.highlight
</TD></TR><TR><TD>
Color for highlighted text
</TD><TD>
SystemColor.highlightText
</TD></TR></TABLE>

<PRE>
                                         <I>continues</I>
</PRE>

<A NAME="PAGENUM-628"><P>Page 628</P></A>


<P>
<B>Table 14.7, Continued</B></P>

<P>Desktop Attributes and Their Associated
java.awt.SystemColor Variables
</P>
<TABLE>

<TR><TD>
Desktop Attribute
</TD><TD>
SystemColor Variable
</TD></TR><TR><TD>
Background color for controls
</TD><TD>
SystemColor.control
</TD></TR><TR><TD>
Text color for controls
</TD><TD>
SystemColor.controlText
</TD></TR><TR><TD>
Light highlight color for
controls
</TD><TD>
SystemColor.controlLtHighlight
</TD></TR><TR><TD>
Highlight color for controls
</TD><TD>
SystemColor.controlHighlight
</TD></TR><TR><TD>
Shadow color for controls
</TD><TD>
SystemColor.controlShadow
</TD></TR><TR><TD>
Dark shadow color for controls
</TD><TD>
SystemColor.controlDkShadow
</TD></TR><TR><TD>
Text color for inactive controls
</TD><TD>
SystemColor.inactiveControlText
</TD></TR><TR><TD>
Background color for scrollbars
</TD><TD>
SystemColor.scrollbar
</TD></TR><TR><TD>
Background color for spot-help
text
</TD><TD>
SystemColor.info
</TD></TR><TR><TD>
Text color for spot-help text
</TD><TD>
SystemColor.infoText
</TD></TR></TABLE>

<P>Java AWT components automatically check these variables before they are
displayed. Incidentally, custom components aren't the only instance in which you would want
to know the desktop colors. You may want to choose colors for drawing, for example,
based upon the current desktop color scheme.
</P>

<P>The next section explains how to print from Java programs&#151;a much needed feature
new to JDK 1.1.
</P>

<H4><A NAME="ch14_ 20">
Printing from a Java Program
</A></H4>

<P>New to JDK 1.1 is the capability to output information to a printer. This enables you
to produce printed output, such as a report, and to print components of the graphical
user interface.
</P>
<P><B>Overview of Java Printing</B>
</P>

<P>Printing is implemented by Java primarily with a new class named PrintJob, which
is
</P>

<A NAME="PAGENUM-629"><P>Page 629</P></A>




<P>located in the java.awt package. PrintJob represents a particular print job and
contains methods that enable you to find information such as page size and page resolution.
A method also exists in PrintJob that returns a graphics context (Graphics instance)
in which you can draw the output for a given page.
</P>
<P>To start a print job, call the new
getPrintJob() method of the java.awt.Toolkit class.
This method displays a Print dialog box where the user makes choices regarding printing.
This dialog box is the common Print dialog box for a given platform and enables the user
to choose a printer, the order in which to print pages, and other print options.
</P>

<P>The following section demonstrates the use of the PrintJob class and the
getPrintJob() method to print the proverbial &quot;Hello World!&quot;.
</P>

<P><B>An Example of Printing: The HelloPrint Applica-<BR>tion</B>
</P>

<P>Listing 14.3 (program HelloPrint.java on the CD-ROM accompanying this book) is
an example of how you can print from a Java application. When you click the button
labeled &quot;Hello,&quot; the words &quot;Hello World!&quot; are printed in the center of the page in 48 point type.
</P>

<P>Listing 14.3
</P>
<PRE>
Line==================Java Source=================
01   //////////
02   // HelloPrint.java  Demonstrates how to print from
03   // a Java application.
04   //
05   // Author: James L. Weaver  JDK 1.1 beta1
06   //////////
07   package chapter14.code.helloprint;
08
09   import java.awt.*;
10   import java.awt.event.*;
11
12   public class HelloPrint extends Frame
13                       implements ActionListener {
14
15       Button printBtn;
16
17       public HelloPrint() {
18           super(&quot;Hello World&quot;);

</PRE>
<PRE>
                                                          <I>continues</I>
</PRE>
<A NAME="PAGENUM-630"><P>Page 630</P></A>

<P>Listing 14.3, Continued
</P>


<PRE>
19
20           addWindowListener(new Wadapt());
21           setSize(300, 200);
22           setLayout(new FlowLayout());
23
24           printBtn = new Button(&quot;Hello&quot;);
25           printBtn.addActionListener(this);
26           add(printBtn);
27
28           setVisible(true);
29           printBtn.requestFocus();
30       }
31
32       private void printHello() {
33           Graphics pg;
34           String hello = new String(&quot;Hello World!&quot;);
35
36           // Display a Print dialog box, and get a reference
37           // to a PrintJob object
38           PrintJob pj = getToolkit().getPrintJob(this, &quot;HelloPrint&quot;,
&Acirc;null);
39
40           if (pj != null) {
41               int w = pj.getPageDimension().width;
42               int h = pj.getPageDimension().height;
43
44               // Ask the PrintJob instance for a graphics context in
45               // which to draw
46               pg = pj.getGraphics();
47               if (pg != null) {
48                   pg.setFont(new Font(&quot;Helvetica&quot;, Font.BOLD, 48));
49
50                   int sw = pg.getFontMetrics().stringWidth(hello);
51                   int sh = pg.getFontMetrics().getHeight();
52                   pg.drawString(hello, (w _ sw) / 2, (h + sh) / 2);
</PRE>

<A NAME="PAGENUM-631"><P>Page 631</P></A>



<PRE>
53
54                   // Flush the page to the printer
55                   pg.dispose();
56               }
57               // End the print job and do housekeeping
58               pj.end();
59           }
60       }
61
62       public void actionPerformed(ActionEvent evt) {
63           printHello();
64       }
65
66       public static void main(String args[]) {
67           HelloPrint printFrame = new HelloPrint();
68           return;
69       }
70   }
71
72   class Wadapt extends WindowAdapter
73   {
74       public void windowClosing(WindowEvent evt) {
75           Frame frm = (Frame)evt.getSource();
76           frm.setVisible(false);
77           frm.dispose();
78           System.exit(0);
79       }
80   }
</PRE>

<P>When the Hello button is clicked, line 63 calls the
printHello() method contained in lines 32_60.
</P>

<P>Line 34 creates the String that will eventually be printed on the printer.
</P>

<P>Line 38 gets a reference to the Toolkit object to call the
getPrintJob() method. The getPrintJob() method takes three parameters:
</P>
<UL>
<LI>          An instance of Frame.
<LI>          The name of the print job.
</UL>

<A NAME="PAGENUM-632"><P>Page 632</P></A>


<UL>
<LI>          A Properties object that may be used to supply platform-dependent information
to the Print dialog box. It may also be used to find out what options the user chose
in the Print dialog box because this method alters the Properties object passed to it.
</UL>

<P>The getPrintJob() method displays the Print dialog box to the user. If the user cancels
the print job, this method returns null. Otherwise the
getPrintJob() method returns a PrintJob object that represents the print job. Line 40 checks to see whether or not the
user cancelled the print job.
</P>

<P>Lines 41 and 42 call the getPageDimension() of the PrintJob object to find out the
dimensions (in pixels) of a page.
</P>

<P>Line 46 calls the getGraphics() method of the PrintJob object to get a Graphics object
on which to draw. That object will eventually be printed. Each time
getGraphics() is called, the graphics context for a new page is returned. Calling
getGraphics() repeatedly results in multiple page printing.
</P>

<P>The Graphics object that the getGraphics() method returns also implements an
interface named PrintGraphics. The PrintGraphics interface contains the
getPrintJob() method. This interface and method will be utilized in the following example.
</P>

<P>Line 47 makes sure a graphics context is actually returned.
</P>

<P>Line 48 sets the printer font to 48 point bold Helvetica.
</P>

<P>Lines 50 and 51 calculate the width and height (in pixels) of the &quot;Hello World!&quot; string
in the current font characteristics.
</P>

<P>Line 52 prints &quot;Hello World!&quot; after calculating the characteristics needed to print in
the center of the page.
</P>

<P>Line 55 causes the page to be sent to the printer. In a multiple page scenario you
would call the dispose() method for every page.
</P>

<P>Line 58 ends the print job and performs any necessary housekeeping functions.
</P>

<P>Figure 14.9 shows the HelloPrint application's display.
</P>
<P><B>Printing the Graphical User Interface</B>
</P>

<P>To print a component, pass the graphics context of the printer page to the
print() method of the component. Recall that the graphics context is returned from the
getGraphics() method of the PrintJob object. The default implementation of the
print() method is to call the paint()
</P>


<P><CENTER>
<a href="0623-0626.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0633-0638.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

