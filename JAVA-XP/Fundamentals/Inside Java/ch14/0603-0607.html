<HTML>
<HEAD>


<TITLE>Inside Java:The New, Improved AWT: Menus, Events, and More New Features:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0598-0602.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0608-0611.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-603"><P>Page 603</P></A>

<P>A WindowListener listens for event types contained in the WindowEvent class.
This event listener has five methods, each of which correspond to an event type in
the WindowEvent class. These methods are:
</P>

<UL>
<LI>          windowClosed(WindowEvent)
<LI>          windowClosing(WindowEvent)
<LI>          windowDeiconified(WindowEvent)
<LI>          windowIconified(WindowEvent)
<LI>          windowOpened(WindowEvent)
</UL>

<P>Lines 201_206 in listing 14.1 demonstrate the use of a WindowListener to trap
the WINDOW_CLOSING event type, which occurs when the user tries to close a window.
</P>
<PRE>
201       public void windowClosing(WindowEvent evt) {
202           Frame frm = (Frame)evt.getSource();
203           frm.setVisible(false);
204           frm.dispose();
205           System.exit(0);
206       }
</PRE>

<P>For more information on WindowListener, refer to the following Web page:
</P>
<PRE>

http://java.sun.com/products/JDK/1.1/docs/api/
java.awt.event.WindowListener.html
</PRE>

<P>The java.awt.event package contains some convenience classes that make it easier
to implement the low-level event listeners described above. These sometimes are referred
to as <I>event adapter convenience classes</I>.
</P>

<P><B>Event Adapter Convenience Classes
</P></B>

<P>To implement an interface in a class, you must put each method defined by the
interface in that same class. This can be a tedious process, especially if you are only interested
in certain methods of the interface.
</P>

<P>Of the nine event listener interfaces described above, six have more than one
method defined. These six are the low-level event listener interfaces. Typically, you will
be interested in implementing only one or two of these methods in a given class, but as
just mentioned, you must define them all.
</P>

<P>To alleviate this problem, six classes correspond to the six low-level event
listener
</P>

<A NAME="PAGENUM-604"><P>Page 604</P></A>



<P>interfaces and sometimes are referred to as event adapter convenience classes.
These classes implement a corresponding event listener interface and have an empty
method for each of the methods defined by that listener interface. The event adapter
convenience classes are:
</P>

<UL>
<LI>          ComponentAdapter
<LI>          FocusAdapter
<LI>          KeyAdapter
<LI>          MouseAdapter
<LI>          MouseMotionAdapter
<LI>          WindowAdapter
</UL>

<P>The MenuDemo application (listing 14.1) demonstrates the use of two of these
classes: WindowAdapter and MouseAdapter. Consider the use of the WindowAdapter class
in lines 199_207.
</P>
<PRE>
199   class Wadapt extends WindowAdapter
200   {
201       public void windowClosing(WindowEvent evt) {
202           Frame frm = (Frame)evt.getSource();
203           frm.setVisible(false);
204           frm.dispose();
205           System.exit(0);
206       }
207   }
</PRE>

<P>This class is defined as a WindowListener for the main frame of the application in line 23:
</P>
<PRE>
023           addWindowListener(new Wadapt());
</PRE>

<P>As mentioned earlier in the chapter, the
windowClosing() method of the event listener is invoked when the user tries to close the main window of the application. In this case,
the event listener is an instance of Wadapt, which is derived from the
WindowAdapter class. Because the WindowAdapter class defines all the methods in the
WindowListener interface, it is only necessary to override the method in which we're interested&#151;in
this case, the windowClosing() method.
</P>

<P>Up to this point in the discussion of the Delegation Event Model, we have focused
on
</P>

<A NAME="PAGENUM-605"><P>Page 605</P></A>




<P>event listeners. The next section will discuss the events themselves.
</P>

<P><B>The Event Class Hierarchy
</P></B>

<P>All the event types that the event listeners listen for are organized into classes,
which are arranged in a class hierarchy. Although the java.awt.event package contains
these classes, they are all directly or indirectly derived from the java.awt.AWTEvent
class, which is derived from java.util.EventObject. Figure 14.6 shows this class hierarchy.
(The classes marked by an asterisk are passed into one or more of the AWT event
listener methods.)
</P>

<P>
<a href="images\ch14fg06.jpg"><img src="images\tn_ch14fg06.jpg"></a><BR>
Figure 14.6
<I>AWTEvent class hierarchy.</I>
</P>

<P>The following information will help you use each of these classes. Because
the PaintEvent class is not used with the Delegation Event Model, it will not be covered.
</P>

<P><B>EventObject Class
</P></B>

<P>As shown in the diagram, the EventObject class sits at the top of the event
class hierarchy. The EventObject class contains a method named
getSource()&#151;you can call this method on any event class in the hierarchy to determine which object fired the
event. Recall that the getSource() method is used in the MenuDemo example:
</P>
<PRE>
168           System.out.println(((MenuItem)evt.getSource()).getLabel());
</PRE>



<A NAME="PAGENUM-606"><P>Page 606</P></A>



<P>Line 168 uses the getSource() method to obtain a reference to the MenuItem object
that fired the event so that a method of the MenuItem object can be called. For more
information on the EventObject class, refer to the following Web page:
</P>
<PRE>

http://java.sun.com/products/JDK/1.1/docs/api/java.util.EventObject.html
</PRE>

<P><B>AWTEvent Class
</B></P>

<P>The AWTEvent class is the top-level class for all AWT-related event classes.
Because most subclasses of AWTEvent contain multiple event types, the AWTEvent
class contains a method named getId(). You can call the
getId() method on any subclass in the hierarchy to determine which event type was fired. This is more useful in the
&quot;Extended Component Event Model,&quot; described later in this chapter. In the following lines of
code, for example, taken from the WishList applet (listing 14.2) you'll see later on,
getId() is used to find out which mouse event type was fired.
</P>
<PRE>
087       protected boolean processMouseEvent(MouseEvent e) {
088           if (e.getId() == MouseEvent.MOUSE_ENTERED) {
</PRE>

<P>The AWTEvent class also contains some masks for use with the Extended
Component Event Model. A <I>mask</I> in this case is a bit-mapped constant that can be compared to
the bits in a given event in order to ascertain what kind of event it is. These masks are
used to identify to the system which events should be delivered to a component's
event processing methods. Although they are not used in conjunction with event
listeners, one mask for each AWT event listener is defined in the &quot;Delegation Event Model&quot;:
</P>

<UL>
<LI>          ACTION_EVENT_MASK
<LI>          ADJUSTMENT_EVENT_MASK
<LI>          ITEM_EVENT_MASK
<LI>          COMPONENT_EVENT_MASK
<LI>          FOCUS_EVENT_MASK
<LI>          KEY_EVENT_MASK
<LI>          MOUSE_EVENT_MASK
<LI>          MOUSE_MOTION_EVENT_MASK
<LI>          WINDOW_EVENT_MASK
</UL>
<P>You will see these in use in the WishList applet, when the Extended Component
Event
</P>

<A NAME="PAGENUM-607"><P>Page 607</P></A>



<P>Model is discussed later in this chapter. For more information on the AWTEvent
class, see the following Web page:
</P>
<PRE>

http://java.sun.com/products/JDK/1.1/docs/api/java.awt.AWTEvent.html
</PRE>

<P><B>ActionEvent Class
</B></P>

<P>The ActionEvent class contains the event type ACTION_PERFORMED, which is
the first semantic event type discussed earlier. An ActionEvent can be fired by:
</P>

<UL>
<LI>          Clicking a button
<LI>          Double-clicking a list
<LI>          Choosing a MenuItem
<LI>          Pressing the Enter key when in a TextField
</UL>

<P>An <I>action command</I> is associated with the ActionEvent. An action command is a
String that represents the name of the action to be performed. You can use the
setActionCommand() method of the event source to assign an action command name to it. Consider
the following code in the MenuDemo example (listing 14.1):
</P>
<PRE>
050           MenuItem miNew = new MenuItem(&quot;New&quot;);
051           miNew.addActionListener(this);
052           fileMenu.add(miNew);
167       public void actionPerformed(ActionEvent evt) {
168           System.out.println(((MenuItem)evt.getSource()).getLabel());
169       }
</PRE>

<P>In line 168, the event listener obtains a reference to the menu item that fired
the ActionEvent and then determines the label of the menu item. The listener could
make decisions based upon either the menu item reference or the menu item label. This is
not usually good practice for anything but the smallest of applications, however, because
it ties the GUI very tightly to the application logic.
</P>

<P>For a better approach, associate command names to the ActionEvent-oriented
user-interface components. You could use the following code to associate the command
name &quot;New drawing&quot; with the menu item:
</P>
<PRE>
miNew.setActionCommand(&quot;New drawing&quot;);
</PRE>

<P>To determine the command name of the element that fired the event, call
the
</P>
<P><CENTER>
<a href="0598-0602.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0608-0611.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

