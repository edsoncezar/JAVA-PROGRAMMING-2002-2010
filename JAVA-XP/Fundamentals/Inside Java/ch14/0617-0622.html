<HTML>
<HEAD>


<TITLE>Inside Java:The New, Improved AWT: Menus, Events, and More New Features:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0612-0616.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0623-0626.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-617"><P>Page 617</P></A>

<UL>
<LI>          Organizes an event class hierarchy: The event classes are organized into
a hierarchy instead of one all-purpose event class.
</UL>

<P>It is not recommended to write Java programs that use both the Delegation Event
Model and the JDK 1.0 event model.
</P>

<P>The next section covers another new event model, sometimes referred to as the
<I>Extended Component Event Model.</I>
</P>

<H4><A NAME="ch14_ 15">
The Extended Component Event Model
</A></H4>

<P>The <I>Extended Component Event Model</I> offers
a way of handling events from classes that you extend from AWT components. This model takes advantage of the
default event handling methods in the Delegation Event Model.
</P>

<P>As an example, figure 14.7 shows the default handling methods that are invoked to
call the mouseEntered() method of a registered MouseListener.
</P>

<P>The following depicts the path that the MouseEvent takes:
</P>

<OL>
<LI>          Because at least one MouseListener has been registered, the MouseEvent is
passed
</OL>

<P>
<a href="images\ch14fg07.jpg"><img src="images\tn_ch14fg07.jpg"></a><BR>
Figure 14.7 <I>Flow of MouseEvent through default event
handling methods.</I>
</P>
<A NAME="PAGENUM-618"><P>Page 618</P></A>


<OL START="2">
to the component's processEvent() method.
<LI>         Because this particular MouseEvent event type (MOUSE_ENTERED) is
associated with the MouseListener interface, the
processEvent() method passes the MouseEvent to the component's
processMouseEvent() method. Note that if this had been
a MOUSE_DRAGGED event type (and if a MouseMotionListener was registered),
the processMouseMotionEvent() would have been called. This is because, as explained in
the event listener section, the MOUSE_DRAGGED event type is associated with
the MouseMotionListener interface. A
process&lt;ListenerType&gt;Event() handler method
exists for every &lt;<I>ListenerType&gt;</I>Listener associated with a given AWT component.
<LI>          The processMouseEvent() passes the MouseEvent to the
mouseEntered() method of any registered MouseListener.
</OL>

<P>Following is a complete list of the
process&lt;ListenerType&gt;Event() handler methods
mentioned in step two:
</P>

<UL>
<LI>          protected void processActionEvent(ActionEvent)
<LI>          protected void processAdjustmentEvent(AdjustmentEvent)
<LI>          protected void processItemEvent(ItemEvent)
<LI>          protected void processComponentEvent(ComponentEvent)
<LI>          protected void processFocusEvent(FocusEvent)
<LI>          protected void processKeyEvent(KeyEvent)
<LI>          protected void processMouseEvent(MouseEvent)
<LI>          protected void processMouseMotionEvent(MouseEvent)
<LI>          protected void processWindowEvent(WindowEvent)
</UL>

<P>You can take advantage of these methods and the
processEvent() method by overriding them in the components that you extend from AWT components. This eliminates
the need for an event listener.
</P>

<P>Of course, this presents a question: If a given event is not passed to
processEvent() unless a corresponding event listener is registered, then how will the event be passed?
</P>

<P>The answer: The enableEvents() method, defined in the AWT Component class,
enables events to be passed to the processEvent() method. As explained in the
AWTEvent class section, the AWTEvent class defines nine constants, each of which corresponds to
an event listener class:
</P>
<UL>
<LI>          ACTION_EVENT_MASK
</UL>


<A NAME="PAGENUM-619"><P>Page 619</P></A>


<UL>
<LI>          ADJUSTMENT_EVENT_MASK
<LI>          ITEM_EVENT_MASK
<LI>          COMPONENT_EVENT_MASK
<LI>          FOCUS_EVENT_MASK
<LI>          KEY_EVENT_MASK
<LI>          MOUSE_EVENT_MASK
<LI>          MOUSE_MOTION_EVENT_MASK
<LI>          WINDOW_EVENT_MASK
</UL>

<P>By calling the component's enableEvents() method with one or more of these masks,
the associated event types can be passed to the
processEvent() method.
</P>

<P><B>The WishList Applet</B>
</P>

<P>Listing 14.2 (program WishList.java on the
CD-ROM accompanying this book) shows an application that serves as a simple example of how you can use the Extended
Component Event Model to handle events in sub-classed components. It demonstrates
handling three varieties of events: ItemEvent, ActionEvent, and MouseEvent.
</P>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
NOTE
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
This example application is called &quot;WishList&quot; because it contains a list of
desirable qualities. This list is commonly known as the &quot;fruit of the Spirit.&quot;
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>
<P>Figure 14.8 displays this applet's user interface, which consists of two list boxes
that have the following behavior:
</P>

<UL>
<LI>          When the mouse cursor enters either list box, all the items in that list box
convert to uppercase letters.
<LI>          When an item is clicked, the letters in that item convert to lowercase.
<LI>          When an item is double-clicked, it is removed from the list box and added to
the other one in lowercase letters.
<LI>          When the mouse cursor exits the list box, all the items in that list box convert
to lowercase letters.
</UL>

<P>Listing 14.2
</P>
<PRE>
Line==================Java Source=================
</PRE>


<A NAME="PAGENUM-620"><P>Page 620</P></A>


<PRE>
001   //////////
002   // WishList.java  Example of using the Extended
003   // Component Event Model, and item events.
004   //
005   // Author: James L. Weaver   JDK version: 1.1 beta3
006   //////////
007   package chapter14.code.wishlist;
008
009   import java.awt.*;
010   import java.applet.*;
011   import java.awt.event.*;
012
013   public class WishList extends Applet {
014
015       ExchangeList listA, listB;
016
017       public void init() {
018           listA = new ExchangeList(9);
019           listB = new ExchangeList(9);
020
021           listA.setMate(listB);
022           listB.setMate(listA);
023
024           listA.add(&quot;love&quot;);
025           listA.add(&quot;joy&quot;);
026           listA.add(&quot;peace&quot;);
027           listA.add(&quot;patience&quot;);
028           listA.add(&quot;kindness&quot;);
029           listA.add(&quot;goodness&quot;);
030           listA.add(&quot;faithfulness&quot;);
031           listA.add(&quot;gentleness&quot;);
032           listA.add(&quot;self-control&quot;);
033
034           add(listA);
035           add(listB);
036       }
037   }
038
039   class ExchangeList extends List
</PRE>

<A NAME="PAGENUM-621"><P>Page 621</P></A>


<PRE>
040   {
041       // Declare reference to the other ExchangeList
042       ExchangeList mate;
043
044       public ExchangeList(int lines) {
045           super(lines);
046           enableEvents(AWTEvent.ITEM_EVENT_MASK |
047                        AWTEvent.ACTION_EVENT_MASK |
048                        AWTEvent.MOUSE_EVENT_MASK);
049       }
050
051       public void setMate(ExchangeList mate) {
052           this.mate = mate;
053       }
054
055       // This is called when an item is selected
056       protected void processItemEvent(ItemEvent e) {
057           // Find out if this event was caused by the user
058           // selecting the item (as opposed to deselecting it)
059           if (e.getStateChange() == ItemEvent.SELECTED) {
060               // Convert the selected item to lower case
061               int sel = ((Integer)(e.getItem())).intValue();
062               replaceItem(getItem(sel).toLowerCase(), sel);
063               // The replaceItem disturbs the selection
064               select(sel);
065           }
066           // Always call the super class of a component's event
067           // processing methods.
068           super.processItemEvent(e);
069       }
070
071       // This is called when an element of the ExchangeList
072       // is double-clicked
073       protected void processActionEvent(ActionEvent e) {
074           int sel = getSelectedIndex();
075           if (sel &gt; _1) {
076               // Add the selected item to the other list
077               mate.add(getItem(sel));
078               remove(sel);
</PRE>
<PRE>
                                       <I>continues</I>
</PRE>
<A NAME="PAGENUM-622"><P>Page 622</P></A>




<P>Listing 14.2, Continued
</P>
<PRE>
079           }
080           // Always call the super class of a component's event
081           // processing methods.
082           super.processActionEvent(e);
083       }
084
085       // This is called when a mouse event happens over
086       // the ExchangeList
087       protected void processMouseEvent(MouseEvent e) {
088           if (e.getId() == MouseEvent.MOUSE_ENTERED) {
089               // Convert all items in the list to upper case
090               for (int i=0; i&lt;getItemCount(); i++) {
091                   replaceItem(getItem(i).toUpperCase(), i);
092               }
093           }
094           else if (e.getId() == MouseEvent.MOUSE_EXITED) {
095               // Convert all items in the list to lowercase
096               for (int i=0; i&lt;getItemCount(); i++) {
097                   replaceItem(getItem(i).toLowerCase(), i);
098               }
099           }
100           // Always call the super class of a component's event
101           // processing methods.
102           super.processMouseEvent(e);
103       }
104   }
</PRE>

<P>Line 15 declares two ExchangeList references, and lines 18 and 19 create two instances
of this class.
</P>

<P>Lines 39_104 define the ExchangeList class, which is extended from the List class.
Each ExchangeList instance is given a reference to the other via the
setMate() method in lines 51_53. This way, each one can add an item to the other when double-clicked.
</P>

<P>You'll notice that no event listeners are registered, but in lines 46_48, a call to
enableEvents() enables certain events to be processed:
</P>
<PRE>
046           enableEvents(AWTEvent.ITEM_EVENT_MASK |
047                        AWTEvent.ACTION_EVENT_MASK |
048                        AWTEvent.MOUSE_EVENT_MASK);
</PRE>

<P><CENTER>
<a href="0612-0616.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0623-0626.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

