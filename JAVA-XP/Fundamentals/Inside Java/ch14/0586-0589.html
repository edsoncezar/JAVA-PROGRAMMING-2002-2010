<HTML>
<HEAD>


<TITLE>Inside Java:The New, Improved AWT: Menus, Events, and More New Features:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0580-0585.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0590-0593.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-586"><P>Page 586</P></A>



<P>Listing 14.1, Continued
</P>
<PRE>
191               if (evt.getSource() == md.btn2)
192                   md.popMenu2.show(comp, evt.getX(), evt.getY());
193               else
194                   md.popMenu1.show(comp, evt.getX(), evt.getY());
195           }
196       }
197   }
198
199   class Wadapt extends WindowAdapter
200   {
201       public void windowClosing(WindowEvent evt) {
202           Frame frm = (Frame)evt.getSource();
203           frm.setVisible(false);
204           frm.dispose();
205           System.exit(0);
206       }
207   }
</PRE>

<P>Before  examining the steps to creating a menu, briefly examine the listing:
</P>

<P>Lines 12_39 define the MenuDemo class, which is a Frame that will contain a menu
bar with menus. Each menu will contain menu items.
</P>

<P>Line 34 calls the buildMenu() method, which builds the application menu. Lines <BR>
41_125 hold the code for this method.
</P>

<P>Lines 35 and 36 call buildPopup1() and
buildPopup2(), which build certain pop-up menus
that will be explained shortly. The code for these methods lie in lines 127_165, which you
can ignore for now.
</P>

<P>Figure 14.2 shows the two buttons in the user interface for this applet, along with
the menu bar menu.
</P>

<P><B>Steps for Creating a Menu Bar Menu
</B></P>

<P>To build a menu that resides in the menu bar of a frame, follow these steps. The
corre-
</P>


<A NAME="PAGENUM-587"><P>Page 587</P></A>


<P>
<a href="images\ch14fg02.jpg"><img src="images\tn_ch14fg02.jpg"></a><BR>
Figure 14.2
<I>MenuDemo application display showing menu bar menu.</I>
</P>




<P>sponding lines of code from listing 14.1 are provided to illustrate each step.
</P>

<OL>
<LI>          Create a menu bar. This is accomplished by creating an instance of MenuBar:
<PRE>
043           MenuBar mb = new MenuBar();
</PRE>
<LI>          Set the menu bar into the Frame. Use the
setMenuBar() method of the Frame class to accomplish this:
<PRE>
     044           setMenuBar(mb);
</PRE>
<LI>          Create one or more top-level menus. Each menu is an instance of Menu. You
can pass a String to the constructor containing the menu's label, which by
convention should not contain spaces:
<PRE>
     047           Menu fileMenu = new Menu(&quot;File&quot;);
</PRE>
</OL>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
TIP
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
Individual menu item labels can contain spaces, but menu labels should not.
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>
<OL START="4">
<LI>          Add the menu to the menu bar, using the
add() method of the MenuBar class:
<PRE>
     048           mb.add(fileMenu);
</PRE>
<LI>          Create one or more menu items to put in each of the menus. Each menu item is
an instance of MenuItem. You can pass a String containing the menu item's label
into the constructor:
<PRE>
     050           MenuItem miNew = new MenuItem(&quot;New&quot;);
</PRE>
<LI>          You may want to associate an event listener to the menu item so that when
the menu item is selected, a method of the listener will be called. This example adds
an
</OL>


<A NAME="PAGENUM-588"><P>Page 588</P></A>


<OL START="7">
ActionListener, which handles &quot;action&quot; events, such as button clicks and
menu selections. This chapter covers event handling in later sections.
<PRE>
     051           miNew.addActionListener(this);
</PRE>
<LI>          Add the menu item to the menu using the
add() method of the Menu class:
<PRE>
     052           fileMenu.add(miNew);
</PRE>
</OL>

<P>Although all the steps (except as noted in step six) are required in creating menus,
they don't have to be performed in the order shown here&#151;it is up to the developer's
discretion. The previous example serves merely as an illustration of the process.
</P>

<P><B>Creating Checkbox Menu Items
</P></B>

<P>Lines 74_79 show an example of creating a checkbox menu item and adding it to a menu.
</P>

<PRE>
074           CheckboxMenuItem miBold =
075                   new CheckboxMenuItem(&quot;Bold&quot;, true);
076           // Assign the Ctrl+b shortcut key.
077           miBold.setShortcut(new MenuShortcut(`b'));
078           miBold.addActionListener(this);
079           optionsMenu.add(miBold);
</PRE>

<P>In line 75, a version of the CheckboxMenuItem constructor is used to create a
new CheckboxMenuItem instance with a label containing the String &quot;Bold&quot; and a true
state. This means that the menu item will be checked by default.
</P>

<P>Line 77 assigns this menu item a shortcut key, which will be discussed shortly. Line
79 adds the new checkbox menu item to the &quot;Options&quot; menu.
</P>

<P>Table 14.4 shows some of the constructors and methods of the
CheckboxMenuItem class. For a complete list, refer to the following Web page:
</P>
<PRE>

http://java.sun.com/products/JDK/1.1/docs/api/
java.awt.CheckboxMenuItem.html
</PRE>


<A NAME="PAGENUM-589"><P>Page 589</P></A>


<P><B>Table 14.4
</P></B>
<P>Some Constructors and Methods in the
CheckboxMenuItem Class
</P>
<TABLE>

<TR><TD>
Constructor/Method
</TD><TD>
Description
</TD></TR><TR><TD>
CheckboxMenuItem(String)
specified label. State defaults to false.
</TD><TD>
Creates a CheckboxMenuItem with the
</TD></TR><TR><TD>
CheckboxMenuItem(String, boolean)
</TD><TD>
Creates a CheckboxMenuItem with the
specified label and state.
</TD></TR><TR><TD>
boolean getState()
</TD><TD>
Returns the state of this CheckboxMenuItem.
</TD></TR><TR><TD>
void setState(boolean)
</TD><TD>
Sets the state of this CheckboxMenuItem.
</TD></TR><TR><TD>
void setLabel(String)
</TD><TD>
Sets the MenuItem label to the specified String.
</TD></TR><TR><TD>
void addItemListener(ItemListener)
</TD><TD>
Registers an event listener to receive item events.
</TD></TR></TABLE>

<P>Now that you know how to create regular menu items and checkbox menu items, we
must cover two additional elements associated with menu items: the menu item separator
and the submenu, which is a menu item that is also a menu.
</P>

<P><B>Creating Menu Item Separators
</P></B>

<P>A horizontal line is sometimes used to provide separation between menu items in
the same menu. This is accomplished through the
addSeparator() method of the Menu class:
</P>
<PRE>
062           fileMenu.addSeparator();
</PRE>

<P><B>Creating Submenus
</P></B>

<P>As mentioned before, a menu can contain another menu, which is typically called
a submenu, or cascading menu. The submenu adds an extra level to the menu
structure, and is useful for organizing menu choices hierarchically. This keeps the user from
being inundated with too many menu choices at one time. The theory behind
submenus follows the GUI design principle of &quot;progressive disclosure&quot;&#151;showing the user
only what they need to see at a given time. Figure 14.3 shows the submenu in the
MenuDemo example. Generally, it is not advisable to make the user navigate menus more than
three or four levels deep. To create submenus, consider the following in listing 14.1:
</P>

<P>Lines 71 and 72 create and add a menu labeled &quot;Options&quot; to the menu bar.
</P>
<PRE>
071           Menu optionsMenu = new Menu(&quot;Options&quot;);
072           mb.add(optionsMenu);
</PRE>

<P><CENTER>
<a href="0580-0585.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0590-0593.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

