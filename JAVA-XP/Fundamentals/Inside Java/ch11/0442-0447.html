<HTML>
<HEAD>


<TITLE>Inside Java:Performing Java Input/Output:EarthWeb Inc.-</TITLE>







<P><CENTER>
<a href="0437-0441.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0448-0452.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-442"><P>Page 442</P></A>



<P>The DataInputStream class extends the FilterInputStream class and implements
the DataInput interface:
</P>

<PRE>
public class DataInputStream extends FilterInputStream
      implements DataInput
{
      &#133;
}
</PRE>

<P>The methods of the DataInput interface are described next. The DataInputInterface
is required to implement these methods:
</P>

<PRE>
public interface DataInput
{
    // Reads into byte array and blocks until
    // all bytes are read.
    void readFully(byte b[]) throws IOException;

    // Reads into byte subarray and blocks until all
    // bytes are read.
    void readFully(byte b[], int off, int len)
         throws IOException;

    // Skips bytes and blocks until all bytes are
    // skipped.
    int skipBytes(int n) throws IOException;

    // Reads in a boolean.
    boolean readBoolean() throws IOException;

    // Reads an 8 bit byte.
    byte readByte() throws IOException;

    // Reads an unsigned 8 bit byte.
    int readUnsignedByte() throws IOException;

    // Reads a 16 bit short.
    short readShort() throws IOException;
</PRE>




<A NAME="PAGENUM-443"><P>Page 443</P></A>


<PRE>
	// Reads an unsigned 16 bit short.

    int readUnsignedShort() throws IOException;

    // Reads a 16 bit char.

    char readChar() throws IOException;

    // Reads a 32 bit int.
    int readInt() throws IOException;

    // Reads a 64 bit long.
    long readLong() throws IOException;

    // Reads a 32 bit float.
    float readFloat() throws IOException;

    // Reads a 64 bit double.
    double readDouble() throws IOException;

    // Reads a line until the end of line or end of file.
    String readLine() throws IOException;

    // Reads Unicode text in UTF-8 format.
    String readUTF() throws IOException;

} // end DataInput
</PRE>

<P>You build an instance of the DataInputStream by using the following constructor:
</P>

<PRE>
public DataInputStream(InputStream in);
</PRE>

<P>Here is an example of using the DataInputStream:
</P>

<PRE>
DataInputStream dis = new DataInputStream(
         new FileInputStream(&quot;records.dat&quot;));

// Now you can read the data in file &quot;records.dat&quot;
// as a stream of Java data types.

for(;;)
{
      // Assume record consists of int, long, double

</PRE>

<A NAME="PAGENUM-444"><P>Page 444</P></A>



<PRE>
      int fld1;
      long fld2;
      double fld3;


      try
      {
         fld1 = dis.readInt();
         fld2 = dis.readLong();
         fld3 = dis.readDouble();
      }
      catch(EOFException e)
      {
         break;
      }
      catch(IOException e)
      {
         System.out.println(e);
         break;

      } // end try

      // Code to process fld1, fld2, fld3.

} //end for
</PRE>

<P>Within the for loop, a record is read that consists of an
int, long, and double. When an IOException such as the EOFException is found, the for loop is exited. The
preceding code also demonstrates the usefulness of the EOFException to sense the end of file.
The EOFException is a subclass of IOException. You do not have to test for the _1
status code of the read() methods of the InputStream.
</P>

<P>The DataOutputStream class performs data output of fundamental Java data types
on output streams. The DataOutputStream class extends the FilterOutputStream class
and implements the DataOutput interface:
</P>

<PRE>
public class DataOutputStream extends FilterOutputStream
      implements DataOutput
{
      &#133;

</PRE>

<A NAME="PAGENUM-445"><P>Page 445</P></A>

<PRE>
}
</PRE>

<P>The methods of the DataOutput interface are described next. The DataOutputInterface
is required to implement these methods:
</P>



<PRE>
public interface DataOutput
{
    // This writes a byte, b. It will block until
    // the byte is actually written.
    void write(int b) throws IOException;

    // This method writes an array of bytes, b,
    // to the output stream. It will block until
    // the byte is actually written.
    void write(byte b[]) throws IOException;


    // This method writes a sub array of bytes, b,
    // to the output stream. It will block until
    // the byte is actually written. The sub array
    // is len bytes long and begins at off.
    void write(byte b[], int off, int len)
         throws IOException;


    // This method writes a boolean.
    void writeBoolean(boolean v) throws IOException;

    // This method writes an 8 bit byte.
    void writeByte(int v) throws IOException;

    // This method writes a 16 bit short.
    void writeShort(int v) throws IOException;

    // This method writes a 16 bit char.
    void writeChar(int v) throws IOException;

    // This method writes a 32 bit int.
    void writeInt(int v) throws IOException;


</PRE>


<A NAME="PAGENUM-446"><P>Page 446</P></A>


<PRE>
    // This method writes a 64 bit long.
    void writeLong(long v) throws IOException;

    // This method writes a 32 bit float.
    void writeFloat(float v) throws IOException;

    // This method writes a 64 bit double.
    void writeDouble(double v) throws IOException;

    // This method writes a String as a sequence
    // of bytes.
    void writeBytes(String s) throws IOException;

    // This method writes a String as a sequence
    // of chars.
    void writeChars(String s) throws IOException;

    // This method writes a String in UTF format.
    void writeUTF(String str) throws IOException;

} // end DataOutput

</PRE>

<P>You build an instance of the DataOutputStream by using the following constructor:
</P>

<PRE>
public DataOutputStream(OutputStream out);
</PRE>

<P>
Here is an example of using the DataOutputStream:
</P>

<PRE>
DataOutputStream dos = new DataOutputStream(
         new FileOutputStream(&quot;records.dat&quot;));

// Now you can write the data in file &quot;records.dat&quot;
// as a stream of Java data types.

for(int x = 1; x &lt;= 100; x++)
{
      // Assume record consists of int, long, double
      int fld1;
      long fld2;
      double fld3;

      
</PRE>

<A NAME="PAGENUM-447"><P>Page 447</P></A>



<PRE>

      fld1 = x + 5;
      fld2 = x*5;
      fld3 = x*25;


      try
      {
         dos.writeInt(fld1);
         dos.writeLong(fld2);
         dos.writeDouble(fld3);
      }
      catch(IOException e)
      {
         System.out.println(e);
         break;

      } // end try

} //end for

</PRE>

<H4><A NAME="ch11_ 12">
Using LineNumberInputStream
</A></H4>

<P>The LineNumberInputStream is used to keep track of line numbers in the input
stream. The line numbers are renumbered during the mark/reset operations. You can use
the getLineNumber() to get the current line number and
setLineNumber() to set the line number of the current line. If a line number is changed, subsequent lines are renumbered
starting with the new line number. LineNumberInputStream is a subclass of the FilterInputStream.
</P>

<P>Here is an example of how you can read data from a file as a stream of Java
fundamental data types, and also buffer the data.
</P>

<PRE>
LineNumberInputStream lis =
      new LineNumberInputStream(
         new BufferedInputStream(
            new FileInputStream(&quot;rec.dat&quot;)));

DataInpuStream dis = new DataInputStream(lis);

String str1;

</PRE>

<P><CENTER>
<a href="0437-0441.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0448-0452.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

