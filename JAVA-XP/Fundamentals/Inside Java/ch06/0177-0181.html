<HTML>
<HEAD>


<TITLE>Inside Java:Defining Java Classes:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="..\ch05\0174-0176.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0182-0186.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-177"><P>Page 177</P></A>



<H3><A NAME="ch06_ 1">
CHAPTER 6
</A></H3>


<H2>

Defining Java Classes

</H2>

<P><B>I</B>n the previous chapter, you learned how to use some of Java's 
     predefined classes. These classes, however, were already available 
     for use. When writing new programs and modeling concepts that
are not covered in the predefined Java classes, you have to build your
own classes.
</P>

<P>This chapter will teach you how to write your own Java classes. To
better appreciate how best to design and use classes, some principles
of objected-oriented programming will be discussed, as well as a new
Java feature called inner classes.
</P>

<A NAME="PAGENUM-178"><P>Page 178</P></A>



<H3><A NAME="ch06_ 2">
Inner Classes
</A></H3>

<P>Inner classes enable classes to be defined in any scope. Previously, Java supported
only top-level classes, which had to be members of packages. Now the programmer can
define inner classes as members of other classes, locally within a block of statements,
or anonymously within an expression. The use of inner classes makes it easier for the
Java programmer to connect objects together, because classes can be defined closer to
the objects they need to manipulate, and can directly use the variables and methods
that they need. With the removal of restrictions on the placement of classes, Java's
scoping rules became more lenient, like those of classical block structured languages, such
as Pascal.
</P>

<H4><A NAME="ch06_ 3">
Defining an Inner Class
</A></H4>

<P>When a class definition is local to a block, it may access any names that are local to
that block, including variables defined by the block and parameters of the enclosing
method. Here is an example of an inner class that makes use of both kinds of local variables.
Keep in mind that the example is not so important for what it does, but rather for how it
is done.
</P>


<PRE>
Enumeration myEnumeratedClass(Object array[])
   {
   int nIndex = 0;
   class EnumClass1 implements Enumeration
      {
      public boolean moreElements()
         {
         return nIndex &lt; array.length;
         }
      public Object nextElement()
         {
         return array[nIndex++];
         }
      }
   return new EnumClass1();
   }
</PRE>


<P>The inner class EnumClass1 is completely contained within the definition of
the myEnumeratedClass. This avoids the clutter of class definitions that are used only
once in isolated situations. An interesting note is that even after the
method myEnumberatedClass returns, both array and nIndex may still be used by the
inner object, EnumClass1. They are not allowed to be freed up until all the inner classes
and methods are completely finished with them.
</P>

<A NAME="PAGENUM-179"><P>Page 179</P></A>



<P>Notice that nIndex can be changed, and subsequent calls into the inner object will
be able to use the changed value. If two instances of the inner class EnumClass1
were somehow produced by the method, they would both share a single occurrence of
nIndex, this would produce synchronization issues. The variable would exist as long as
either instance of the class also continued to exist.
</P>

<H4><A NAME="ch06_ 4">
Anonymous Inner Classes
</A></H4>

<P>A subset of inner classes are <I>anonymous
classes</I>. These anonymous inner classes are an abbreviated notation for local objects, which makes it easy to introduce a chunk of
code inline within any expression. Not every inner class should be anonymous, but
very simple one-shot local classes are such a common case that they merit the use of
anonymous classes.
</P>

<P>Anonymous inner classes are useful for writing small encapsulated
<I>callbacks,</I> such as enumerations or iterators. They are also helpful for adding behavior to objects
that already have names, such as AWT components and threads.
</P>

<P>In the previous example, the local class name EnumClass1 adds little or no clarity to
the code. To make classes as concise as possible, Java 1.1 allows an abbreviated
notation for local objects. A single expression syntax combines the definition of the
anonymous class with the allocation of the instance.
</P>


<PRE>
Enumeration myEnumeratedClass(Object array[])
   {
   int nIndex = 0;
   return new Enumeration()
      {
      public boolean moreElements()
         {
         return nIndex &lt; array.length;
         }
      public Object nextElement()
         {
         return array[nIndex++];
         }
      };
   }
</PRE>


<P>As you can see in this example, no class name is defined for the new Enumeration
class. It is not necessary because we only want to use it for a very short time to iterate
through the array. This enables the code to be more compact and easy to follow.
</P>

<A NAME="PAGENUM-180"><P>Page 180</P></A>



<H4><A NAME="ch06_ 5">
Uses for Inner Classes
</A></H4>

<P>The inner class's name is not usable outside its scope, except in a qualified name.
This helps in structuring the classes within a package. The code of an inner class can
use simple names from enclosing scopes&#151;including both class and instance members
of enclosing classes&#151;and local variables of enclosing blocks. Inner classes are also
useful for adding behavior to objects that already have names and writing one-shot classes
or encapsulated callbacks. This helps to clarify and maintain code.
</P>

<H3><A NAME="ch06_ 6">
The Class Structure
</A></H3>

<P>The class structure can be defined as follows:
</P>

<PRE>
class classname
{
      // class variable definitions


      // class methods


}
</PRE>


<P>The class variable definitions can occur anywhere inside the class but must be
outside the methods. Variables defined within the methods are called
<I>local variables</I>, and these are distinct from class variables.
</P>

<P>The class methods can occur anywhere inside the class. Class methods cannot
be nested; that is, one class method cannot have the definition of another class
method embedded in it.
</P>

<H4><A NAME="ch06_ 7">
Defining Class Instance Variables
</A></H4>

<P>As an example of class variable definitions, consider the following code fragment:
</P>

<PRE>
class Room
{
      int maxRooms;
      int entranceType;
      float area;
      boolean bathroom;
      // Other variables.
</PRE>


<A NAME="PAGENUM-181"><P>Page 181</P></A>


<PRE>
      // Other methods

}
</PRE>


<P>The preceding definition of the class Room contains four variable definitions. These
are called class variables, and they have the following meaning for a room in a hotel:
</P>

<UL>
<LI>     maxRooms: Some rooms in hotels are suites of smaller rooms. This defines
the maximum number of such rooms.
<LI>     entranceType: This is a code for the entrance type for the room. Different
codes may be assigned to whether the entrance is near the elevator, has special
facilities for physically challenged people, and so on.
<LI>     area: The area of the room. This is a measure of how big the rooms are.
<LI>     bathroom: A Boolean flag to indicate whether it has a bathroom (the
bathroom could be a shared facility outside the room).
</UL>

<P>The scope of these class variables is from the point of definition to the end of that
class. If you compare how the class variables are declared and defined with how the
local variables are defined in a method, you will see no difference in their syntax. This is
good because everything you learned in the previous chapters about declaring and
defining variables applies to class variables.
</P>

<P>A major difference between class variables and local variables is the location in
which these variables are placed. Class variables are in the class definition, but outside
the class methods. Local variables are defined inside the method (see fig. 6.1).
</P>

<P>To declare an object of the class Room, you can use the following:
</P>

<P>
<a href="images\ch06fg01.jpg"><img src="images\tn_ch06fg01.jpg"></a><BR>
<B>Figure 6.1</B>
<I>Class variables versus local variables.</I>
</P>

<P><CENTER>
<a href="..\ch05\0174-0176.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0182-0186.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

