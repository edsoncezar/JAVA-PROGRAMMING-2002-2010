<HTML>
<HEAD>


<TITLE>Inside Java:Defining Java Classes:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0203-0207.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0213-0217.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-208"><P>Page 208</P></A>


<P>But use of this can be omitted in this code because it is implicit.
</P>

<H4><A NAME="ch06_ 15">
Scope of Class Variables and Local Variables
</A></H4>

<P>A scope is the region of program text over which a variable is considered to have
existence. 
</P>

<P>
<a href="images\ch06fg12.jpg"><img src="images\tn_ch06fg12.jpg"></a><BR>
<B>Figure 6.12</B>
<I>Determining the scope of local variables.</I>
</P>

<P>Earlier in this chapter, you learned that the scope of a class variable is from its point
of declaration in the class to the end of that class. The scope of local variables in a method
is from its point of definition in the method to the nearest enclosing block (see fig. 6.12).
</P>

<P>

<B>On the
CD</B><BR>
When a variable reference (local or class variable) occurs, the Java compiler checks to
see if its declaration is in the current statement block. A statement block is statements
defined in braces { }, and it defines a separate scope (see fig. 6.13). If the variable declaration is
not in the current statement block, the next outermost scope is searched. If the search
expands to outside the method, the variable is not a local variable&#151;it is a class instance variable
or a class wide variable. Classes in Java can have a super class from which this class has
been derived. You will learn more about super classes in Chapter 7, &quot;Object-Oriented
Programming with Java.&quot; If the variable is not found in the current class, its super class is
searched for the occurrence of the variable.
</P>

<P>A variable in an inner scope can &quot;hide&quot; a variable in an outer scope, and this can lead
to subtle errors in the program when this hiding is unintended. Listing 6.5 shows a
program that illustrates these subtle effects (file VariableScope.java on the CD-ROM that
accompanies this book).
</P>

<P>Line 12 defines a class variable xvar whose value is set to 0. The scope of this variable
is from line 12_59. Lines 16_18 of the main method calls the methods
print1(), print2(), and print3()
</P>



<A NAME="PAGENUM-209"><P>Page 209</P></A>




<P>
<a href="images\ch06fg13.jpg"><img src="images\tn_ch06fg13.jpg"></a><BR>
<B>Figure 6.13</B>
<I>A statement block.</I>
</P>

<P>in succession. These methods print out the value of xvar. Some of these methods
have local variables also defined by using the same name xvar as the class variable.
</P>

<P>When print1() is called, it prints the value of xvar (line 25) and increments it (line 27)
before exiting the method. The xvar referenced in print1() is the class variable xvar.
Therefore, the value of xvar that is printed out is 0, and the value of class variable xvar is set to
1, just after the method print1() has been called.
</P>

<P>Next, print2() is called. A local variable with the same name as the class variable xvar
is defined on line 34, and its value is set to 2 on line 36. Line 37 prints the value of
xvar, which is a reference to the local variable on line 34 and not the class variable. The
value of xvar that is printed out is 2. On line 39 local variable xvar is incremented to 3, but
when method print2() exists, this value is lost.
</P>

<PRE>
44     static void print3()
45     {
46         {
47             int xvar;
48
49             xvar = 3;
50             System.out.println(&quot;print3()inside block:xvar = &quot;+xvar);
51
52             xvar++;
53         }
54
55         System.out.println(&quot;print3()outside block:xvar = &quot;+xvar);
</PRE>



<A NAME="PAGENUM-210"><P>Page 210</P></A>

<PRE>
56
57     }  // end print3
</PRE>

<P>Finally, print3() is called. This method defines a statement block on lines 46_53, and
inside the block it defines a local variable xvar with the same name as the class variable.
The scope of this local variable is from line 47 to the end of the statement block on line
53. Within the block statement, xvar is set to 3 (line 49), printed out (line 50),
and incremented (line 52). The value of xvar that is printed out is 3, the value of the
local variable xvar defined in line 47.
</P>

<P>At the end of the block statement, the value of
xvar is printed out again (line 55). This xvar is outside the scope of the block statement, and therefore is a reference to the
xvar in the nearest enclosing block; that is, the class variable on line 12 whose value was
set to 1 in line 25 when print1() was called.
</P>

<P>
<a href="images\ch06fg14.jpg"><img src="images\tn_ch06fg14.jpg"></a><BR>
<B>Figure 6.14</B>
<I>Output of VariableScope program.</I>
</P>

<P>Figure 6.14 shows the result of running the VariableScope program. You can see that
the output is consistent with the previous discussion.
</P>

<P>Listing 6.5
</P>
<PRE>
Line==================Java Source=================
01 /**
02  * VariableScope: This shows the problem of
03  * information hiding of variables with the
04  * same name.
05  *
06  * Author: Karanjit S.G.S. Siyan
07  *
</PRE>


<A NAME="PAGENUM-211"><P>Page 211</P></A>



<PRE>
08  */
09
10 class VariableScope
11 {
12     static int xvar = 0;
13
14     public static void main(String[] args)
15     {
16         print1();
17         print2();
18         print3();
19
20     }  // end main
21
22     static void print1()
23     {
24
25         System.out.println(&quot;print1():xvar = &quot;+xvar);
26
27         xvar++;
28
29     }  // end print1
30
31
32     static void print2()
33     {
34         int xvar;
35
36         xvar = 2;
37         System.out.println(&quot;print2():xvar = &quot;+xvar);
38
39         xvar++;
40
41     }  // end print2
42
43
44     static void print3()
45     {
46         {
</PRE>
<PRE>
								<I>continues</I>
</PRE>

<A NAME="PAGENUM-212"><P>Page 212</P></A>




<P>Listing 6.5, Continued
</P>
<PRE>
47             int xvar;
48
49             xvar = 3;
50             System.out.println(&quot;print3()inside block:xvar = &quot;+xvar);
51
52             xvar++;
53         }
54
55         System.out.println(&quot;print3()outside block:xvar = &quot;+xvar);
56
57     }  // end print3
58
59 } // end VariableScope
</PRE>

<H4><A NAME="ch06_ 16">
Constructor Methods
</A></H4>

<P>Constructors are special methods for classes whose primary purpose is to build
an instance of the class. As part of the instantiation of a class, class instance variables
and class variables may have to be initialized. The operator
new is used to allocate space for the object being built. In many languages, objects that have been explicitly
allocated space have to be explicitly freed up by the programmer. Not so in Java.
</P>

<P>In Java you allocate space for an object by instantiating it, but you never
explicitly reclaim the allocated space. The Java runtime automatically reclaims space for
objects that are no longer in use. This process of reclaiming memory space is called
<I>garbage collection</I>, and it is automatic in Java. By making garbage collection automatic,
the programmer does not have to worry about a class of insidious bugs dealing
with improper freeing up of memory, or the problem of forgetting to free up memory,
which can result in &quot;memory leakage&quot;&#151;memory that seems to have disappeared just when
you need it!
</P>

<P>The following shows the general syntax of a class constructor method:
</P>
<PRE>
qualifiers classname (parameters)
{

}
</PRE>

<P>The name of the constructor is the same as the class name. The
<I>parameters</I> are similar to that used for other methods and are optional. The
<I>qualifiers</I> can control access to the constructor and are usually reserved words such as
public or private. You will learn
</P>

<P><CENTER>
<a href="0203-0207.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0213-0217.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

