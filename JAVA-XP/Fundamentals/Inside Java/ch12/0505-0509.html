<HTML>
<HEAD>


<TITLE>Inside Java:Networking with Java:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0499-0504.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0510-0512.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-505"><P>Page 505</P></A>


<PRE>
} // end for
</PRE>

<H4><A NAME="ch12_ 16">
Using WWW Resources from Applets
</A></H4>

<P>You can use the URL and URLConnection classes to obtain the contents of the URL
and display them in any way you want within an applet. Alternatively, if you are running
the applet from within the browser, you can pass the URL to the Web browser and have
it display the content for you. This method passes the responsibility for displaying
the contents to the Web browser, which has a greater understanding of how to handle
and display different content types. You do this by getting the applets context first and
then invoking the showDocument()method for this context.
</P>

<P>One of the methods that is defined in the Applet class, the class all applets extend, is
the getAppletContext():
</P>
<PRE>
public AppletContext getAppletContext().
</PRE>

<P>This method returns the AppletContext, which is the context in which the applet
runs. This is usually the Web browser. The AppletContext is defined in Java as an
interface class:
</P>
<PRE>
public abstract interface AppletContext
{
      public abstract Applet getApplet(String name);
      public abstract Enumeration getApplets();
      public abstract AudioClip getAudioClip(URL url);
      public abstract Image getImage(URL url);
      public abstract void showDocument(URL url);
      public abstract void showDocument(URL url, String target);
      public abstract void showStatus(String status);

} // end AppletContext
</PRE>

<P>The showDocument() method for the AppletContext is used to pass the URL to the
applet's context (the Web browser). Here is an example of a code fragment that can be part of
an applet:
</P>
<PRE>
URL url = new 
URL(&quot;http://www.tsl.org&quot;);

if (url != null)
{
      getAppletContext().showDocument(url);
</PRE>

<A NAME="PAGENUM-506"><P>Page 506</P></A>


<PRE>
} // end if
</PRE>

<P>The showDocument() method has a second form with a second argument that is a
target string. The target string parameters has the following values:
</P>

<PRE>
     &quot;_self&quot;          show in the current frame

     &quot;_parent&quot;        show in the parent frame

     &quot;_top&quot;           show in the top-most frame

     &quot;_blank&quot;                 show in a new unnamed top-level window

     <I>name</I>                show in a new top-level window named <I>name</I>
</PRE>

<P>The applet code in listing 12.5 (file AppletShowDocument.java) shows an example
of using the showDocument() method within an applet. This applet reads the parameters in
the HTML file shown in listing 12.6 to build a list of displayable buttons. When a
button corresponding to a parameter value in the HTML file is selected, the corresponding
URL address is passed to the Web browser.
</P>

<P>The applet does not implement the paint() or
update() methods, because all the logic is implemented in
init() and there is no painting required. As the URLs are read from
the HTML file, an array of class URLInfo is built. The URLInfo class is on lines 121_
155. The URLInfo class has two data items, which are the buttons corresponding to the
URL and an instance of the URL class for the URL address value. The methods
getURL() (lines 143_147) and getButton() (lines 149_153) are used to return the values of these
two components.
</P>

<P>The handleEvent() (lines) contains logic to find the button that was pressed. When
the button has been identified, its corresponding URL is passed to the Web browser on
line 105 by using the call to showDocument().
</P>

<P>Listing 12.5
</P>
<PRE>
Line==================Java Source=================
001 /**
002  * AppletShowDocument: This demonstrates the use
003  * of the showDocument() method for
004  * passing the URL to the Web browser.
005  *
006  * Author: Karanjit S. G. S. Siyan
007  *
008  */
</PRE>

<A NAME="PAGENUM-507"><P>Page 507</P></A>


<PRE>
009 import java.awt.*;
010 import java.net.*;
011
012 public class AppletShowDocument extends java.applet.Applet
013 {
014     protected int nurls;
015
016     // Array of URLs
017     URLInfo[] urla;
018
019    /**
020     * init(): Standard init method that needs to be overridden
021     * for the applet class.
022     */
023     public void init()
024     {
025
026         super.init();
027         System.out.println(&quot;init called&quot;);
028
029         // Initialize parameters passed through
030         // the param values in the HTML file
031         //
032
033         // Get the number of URLs
034         String param = getParameter(&quot;nurls&quot;);
035         if (param == null)
036         {
037             showStatus(&quot;No URLs specified in the HTML file&quot;);
038             return;
039
040         } // end if
041
042         nurls = Integer.valueOf(param).intValue();
043
044         urla = new URLInfo[nurls];
045         setLayout(new FlowLayout());
046
</PRE>
<PRE>
                                                  <I>continues</I>
</PRE>

<A NAME="PAGENUM-508"><P>Page 508</P></A>


<P>Listing 12.5, Continued
</P>
<PRE>
047
048         for (int x = 1; x &lt;= nurls; x++)
049         {
050
051             String urlStr = &quot;URL&quot;+x;
052             param = getParameter(urlStr);
053             if (param == null)
054             {
055                 System.out.println(&quot;Incorrect or missing &quot;+urlStr);
056                 return;
057
058             }  // end if
059
060             int posMark = param.indexOf(`|');
061             if (posMark == _1)
062             {
063                 showStatus(&quot;Incorrect url parameter&quot;+x);
064                 return;
065
066             }  // end if
067
068             System.out.println(&quot;nurls=&quot;+nurls);
069
070             String name = param.substring(0, posMark);
071             Button b = new Button(name);
072             add(b);
073             urla[x_1] = new URLInfo(b, param.substring(posMark+1));
074
075         }  // end for
076
077     }  // end init
078
079     // handleEvent for user interaction events
080     public boolean handleEvent(Event event)
081     {
082
083         if (event.target instanceof Button)
084         {
</PRE>


<A NAME="PAGENUM-509"><P>Page 509</P></A>


<PRE>
085
086             for (int x = 0; x &lt; urla.length; x++)
087             {
088                 if (urla[x] == null)
089                 {
090                     System.out.println(&quot;urla[&quot;+x+&quot;] is null&quot;);
091                     continue;
092
093                 }  // end if
094
095                 if (event.target == urla[x].getButton())
096                 {
097                     URL url = urla[x].getURL();
098
099                     if (url != null)
100                     {
101                         showStatus(urla[x].getButton().getLabel()+
102                             &quot; &quot;+url.toExternalForm());
103
104                         // Pass the URL to the Web browser
105                         getAppletContext().showDocument(url);
106
107                     } // end if
108
109                 }  // end if
110
111             }  // end for
112
113         }  // end if
114
115         return super.handleEvent(event);
116
117     } // end handleEvent
118
119 }  // end AppletShowDocument
120
121 class URLInfo extends Object
122 {
</PRE>
<PRE>
                                                  <I>continues</I>
</PRE>

<P><CENTER>
<a href="0499-0504.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0510-0512.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

