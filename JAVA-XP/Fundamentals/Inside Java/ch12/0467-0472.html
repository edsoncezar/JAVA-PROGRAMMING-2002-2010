<HTML>
<HEAD>


<TITLE>Inside Java:Networking with Java:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="..\ch11\0465-0466.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0473-0478.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-467"><P>Page 467</P></A>



<H3><A NAME="ch12_ 1">
CHAPTER 12
</A></H3>


<H2>

Networking with Java

</H2>

<P><b>J</b>ava provides a powerful set of classes in the package java.net that can be used for building
useful applications that can perform network oriented tasks. Such tasks could include providing servers
for other applications, building clients to access services on the Internet, or automating tasks such
as file transfer or login to services on the Internet.
</P>


<A NAME="PAGENUM-468"><P>Page 468</P></A>



<H3><A NAME="ch12_ 2">
Overview of Networking Concepts
</A></H3>

<P>The primary communication protocol used on the Internet is TCP/IP
(Transmission Control Protocol/Internet Protocol). The TCP/IP protocol is used by application
services such as Telnet, FTP (File Transfer Protocol), and HTTP
(HyperText Transfer Protocol) to provide services that are of interest to many users.
</P>

<P>For the purpose of understanding how to write Java programs that use network
services, the concepts are reviewed in the following sections.
</P>

<H4><A NAME="ch12_ 3">
Using IP Addresses
</A></H4>

<P>Every computer on a network has at least one network card. For a local area
network (LAN), this is typically an Ethernet, Token Ring, or FDDI
(Fiber Distributed Data Interface) network card. If you are a mobile user, you probably use a modem to make
a connection to the network. Figure 12.1 illustrates some of these possibilities.
</P>


<P><a href="images\ch12fg01.jpg"><img src="images\tn_ch12fg01.jpg"></a><BR>
Figure 12.1 <I>Network card for joining the network.</I>
</P>

<A NAME="PAGENUM-469"><P>Page 469</P></A>


<P>For a TCP/IP based network, every network connection, whether it be an Ethernet,
Token Ring, FDDI, or modem link, is identified by an unique 32-bit number called the IP
address. This number is typically written as a group of four numbers separated by periods. Here
is an example:
</P>

<PRE>
200.12.34.171
</PRE>

<P>Each of the numbers represents the decimal value of the four bytes comprising the
IP address.
</P>

<P>As mentioned earlier, every network connection must have this unique IP address. <BR>
If you have two or more network connections, each network connection must have
a unique IP address assigned to that connection (see fig. 12.2). Computers with more
than one IP address are called <I>multihomed</I> hosts.
</P>



<P><a href="images\ch12fg02.jpg"><img src="images\tn_ch12fg02.jpg"></a><BR>
Figure 12.2 <I>Multiple network connections.</I>
</P>






<P>In Java, the IP address is modeled by a special class called
InetAddress. This class does not have a public constructor method, but provides three static methods to get
an instance of the InetAddress class. The
getLocalHost() returns an InetAddress for the
local host. The getByName() returns an InetAddress of the specified host. If a host has several
IP addresses (multihomed host), you can use the
getAllByName() to return an array of IP addresses. You can use
getAddress() on an InetAddress instance to get the IP address
as
</P>


<A NAME="PAGENUM-470"><P>Page 470</P></A>


<P>an array of bytes. If you want to get the host name corresponding to an IP address
(also called an inverse query), you can use the
getAddress() method on an InetAddress instance. The following are the declarations for the methods in InetAddress:
</P>

<PRE>
public final class InetAddress extends Object
{
   public static synchronized InetAddress getByName(String host)
   throws UnknownHostException;

   public static synchronized InetAddress[] getAllByName(String host)
   throws UnknownHostException;

   public static InetAddress getLocalHost()
   throws UnknownHostException;

   public boolean equals(Object obj);

   public String getHostName();

   public byte[] getAddress();

   public String toString();

   public int hashCode();

} // end InetAddress
</PRE>

<H4><A NAME="ch12_ 4">
Using Port Numbers
</A></H4>

<P>When your application makes a connection to a computer on a network using the
TCP/IP protocol, it does not just connect to the IP address but to something called a
port on that computer. This port is not a physical port, but a logical port specified by a 16-bit
number. The port number is part of the TCP protocol, and it uniquely identifies an
application service running on that computer (see fig. 12.3).
</P>

<P>Common applications such as FTP, Telnet, and Web services have standard values
for port numbers assigned to them. These standard ports are well known port
numbers. Typically, port numbers 0_1,024 are already assigned. So if you are building a
new application you should not reserve a port number in this range for your application.
</P>


<A NAME="PAGENUM-471"><P>Page 471</P></A>


<P><a href="images\ch12fg03.jpg"><img src="images\tn_ch12fg03.jpg"></a><BR>
Figure 12.3 <I>TCP port numbers.</I>
</P>


<H4><A NAME="ch12_ 5">
Understanding Sockets
</A></H4>

<P>When TCP/IP was implemented on BSD UNIX, a low-level programming mecha-
nism called sockets was created for writing programs to use the TCP/IP protocol.
The sockets mechanism was modeled after the file input/output mechanism. To create
a socket and connect to it, you use a set of system calls. After this point, you can use
the socket as if it were a file. You can read from the socket or write to the socket.
</P>

<P>In providing communication methods for accessing the TCP/IP protocol, the
Java designers used the TCP/IP sockets mechanism to begin. There are a set of Java
classes that model the sockets concept. These classes can be found in the java.net package
and include the Socket and ServerSocket classes.
</P>

<H3><A NAME="ch12_ 6">
Implementing Clients and Servers <BR>on the Network
</A></H3>

<P>A <I>server</I> is a process that runs on a computer and provides services that are used by
other processes, called <I>clients</I>, running on a computer. The server and client processes can
be running on the same computer or different computers on a network (see fig. 12.4).
</P>


<A NAME="PAGENUM-472"><P>Page 472</P></A>



<P>With JDK 1.1, several improvements were made to the java.net classes that
enable sockets (Socket/ServerSocket) to be nonfinal and extendible classes. The goal is
to enable extended sockets to be used wherever a base class Socket is used, without
the need to rewrite application code. The one caveat to the modifications is that
subclasses do not have direct access to the underlying SocketImpl in the bases classes.
</P>

<P>The following is a concise list of the changes made to the Socket and
ServerSocket classes:
</P>

<UL>
<LI> Remove the final modifier from the Socket and ServerSocket classes.

<LI> Reattach the final modifier to only those methods where it is needed to
avoid bypassing calls to the security manager.

<LI> Define a new method in ServerSocket with signature: protected final
void implAccept (Socket client) to use when initializing a newly accepted socket.

<LI> Expose a default Socket constructor so that Socket subclasses could initialize
their superclass without doing an actual connection in the superclass. This is
also required so that a ServerSocket subclass can return the correct Socket
subclass from accept().
</UL>

<P><a href="images\ch12fg04.jpg"><img src="images\tn_ch12fg04.jpg"></a><BR>
Figure 12.4 <I>Client/server processes.</I>
</P>

<P><CENTER>
<a href="..\ch11\0465-0466.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0473-0478.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

