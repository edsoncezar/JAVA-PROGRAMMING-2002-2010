<HTML>
<HEAD>


<TITLE>Inside Java:Using Java Objects and Arrays:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0146-0150.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0155-0158.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-151"><P>Page 151</P></A>



<P>variables are connected to the display device.
</P>

<P>The class FileOutputStream is used to write data to an arbitrary file. Suppose,
for example, that you wanted to write data to a file, you would first have to create
an instance of the class FileOutputStream:
</P>
<PRE>
FileOutputStream fos = new FileOutputStream(&quot;intdata.dat&quot;);
</PRE>

<P>The object fos is built by using the FileOutputStream constructor that accepts the
name of an external file to which data is to be output. Now that you have created an
instance of the class, the following instance methods of the class become available:
</P>
<PRE>
public void close()     // Close print stream
public void flush()     // Flush any buffered output to the file
public void write(int b) // Write an int value
public void write(int b[]) // Write an array of bytes
public void write(byte b[], int off, int len) // Write len bytes starting
         // at offset off in the byte array b.
</PRE>

<P>If, for example, you wanted to write a sequence of integer values to a file, you could
use the following:
</P>
<PRE>
for (int x = 0; x &lt; 100; x++)
{
fos.write(x);

} // end for
</PRE>

<P>Note that the values that are written to the file are not text representations of the
integer values, but binary representations. In the previous example, 100 integer values will
have been written to the file intdata.dat. You would, for example, not be able to display
the contents of this file by using a text editor or displaying the contents on the
console screen by using an operating system command such as
TYPE. To output the data in text format, you must use the PrintStream class.
</P>

<P>The instance of the class FileOutputStream can also be used to build a PrintStream
class, as shown in the following example:
</P>

<PRE>
FileOutputStream dfs = new FileOutputStream(&quot;application.log&quot;);

PrintStream logf = new PrintStream(dfs);

</PRE>

<A NAME="PAGENUM-152"><P>Page 152</P></A>



<PRE>
logf.println(&quot;This is application log data&quot;);
int x = 33;
logf.println(&quot;x = &quot;+x);
logf.close();
</PRE>

<P>The execution of the preceding lines of code will produce the following contents in
the file application.log:
</P>




<PRE>
This is application log data
x = 33
</PRE>

<P>Note that an instance of the PrintStream class requires that an instance of
the FileOutputStream class be constructed beforehand. After you have an instance of
the PrintStream class, such as logf in the previous example, you can use any of
the methods associated with the PrintStream class. Some of the methods of the
PrintStream class are the following:
</P>

<PRE>
public boolean checkError()     // Check for errors in print stream
public void close()     // Close print stream
public void flush()     // Flush any buffered output to the file
public void write(int b) // Write an int value
public void write(byte b[], int off, int len) // Write len bytes starting
         // at offset off in the byte array b.
public void print(Object obj) // Generic print for any object
public void println(Object obj) // Generic print for any object.
         // Terminate with a newline
// Now the other print functions
public void print(String s);
public void println(String s);
public void print(char s[]);
public void println(char s[]);
public void print(char c);
public void println(char c);
public void print(int x);
public void println(int x);
public void print(long l);
public void println(long l);
public void print(float f);
public void println(float f);
public void print(double d);
public void println(double d);
</PRE>


<A NAME="PAGENUM-153"><P>Page 153</P></A>


<PRE>
public void print(boolean b);
public void println(boolean b);
public void println();
</PRE>

<P>Consider the example in listing 5.4, where you want to redirect the output of
calls through System.out to a file instead of the display device. Figure 5.12 shows the
default redirection of the System.in, System.out, and System.err variables, and figure 5.13
shows how they are redirected in the program in listing 5.4. This program is in the file
IoUse.java on the CD-ROM that accompanies this book.
</P>

<P>Line 8 in listing 5.4 imports the classes in the package java.io. Line 13 specifies that
the IOException could be thrown. This exception needs to be specified because it could
be thrown on line 16 when new FileOutputStream() is invoked to build the PrintStream
object. Line 16 is interesting because it shows a constructor call within the constructor call.
The call to the constructor FileOutputStream() returns an object of type
FileOutputStream, which is then passed to the constructor PrintStream.
</P>

<P>Line 18 saves the default value of System.out in the variable oldstream. Line 20 prints
a message to the console. In line 23, the System.out variable is redirected to the
print stream constructed on line 16. This print stream is connected to the file applic.log.
Any output done through System.out is redirected to the file applic.log until line 32. On
line
</P>

<P><a href="images\ch05fg12.jpg"><img src="images\tn_ch05fg12.jpg"></a><BR>
Figure 5.12
<I>Default redirection of IO streams.</I>
</P>


<P><a href="images\ch05fg13.jpg"><img src="images\tn_ch05fg13.jpg"></a><BR>
Figure 5.13
<I>Modified redirection of IO streams.</I>
</P>


<A NAME="PAGENUM-154"><P>Page 154</P></A>



<P>32, the default redirection is restored. Any output done through System.out after line
32, appears on the console.
</P>

<P>The program in listing 5.4 is contained in the file IoUse.java and is featured on the
CD-ROM that accompanies this book. Figure 5.14 shows the result of running this
program. This figure also displays the contents of the file applic.log. Note that the lines appear
to be skewed because the lines are terminated by a newline (ASCII code 10) character,
and the end-of-line convention for DOS/Windows system is an extra carriage return
along with the line feed character. In the absence of the carriage return, the lines will appear
to be skewed.
</P>

<P>Listing 5.4
</P>
<PRE>
Line==================Java Source=================
01 /**
02  * IoUse: This is used to demonstrate the use
03  * of IO redirection.
04  *
05  * Author: Karanjit S. G. S. Siyan
06  *
07  */
08 import java.io.*;
09 class IoUse
10 {
11
12     public static void main(String args[])
13         throws IOException
14     {
15
16         PrintStream pos = new PrintStream(new
&Acirc;FileOutputStream(&quot;applic.log&quot;));
17
18         PrintStream oldstream = System.out;
19
20         System.out.println(&quot;Message 1 appears on console&quot;);
21
22         // Redirection takes place here
23         System.out = pos;
24
25         System.out.println(&quot;Message 2 appears in file&quot;);
26
</PRE>


<P><CENTER>
<a href="0146-0150.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0155-0158.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

