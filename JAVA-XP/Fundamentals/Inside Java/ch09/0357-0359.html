<HTML>
<HEAD>


<TITLE>Inside Java:Animating Applets with Java Graphics, Images, Colors, and Sound:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0353-0356.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0360-0366.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-357"><P>Page 357</P></A>



<P>104 in listing 9.5) are used for defining the size of the applet and determining the point
in the applet at which the line will be rotated. Line 106 creates the line that will be
rotated within the applet. Note that the parameters passed to it are the center of the applet.
Line 109 defines the thread, paintThread, which will be used to paint the applet. Lines
111_126 define an array of colors that can be used to draw the line. This array is used in
the private method getColor() that is defined on lines 184_197. The method
getColor() returns a random color from the array of colors,
ac.
</P>

<P>When the applet is initially started, the method
init() on lines 167 and 179 is run, just once. This method calls the superclass Applet's
int() method to perform any initialization for the superclass. Currently, the class Applet's
init() method is empty, but it is always a good idea to call this method in case it is no longer empty in future Java releases.
Line 171 resizes the applet by calling the
resize() method for the applet. Lines 173_177 add
a label of text in the applet. When adding objects to a paint area such as an applet,
you must set the layout manager to be used (see line 173 in listing 9.5). The layout manager
is a Java class that is used to determine how the areas of a screen will be sectioned
and how components added to the display screen will be placed. To define, for example,
a flow layout in which the components will be added to the screen one at a time in a
row, you would use the following:
</P>

<PRE>
this.setLayout ( new FlowLayout());
</PRE>

<P>Note that new FlowLayout() is used to build an instance of the class FlowLayout. When
the constructor is passed with no arguments, the components that are added are
centered, and when a row gets full, the next row is automatically used. To create a layout where
the alignment is to the left or right, instead of being centered, you would use the following:
</P>

<PRE>
this.setLayout ( new FlowLayout(FlowLayout.LEFT));
this.setLayout ( new FlowLayout(FlowLayout.RIGHT));
</PRE>

<P>The Grid layout (class GridLayout) that divides the screen area into rows and
columns, and each component that you add, is added to a cell within this grid. To create a grid
that is 4 cells by 4 cells, for example, you would use the following:
</P>

<PRE>
this.setLayout(new GridLayout(4, 4));
</PRE>

<P>If you want a 5-pixel horizontal gap and a 10-pixel vertical gap between these cells,
you would use the following:
</P>

<PRE>
this.setLayout(new GridLayout(4,4,5,10));
</PRE>

<P>The Border layout indicates where a component will be placed in terms of
geographical directions of north, south, east, west, and center:
</P>

<PRE>
this.setLayout(new BorderLayout());
</PRE>

<A NAME="PAGENUM-358"><P>Page 358</P></A>

<P>The components are added by using a special
add() method in which the first argument is the geographic direction at which the component must be placed.<BR>
To add a label to the north and south of the display area, for example, you would use
the following:
</P>

<PRE>
add(&quot;North&quot;, new Label(&quot;top label&quot;));
add(&quot;South&quot;, new Label(&quot;bottom label&quot;));
</PRE>

<P>The card layout (class CardLayout) is used to add components to the screen that are
not displayed at once. You select one of these components for display at any time. If
you select the components in succession, you have a slide show effect with each frame
of the slide being the selected component. The components that are added are
other container components, such as the Panel class objects. Each of these individual
components could use a different layout scheme. Here is an example of using a card layout:
</P>

<PRE>
setLayout(new CardLayout());
Panel slide1 = new Panel();
Panel slide2 = new Panel();
Panel slide3 = new Panel();
Panel slide4 = new Panel();
add(&quot;slide 1&quot;, slide1);
add(&quot;slide 2&quot;, slide2);
add(&quot;slide 3&quot;, slide3);
add(&quot;slide 4&quot;, slide4);
show(this, &quot;slide 2&quot;);     // Show slide 2
show(this, &quot;slide 4&quot;);       // and then slide 4.
</PRE>

<P>Coming back to the example in listing 9.5, you will see that there is no layout
manager being used as you are just adding a single object. So the argument to
setLayout() is null.
</P>

<P>Line 176 adds the label to the applet area, and line 177 positions the label at the
point &lt;1,1&gt; and at a width of 100 and a height of 15 pixels.
</P>

<P>After the init() method is called, the start() method is called (see lines 130_140). In
this method a check is made to see if the thread has been instantiated by checking if
the thread reference, paintThread, is null. If the thread reference is null, it means that the
thread does not exist, in which case, a new thread is created with an argument, which is
the instance of this applet:
</P>

<PRE>
paintThread = new Thread(this);
</PRE>

<P>The instance of the applet class that you are defining is referenced by
this. Next, line 135 starts the thread.
</P>

<A NAME="PAGENUM-359"><P>Page 359</P></A>



<P>The corresponding stop() method (see lines 143_151) will get called if the user leaves
the Web page on which the applet is running. This method checks to see if the
thread reference is null. If it is null, the thread exists, and it is terminated by calling the
thread's stop() method (line 147). After termination, line 148 sets the thread reference to null,
thus making it available for garbage collection. If the user revisits the page on which
the applet is created, the Web browser will call the
start() method of the applet, and this will create a new thread.
</P>

<P>The main logic of the thread is in the run() method (lines 154_164). This method is
called soon after the thread is started in line 135. The run method sets up an infinite loop
(see line 157 in listing 9.5). Within the loop, the method
repaint() is called, and then the thread sleeps for 50 milliseconds, after which the actions in the loop are repeated.
</P>

<P>The repaint() method is inherited from the Component class. When it is called, it results in
a call to the paint() method for the applet. The
paint() method is defined on lines 200_216. Lines 204_206 paint a light gray line to erase any previous line. Next, line 209 rotates
the line. Line 212 sets a random color for the new line to be drawn. Lines 213 and 214
draw the new rotated line.
</P>

<P>Listing 9.5
</P>

<PRE>
Line==================Java Source=================
001   /**
002   * LineDraw: Demonstrates how a thread can be
003   * used to animate a line.
004   *
005   * Author: Karanjit S. G. S. Siyan
006   *
007   */
008   import java.awt.*;
009   import java.applet.Applet;
010
011   class Angle
012      {
013
014      // Normalizes an angle and ensures that
015      // it is between 0 and 360 degrees.
016      public static int normalize(int degrees)
017      {
018
019         while (degrees &lt; 360)
020         {
</PRE>
<PRE>
                                                       <I>continues</I>
</PRE>


<P><CENTER>
<a href="0353-0356.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0360-0366.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

