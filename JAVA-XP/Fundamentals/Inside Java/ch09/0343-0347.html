<HTML>
<HEAD>


<TITLE>Inside Java:Animating Applets with Java Graphics, Images, Colors, and Sound:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0338-0342.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0348-0352.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-343"><P>Page 343</P></A>



<P>strictly possible. The threads share the same processor. At any time only one thread
is running, but when the thread has executed for a time period it is suspended, and
another thread is run. The thread scheduling algorithm that is used to schedule the threads
to run on the processor is different for different operating systems and run-time
environments such as the Java environment.
</P>

<P>In applet animation, threads are typically assigned specific tasks, such as painting
a specific area of the applet.
</P>

<H4><A NAME="ch09_ 17">
Creating Threads
</A></H4>

<P>There are two ways of using threads in Java. One way is to create a subclass of
a predefined Java class called Thread, and the other way is to use the Java
Runnable interface.
</P>

<P>You will first examine thread creation by creating a subclass of the Thread class.
The Thread class is in the package java.lang. When you extend the class, you inherit
a number of thread methods such as run(), start(), and
stop():
</P>

<PRE>
class MyThreadClass extends Thread
{

      // Method run() inherited

      // Method start() inherited

      // Method stop() inherited but
      // is a final method so you
      // cannot override ***Insert Table

      // Other Thread methods inherited.


} // end MyThreadClass
</PRE>

<P>To create a thread, you must first instantiate your extended class:
</P>

<PRE>
MyThreadClass thd;
</PRE>

<P>Next, you must invoke the start() method for the instantiated class:
</P>

<PRE>
thd.start();
</PRE>


<A NAME="PAGENUM-344"><P>Page 344</P></A>



<P>The preceding statement calls the start() method inherited from the Thread class.
This results in a call to the run() method. The
run() method, however, is also inherited, and therefore will not execute any code in your MyThreadClass. So for your class to
perform anything useful, you must override the
run() method and execute the logic that you want the thread to execute within the run method. Consider, therefore, the following
modified version of the MyThreadClass program in listing 9.3. This program computes a series
of numbers according to the algorithm in the method
run().
</P>

<P>Lines 13 and 14 define private class variable instances to store the start of the
series. Lines 18_23 define the constructor for the class that stores the start value of the series
in instance variables ax2 and ax1.
</P>

<P>Lines 26_44 defines the run() method that gets called when the thread is started. The
run method declares that it could throw an InterruptedException (see line 27 in listing
9.3). This is because the class Thread method
sleep() is called on line 40 to delay the loop by 2000 milliseconds (2 seconds); otherwise, the output of the for loop flashes by you
too rapidly.
</P>

<P>The run() method computes the value of the next term in the series as the sum of
the previous two values. For a start value of 1 and 1, this produces an arithmetic series
called the Fibonacci series. Notice that an infinite loop is set up in
the run() method. This is typical for most threads. When the
run() method terminates, that thread ends, and, in
due course, it will be terminated by the Java runtime environment.
</P>

<P>On lines 50 and 51 of listing 9.3 in the main() method, two thread objects are
created. These threads are started on lines 53 and 54. The first thread produces a positive
number series, and the second thread produces a negative number series. Figure 9.15 shows
the output of the two threads. Notice that the output shows that the positive and
negative numbers occur consecutively, thus indicating that the two threads run one after another.
</P>

<P>
<a href="images\ch09fg15.jpg"><img src="images\tn_ch09fg15.jpg"></a><BR>
Figure 9.15 <I>Output of MyThreadClass.</I>
</P>

<A NAME="PAGENUM-345"><P>Page 345</P></A>



<P>Listing 9.3
</P>
<PRE>
Line==================Java Source=================
01 /**
02  * MyThreadClass: Demonstrates creation of
03  * threads by subclassing Thread
04  *
05  * Author: Karanjit S. G. S. Siyan
06  *
07  */
08
09 class MyThreadClass extends Thread
10 {
11  // Method start() inherited
12
13  private int ax2; // First term in series.
14  private int ax1; // Second term in series.
15
16  // Constructor for class to initialize
17  // start of series.
18       public MyThreadClass(int ax2, int ax1)
19       {
20  this.ax2 = ax2;
21  this.ax1 = ax1;
22
23       } // end MyThreadClass
24
25       // Overrides run() in Thread
26  public void run()
27  throws InterruptedException
28       {
29  // Loop forever!
30           for(;;)
31           {
32            int ax;
33
34            ax = ax1 + ax2;
35            System.out.println(ax);
36
</PRE>
<PRE>
                                                       <I>continues</I>
</PRE>

<A NAME="PAGENUM-346"><P>Page 346</P></A>



<P>Listing 9.3, Continued
</P>

<PRE>
37  // Get ready for the next iteration,
38            ax2 = ax1;
39            ax1 = ax;
40  sleep(2000);  // Sleep for 2 seconds
41
42           } // end for
43
44      } // end run
45
46  // main entry point
47  public static void main(String[] args)
48  {
49
50  MyThreadClass thd1 = new MyThreadClass(1,1);
51  MyThreadClass thd2 = new MyThreadClass(_1,_1);
52
53  thd1.start();  // Fibonacci series
54  thd2.start();  // Negative Fibonacci series
55
56  }  // end main
57
58 } // end MyThreadClass
</PRE>

<H4><A NAME="ch09_ 18">
Implementing Threads Using the Runnable Interface
</A></H4>

<P>What if you wanted to create threads within an applet? Can you extend the applet
from the Thread class as discussed in the previous example? The answer is no. To
understand why, consider the inheritance diagram in figure 9.16. This figure shows that you need
to inherit the applet from the Applet class, but if you try to inherit from the Thread
class also, you have a situation of multiple inheritance. For the sake of simplicity, the
Java
</P>


<A NAME="PAGENUM-347"><P>Page 347</P></A>




<P>
<a href="images\ch09fg16.jpg"><img src="images\tn_ch09fg16.jpg"></a><BR>
Figure 9.16 <I>Problem of creating an applet by subclassing Thread.</I>
</P>

<P>language does not support multiple inheritance. This means that you cannot
simultaneously inherit from two classes.
</P>

<P>To implement threads in an applet, you can use the Runnable interface. The
Runnable interface has the following form:
</P>

<PRE>
public abstract interface Runnable
{
 //
  // The method that is executed when a
  // Runnable object is activated.
  // The run() method is the main
  // component of a Thread. It is in
  // this method that all the action
  // of a Thread takes place.
public abstract void run();

} // end Runnable
</PRE>

<P>If an applet needs to implement threads, it needs to implement the Runnable
interface.
</P>

<P><CENTER>
<a href="0338-0342.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0348-0352.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

