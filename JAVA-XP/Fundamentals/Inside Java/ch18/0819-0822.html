<HTML>
<HEAD>


<TITLE>Inside Java:Servlets and the Java Web Server:EarthWeb Inc.-</TITLE>






<P><CENTER>
<a href="0815-0818.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0823-0827.html">Next</A>
</CENTER></P>

<A NAME="PAGENUM-819"><P>Page 819</P></A>





<P>The Servlet API is defined by the classes in the java.servlet and
java.servlet.http packages. A utility package to assist in dynamically generating HTML,
java.servlet.html, is also provided. Figure 18.1 shows the java.servlet.* packages, classes, and
their relationships. Together, these packages specify the following:
</P>

<UL>
<LI>          The generic behavior of servlets independent from the Web transport protocol
<LI>          Additional facilities available to HTTP-specific servlets
<LI>          Support for programmatic creation of HTML pages as a hierarchical structure
of HTML elements
</UL>

<P>The following sections cover the methods that comprise the Servlet API.
Developers may have access to additional vendor-specific classes and servlets that are
proprietary </P>


<P>
<a href="images\ch18fg01.jpg"><img src="images\tn_ch18fg01.jpg"></a><BR>
Figure 18.1 <i>The Servlet API classes.</i>
</P>


<P>to a given server. Any such extensions would be covered by server-specific
documentation.
</P>
<A NAME="PAGENUM-820"><P>Page 820</P></A>



<H4><A NAME="ch18_ 7">
The java.servlet Package
</A></H4>

<P>The java.servlet package defines the operation of servlets from a
protocol-independent perspective. At this level, the protocol used to access the servlets could be HTTP,
a network file system protocol, or another transport protocol. Servlets designed to
operate as a Java Web Server server-side-include use the classes in this package. The
four interfaces and three implementation classes in this package are described in more
detail in the following sections.
</P>

<P><B>Methods of the Servlet Interface</B>
</P>

<P>Servlet is the highest level, generic interface class. It defines four basic methods
that accomplish the following: initialize the servlet, destroy the servlet, service a request,
and return an information string. You override the
init() method if your servlet needs to perform any initialization after it is loaded. You access the initialization
parameters specified for your servlet by calling
getInitParameter() or getInitParameters(). For the Java
Web Server, these parameters are stored in the servlet.properties file and can be changed
by using the server administration servlet.</P>
<P>

<CENTER>
<TABLE BGCOLOR="#FFFF99">
<TR><TD><B>
NOTE
</B></TD></TR>
<TR><TD>
<BLOCKQUOTE>
The names of configuration-related files are those used by the Java Web Server;
other servers may use different file names. You should always use the defined interfaces
and not attempt to directly access the configuration files.
</BLOCKQUOTE></TD></TR>
</TABLE></CENTER>
</P>
<P>The actual servlet work is performed in the
service() method. You must code your service() method in a thread-safe manner because concurrent requests for the same servlet
result in multiple threads executing your
service() method. The easiest way to be thread-safe is
to not modify any object instance variables and only to use parameters of the
service() call. Alternatively, you can add the
Synchronized modifier to your declaration of
service() to restrict access to one thread at a time. Table 18.3 lists the Servlet interface methods.
</P>

<P><B>Table 18.3</B>
<BR>
Methods of the Servlet Interface
</P>

<TABLE>

<TR><TD>
Method
</TD><TD>
Description
</TD></TR><TR><TD>
void init(ServletStub)
</TD><TD>
Initialize a servlet.
</TD></TR><TR><TD>
void destroy()
</TD><TD>
Free allocated resources when the 
servlet class is unloaded.
</TD></TR><TR><TD>
void service(ServletRequest,
ServletResponse)
</TD><TD>
Process the incoming request and
create the outgoing response.
</TD></TR></TABLE>



<A NAME="PAGENUM-821"><P>Page 821</P></A>


<TABLE>

<TR><TD>
Method
</TD><TD>
Description
</TD></TR><TR><TD>
String getServletInfo()
servlet.
</TD><TD>
Return an information string that
describes the
</TD></TR></TABLE>

<P>A subclass of Servlet uses a ServletContext object, described in the following section,
to obtain information about the server's environment and to call various server
utility routines.
</P>

<P><B>Methods of the ServletContext Interface</B>
</P>

<P>The ServletContext interface defines methods that the servlet can use to interact with
its operating environment. The relationship between a Servlet and the methods of
the ServletContext is similar to the one between an Applet and an AppletContext.
The facilities provided to a servlet are currently limited to getting MIME types,
translating path names, finding other servlets, and logging information. These methods are listed
in table 18.4.
</P>

<P><B>Table 18.4</B><BR>
Methods of the ServletContext Interface
</P>

<TABLE>

<TR><TD>
Method .
</TD><TD>
Description
</TD></TR><TR><TD>
String getMimeType(String)
</TD><TD>
Returns the MIME type of the specified file by <BR>matching the file name suffix against entries in
the mime.properties file.
</TD></TR><TR><TD>
String getRealPath(String)
</TD><TD>
Applies the alias rules in the alias.properties file to the
specified virtual path and returns the corresponding
real path; null is returned if the translation fails.
</TD></TR><TR><TD>
String getServerInfo()
</TD><TD>
Returns a string identifying the name, version, and
platform of the server software.
</TD></TR><TR><TD>
Servlet getServlet(String)
</TD><TD>
Returns a servlet of the given name.
</TD></TR><TR><TD>
Enumeration getServlets()
</TD><TD>
Returns an enumeration of all the servlets currently
loaded in the server. This enumeration includes      the calling servlet.
</TD></TR><TR><TD>
void log(Servlet, String)
</TD><TD>
Writes a message to the servlet log for a given servlet.
</TD></TR></TABLE>


<P><B>Methods of the ServletRequest Interface</B></P>

<A NAME="PAGENUM-822"><P>Page 822</P></A>



<P>The ServletRequest interface class defines methods used to obtain information about
the servlet request independent of the actual transport protocol used between the client
and the server. The request must be carried by an Internet transport protocol, such as HTTP.
</P>

<P>The request can include parameters or content information. The servlet can
determine the length of any content sent with the request by using
getContentLength(). The servlet can also obtain the content encoding type by using
getContentType(). When content is available, the servlet can read it using a HttpInputStream obtained from
getInputStream(). Table 18.5 lists the methods available in the ServletRequest interface.
</P>

<P><B>Table 18.5</B><BR>
Methods of the ServletRequest Interface
</P>

<TABLE>

<TR><TD>
Method
</TD><TD>
Description
</TD></TR><TR><TD>
String getRemoteAddr()
</TD><TD>
Returns the IP address of the client that sent the request.
</TD></TR><TR><TD>
String getRemoteHost()
</TD><TD>
Returns the fully qualified hostname of the agent that
sent the request.
</TD></TR><TR><TD>
String getServerName()
</TD><TD>
Returns the hostname of the server that received the request.
</TD></TR><TR><TD>
int getServerPort()
</TD><TD>
Returns the port number on which this request was received.
</TD></TR><TR><TD>
String getProtocol()
</TD><TD>
Returns a string identifying the protocol and version.
</TD></TR><TR><TD>
String getParameter(String)
</TD><TD>
Returns the value of the specified parameter for the request.
</TD></TR><TR><TD>
Hashtable getParameters()
</TD><TD>
Returns a hashtable of all the parameters of this request.
</TD></TR><TR><TD>
String getContentType()
</TD><TD>
Returns the MIME type of any data included with
the request, or null if the MIME type is not specified in
the request header.
</TD></TR><TR><TD>
int getContentLength()
</TD><TD>
Returns the size of the data included with the request, or
_1 if a length is not specified in the request header.
</TD></TR><TR><TD>
ServletInputStream
getInputStream()
</TD><TD>
Returns an input stream for reading any data 
included with the request.
</TD></TR></TABLE>

<P><B>Methods of the ServletResponse Interface</B></P>

<P><CENTER>
<a href="0815-0818.html">Previous</A> | <a href="..\ewtoc.html">Table of Contents</A> | <a href="0823-0827.html">Next</A>
</CENTER></P>







</BODY>
</HTML>

