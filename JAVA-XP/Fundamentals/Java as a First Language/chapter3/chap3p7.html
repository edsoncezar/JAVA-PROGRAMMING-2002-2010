<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>3.7 The implementation of the LimitedCounter class</title>

</head>

<body BGCOLOR="WHITE">

<h1>3.7 The implementation of the <i>LimitedCounter</i> class
<br>
</h1>

<p>
The first part of the implementation, as far as the end of the
constructors, might be as follows. <br>

<pre>
0001 // Filename <i>Counters/LimitedCounter</i>.java.
0002 // First extension of the <i>Counters</i> hierarchy defining 
0003 // limits upon the range of values which can be counted. 
0004 //
0005 // Written for JFL book Chapter 3.
0006 // Fintan Culwin, v0.1, January 1997.
0007 
0008 <b>package</b> <i>Counters</i>;
0009 
0010 <b>abstract class</b> <i>LimitedCounter</i> <b>extends</b> <i>BasicCounter</i> { 
0011 
0012 <b>static private final int</b> <i>DEFAULTMINIMUM</i> = 0;
0013 <b>static private final int</b> <i>DEFAULTMAXIMUM</i> = 999;
0014 
0015 <b>private int</b> <i>miniumumCount</i>;  
0016 <b>private int</b> <i>maximumCount</i>;  
0017 
0018 
0019    //  The principal Constructor.
0020    <b>protected</b> <i>LimitedCounter</i>( <b>int</b> <i>minToCount</i>, <b>int</b> <i>maxToCount</i>){ 
0021        <b>super</b>( <i>minToCount</i>);
0022        <i>miniumumCount</i> = <i>minToCount</i>;
0023        <i>maximumCount</i>  = <i>maxToCount</i>;
0024    }  // End principal Constructor.
0025    
0026    // Default Constructor.
0027    <b>protected </b><i>LimitedCounter</i>(){
0028       <b>this</b>( <i>DEFAULTMINIMUM</i>, <i>DEFAULTMAXIMUM</i>);
0029    }  // End Default Constructor.<br>
</pre>

<p>
Following the header comments; line 0008 indicates that this class
is a member of the <i><font FACE="Arial">Counters</font></i>
package of classes, and line 0010 that this file contains an extension
of the <i><font FACE="Arial">BasicCounter</font></i> class
called <i><font FACE="Arial">LimitedCounter</font></i>.
As an extension of the <i><font FACE="Arial">BasicCounter</font></i>
class this class has access to all the <b>public</b> and <b>protected</b>
resources of that class. However it has no direct access to the
<b>private</b> resources of its parent class. <br>

<p>
Lines 0012 and 0013 declare the two class variables <i><font FACE="Arial">DEFAULTMINIMUM</font></i>
and <i><font FACE="Arial">DEFAULTMAXIMUM</font></i>. The
modifier <b>static</b> indicates that they are class variables,
the modifier <b>private</b> hides them entirely within this class,
<b>final</b> indicates that they have a value that cannot ever
be changed and <b>int</b> that they can store a simple integer
value. As they are declared as <b>final</b> it is essential that
a value is assigned to them as they are declared, and once assigned
this value can never be changed. <br>

<p>
Lines 0015 and 0016 declare the two instance variables <i><font FACE="Arial">minimumCount</font></i>
and <i><font FACE="Arial">maximumCount</font></i> in a
manner which is directly comparable to the declaration of the
instance variable <i><font FACE="Arial">counted</font></i>
in the <i><font FACE="Arial">BasicCounter</font></i> class
above. An instance of the <i><font FACE="Arial">LimitedCounter</font></i>
class will contain its own <i><font FACE="Arial">counted</font></i>,
<i><font FACE="Arial">minimumCount</font> </i>and <i><font FACE="Arial">maximumCount</font></i>
data attributes. However as the <i><font FACE="Arial">counted</font></i>
variable is <b>private</b> to the <i><font FACE="Arial">BasicCounter</font></i>
class it can only be accessed from the implementation of this
class via the <b>public</b> and <b>protected</b> actions of the
<i><font FACE="Arial">BasicCounter</font></i> class.<br>

<p>
The principal constructor is defined on lines 0021 to 0025; it
takes two arguments <i><font FACE="Arial">minToCount</font></i>
which defined the lower limit of the range which it will count
and <i><font FACE="Arial">maxToCount</font></i> which defines
the upper limit. Its first action is to call the principal constructor
of its parent class, passing the <i><font FACE="Arial">minToCount</font></i>
value as the argument. In order to access the constructor of its
parent the <b>super</b> keyword is used. Just as the <b>this</b>
keyword always indicates the current instance which is being declared,
the <b>super</b> keyword indicates the instance of the parent
class which is a component part of the current extended instance.
<br>

<p>
Having called the <i><font FACE="Arial">BasicCounter</font></i>
constructor it then completes the initialisation of the <i><font FACE="Arial">LimitedCounter</font></i>
instance by storing the value of its <i><font FACE="Arial">minToCount</font></i>
argument in the <i><font FACE="Arial">minimumCount</font></i>
instance variable and the <i><font FACE="Arial">maxToCount</font></i>
argument in the <i><font FACE="Arial">maximumCount</font></i>
instance variable. The default constructor takes no arguments
and is implemented as a call of the principal constructor passing
the values of the class variables <i><font FACE="Arial">DEFAULTMINIMIUM</font></i>
and <i><font FACE="Arial">DEFAULTMAXIMUM</font></i> as
the arguments. The effect is to construct an instance which will
count between the values of the class variables, 0 and 999.<br>

<p>
The implementation of the two <b><font FACE="Arial">boolean</font></b>
enquiry actions is as follows:<br>

<pre>
0032    <b>protected boolean</b> <i>isAtMinimum</i>() { 
0033       <b>return</b>  <b>this</b>.<i>numberCountedIs()</i> == <i>miniumumCount</i>;
0034    } // End <i>isAtMinimum</i>.
0035 
0036    <b>protected boolean</b> <i>isAtMaximum</i>() { 
0037       <b>return</b>  <b>this</b>.<i>numberCountedIs</i>() == <i>maximumCount</i>;
0038    } // End <i>isAtMaximum</i>.<br>
</pre>

<p>
The implementation of the <i><font FACE="Arial">isAtMinimum()</font></i>
action on line 0033 uses the <i><font FACE="Arial">BasicCounter</font></i>
<i><font FACE="Arial">numberCountedIs()</font></i> action
to determine the number of occurrences counted. It is not possible
for this implementation to access the value of the instance variable
<i><font FACE="Arial">counted</font></i> directly as it
is totally <b>private</b> to the <i><font FACE="Arial">BasicCounter</font></i>
class. As an instance of the <i><font FACE="Arial">LimitedCounter</font></i>
class <u><i><b>is a</b></i></u>n extended instance of the <i><font FACE="Arial">BasicCounter</font></i>
class it can access the <i><font FACE="Arial">numberCountedIs()</font></i>
action using <b>this</b> rather than <b>super</b>. The value obtained
from the <i><font FACE="Arial">numberCountedIs()</font></i>
action is compared with the value of the <i><font FACE="Arial">minimumCount</font></i>
instance variable using the <i>is&nbsp;equal&nbsp;to</i> operator
(&nbsp;==&nbsp;). This comparison can only be <b>true</b> or <b>false</b>;
if the number of occurrences counted is equal to the limit of
the range then the comparison will be <b>true</b> and <b>false</b>
in all other cases. The value of this comparison is <b>return</b>ed
as the value of the action. Objects of type <b><font FACE="Arial">boolean</font></b>
can only have the value <b><font FACE="Arial">true</font></b>
or <b><font FACE="Arial">false</font></b>, as will be fully
explained in the following chapters.<br>

<p>
The <i><font FACE="Arial">isAtMaximum()</font></i> action
is implemented in an almost identical manner. The implementation
of the two enquiry actions, <i><font FACE="Arial">minimumIs()</font></i>
and <i><font FACE="Arial">maximumIs(), </font></i>is as
follows. <br>

<pre>
0041    <b>protected int</b> <i>minimumIs</i>() { 
0042       <b>return</b> <i>miniumumCount</i>;
0043    } // End <i>minimumIs</i> .
0044 
0045    <b>protected int</b> <i>maximumIs</i>() { 
0046       <b>return</b> <i>maximumCount</i>;
0047    } // End <i>maximumIs</i>.
0048
0049 } End class <i>LimitedCounter</i>.<br>
</pre>

<p>
These actions are implemented in a similar manner to the <i><font FACE="Arial">BasicCounter</font></i>
<i><font FACE="Arial">numberCountedIs()</font></i> actions,
returning the value of the totally <b>private</b> instance variables
to the client. <br>

<p>
A visualisation of the implementation of this class is given in
Figure 3.5. <br>

<p>
<center><img SRC="img00002.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter3/IMG00002.GIF" WIDTH="518" HEIGHT="458"></center>
<p>
<center>Figure 3.5 An illustration of the <i>LimitedCounter</i>
class.<br>
</center>
<p>
This diagram shows both constructors and only the <i><font FACE="Arial">minimumIs()</font></i>
and <i><font FACE="Arial">isAtMinimum()</font></i> actions.
The <i><font FACE="Arial">maximumIs()</font></i> and <i><font FACE="Arial">isAtMaximum()</font></i>
actions are essentially identical and have been omitted for the
sake of clarity.<br>

<p>
The dashed lines in this diagram indicate that an action in the
same class is being used. For example the default constructor
at the top left of the diagram calls the principal constructor,
passing the values of the class variables <i><font FACE="Arial">DEFAULTMINIMUM</font></i>
and <i><font FACE="Arial">DEFAULTMAXIMUM</font></i> as
arguments. <br>

<p>
A dotted box within the diagram indicate a call of an action supplied
by the <i><font FACE="Arial">BasicCounter</font></i> class.
For example the <i><font FACE="Arial">isAtMinimum()</font></i>
action makes use of the <i><font FACE="Arial">numberCounterIs()</font></i>
action. <br>
<br>


<p>
<hr>
<h2>
<ul>
<a HREF="limitedcounter.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter3/LimitedCounter.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>LimitedCounter</i> class source code</a>.
<p>
<a HREF="chap3p8.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter3/chap3p8.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
3.8 Demonstrating the <i>LimitedCounter</i> class</a>.
<p>
<a HREF="chap3p6.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter3/chap3p6.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
3.6 The design of the <i>LimitedCounter</i> class</a>.
</ul>
</h2>
<hr>
</body>

</html>
&#26;