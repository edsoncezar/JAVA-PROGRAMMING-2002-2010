<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPad 2.0">
<title> 6.9 The HelpDialog class </title>
</head>

<body bgcolor="#FFFFFF">

<h1 align="center">6.9 The <font size="5" face="Arial"><i>HelpDialog</i></font><font
size="6"> class </font></h1>

<p>The <font size="2" face="Arial"><i>HelpDialog</i></font> class
has a somewhat similar overall pattern to the other two dialogs
but uses the remaining layout manager, the <font size="2"
face="Arial"><i>CardLayout</i></font> class, to allow the various
help panels to be displayed. The appearance of the <font size="2"
face="Arial"><i>helpDialog</i></font> for this applet is shown in
Figure 6.9.</p>

<p align="center"><img src="fig69a.gif" width="432" height="321">
<img src="fig69b.gif" width="432" height="321"></p>

<p align="center"><b>Figure 6.9</b> The <font face="Arial"><i>helpDialog</i></font>,
showing help for the <i>File</i> and <i>Move</i> menus.</p>

<p>The dialog consists of a set of radio buttons at the top, a <font
size="2" face="Arial"><i>dismiss</i></font> button at the bottom
and an area for the help messages to be displayed in the middle.
When a radio button is pressed the help message in the middle
will change, as indicated in the illustration. The middle part of
the dialog, providing the help messages, is implemented using a <font
size="2" face="Arial">CardLayout</font> manager. A <font size="2"
face="Arial">CardLayout</font> manager supports a sequence of
components, any of which can be selected for display by using the
methods supplied by the manager. The declaration and instance
attributes of the <font size="2" face="Arial"><i>MenuBarTuttleHelpDialog</i></font>
class is as follows. </p>

<p align="center"><img src="fig610.gif" width="631" height="459"></p>

<p align="center"><font size="3"><b>Figure 6.10</b> </font><font
size="2" face="Arial"><i>MenubarTuttleHelpDialog</i>, Component</font><font
size="3">s and layout control.</font></p>

<p>The <font size="2" face="Arial">Component</font>s required,
and the layout management, of the <font size="2" face="Arial"><i>MenuBarTuttleHelpDialog</i></font>
are illustrated in Figure 6.10. The <font size="2" face="Arial">Dialog</font>
itself has a default <font size="2" face="Arial">BorderLayout</font>;
with a <font size="2" face="Arial"><i>helpControl</i> Panel</font>
in its &quot;<i>North</i>&quot; location, a <font size="2"
face="Arial"><i>helpPanel</i></font> in its &quot;<i>Center</i>&quot;
location and a <font size="2" face="Arial"><i>buttonPanel</i></font>
in its &quot;<i>South</i>&quot; location. The <font size="2"
face="Arial"><i>helpControl</i> Panel</font> has a <font size="2"
face="Arial">FlowLayout</font> and contains five <font size="2"
face="Arial"><i>CheckBox</i></font> instances, the <font size="2"
face="Arial"><i>buttonPanel</i></font> also has a <font size="2"
face="Arial">FlowLayout</font> and contains a single <font
size="2" face="Arial">Button</font> instance called <font
size="2" face="Arial"><i>dismiss</i></font>. The <font size="2"
face="Arial"><i>helpPanel</i></font> has a <font size="2"
face="Arial">CardLayout</font> and contains five <font size="2"
face="Arial"><i>MessageCanvas</i></font> instances, only one of
which will ever be visible at any instant. These <font size="2"
face="Arial">Component</font>s are declared as instance
attributes of the class, in the header of its declaration, as
follows. </p>

<pre><font size="3">0018  <b>class</b> <i>MenuBarTuttleHelpDialog</i> <b>extends</b>    Dialog 
0019                                <b>implements</b> ActionListener, 
0020                                           ItemListener    { 
0021  
0022  <b>private static final</b> String <i>FILE</i>   = &quot;File&quot;;
0023  <b>private static final</b> String <i>MOVE</i>   = &quot;Move&quot;;
0024  <b>private static final</b> String <i>TURN</i>   = &quot;Turn&quot;;
0025  <b>private static final</b> String <i>COLOR</i>  = &quot;Color&quot;;
0026  <b>private static final</b> String <i>SCREEN</i> = &quot;Screen&quot;;
0027  
0028  <b>private</b> Panel         <i>helpControl</i>;
0029  <b>private</b> CheckboxGroup <i>theGroup</i>;
0030  <b>private</b> Checkbox      <i>fileHelp</i>;
0031  <b>private</b> Checkbox      <i>moveHelp</i>;
0032  <b>private</b> Checkbox      <i>turnHelp</i>;
0033  <b>private</b> Checkbox      <i>colorHelp</i>;
0034  <b>private</b> Checkbox      <i>screenHelp</i>;
0035  
0036  <b>private</b> Panel         <i>helpPanel</i>;
0037  <b>private</b> CardLayout    <i>manager</i>;
0038  <b>private</b> MessageCanvas <i>fileHelpMessage</i>;
0039  <b>private</b> MessageCanvas <i>moveHelpMessage</i>;
0040  <b>private</b> MessageCanvas <i>turnHelpMessage</i>;
0041  <b>private</b> MessageCanvas <i>colorHelpMessage</i>;
0042  <b>private</b> MessageCanvas <i>screenHelpMessage</i>;
0043  
0044  <b>private</b> Panel         <i>buttonPanel</i>;
0045  <b>private</b> Button        <i>dismiss</i>;
0046  
0047  <b>private</b> Window        <i>itsParentWindow</i>;</font></pre>

<p>The class implements the <font size="2" face="Arial">ActionListener</font>
interface in order to respond to the user pressing its dismiss
button, by un-posting the dialog, and implements the <font
size="2" face="Arial">ItemListener</font> interface in order to
be able to respond to the user pressing one of the <font size="2"
face="Arial">Checkbox</font> buttons, as will be described below.
The use of the manifest values, declared on lines 0022 to 0026,
and the instance attributes, declared on lines 0028 to 0047, will
be described as the constructor, which commences as follows, is
explained.</p>

<pre><font size="3">0051     <b>protected</b> <i>MenuBarTuttleHelpDialog</i>( Frame <i>itsParentFrame</i>) { 
0052     
0053       <b>super</b>( <i>itsParentFrame</i>, &quot;Help&quot;, <b>false</b>);
0054       <i>itsParentWindow</i> = (Window) <i>itsParentFrame</i>;
0055       <b>this</b>.setFont( <i>itsParentFrame</i>.getFont());
0056  
0057       <i>helpControl</i> = <b>new</b> Panel();
0058       <i>helpControl</i>.setBackground( Color.white);
0059  
0060       <i>theGroup</i> = <b>new</b> CheckboxGroup();
0061       <i>fileHelp</i> = <b>new</b> Checkbox( <i>FILE</i>, <i>theGroup</i>, <b>true</b>);
0062       <i>fileHelp</i>.addItemListener( <b>this</b>);
0063       <i>helpControl</i>.add( <i>fileHelp</i>);     
0064       
0065       <i>moveHelp</i> = <b>new</b> Checkbox( <i>MOVE</i>, <i>theGroup</i>, <b>false</b>);
0066       <i>moveHelp</i>.addItemListener( <b>this</b>);
0067       <i>helpControl</i>.add( <i>moveHelp</i>);
0068       
0069       <i>turnHelp</i> = <i>new</i> Checkbox( <i>TURN</i>, <i>theGroup</i>, <b>false</b>);
0070       <i>turnHelp</i>.addItemListener( <b>this</b>);
0071       <i>helpControl</i>.add( <i>turnHelp</i>); 
0072       
0073       <i>colorHelp</i> = <b>new</b> Checkbox( <i>COLOR</i>, <i>theGroup</i>, <b>false</b>);
0074       <i>colorHelp</i>.addItemListener( <b>this</b>);     
0075       <i>helpControl</i>.add( <i>colorHelp</i>); 
0076       
0077       <i>screenHelp</i> = <b>new</b> Checkbox( <i>SCREEN</i>, <i>theGroup</i>, <b>false</b>); 
0078       <i>screenHelp</i>.addItemListener( <b>this</b>);      
0079       <i>helpControl</i>.add( <i>screenHelp</i>);           </font></pre>

<p>The first stage of the constructor, on lines 0052 to 0054,
constructs and configures the <font size="2" face="Arial">Dialog</font>
as before. Lines 0057 to 0079 then construct the five <font
size="2" face="Arial">Checkbox</font> items as members of the
same <font size="2" face="Arial">CheckboxGroup</font>, <font
size="2" face="Arial"><i>theGroup</i></font>, in a manner
comparable to the <font size="2" face="Arial">Checkbox</font>
example in Chapter 2. The label to be used for each <font
size="2" face="Arial">Checkbox</font> is specified using one of
the manifest <font size="2" face="Arial">String</font>s for
reasons which will be explained below and each has its <font
size="2" face="Arial">ItemListener</font> object specified as <font
size="2" face="Arial"><b>this</b></font>. The five <font size="2"
face="Arial">Checkbox</font>es are added to the <font size="2"
face="Arial"><i>helpControl</i></font> panel, using its default <font
size="2" face="Arial">FlowLayout</font> policy, to produce the
appearance at the top of the images in Figure 6.9. The next part
of the constructor is responsible for the middle part of the
interface, as follows. </p>

<pre><font size="3">0081       <i>manager</i>   = <b>new</b> CardLayout();
0082       <i>helpPanel</i> = <b>new</b> Panel();
0083       <i>helpPanel</i>.setBackground( Color.white);
0084       <i>helpPanel</i>.setLayout( <i>manager</i>);
0085       
0086       <i>fileHelpMessage</i> =   <b>new</b> <i>MessageCanvas</i>( <i>FILE_MESSAGE</i>);
0087       <i>helpPanel</i>.add( <i>fileHelpMessage</i>, <i>FILE</i>);
0088       
0089       <i>moveHelpMessage</i> =   <b>new</b> <i>MessageCanvas</i>( <i>MOVE_MESSAGE</i>);
0090       <i>helpPanel</i>.add( <i>moveHelpMessage</i>, <i>MOVE</i>);
0091       
0092       <i>turnHelpMessage</i> =   <b>new</b> <i>MessageCanvas</i>( <i>TURN_MESSAGE</i>);
0093       <i>helpPanel</i>.add( <i>turnHelpMessage</i>, <i>TURN</i>);
0094       
0095       <i>colorHelpMessage</i> =  <b>new</b> <i>MessageCanvas</i>( <i>COLOR_MESSAGE</i>);
0096       <i>helpPanel</i>.add( <i>colorHelpMessage</i>, <i>COLOR</i>);
0097       
0098       <i>screenHelpMessage</i> = <b>new</b> <i>MessageCanvas</i>( <i>SCREEN_MESSAGE</i>);
0099       <i>helpPanel</i>.add( <i>screenHelpMessage</i>, <i>SCREEN</i>);</font></pre>

<p>Lines 0081 to 0084 construct an instance of the <font size="2"
face="Arial">CardLayout</font> class and installs it as the
layout manager of the <font size="2" face="Arial"><i>helpPanel</i></font>,
upon which the help messages will be displayed. Each help message
in turn is then constructed as an instance of the <font size="2"
face="Arial"><i>MessageDialog</i></font> class. The text for the
help messages is obtained from class wide constant attributes
which, in order not to clutter the header part of the class
source code file, are declared at the end of the file. For
example the <font size="2" face="Arial"><i>FILE_MESSAGE</i></font>
<font size="2" face="Arial">String</font> value is declared as
follows. </p>

<pre><font size="3">0155  <strong>private static final</strong> String <i>FILE_MESSAGE</i> = 
0156                   &quot;The File menu contains a single option Exit ...\n&quot; +
0157                   &quot;which will post a dialog to the screen when \n&quot; +
0158                   &quot;it is selected.\n  \n&quot;                               +
0159                   &quot;The dialog asks if you are sure? If you press no\n&quot; +
0160                   &quot;the dialog will disappear. If you press yes the \n&quot; + 
0161                   &quot;program will terminate.&quot;;</font></pre>

<p>As each <font size="2" face="Arial"><i>MessageCanvas</i></font>
instance is added to the <font size="2" face="Arial"><i>helpPanel</i></font>
a name, specified by one of the manifest names which were used
for the <font size="2" face="Arial">Checkbox</font> buttons, is
associated with it. For example on line 0093 the <font size="2"
face="Arial"><i>turnHelpMessage</i></font> is added to the <font
size="2" face="Arial"><i>helpPanel</i></font> with the manifest
value <font size="1" face="Arial"><i>TURN </i></font>(&quot;<i>Turn</i>&quot;)
specified in the second argument of the <font size="2"
face="Arial">add()</font> method. </p>

<p>The <font size="2" face="Arial"><i>manager</i> CardLayout</font>
instance, which has been installed as the <font size="2"
face="Arial"><i>helpPanel</i></font>'s layout manager, will keep
track of these names as will be demonstrated below. By default
the first <font size="2" face="Arial">Component</font> added to
the <font size="2" face="Arial">Panel</font> will be displayed
when it becomes visible and this has been anticipated by setting
the <font size="2" face="Arial"><i>FileHelp</i></font> <font
size="2" face="Arial">Checkbox</font> button's marker on line
0061. The remaining parts of the constructor construct the <font
size="2" face="Arial"><i>dismiss</i> Button</font> and assemble
the interface before <font size="2" face="Arial">pack</font>ing
it, as follows. </p>

<pre><font size="3">0102       <i>dismiss</i> = <b>new</b> Button( &quot;OK&quot;);
0103       <i>dismiss</i>.setActionCommand( &quot;OK&quot;);
0104       <i>dismiss</i>.addActionListener( <b>this</b>);
0105       
0106       <i>buttonPanel</i> = <b>new</b> Panel();
0107       <i>buttonPanel</i>.setBackground( Color.white);
0108       <i>buttonPanel</i>.add( <i>dismiss</i>);      
0109  
0110       <b>this</b>.add( <i>helpControl</i>, &quot;North&quot;);
0111       <b>this</b>.add( <i>helpPanel</i>,   &quot;Center&quot;);
0112       <b>this</b>.add( <i>buttonPanel</i>, &quot;South&quot;);
0113       <b>this</b>.pack();     
0114     } // End <i>MenuBarTuttleHelpDialog </i>constructor.</font></pre>

<p>The <font size="2" face="Arial"><i>setVisible()</i></font>
method does not differ from the <font size="2" face="Arial"><i>setVisible()</i></font>
method of the <font size="2" face="Arial">ExitDialog</font> given
above, ensuring that the dialog is centered within its parent
window whenever it becomes visible. The <font size="2"
face="Arial"><i>actionPerformed()</i></font> method is called as
a consequence of the user pressing the <font size="2"
face="Arial"><i>dismiss</i></font> button and un-posts the dialog
from the desktop as follows. </p>

<pre><font size="3">0140     <b>public void</b> <i>actionPerformed</i>( ActionEvent <i>event</i>) {
0141        <b>this</b>.<i>setVisible</i>( <b>false</b>);   
0142     } // End <i>actionPerformed</i>. </font></pre>

<p>The <font size="2" face="Arial"><i>itemStateChanged()</i></font>
method, as follows, will be called as a consequence of the user
pressing any of the <font size="2" face="Arial"><i>Checkbox</i></font>es,
as their <font size="2" face="Arial">ItemListener</font> resource
was specified as the dialog to which they belong (<font size="2"
face="Arial"><b>this</b></font>). It calls the <font size="2"
face="Arial">CardLayout</font> <font size="2" face="Arial"><i>manager</i></font>'s
<font size="2" face="Arial">show()</font> method passing as
arguments the <font size="2" face="Arial"><i>helpPanel</i></font>
which it is associated with and the name of the <font size="2"
face="Arial"><i>Component</i></font> to be shown. The name is
retrieved from the <font size="2" face="Arial"><i>event</i></font>
by using its <font size="2" face="Arial">getItem()</font> method
and contains the label which was specified by a manifest value
when the <font size="2" face="Arial">Checkbox</font> was
constructed. The same manifest value was also associated with the
corresponding <font size="2" face="Arial">MessageCanvas</font> as
it was added to the <font size="2" face="Arial">Panel</font> and
so this mechanism will ensure that the correct message is shown.</p>

<pre><font size="3">0145     <b>public void</b> <i>itemStateChanged</i>( ItemEvent <i>event</i>) {   
0148        <i>manager</i>.show( <i>helpPanel</i>,(String) <i>event</i>.getItem());
0151     } // End <i>itemStateChanged</i>.</font></pre>

<p>For example the manifest value <font size="1" face="Arial">TURN</font>
(&quot;<i>Turn</i>&quot;) was specified as the label of the <font
size="2" face="Arial"><i>turnHelp</i> Checkbox</font>, and also
associated with the <font size="2" face="Arial"><i>turnHelpMessage
MessageCanvas</i></font> as it was <font size="2" face="Arial"><i>add</i></font>ed
to the <font size="2" face="Arial"><i>helpPanel</i></font>. When
the user selects the <font size="2" face="Arial"><i>turnHelp</i></font>
radio button the <font size="2" face="Arial">ItemEvent</font>
generated will contain the value &quot;<i>Turn</i>&quot; as its <font
size="2" face="Arial">Item</font> attribute and when this is
retrieved and passed to the <font size="2" face="Arial"><i>manager</i></font>'s
<font size="2" face="Arial">show()</font> method it will locate
and display the <font size="2" face="Arial"><i>turnHelpMessage</i></font>
in the <font size="2" face="Arial">Panel</font>. </p>

<p>During layout negotiations a <font size="2" face="Arial">Container</font>
which has a <font size="2" face="Arial">CardBox</font> layout
manager will ask for sufficient screen space to show its largest <font
size="2" face="Arial">Component</font> and, assuming it is
granted this dimension, will not need to resize itself as its
various <font size="2" face="Arial">Component</font>s are shown. <font
size="2" face="Arial">Component</font>s which are smaller than
the size of the window will be presented centered within the
available space. The major resources of the <font size="2"
face="Arial">CardLayout </font>manager are given in Table 6.7. </p>

<p align="center"><b><img src="table67.gif" width="609"
height="287"></b></p>

<p align="center"><b>Table 6.7</b> Major resources of the <font
face="Arial">CardLayout</font> class. </p>

<p>This component can be adapted for use with any application
which provides help to the user on a dialog panel. It will be
suitable for use in its current form so long as the number of
help categories does not exceed about seven items. When the
number of help items exceeds this a different user interface will
be required. One possibility is a dialog containing a <font
size="2" face="Arial">List</font> component showing the larger
number of topics in its scrolling area. Selecting and activating
a topic will un-post the list dialog and post a dialog containing
a <font size="2" face="Arial">MessageCanvas</font>, possibly
within a <font size="2" face="Arial">ScrollPane</font>, which
contains the help information. When the help information dialog
is dismissed the list dialog will be represented and it too can
be dismissed when help is no longer required. </p>

<p>&nbsp;</p>

<hr>

<blockquote>
    <p><a
    href="..\tuttles\menubartuttle\menubartuttlehelpdialog.java"><font
    size="5"><img src="list.gif" align="middle" border="0"
    width="40" height="35"> HelpDialog.java</font></a></p>
</blockquote>

<hr>

<blockquote>
    <p><a href="ch610.html"><font size="5"><img src="next.gif"
    align="middle" border="0" width="50" height="40">6.10 Menu
    accelerators</font></a></p>
    <p><a href="ch68.html"><font size="4"><img src="last.gif"
    align="middle" border="0" width="50" height="40"></font><font
    size="5">6.8 The</font><font size="7"> </font><font size="4"
    face="Arial"><i>VersionDialog</i></font><font size="5"> class</font><font
    size="4"> </font></a></p>
</blockquote>

<hr>
</body>
</html>
