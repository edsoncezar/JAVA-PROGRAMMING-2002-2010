<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPad 2.0">
<title> 5.5 The SemiDirectTuttle class </title>
</head>

<body bgcolor="#FFFFFF">

<h1 align="center">5.5 The <font size="5" face="Arial"><i>SemiDirectTuttle</i></font><font
size="6"> class</font><font size="5"> </font></h1>

<p>The <font size="2" face="Arial"><i>SemiDirectTuttle</i></font>
class is responsible for constructing the interface by creating
the <font size="2" face="Arial"><i>Tuttle</i></font> and the <font
size="2" face="Arial"><i>SemiDirectTuttleInterface</i></font>
instances, together with a feedback <font size="2" face="Arial">Panel</font>
as used in the <font size="2" face="Arial"><i>TuttleTest</i></font>
applet in the previous chapter, and subsequently responding the <font
size="2" face="Arial">ActionEvent</font>s which are dispatched to
it from the <font size="2" face="Arial"><i>TuttleButton</i></font><i>s</i>.
The implementation of this class as far as the end of its <font
size="2" face="Arial"><i>init()</i></font> action is as follows. </p>

<pre><font size="3">0001  // Filename <i>SemiDirectTuttle.java</i>.
0002  // Supplies a semi-direct interface the <i>Tuttle</i> class
0003  // using <i>TuttleButtons</i>.
0004  //
0005  // Written for Java Interface book chapter 5.
0006  // Fintan Culwin, v 0.2, August 1997.
0007  
0008  <b>package</b> <i>SemiDirectTuttle</i>;
0009  
0010  <b>import</b> java.awt.*;
0011  <b>import</b> java.applet.*;
0012  <b>import</b> java.awt.event.*;
0013  
0014  <b>import</b> <i>Tuttles.Tuttle</i>;
0015  <b>import</b> <i>SemiDirectTuttleInterface</i>;
0016  
0017  <b>public class</b> <i>SemiDirectTuttle</i> <b>extends</b>    Applet 
0018                                <b>implements</b> ActionListener {
0019  
0020  <b>private</b> Label  <i>feedbackLabel</i>;
0021  <b>private</b> <i>Tuttle</i> <i>theTuttle</i>;
0022  <b>private</b> Panel  <i>feedbackPanel</i>;
0023   
0024     <b>public void</b> <i>init</i>() { 
0025     
0026     Panel     <i>tuttlePanel</i> = <b>new</b> Panel(); 
0027     <i>SemiDirectTuttleInterface</i> <i>theInterface</i>;  
0028
0029        <b>this</b>.setFont( <b>new</b> Font( &quot;TimesRoman&quot;, Font.PLAIN, 14));
0030        <i>feedbackLabel</i> = <b>new</b> Label();
0031        <i>feedbackPanel</i> = <b>new</b> Panel();
0032        <i>feedbackPanel</i>.add( <i>feedbackLabel</i>);
0033        
0034        <i>theTuttle</i> = <b>new</b> <i>Tuttle</i>( <b>this</b>, 500, 500);            
0035        <i>tuttlePanel</i>.add( <i>theTuttle</i>); 
0036        
0037        <i>theInterface</i>  = <b>new</b> <i>SemiDirectTuttleInterface</i>( <b>this</b>);
0038  
0039        <b>this</b>.setLayout( <b>new</b> BorderLayout());
0040        <b>this</b>.add( <i>feedbackPanel</i>, &quot;North&quot;);
0041        <b>this</b>.add( <i>tuttlePanel</i>,   &quot;Center&quot;);     
0042        <b>this</b>.add( <i>theInterface</i>,  &quot;South&quot;);
0043        
0044        <b>this</b>.<i>feedback</i>();
0045     } // End <i>init</i>.</font></pre>

<p>The <font size="2" face="Arial"><i>init()</i></font> action
commences, on line 0029, by specifying the <font size="2"
face="Arial">Font</font> which will be inherited by the <font
size="2" face="Arial"><i>feedbackLabel</i></font> and used to
display the <font size="2" face="Arial"><i>Tuttle</i></font>'s
status information. It continues, on lines 0030 to 0032, by
constructing the <font size="2" face="Arial"><i>feedbackLabel</i></font>
and adding it to the <font size="2" face="Arial"><i>feedbackPanel</i></font>.
</p>

<p>On lines 0034 and 0035, the <font size="2" face="Arial"><i>Tuttle</i></font>
instance, <font size="2" face="Arial"><i>theTuttle</i></font>, is
then constructed specifying a 500 by 500 pixel drawing area and
is added to its <font size="2" face="Arial">Panel</font>. Line
0037 constructs the <font size="2" face="Arial"><i>SemiDirectTuttleInterface</i></font>,
<font size="2" face="Arial"><i>theInterface</i></font>, passing
as its argument the identity of the <font size="2" face="Arial"><i>SemiDirectTuttle</i></font>
applet (<font size="2" face="Arial"><b>this</b></font>) which is
currently being constructed. </p>

<p>Having prepared the three parts of the interface these are
added in the appropriate <font size="2" face="Arial">BorderLayout</font>
locations of the <font size="2" face="Arial">Applet Panel</font>,
to provide the complete interface shown in Figure 5.4. The last
action of the <font size="2" face="Arial"><i>init()</i></font>
action is to call the <font size="2" face="Arial"><i>SemiDirectTuttle</i></font>'s
private <font size="2" face="Arial"><i>feedback()</i></font>
action to cause the <font size="2" face="Arial"><i>Tuttle</i></font>'s
initial status to be shown when the interface is first presented
to the user. </p>

<p>As the <font size="2" face="Arial"><i>SemiDirectTuttle</i></font>
class states that it implements the <font size="2" face="Arial">ActionListener</font>
interface, it has to implement an <font size="2" face="Arial"><i>actionPerformed()</i></font>
action, as follows. </p>

<pre><font size="3">0048     <b>public void</b> <i>actionPerformed</i>( ActionEvent <i>event</i>) { 
0049  
0050     String <i>theCommand</i> = <i>event</i>.getActionCommand();
0051  
0052        <b>if</b> ( <i>theCommand</i>.equals( &quot;Forwards&quot;)) { 
0053           <i>theTuttle</i>.<i>forward</i>( 25);
0054        } <b>else if</b> ( <i>theCommand</i>.equals( &quot;Backwards&quot;)) { 
0055           <i>theTuttle.backward</i>( 25);
0056        } <b>else if</b> ( <i>theCommand</i>.equals( &quot;Turn left&quot;)) { 
0057           <i>theTuttle.turnLeft</i>( 15);
----        <b>Other if branches omitted.
</b>0094        } // End if.
0095        
0096        <b>this</b>.<i>feedback</i>();       
0097     } // End <i>actionPerformed</i>.</font></pre>

<p>The first stage of this action, on line 0050, is to retrieve
the <font size="2" face="Arial"><i>theCommand</i> String</font>
from the <font size="2" face="Arial"><i>event</i></font>
dispatched to it from the <font size="2" face="Arial"><i>SemiDirectTuttleInterface</i>.</font>
A 21 way <font size="2" face="Arial"><b>if/&nbsp;else&nbsp;if</b></font>
structure then provides a branch for each possible <font size="2"
face="Arial"><i>commandString</i></font> associated with each of
the 21 <font size="2" face="Arial"><i>TuttleButton</i></font>s;
calling the appropriate <font size="2" face="Arial"><i>theTuttle</i></font>
action and passing the appropriate argument, if required. </p>

<p>For example, if the user were to press the <font size="2"
face="Arial"><i>turnLeft</i></font> button the <font size="2"
face="Arial">ActionEvent</font> generated would contain the <font
size="2" face="Arial"><i>commandString</i></font> &quot;<i>Turn
left</i>&quot;. This would cause the condition on line 0056 to
evaluate <font size="2" face="Arial"><b>true</b></font> and the <font
size="2" face="Arial"><i>turnLeft()</i></font> action of <font
size="2" face="Arial"><i>theTuttle</i></font> would be called, on
line 0057, causing the <i>tuttle</i> to turn 15<sup>o</sup> to
the left. Likewise pressing the <font size="2" face="Arial"><i>forwardButton</i></font>
would result in the <i>tuttle</i> moving 25 steps forward when <font
size="2" face="Arial"><i>theTuttle</i></font>'s <font size="2"
face="Arial"><i>forward()</i></font> action is called on line
0053. Unfortunately this interface does not allow the user any
choice in the amounts of turn or movement which are associated
with the buttons. </p>

<p>The final stage of the <font size="2" face="Arial"><i>actionPerformed()</i></font>
action, on line 0096, is to call the <font size="2" face="Arial"><i>feedback()</i></font>
action so that any changes in the <font size="2" face="Arial"><i>Tuttle</i></font>'s
status are reported back to the user. The implementation of this
action is identical to that of the comparable action presented in
the <font size="2" face="Arial"><i>TuttleTest</i></font> applet
at the end of the last chapter and is presented here for the sake
of completeness.</p>

<pre><font size="3">0100     <b>private void</b> <i>feedback</i>() {    
0101        <i>feedbackLabel</i>.setText( <i>theTuttle</i>.<i>getDetails</i>());
0102        <i>feedbackPanel</i>.doLayout();
0103     } // End <i>feedback</i>.
0104  } // End <i>SemiDirectTuttle</i>.</font></pre>

<p>This completes the <font size="2" face="Arial"><i>SemiDirectTuttle</i></font>
implementation, details of how to obtain the parts of the source
code omitted for the sake of brevity can be found at the start of
Appendix B.</p>

<p>&nbsp;</p>

<hr>

<blockquote>
    <p><a
    href="..\tuttles\semidirecttuttle\semidirecttuttle.java"><font
    size="5"><img src="list.gif" align="middle" border="0"
    width="40" height="35"> SemiDirectTuttle.java</font></a></p>
    <p><a href="..\tuttles\semidirecttuttle.html"><font
    size="5"><img src="run.gif" align="middle" border="0"
    width="40" height="27"> SemiDirectTuttle</font></a></p>
</blockquote>

<hr>

<blockquote>
    <p><a href="ch5sum.html"><font size="5"><img src="next.gif"
    align="middle" border="0" width="50" height="40">Summary of
    Chapter 5</font></a></p>
    <p><a href="ch54.html"><font size="4"><img src="last.gif"
    align="middle" border="0" width="50" height="40"></font><font
    size="5">5.4 The </font><font size="5" face="Arial"><i>SemiDirectTuttleInterface</i></font><font
    size="6"> </font><font size="5">class</font></a></p>
</blockquote>

<hr>
</body>
</html>
