<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPad 2.0">
<title> 3.5 The NoteWindow class </title>
</head>

<body bgcolor="#FFFFFF">

<h1 align="center">3.5 The <font size="5" face="Arial"><i>NoteWindow</i></font><font
size="7"> </font><font size="6">class</font></h1>

<p>The instance hierarchy for an instance of the <font size="2"
face="Arial"><i>NoteWindow</i></font> class is shown in Figure
3.5. </p>

<p align="center"><b><img src="fig35.gif" width="500"
height="245"></b></p>

<p align="center"><b>Figure 3.5</b> The <font face="Arial"><i>NoteWindow</i></font>
instance hierarchy.</p>

<p>This hierarchy is very similar to that of the <font size="2"
face="Arial"><i>StikNoteWindow</i></font> hierarchy shown in
Figure 3.4. The root of the hierarchy, shown as <font size="2"
face="Arial"><i>noteWindow</i></font>, is not an application in
its own right but only a separate top level window of the <font
size="2" face="Arial"><i>StikNote</i></font> application.
Consequently it is extended from the <font size="2" face="Arial">Frame</font>
class not the <font size="2" face="Arial">Applet</font> class.
The other difference is that above the <font size="2"
face="Arial"><i>buttonPanel</i></font> an instance of the <font
size="2" face="Arial"><i>MessageCanvas</i></font> class,<font
size="2" face="Arial"><i> </i></font>called<font size="2"
face="Arial"><i> postedMessage,</i></font> is required. The <font
size="2" face="Arial"><i>MessageCanvas</i></font> class is a
specialized extension of the <font size="2" face="Arial">Canvas</font>
class whose implementation will be described below. Briefly it
constructs a <font size="2" face="Arial">Canvas</font> which is
just large enough to display the text passed to it and arranges
for it to be shown. The implementation of the <font size="2"
face="Arial"><i>NoteWindow</i></font> class, as far as the start
of its constructor, is as follows. </p>

<pre><font size="3">0001  // Filename <i>NoteWindow.java.
</i>0002  // Provides the <i>NoteWindows</i> for the <i>StikNote</i> applet.
0003  // 
0004  // Written for the JI book, Chapter 3.
0005  // Fintan Culwin, v 0.2, August 1997.
0006  
0007  <b>package</b> <i>StikNote</i>;
0008  
0009  <b>import</b> java.awt.*;
0010  <b>import</b> java.awt.event.*;
0011  
0012  <b>import</b> <i>MessageCanvas</i>;
0013  
0014  
0015  <b>class</b> <i>NoteWindow</i> <b>extends</b>    Frame
0016                   <b>implements</b> ActionListener { 
</font></pre>

<p>This class also declares itself to be a non-<font size="2"
face="Arial"><b>public</b></font> member of the <font size="2"
face="Arial"><i>StikNote</i></font> package, but the <font
size="2" face="Arial"><i>MessageCanvas</i></font> class <font
size="2" face="Arial"><b>import</b></font>ed on line 0012 is not.
This is because it is recognized that the <font size="2"
face="Arial"><i>MessageCanvas</i></font> class is capable of
being reused in a number of different interface components, as
will be demonstrated, and so should not be thought of as
associated with any particular package. </p>

<p>The declaration of the <font size="2" face="Arial"><i>NoteWindow</i></font>
class, on lines 0015 and 0016, indicates that it implements the <font
size="2" face="Arial">ActionListener</font> interface as it will
respond itself to presses of its own &quot;<i>OK</i>&quot;
button, as described below. The implementation of its constructor
is as follows. </p>

<pre><font size="3">0019     <b>protected</b> <i>NoteWindow</i>( String    <i>message</i>,
0020                           Component <i>itsParent</i>) { 
0021     
0022     Button        <i>dismissButton</i>;
0023     Panel         <i>buttonPanel</i>   = <b>new</b> Panel();
0024     <i>MessageCanvas</i> <i>postedMessage</i>;
0025  
0026     Point         <i>itsParentsLocation</i>;
0027     Dimension     <i>itsParentsSize</i>;
0028     Point         <i>itsLocation</i>;
0029     Dimension     <i>itsSize</i>;
0030  
0031        <b>this</b>.setTitle( &quot;Stik Note&quot;);
0032        <b>this</b>.setFont( <i>itsParent</i>.getFont()); 
0033        <b>this</b>.setBackground( <i>itsParent</i>.getBackground()); 
0034        <b>this</b>.setForeground( <i>itsParent</i>.getForeground()); 
0035           
0036        <i>postedMessage</i> = <b>new</b> MessageCanvas( <i>message</i>);
0037        <b>this</b>.add( <i>postedMessage</i>, &quot;Center&quot;);
0038       
0039        <i>dismissButton</i> = <b>new</b> Button( &quot;OK&quot;);
0040        <i>dismissButton</i>.addActionListener( <b>this</b>);          
0041        <i>buttonPanel</i>.add( <i>dismissButton</i>); 
0042        <b>this</b>.add( <i>buttonPanel</i>, &quot;South&quot;);
0043        <b>this</b>.pack();
0044        
0045        <i>itsParentsLocation</i> = <i>itsParent</i>.getLocationOnScreen();
0046        <i>itsParentsSize</i>     = <i>itsParent</i>.getSize();
0047        <i>itsSize</i>            = <b>this</b>.getSize();
0048        <i>itsLocation</i>        = <b>new</b> Point();
0049        
0050        <i>itsLocation</i>.x = <i>itsParentsLocation</i>.x + 
0051                        (<i>itsParentsSize</i>.width/2) - 
0052                        (<i>itsSize</i>.width/2);
0053        <i>itsLocation</i>.y = <i>itsParentsLocation</i>.y + 
0054                        (<i>itsParentsSize</i>.height/2) - 
0055                        (<i>itsSize</i>.height/2);                          
0056  
0057        <b>this</b>.setLocation( <i>itsLocation</i>);     
0058        <b>this</b>.setVisible( <b>true</b>);      
0059     } // End <i>NoteWindow</i> constructor.
</font></pre>

<p>This method can be divided into two parts. The first part from
lines 0019 to 0042 constructs the interface within the <font
size="2" face="Arial">Frame</font> window. The second part of the
method, from lines 0043 to 0058, is concerned with positioning
the window on the desktop centered within the main application
window.</p>

<p>The constructor commences, on lines 0031 to 0034, by
configuring its physical appearance. As this class extends the <font
size="2" face="Arial">Frame</font> class it has a separate
top-level window and, as mentioned above, does not inherit its
physical attributes from its instance parent, as the <font
size="2" face="Arial"><i>StikNoteWindow</i></font> class did. The
<font size="2" face="Arial">Applet</font> passed in its second
argument, when its constructor was called in the <font size="2"
face="Arial"><i>StikNote</i></font> class, is received by this
class as a <font size="2" face="Arial">Component</font> instance.
On lines 0032 to 0034 the <font size="2" face="Arial">font</font>,
<font size="2" face="Arial">background</font> and <font size="2"
face="Arial">foreground</font> attributes are obtained from <font
size="2" face="Arial"><i>itsParent</i></font>, using only <font
size="2" face="Arial">Component</font> methods, and installed
into this <font size="2" face="Arial">Component</font> using the
equivalent attribute setting methods. Before this, on line 0031,
the title for the <font size="2" face="Arial">Frame</font> is
specified as &quot;<i>Stik&nbsp;Note</i>&quot;, using the <font
size="2" face="Arial">Frame setTitle()</font> method, as can be
confirmed in Figure 3.1.</p>

<p>The constructor continues, on line 0036 and 0037, by creating
a new instance of the <font size="2" face="Arial"><i>MessageCanvas</i></font>
class and adding it to the <font size="2" face="Arial"><i>NoteWindow</i></font>'s
central location. There is no need to explicitly specify a <font
size="2" face="Arial">BorderLayout</font> management policy as
this is the default policy for all <font size="2" face="Arial">Frame</font>s.
Lines 0039 to 0042 continue assembling the interface as required
from the instance diagram in Figure 3.5 and registering the <font
size="2" face="Arial"><i>NoteWindow</i></font> instance itself as
the listener for the <font size="2" face="Arial">ActionEvent</font>s
generated by the <font size="2" face="Arial"><i>dismissButton</i></font>.
</p>

<p>Once this has been accomplished, on line 0043, the <font
size="2" face="Arial">Frame</font>'s <font size="2" face="Arial"><i>pack()</i></font>
method is called to perform the layout negotiations for the <font
size="2" face="Arial">Frame</font> and so establish its size,
although this does not result in the interface becoming visible.
Lines 0045 to 0055 are concerned with ensuring that when the <font
size="2" face="Arial"><i>NoteWindow</i></font> is shown to the
user it is centered within the main <font size="2" face="Arial"><i>StikNote</i></font>
window. </p>

<p>To accomplish this first, on line 0045, the location and size
of <font size="2" face="Arial"><i>itsParent</i></font> is
obtained using the <font size="2" face="Arial">Component</font> <font
size="2" face="Arial">getLocationOnScreen()</font> method. This
method returns an instance of the <font size="2" face="Arial">Point</font>
class. This is a simple class which contains two <font size="2"
face="Arial"><b>public</b></font> primitive <font size="2"
face="Arial"><b>int</b></font> instance attributes called <font
size="2" face="Arial">x</font> and <font size="2" face="Arial">y</font>.
As <font size="2" face="Arial"><b>public</b></font> attributes
their values can be set, or obtained, directly by referencing
their name rather than by using methods of the class. This
technique is used by a small number of Java pre-supplied classes
but, in general, this technique should not be used. Instance
attributes should always be declared <font size="2" face="Arial"><b>private</b></font>
and methods to set and obtain their value supplied.</p>

<p>On line 0046 the size of the main window is obtained by use of
its <font size="2" face="Arial"><i>getSize()</i></font> method.
This method returns and instance of the <font size="2"
face="Arial">Dimension</font> class. Like the <font size="2"
face="Arial">Point</font> class, the <font size="2" face="Arial">Dimension</font>
class contains two <font size="2" face="Arial"><b>public</b></font>
instance attributes, this time called <font size="2" face="Arial"><b>width</b></font>
and <font size="2" face="Arial"><b>height</b></font>. The
constructor continues by determining the size of the new <font
size="2" face="Arial"><i>NoteWindow</i></font> using its own <font
size="2" face="Arial"><i>getSize()</i></font> method.</p>

<p>Knowing the size and location of the main window, and the size
of the new <font size="2" face="Arial"><i>NoteWindow</i></font>,
it requires some simple arithmetic to calculate the location on
the screen where the new window has to be positioned in order for
it to be centered within the main window. This is accomplished on
lines 0050 to 0055 with the <font size="2" face="Arial">x</font>
and <font size="2" face="Arial">y</font> co-ordinates calculated
stored as the <font size="2" face="Arial">x</font> and <font
size="2" face="Arial">y</font> <font size="2" face="Arial"><b>public</b></font>
attributes of a new instance of the <font size="2" face="Arial">Point</font>
class, called <font size="2" face="Arial"><i>itsLocation</i></font>,
constructed on line 0048.</p>

<p>This <font size="2" face="Arial">Point</font> instance is then
passed as an argument to the <font size="2" face="Arial"><i>NoteWindow'</i></font>s
<font size="2" face="Arial">setLocation()</font> method, on line
0057, causing the new window to the positioned. The <font
size="2" face="Arial"><i>NoteWindow</i></font> is then made
visible by calling its <font size="2" face="Arial">setVisible()</font>
method, with the argument <font size="2" face="Arial"><b>true</b></font>,
as the constructor's final step on line 0058. If this positioning
of the <font size="2" face="Arial"><i>NoteWindow</i></font> were
not done the location of the <font size="2" face="Arial"><i>NoteWindow</i></font>
on the desktop could not be guaranteed and the window manager
might place it anywhere, at its discretion.</p>

<p>It might seem that devoting the majority of the effort in this
constructor to the physical appearance of the interface and the
location on the screen where it will appear is overkill. For
example the note could appear anywhere on the screen and the user
can then drag it to where they want it, as they probably will do
anyway. However paying attention to details such as this
differentiates excellent interfaces from good interfaces: an
interface design principle known as <i>details matter</i>.</p>

<hr>

<blockquote>
    <p><b><i>Design Advice</i></b> </p>
    <p>Details matter! Once the essential functionality of the
    application is assured, users will judge an interface on the
    care which has been taken to enhance its usability and
    aesthetic appeal. </p>
</blockquote>

<hr>

<p>The final method of the <font size="2" face="Arial"><i>NoteWindow</i></font>
class is the <font size="2" face="Arial"><i>performAction()</i></font>
method which will be called when its &quot;<i>OK</i>&quot; button
is pressed. It should result in the <font size="2" face="Arial"><i>NoteWindow</i></font>
being removed from the desktop and being destroyed, and is
implemented as follows. </p>

<pre><font size="3">0062     <b>public void</b> <i>actionPerformed</i>( ActionEvent <i>event</i>) {     
0063        <b>this</b>.dispose(); 
0064     } // End <i>actionPerformed</i>.
0065  } // End <i>NoteWindow</i>.</font></pre>

<p>The <font size="2" face="Arial">dispose()</font> method of the
<font size="2" face="Arial">Frame</font> class called on line
0063 results in the <font size="2" face="Arial">Frame</font> and
all its contents being removed from the desktop and destroyed.
This method is encapsulated within the <font size="2"
face="Arial"><i>NoteWindow</i></font> class rather than being
included within the <font size="2" face="Arial"><i>StikNotet</i></font>'s
<font size="2" face="Arial"><i>performAction()</i></font> method
as it is seen as being totally the concern of the <font size="2"
face="Arial"><i>NoteWindow</i></font>, having no effects upon any
other of the application's components. </p>

<p>&nbsp;</p>

<hr>

<blockquote>
    <p><a href="code3\stiknote\notewindow.java"><font size="5"><img
    src="list.gif" align="middle" border="0" width="40"
    height="35">NoteWindow.java</font></a></p>
</blockquote>

<hr>

<blockquote>
    <p><a href="c36.html"><img src="next.gif" align="middle"
    border="0" width="50" height="40"><font size="5">3.6 The </font><font
    size="5" face="Arial"><i>MessageCanvas</i></font><font
    size="5"> class</font></a></p>
    <p><a href="c34.html"><font size="4"><img src="last.gif"
    align="middle" border="0" width="50" height="40"></font><font
    size="5">3.4 The </font><font size="5" face="Arial"><i>StikNote</i></font><font
    size="5"> class</font></a></p>
</blockquote>

<hr>
</body>
</html>
