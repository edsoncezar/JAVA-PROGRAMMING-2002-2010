<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPad 2.0">
<title> 3.7 The DatePanel, visual design and behavior </title>
</head>

<body bgcolor="#FFFFFF">

<h1 align="center">3.7 The <font size="5" face="Arial"><i>DatePanel</i></font><font
size="5">, </font><font size="6">visual design and behavior</font></h1>

<p>The second artifact to be developed in this chapter is
intended to be used for the input of a calendar date in an
unambiguous and error free manner. When a user is asked to input
a calendar date into a text field there is the possibility that
they might type in an invalid date, for example the 30<sup>th</sup>
February in any year. </p>

<p>There is also a potential ambiguity if the date is required as
a sequence of two digits, two digits and two or four digits; for
example 12/06/1996. In the conventional European format this is
interpreted as the twelfth day of the sixth month in 1996:
however, in the American convention this would be interpreted as
the sixth day of the twelfth month in 1996. This problem could be
minimized by using a prompt such as '<i>Please enter the date </i>(<i>dd</i>/<i>mm</i>/<i>yyyy</i>)'.
However, this requires the user to be trained to realize that <i>dd</i>
means the day of the month, <i>mm</i> the month number and <i>yyyy</i>
the year. It is also possible, if not probable, that an American
user would not attend to this and still enter the date using the <i>mm</i>/<i>dd</i>/<i>yyyy</i>
format<i>. </i></p>

<p>Requiring the date to be input in a format such as <i>12 Dec
1996</i> also has problems, with internationalization. The
literal &quot;Dec&quot; assumes that the user understands English
and the format is also prone to input errors, for example the
mis-typing of &quot;Dec&quot; as &quot;Drc&quot;. The <i>DatePanel</i>
which will be developed in this part of the chapter is intended
to remove these possible ambiguities and problems. The appearance
of a <font size="2" face="Arial"><i>DatePanel</i></font> is shown
in Figure 3.7.</p>

<p align="center"><font size="2"><b><img src="fig37.gif"
width="375" height="301"></b></font></p>

<p align="center"><font size="2"><b>Figure 3.7</b> A </font><font
size="2" face="Arial"><i>DatePanel</i></font><font size="2">
component showing 1<sup>st</sup> January 2000. </font></p>

<p>The upper left part of a <font size="2" face="Arial"><i>DatePanel</i></font>
allows the user to indicate, from left to right: the century, the
decade and the year, using option menus. The upper right hand
part of the panel allows the user to indicate the month, using
another option menu. Every time a different year or a different
month is selected the lower part of the panel will reconfigure
itself to show the days of the month selected. For example Figure
3.7 shows that there are 31 days in January in the year 2000 and
that the first day of the month falls on a Saturday. Figure 3.8
shows that there are 29 days in February in the year 2000 (2000
is a leap year) and that the first day of the month falls on a
Tuesday.</p>

<p>The labels used on the <font size="2" face="Arial"><i>DatePanel</i></font>
in this illustration are in English and the implementation as
presented in this chapter will assume that English will always be
used. The techniques which can be used to allow a <font size="2"
face="Arial"><i>DatePanel</i></font> instance to be automatically
configured to the different linguistic environments where it is
used will be introduced in Chapter 9. Ideally an artifact such as
this should be prepared for international use right from the very
beginning of its design. However this would additionally
complicate what is already a rather complex example, accordingly
internationalization considerations will be left to another
chapter.</p>

<p align="center"><font size="2"><b><img src="fig38.gif"
width="375" height="301"></b></font></p>

<p align="center"><font size="2"><b>Figure 3.8</b> A </font><font
size="2" face="Arial"><i>DatePanel</i></font><font size="2">
component showing February 2000. </font></p>

<p>Figure 3.8 indicates that the current date represented by the
panel is the 29<sup>th</sup> Feb, shown by the <i>highlight</i>
surrounding 29. The mouse pointer is currently over 17 and this
is indicated to the user by the light <i>border</i> surrounding
it. As the user moves the mouse pointer around the days of the
month the border is drawn and un-drawn around the date which it
is currently over. If the user presses and releases the mouse
button whilst it is over a date then it will become the current
date, confirmed to the user by the moving of the highlight from
the old date to the new current date. The state transition
diagram for this behaviour is given in Figure 3.9.</p>

<p align="center"><b><img src="fig39.gif" width="509"
height="317"></b></p>

<p align="center"><b>Figure 3.9</b> The <font face="Arial"><i>DatePanel</i></font>
state transition diagram.</p>

<p>This state transition diagram uses numbers to label the
transitions which are keyed to Table 3.2. This has been done in
order to keep the STD uncomplicated; although in this example the
effect might be minimal, more complicated STDs benefit from this
convention. The dashed arrows leaving the diagram indicate the
generation of events by this component which can be listened to
by registered listeners who wish to be informed that the date has
changed. The diagram also provides names for the constituent
components of a <font size="2" face="Arial"><i>DatePanel</i></font>,
with all three of the <i>year&nbsp;choice</i> option menus
collected together for convenience.</p>

<p align="center"><b><img src="table32.gif" width="613"
height="338"></b></p>

<p align="center"><b>Table 3.2</b> State table for the <font
face="Arial"><i>DatePanel</i></font> STD in Figure 3.9.</p>

<p>The single state on the STD and the minimal pre-conditions in
the state table suggest again that the interface should be simple
and intuitive to use. Transition 1 occurs when a <i>date&nbsp;panel</i>
is first shown and generates an <font size="2" face="Arial">ActionEvent</font>
as it is configured for some specified initial date. </p>

<p>Transition 2 is taken when the user selects a different year
either by selecting a different century, or a different decade,
or a different year. The consequence of this transition is for
the <i>day&nbsp;panel</i> to reconfigure itself to indicate the
pattern of days in the year and month now selected. Transition 3
is essentially identical but is triggered by the user choosing a
different month from the <i>month&nbsp;choice</i> option menu. </p>

<p>The reconfiguration of the day panel results in the <i>day&nbsp;box</i>es
within it being changed to indicate the pattern of days in the
current month and year indicated by the year choice and month
choice components. For example, in Figure 3.6 thirty one days are
laid out starting at the rightmost box on the top row, whereas in
Figure 3.7 only twenty nine days are laid out starting at the
third box from the left on the top row. Whatever the
configuration a box containing a day number is regarded as an <i>active</i>
box and a blank box is regarded as an <i>inactive</i> box.</p>

<p>Transition 4 occurs when the user moves the mouse pointer
outside the scope of the day&nbsp;box which is currently bordered
and results in that box becoming unbordered. Transition 5 occurs
when the mouse pointer moves into the scope of an active box and
results in it becoming bordered. The border is the thin rectangle
surrounding the day number and is provided to confirm to the user
the day currently primed for selection, which might not always be
obvious from the location of the pointer. The use of two distinct
transitions for this behavior implies that if the mouse pointer
is ever outside the scope of any of the active boxes then none of
the day boxes will be bordered. </p>

<p>Transition 6 can only occur when the mouse pointer is within
an active box and is triggered by a mouse button up event. It
results in the highlight being moved from the currently
highlighted day to the day which triggered the mouse up event.
Unlike the bordering of a day box one, and only one, day box must
always be highlighted and is shown as a thick rectangle
surrounding the day number. </p>

<p>The four transitions which result in the currently indicated
date being changed, 1, 2, 3 and 6, also have the consequence of
generating an <font size="2" face="Arial">actionEvent</font>. A
client of this component can intercept this event and handle it
in order to inform the other parts of the interface that the date
indicated by the user has changed. This will be illustrated in
the demonstration client below. </p>

<hr>

<blockquote>
    <p><b><i>Design Advice</i></b> </p>
    <p>It is better to prevent the user from making 'errors' than
    to allow them to make 'errors' and have to 'correct' them. </p>
</blockquote>

<hr>

<blockquote>
    <p><a href="code3\datepaneldemo.html"><font size="5"><img
    src="run.gif" align="middle" border="0" width="40"
    height="27"> DatePanelDemonstration</font></a></p>
</blockquote>

<hr>

<blockquote>
    <p><a href="c38.html"><font size="2"><img src="next.gif"
    align="middle" border="0" width="50" height="40"></font><font
    size="5">3.8 The</font><font size="6"> </font><font size="5"
    face="Arial"><i>DatePanel</i></font><font size="5"> design
    overview</font></a></p>
    <p><a href="c36.html"><font size="4"><img src="last.gif"
    align="middle" border="0" width="50" height="40"></font><font
    size="5">3.6 The </font><font size="5" face="Arial"><i>MessageCanvas</i></font><font
    size="4"> </font><font size="5">class</font></a></p>
</blockquote>

<hr>
</body>
</html>
