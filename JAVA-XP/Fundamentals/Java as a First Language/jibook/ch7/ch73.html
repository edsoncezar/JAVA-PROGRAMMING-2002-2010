<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPad 2.0">
<title> The BasicPump design </title>
</head>

<body bgcolor="#FFFFFF">

<h1 align="center">7.3 The <font size="5" face="Arial"><i>TextMenuTuttleInterface</i></font><font
size="2" face="Arial"><i> </i></font></h1>

<p>The <font size="2" face="Arial"><i>TextMenuTuttleInterface</i></font>
class supplies the part of the interface shown at the bottom of
Figure 7.2, consisting of a single non-editable <font size="2"
face="Arial">TextArea</font> instance. The implementation of this
class, as far as the end of its constructor, is as follows.</p>

<pre><font size="3">0001  // Filename <i>TextMenuTuttleInterface.java</i>.
0002  // Supplies text menu interface for a Tuttle.
0003  //
0004  // Written for Java Interface book chapter 7.
0005  // Fintan Culwin, v 0.2, August 1997.
0006  
0007  <b>package</b> <i>TextMenuTuttle</i>;
0008  
0009  <b>import</b> java.awt.*;
0010  <b>import</b> java.applet.*;
0011  <b>import</b> java.awt.event.*;
0012  
0013  
0014  <b>class</b> <i>TextMenuTuttleInterface</i> <b>extends</b> Panel {   
0015  
0016  <b>protected static final int</b> <i>TOP_LEVEL_MENU</i>        = 0;
0017  <b>protected static final int</b> <i>MOVE_MENU</i>             = 1; 
0018  <b>protected static final int</b> <i>MOVE_FORWARD_MENU</i>     = 2; 
0019  <b>protected static final int</b> <i>MOVE_BACKWARD_MENU</i>    = 3; 
0020  <b>protected static final int</b> <i>TURN_MENU</i>             = 4; 
0021  <b>protected static final int</b> <i>TURN_LEFT_MENU</i>        = 5;
0022  <b>protected static final int</b> <i>TURN_RIGHT_MENU</i>       = 6;  
0023  <b>protected static final int</b> <i>COLOR_MENU</i>            = 7;
0024  <b>protected static final int</b> <i>FOREGROUND_COLOR_MENU</i> = 8;
0025  <b>protected static final int</b> <i>BACKGROUND_COLOR_MENU</i> = 9;
0026  <b>protected static final int</b> <i>PEN_MENU</i>              = 10;
0027  <b>protected static final int</b> <i>SCREEN_MENU</i>           = 11;
0028  <b>protected static final int</b> <i>HELP_MENU</i>             = 12;
0029  <b>protected static final int</b> <i>EXIT_MENU</i>             = 13;
0030  
0031  <b>private int</b>                <i>menuState</i>             = <i>TOP_LEVEL_MENU</i>;
0032  
0033  <b>private</b> <i>TextArea</i> <i>menuArea</i>;
0034  
0035     <b>protected</b> <i>TextMenuTuttleInterface</i>( KeyListener <i>itsListener</i>) { 
0036                               
0037        <i>menuArea</i>  = <b>new</b> TextArea( 5, 60);
0038        <i>menuArea</i>.setEditable( <b>false</b>);
0039        <i>menuArea</i>.addKeyListener( <i>itsListener</i>);
0040         
0041        <b>this</b>.add( <i>menuArea</i>);      
0042     } // End <i>TextMenuTuttleInterface </i>constructor.   </font></pre>

<p>The class declaration, on line 0014, indicates that it extends
the <font size="2" face="Arial">Panel</font> class. It commences,
on lines 0016 to 0029, with the declaration of fourteen <font
size="2" face="Arial"><b>protected</b></font> manifest values to
represent the possible states of the interface and, on line 0031,
an instance attribute called <font size="2" face="Arial"><i>menuState</i></font>
to record the state of the menu. The intention is that the <font
size="2" face="Arial"><i>menuState</i></font> attribute will
always reflect the menu which the interface is currently showing.
Two <font size="2" face="Arial"><b>protected</b></font> methods, <font
size="2" face="Arial"><i>setMenuState()</i></font> and <font
size="2" face="Arial"><i>menuStateIs()</i></font> are provided to
support the use of this attribute. As these resources are
protected they can be seen by the only other class in the
package, the <font size="2" face="Arial"><i>textMenuTuttle</i></font>
class, nut are invisible outside the package. The use which the <font
size="2" face="Arial"><i>textMenuTuttle</i></font> class makes of
this knowledge will be described below. </p>

<p>The constructor, on lines 0035 to 0042, creates a non-editable
<font size="2" face="Arial">TextArea</font> instance, called <font
size="2" face="Arial"><i>menuArea</i></font>, with 5 rows and 60
columns, and registers the <font size="2" face="Arial">KeyListener</font>
instance, <font size="2" face="Arial"><i>itsListener</i></font>,
passed as an argument as its <font size="2" face="Arial">KeyListener</font>
attribute. This will cause the appropriate methods in <font
size="2" face="Arial"><i>itsListener</i></font> to be called as
the user operates the keyboard. The constructor concludes by
adding the <font size="2" face="Arial"><i>menuArea</i></font>
instance into itself as its only instance child. The
implementation of the <font size="2" face="Arial"><i>setMenuState()</i></font>
method<i> </i>is as follows. </p>

<pre><font size="3">0046     <b>protected void</b> <i>setMenuState</i>( <b>int</b> <i>newState</i>) { 
0047  
0048        <i>menuState</i> = <i>newState</i>;
0049        
0050        <b>switch</b>( <i>menuState</i>) { 
0051           <b>case</b> <i>TOP_LEVEL_MENU</i>:
0052              <i>menuArea</i>.setText( <i>topLevelMenu</i>);
0053              <b>break</b>;
0054              
0055           <b>case</b> <i>MOVE_MENU</i>:             
0056              <i>menuArea</i>.setText( <i>topLevelMenu</i> + <i>moveMenu</i>);                    
0057              <b>break</b>;
0058              
0059           <b>case</b> <i>MOVE_FORWARD_MENU</i>:             
0060              <i>menuArea</i>.setText( <i>topLevelMenu</i> + <i>moveMenu</i> + <i>movefMenu</i>);                               
0061              <b>break</b>;

<b>----           // Other cases omitted.

</b>0103           <b>case</b> <i>EXIT_MENU</i>:      
0104              <i>menuArea</i>.setText( <i>topLevelMenu</i> + <i>exitMenu</i>);                                           
0105              <b>break</b>;                                   
0106           } // End switch.            
0107     } // End <i>setMenuState</i>.</font></pre>

<p>The method commences, on line 0048, by setting the value of <font
size="2" face="Arial"><i>menuState</i></font> to the value of the
argument passed to the method in <i>newState</i>. It continues
with a multi-way switch structure containing a branch for each
possible menu state and, within each branch, calls the <font
size="2" face="Arial"><i>menuArea</i></font>'s <font size="2"
face="Arial"><i>setText()</i></font> method to cause the
appropriate menu to be shown to the user. To accomplish this a
number of <font size="2" face="Arial">String</font>s are declared
at the end of the class, for example the <font size="2"
face="Arial">String</font>s referred to in the fragment above are
declared as follows. </p>

<pre><font size="3">0115  <b>private static final</b> String <i>topLevelMenu</i>       =  
0116                 &quot;  Move Turn Colors Pen Screen Help Exit&quot;;
0117  <b>private static final</b> String <i>moveMenu</i>       =  
0118                 &quot;\n    Move: Forwards Backwards&quot;;
0119  <b>private static final</b> String <i>movefMenu</i>      =  
0120                 &quot;\n        Move Forwards: 5 10 25 &quot;;

<b>----           // Other cases omitted.

</b>0141  <b>private static final</b> String <i>exitMenu</i>       =  
0142                 &quot;\n    Exit: Yes No&quot;;                                                             
0143  } // End class <i>TextMenuTuttleInterface</i>.</font></pre>

<p>Thus on line 0060 as the interface moves into the <font
size="1" face="Arial"><i>MOVE_FORWARD_MENU </i></font>state, the
three strings on lines 0116, 0118 and 0120 are catenated together
and displayed in the <font size="2" face="Arial"><i>menuArea</i></font>
to produce the appearance shown in the lower illustration from
Figure 7.3. The only other method of this class is the inquiry
method <font size="2" face="Arial"><i>menuStateIs()</i></font>,
whose implementation is as follows. </p>

<pre><font size="3">0110     <b>protected int</b> <i>menuStateIs</i>() {    
0111        <b>return</b> <i>menuState</i>;   
0112     } // End <i>menuStateIs</i>.</font></pre>

<p><font size="3"></font>&nbsp;</p>

<hr>

<blockquote>
    <p><a
    href="..\tuttles\textmenututtle\textmenututtleinterface.java"><font
    size="5"><img src="list.gif" align="middle" border="0"
    width="40" height="35"> TextMenuTuttleInterface.java</font></a></p>
</blockquote>

<hr>

<blockquote>
    <p><a href="ch74.html"><img src="next.gif" align="middle"
    border="0" width="50" height="40"><font size="5">7.4 The </font><font
    size="4" face="Arial"><i>TextMenuTuttle</i></font><font
    size="4"> </font><font size="5">class</font></a></p>
    <p><a href="ch72.html"><font size="4"><img src="last.gif"
    align="middle" border="0" width="50" height="40"></font><font
    size="5">7.2 The </font><font size="4" face="Arial"><i>TextMenuTuttle</i></font><font
    size="4"> </font><font size="5">interface</font></a></p>
</blockquote>

<hr>
</body>
</html>
