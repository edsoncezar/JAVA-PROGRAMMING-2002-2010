<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPad 2.0">
<title> 1.4 The ClickCounterPresentation class </title>
</head>

<body bgcolor="#FFFFFF">

<h1 align="center">1.4 The <font size="5" face="Arial"><i>ClickCounterPresentation</i></font><font
size="6"> class</font></h1>

<p>The most obvious of the three classes is the <font size="2"
face="Arial"><i>ClickCounterPresentation</i></font> class and so
will be described first. The class diagram of the <font size="2"
face="Arial"><i>ClickCounterPresentation</i></font> class is
given in Figure 1.9. </p>

<p align="center"><img src="fig19.gif" width="432" height="434"></p>

<p align="center"><font size="2"><b>Figure 1.9</b> </font><font
size="2" face="Arial"><i>ClickCounterPresentation</i></font><font
size="2"> class diagram.</font></p>

<p>The diagram indicates that the class encapsulates the four
visual components illustrated on the state transition diagram in
Figure 1.5: the <font size="2" face="Arial"><i>valueDisplay</i></font>,
the <font size="2" face="Arial"><i>incrementButton</i></font>,
the <font size="2" face="Arial"><i>resetButton</i></font> and the
<font size="2" face="Arial"><i>decrementButton</i></font>. The <font
size="2" face="Arial"><i>ClickCounterPresentation</i></font>
constructor is responsible for creating these components and
mounting them within the <font size="2" face="Arial"><i>ClickCounterTranslation</i></font>
instance's window, identified as <font size="2" face="Arial"><i>itsApplet</i></font>,
passed as an argument. The <font size="2" face="Arial"><i>setValueDisplay()</i></font>
method will change the value shown in the <font size="2"
face="Arial"><i>valueDisplay</i></font> to that passed in its <font
size="2" face="Arial"><i>setTo</i></font> argument. The three
remaining methods: <font size="2" face="Arial"><i>setMaximumState(),
setCountingState()</i></font> and <font size="2" face="Arial"><i>setMinimumState()</i></font>
are all concerned with setting the sensitivities of the three
buttons as required by the STD.</p>

<p>In order for the constructor to be implemented the detailed
visual design of the application's interface has to be produced.
The visual appearance of the <font size="2" face="Arial"><i>ClickCounter</i></font>
interface, identifying the names of the components, is
illustrated in Figure 1.10.</p>

<p align="center"><img src="fig110.gif" width="541" height="163"></p>

<p align="center"><font size="2"><b>Figure 1.10</b> The </font><font
size="2" face="Arial"><i>ClickCounter</i></font><font size="2">
interface - physical appearance.</font></p>

<p>This diagram indicates that the interface will require four
obvious components: the three <font size="2" face="Arial">Button</font>s
at the bottom and the <font size="2" face="Arial"><i>valueDisplay</i></font>
at the top. What is not so obvious is that there is also an area
upon which these components are mounted, the <font size="2"
face="Arial">Applet</font>'s area. Even less obviously the
buttons will have to be mounted upon their own area and the <font
size="2" face="Arial"><i>valueDisplay</i></font> upon its own
area, both of which are subsequently mounted on the <font
size="2" face="Arial">Applet</font>'s area. The reasons for these
seemingly convoluted considerations are concerned with
controlling the layout of the application and a full explanation
will be given in Chapter&nbsp;3. </p>

<p>In Chapter 2 a description and an illustration of every simple
user interface component which is supplied by Java will be given.
For the time being the reasons why some of the following
decisions have been made will have to be taken largely on trust. </p>

<p>The area upon which all other components are mounted will be
the application object itself which is an extended <font size="2"
face="Arial">Applet</font> component. The two areas upon which
the <font size="2" face="Arial"><i>valueDisplay</i></font> and
the buttons are mounted will be <font size="2" face="Arial">Panel</font>
objects. The <font size="2" face="Arial"><i>valueDisplay</i></font>
will be implemented as a <font size="2" face="Arial">Label</font>
object and the three buttons <font size="2" face="Arial">Button</font>
objects. The relationships between these components is given in
Figure 1.11. </p>

<p align="center"><font size="2"><b><img src="fig111.gif"
width="650" height="239"></b></font></p>

<p align="center"><font size="2"><b>Figure 1.11</b> The
application instance component hierarchy.</font></p>

<p>A diagram such as this, which illustrates the <i>parent/&nbsp;child</i>
relationships of the component instances required to construct an
interface, is known as an <i>instance&nbsp;component&nbsp;hierarchy</i>.
When the application is constructed it will have to create each
of the components and connect them together using the
relationships shown. </p>

<p>The root of the hierarchy, at the top of the diagram, is
identified as <font size="2" face="Arial"><i>itsApplet</i></font>
and is shown to be an instance of the <font size="2" face="Arial"><i>ClickCounterTranslation</i></font>
class, passed to the <font size="2" face="Arial"><i>ClickCounterPresentation</i></font>
constructor as an argument. The implementation of the <font
size="2" face="Arial"><i>ClickCounterPresentation</i></font>
class, as far as the start of the constructor, is as follows. </p>

<pre><font size="2">0001  // Filename ClickCounterPresentation.java.
0002  // Provides an interactive interface for the ClickCounter
0003  // class. Written for the Java Interface book Chapter 1.
0004  //
0005  // Fintan Culwin, v 2.0, August 1997.
0006  
0007  <b>import</b> java.awt.*;
0008  <b>import</b> java.applet.*;
0009  <b>import</b> java.awt.event.*;
0010  
0011  
0012  <b>public class</b> <i>ClickCounterPresentation</i> <b>extends</b> Object {
0013  
0014  <b>private</b> Button  <i>incrementButton</i>;
0015  <b>private</b> Button  <i>resetButton</i>;
0016  <b>private</b> Button  <i>decrementButton</i>;
0017  <b>private</b> Label   <i>valueDisplay</i>;</font></pre>

<p>The classes <font size="2" face="Arial"><b>import</b></font>ed
on lines 0007 to 0009 are required to provide easy access to the <font
size="2" face="Arial">AWT</font>, <font size="2" face="Arial">Applet</font>
and <font size="2" face="Arial">event</font> facilities
respectively. On lines 0014 to 0017 the four interface objects
identified from the instance hierarchy in Figure 1.11 are
declared, but not constructed. As indicated in Figure 1.7, the
interactive interface components, in this interface the three <font
size="2" face="Arial">Button</font>s, need to know the identity
of the object which will listen to the events which they
generate. In this implementation this will be the client program
object which, as noted in Figure 1.8, implements the <font
size="2" face="Arial">ActionListener</font> interface to allow it
to do this. The source code implementing the <font size="2"
face="Arial"><i>ClickCounterPresentation</i></font> continues
with the constructor, as follows. </p>

<pre><font size="2">0022     <b>public</b> <i>ClickCounterPresentation</i>( <i>ClickCounterTranslation</i> <i>itsApplet</i>) {
0023  
0024     Panel <i>valuePanel</i>   = <b>new</b> Panel();
0025     Panel <i>controlPanel</i> = <b>new</b> Panel();
0026  
0027        <i>itsApplet</i>.setLayout( <b>new</b> GridLayout(2, 1, 10, 10));
0028  
0029        <i>valueDisplay</i> = <b>new</b> Label();
0030        <i>valuePanel</i>.add( <i>valueDisplay</i>);
0031        <i>itsApplet</i>.add( <i>valuePanel</i>);
0032  
0033        <i>incrementButton</i> = <b>new</b> Button( &quot;+&quot;);
0034        <i>incrementButton</i>.setActionCommand( &quot;increment&quot;);
0035        <i>incrementButton</i>.addActionListener( <i>itsApplet</i>);
0036        
0037        <i>resetButton</i> = <b>new</b> Button( &quot;0&quot;);
0038        <i>resetButton</i>.setActionCommand( &quot;reset&quot;);
0039        <i>resetButton</i>.addActionListener( <i>itsApplet</i>);
0040        
0041        <i>decrementButton</i> = <b>new</b> Button( &quot;-&quot;);
0042        <i>decrementButton</i>.setActionCommand( &quot;decrement&quot;);
0043        <i>decrementButton</i>.addActionListener( <i>itsApplet</i>);
0044        
0045        <i>controlPanel</i>.add( <i>incrementButton</i>);
0046        <i>controlPanel</i>.add( <i>resetButton</i>);
0047        <i>controlPanel</i>.add( <i>decrementButton</i>);
0048        <i>itsApplet</i>.add( <i>controlPanel</i>);      
0049     } // End <i>ClickCounterPresentation</i> constructor.</font></pre>

<p>The two remaining components from the instance diagram in
Figure 1.11, the <font size="2" face="Arial"><i>valuePanel</i></font>
and the <font size="2" face="Arial"><i>controlPanel</i></font>,
are declared and constructed on lines 0023 and 0025. Knowledge of
these components is only required as the interface is constructed
and so, in accordance with the principle of keeping declarations
as limited as possible, they are provided as local declarations
of the constructor. Although these variables will be destroyed
when the call of the constructor finishes the <font size="2"
face="Arial">Panel</font>s which they reference will continue to
exist within the application's interface until it is destroyed,
when the applet is destroyed. </p>

<p>The <font size="2" face="Arial">Applet</font> class is an
extension of the <font size="2" face="Arial">Panel</font> class,
and the <font size="2" face="Arial">Panel</font> class is an
extension of the <font size="2" face="Arial">Container</font>
class. The <font size="2" face="Arial">Container</font> class
introduces the capability to control the layout of its instance
children into the AWT hierarchy. Thus <font size="2" face="Arial">Panel</font>
and <font size="2" face="Arial">Applet</font> instances are
extended <font size="2" face="Arial">Container</font> instances
and so inherit the capability to position their children. The
relationships between the components in the AWT hierarchy, and
their capabilities, will be explained in detail in the two
following chapters.</p>

<p>There are several different possible policies for controlling
the positioning of a <font size="2" face="Arial">Container</font>'s
children, and the <font size="2" face="Arial">Container.setLayout()</font>
method can be used to indicate which style of <i>layout control</i>
is to be used. On line 0027 the <font size="2" face="Arial">setLayout()</font>
method of the extended <font size="2" face="Arial">Applet</font>
instance, passed as an argument to the constructor, is specified
as a <font size="2" face="Arial">GridLayout</font>. The arguments
to the <font size="2" face="Arial">GridLayout</font> constructor
indicate that it can contain two children in a 2 row by 1 column
pattern, each separated from each other by 10 pixels in the
horizontal and vertical directions. </p>

<p>The default layout for a <font size="2" face="Arial">Panel</font>
is a <font size="2" face="Arial">FlowLayout</font> where the
child components are laid out from left to right in the order in
which they are added to the parent, and centered within the
available space. As this layout is suitable for the <font
size="2" face="Arial"><i>valueDisplay</i></font> and for the
three buttons the <font size="2" face="Arial">setLayout()</font>
method of the <font size="2" face="Arial"><i>valuePanel</i></font>
and <font size="2" face="Arial"><i>controlPanel</i></font> <font
size="2" face="Arial">Panel</font>s need not be called. </p>

<p>On line 0029 an instance of the AWT <font size="2"
face="Arial">Label</font> class is constructed and assigned to
the instance attribute <font size="2" face="Arial"><i>valueDisplay</i></font>.
The constructor does not specify the text which it is to display
although an initial text will be supplied before it becomes
visible, as will be explained below. On line 0030 the <font
size="2" face="Arial"><i>valueDisplay</i></font> <font size="2"
face="Arial">Label</font> is added to the <font size="2"
face="Arial"><i>valuePanel</i></font> using its <font size="2"
face="Arial"><i>add()</i></font> method, establishing the parent
child relationship shown on the instance hierarchy in Figure
1.11. Once this has been accomplished, the <font size="2"
face="Arial"><i>valuePanel</i></font> is added to <font size="2"
face="Arial"><i>itsApplet</i></font> parent, to establish the
relationship between the <font size="2" face="Arial"><i>valuePanel</i></font><i>
</i>and <font size="2" face="Arial"><i>itsApplet</i></font> also
shown on the instance hierarchy diagram. The children of a <font
size="2" face="Arial">Container</font> which has a <font size="2"
face="Arial">GridLayout</font> style are positioned in a
left-right, top-down manner in the sequence in which they are
added. Thus the <font size="2" face="Arial"><i>valuePanel</i></font>
will placed at the top of <font size="2" face="Arial"><i>itsApplet</i></font>'s
window as required by the visual design shown in Figure 1.10. </p>

<p>On line 0033 the <font size="2" face="Arial"><i>incrementButton</i></font>
is constructed, the argument to the <font size="2" face="Arial">Button</font>
constructor specifying the text (&quot;+&quot;) which it is to
display. Once constructed, on line 0034, the <font size="2"
face="Arial">actionCommand</font> resource of this <font size="2"
face="Arial">Button</font> instance is specified as &quot;<i>increment</i>&quot;
and on line 0035 the <font size="2" face="Arial">actionListener</font>
resource is specified as <font size="2" face="Arial"><i>itsApplet</i></font>.
The <font size="2" face="Arial">actionListener</font> resource,
specified by using the <font size="2" face="Arial"><i>addActionListener()</i></font>
method, determines which object events generated by the <font
size="2" face="Arial">Button</font> will be sent to. As all three
of the buttons in this example will be using the same <font
size="2" face="Arial">ActionListener</font> destination the <font
size="2" face="Arial">actionCommand</font> resource, specified by
using the <font size="2" face="Arial">setActionCommand()</font>
method, is required to indicate exactly which of the buttons was
pressed. </p>

<p>On lines 0037 to 0039 a similar sequence of steps constructs
and configures the <font size="2" face="Arial"><i>resetButton</i></font>
and on lines 0041 to 0043 the same is done for the <font size="2"
face="Arial"><i>decrementButton</i></font>. Having constructed
all three buttons they are added to the <font size="2"
face="Arial"><i>controlPanel</i></font> on lines 0045 to 0047. A <font
size="2" face="Arial">Panel</font> has by default a <font
size="2" face="Arial">FlowLayout</font> layout policy which will
position its children centrally from left to right in the
sequence in which they are added. Finally, on line 0048 the <font
size="2" face="Arial"><i>controlPanel</i></font> is then added to
the <font size="2" face="Arial"><i>itsApplet</i></font> taking up
the second cell below the <font size="2" face="Arial"><i>valuePanel</i></font>
which has already been added. These layout relationships are
illustrated in Figure 1.12.</p>

<p align="center"><font size="2"><b><img src="fig112.gif"
width="592" height="211"></b></font></p>

<p align="center"><font size="2"><b>Figure 1.12 </b>Layout
management of the </font><font size="2" face="Arial"><i>ClickCounter
</i></font><font size="2">application.</font></p>

<p>The remaining methods of the <font size="2" face="Arial"><i>ClickCounterPresentation</i></font>
class are concerned with changing the appearance of the interface
in response to the user's actions, and as it moves between
states. The implementation of these methods is as follows. </p>

<pre><font size="2">0056     <b>public void</b> <i>setValueDisplay</i>( String <i>setTo</i>) { 
0057        <i>valueDisplay</i>.setText( <i>setTo</i>);
0058     } // End <i>setValueDisplay</i>.
0059  
0060  
0061     <b>public void</b> <i>setMinimumState</i>() {
0062        <i>incrementButton</i>.setEnabled( <b>true</b>); 
0063        <i>resetButton</i>.setEnabled( <b>false</b>); 
0064        <i>decrementButton</i>.setEnabled( <b>false</b>); 
0065     } // End <i>setMinimumState</i>.
0066  
0067     <b>public void</b> <i>setCountingState</i>() {
0068        <i>incrementButton</i>.setEnabled( <b>true</b>); 
0069        <i>resetButton</i>.setEnabled( <b>true</b>); 
0070        <i>decrementButton</i>.setEnabled( <b>true</b>); 
0071     } // End <i>setCountingState</i>.
0072  
0073     <b>public void</b> <i>setMaximumState</i>() {
0074        <i>incrementButton</i>.setEnabled( <b>false</b>); 
0075        <i>resetButton</i>.setEnabled( <b>true</b>);
0076        <i>decrementButton</i>.setEnabled( <b>true</b>);
0077     } // End <i>setMaximumState</i>.
0078  
0079  } // End class <i>ClickCounterPresentation</i>.</font></pre>

<p>The <font size="2" face="Arial"><i>setValueDisplay()</i></font>
method uses the <font size="2" face="Arial"><i>valueDisplay</i>
setText()</font> method to set the text displayed by the <font
size="2" face="Arial">Label</font> to that supplied in the <font
size="2" face="Arial"><i>setTo</i></font> argument. The three
remaining methods use the <font size="2" face="Arial"><i>setEnabled()</i></font>
method of each <font size="2" face="Arial">Button</font> instance
to ensure that the button is enabled (<font size="2" face="Arial">true</font>)
or disabled (<font size="2" face="Arial">false</font>) as
required by the state transition diagram in Figure 1.5.</p>

<hr>

<blockquote>
    <p><a href="clickcounterpresentation.java"><font size="4"><img
    src="list.gif" align="middle" border="0" width="40"
    height="35"> ClickCounterPresentation.java</font></a></p>
</blockquote>

<hr>

<blockquote>
    <p><a href="chap15.html"><img src="next.gif" align="middle"
    border="0" width="50" height="40"><font size="5">1.5 The </font><font
    size="4" face="Arial"><i>ClickCounterTranslation</i></font><font
    size="5"> class</font></a></p>
    <p><a href="chap13.html"><font size="4"><img src="last.gif"
    align="middle" border="0" width="50" height="40"></font><font
    size="5">1.3 Application, presentation and translation
    implementation</font></a><font size="5"> </font></p>
</blockquote>

<hr>
</body>
</html>
