<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>6.5 The <i>BasicMenu</i> <i>showMenu</i>() action, and its
supporting actions</title>

</head>

<body BGCOLOR="WHITE">

<h2>6.5 The <i>BasicMenu</i> <i>showMenu</i>() action, and its
supporting actions<br>
</h2>

<p>
The class diagram at the start of this chapter suggested that
there is a private action called <i>showMenu</i>() whose detailed
considerations would indicate that it has to display the menu
and set the values of the two instance data attributes, <i><font SIZE="2" FACE="Arial">minimumValidChoice</font></i>
and <i><font SIZE="2" FACE="Arial">maximumValidChoice</font></i>
appropriately. It does this by making use of some of the semi
public actions shown on the left of the class diagram.<br>

<p>
<center><img SRC="c6p5i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter6/c6p5i1.gif" WIDTH="727" HEIGHT="451"></center>
<p>
The basis of the design is to set the value of a local <b><font SIZE="2" FACE="Arial">char</font></b>acter
variable, called <i><font SIZE="2" FACE="Arial">thisOption</font></i>,
to 'A'; and initialise the value of <i><font SIZE="2" FACE="Arial">minimimOption</font></i>
to this value using the <i><font SIZE="2" FACE="Arial">setMinimiumOption</font></i>()
action. Then, after calling the <i><font SIZE="2" FACE="Arial">showTitle</font></i>()
action, each menu option is iteratively output by using the <i><font SIZE="2" FACE="Arial">showMenuLine</font></i>()
action before the value of <i><font SIZE="2" FACE="Arial">thisOption</font></i>
is incremented. Outside the loop the <i><font SIZE="2" FACE="Arial">setMaximumOption</font>()</i>
is called passing the value of <i><font SIZE="2" FACE="Arial">thisOption</font></i>
as its argument. The implementation of this design is as follows.
<br>

<pre>
0062   <b>private void</b> <i>showMenu</i>( ){
0063    
0064   <b>int</b>  <i>thisString</i>;
0065   <b>char</b> <i>thisOption</i> = 'A'; 
0066 
0067      <i>setMaximumOption</i>( <i>thisOption</i>);
0068 
0069      <i>showTitle</i>();
0070 
0071      <b>for</b> ( <i>thisString</i> = 0; 
0072            <i>thisString</i> &lt; <i>theOptions</i>.length;
0073            <i>thisString</i>++  ) { 
0074          <i>showMenuLine</i>( <i>thisOption</i>, <i>thisString</i>); 
0075          <i>thisOption</i>++;
0076      } // End for.  
0077 <i>     setMaximumOption</i>( --<i>thisOption</i>);
0078   } // End <i>showMenu</i>.  
</pre>

<p>
On line 0064 a local variable of type <b><font SIZE="2" FACE="Arial">int</font></b>
called <i><font SIZE="2" FACE="Arial">thisString</font></i> is declared
and will be used to count through the <b><font SIZE="2" FACE="Arial">for</font></b>
loop when the menu is output in exactly the same way as in the
constructor above. On line 0065 a second local variable of type
<b><font SIZE="2" FACE="Arial">char</font></b> called <i><font SIZE="2" FACE="Arial">thisOption</font></i>
is declared and initialised to 'A'. This variable will be used
to record the key for the current menu option. The <i><font SIZE="2" FACE="Arial">setMinimumOption</font>()</i>
is then<i> </i>called on line 0067 to set the value of the <i><font SIZE="2" FACE="Arial">minimumOption</font></i>
attribute to the value of <i><font SIZE="2" FACE="Arial">thisOption,</font></i>
effectively 'A'. The value of the <i><font SIZE="2" FACE="Arial">minimumOption</font></i>
attribute delineates the minimum acceptable choice which the user
can select from the menu. <br>

<p>
On line 0069 the <i><font SIZE="2" FACE="Arial">showTitle</font></i>()
action is called before the <b><font SIZE="2" FACE="Arial">for</font></b>
loop starts on line 0071. The construction of this loop is essentially
identical to that used in the constructor above. Within the body
of the loop a call of <i><font SIZE="2" FACE="Arial">showMenuLine</font></i>()
is made passing as arguments the values of <i><font SIZE="2" FACE="Arial">thisOption</font></i>
and of the loop index <i><font SIZE="2" FACE="Arial">thisString</font></i>.
The effect of <i><font SIZE="2" FACE="Arial">showMenuLine</font></i>(),
as will be explained below, is to output its first argument as
the menu key and use the second argument to indicate which option
is to be output as the menu element text. The effect of this call
is to output 'A' as the key and &quot;First choice&quot; as the
text.<br>

<p>
Before the loop body finishes the value <i><font SIZE="2" FACE="Arial">thisOption</font></i>
is incremented; just as the incrementation of an integer variable
caused it to take the next integer value in sequence, the incrementation
of a character variable causes it to take the next character value
in sequence. So as <i><font SIZE="2" FACE="Arial">thisOption</font></i>
had the value 'A' at the start of the first iteration it would
have the value 'B' after the first execution of line 0075. The
state of the instance attributes following the first iteration
of the loop including the end of loop actions of the <b><font SIZE="2" FACE="Arial">for</font></b>
statement, based upon the visualisations given above, is as shown
in Figure 6.5.<br>

<p>
<center><img SRC="c6p5i2.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter6/c6p5i2.gif" WIDTH="698" HEIGHT="190"></center>
<p>
<center>Figure 6.5. Variables and attributes during
<i>showMenu</i> iteration.</center>
<p>
The diagram shows the two local variables on the left and three
of the five instance variables on the right. The value of <i>maximumOption</i>
is shown as a null character (&nbsp;''&nbsp;) which is its known
default value. As the <b><font SIZE="2" FACE="Arial">for</font></b>
loop termination condition will evaluate <b><font SIZE="2" FACE="Arial">true</font></b>
(&nbsp;1&lt;3&nbsp;) the body of the loop will iterate for a second
time calling <i><font SIZE="2" FACE="Arial">showMenuLine</font></i>()
which will output the key 'B' and the &quot;Second choice&quot;
string before incrementing the value of the two local variables
to 2 and 'C' respectively.<br>

<p>
As the condition is still <b><font SIZE="2" FACE="Arial">true</font></b>
(&nbsp;2&lt;3&nbsp;) the loop will iterate for a third time outputting
'C' and &quot;Third choice&quot; before incrementing the two variables
to 3 and 'D'. At this point the <b><font SIZE="2" FACE="Arial">for</font></b>
loop will terminate as 3&lt;3 is <b><font SIZE="2" FACE="Arial">false</font></b>.
<br>

<p>
The next action on the design is a call of <i><font SIZE="2" FACE="Arial">setMaximumOption</font></i>()
which if it were simply passed the value of <i><font SIZE="2" FACE="Arial">thisOption</font></i>
would result in the upper limit of the range of valid options
being set to 'D', which is incorrect. Accordingly line 0077 passes
the decremented value as the argument. The effect of this operation
(&nbsp;<font SIZE="2" FACE="Arial">--<i>thisOption</i></font>&nbsp;)
is first to decrement the value of<i><font SIZE="2" FACE="Arial">
thisOption</font></i>, from 'D' to 'C', and then pass the resulting
value to <i><font SIZE="2" FACE="Arial">setMaximumOption</font></i>().
If it were mis-implemented as <i><font SIZE="2" FACE="Arial">setMaximumOption</font></i>(&nbsp;<i><font SIZE="2" FACE="Arial">thisOption</font></i><font SIZE="2" FACE="Arial">--)</font>,
the effect would be to first pass the value 'D' and then decrement
the value to 'C'. The first of these possibilities, <font SIZE="2" FACE="Arial">--<i>thisOption</i></font>,
is known as a pre-decrement operation; the second, <i><font SIZE="2" FACE="Arial">thisOption</font></i><font SIZE="2" FACE="Arial">--</font>,
as a post-decrement operation.<br>

<p>
The implementation of the <i><font SIZE="2" FACE="Arial">showMenu</font></i>()
action relies upon the implementation of the four semi-public
actions: <i><font SIZE="2" FACE="Arial">showTitle</font></i>(),
<i><font SIZE="2" FACE="Arial">showMenuLine</font></i>(), <i><font SIZE="2" FACE="Arial">setMinimumOption</font></i>()
and <i><font SIZE="2" FACE="Arial">setMaximumOption</font></i>.
The implementation of these actions is as follows.<br>

<pre>
0081   <b>protected void</b> <i>showTitle</i>(){  
0082      <b>if</b> ( <i>theTitle</i> != <b>null</b> ) {
0083            System.out.println( &quot;\t&quot; + <i>theTitle</i> + &quot;\n&quot;);
0084      } // End if.  
0085   } // end fun <i>showMenuOption</i>.
0086 
0087 
0088   <b>protected void</b> <i>showMenuLine</i>( <b>char</b> <i>menulabel</i>, <b>int</b> <i>menuText</i>){  
0089      System.out.println( <i>menulabel</i> + &quot;.   &quot; + <i>theOptions</i>[ <i>menuText</i>]);   
0090   } // end fun showMenuOption.
0091 
0092 
0093   <b>protected void</b> <i>setMinimumOption</i>( <b>char</b> <i>setTo</i>){ 
0094      <i>minimumOption</i> = <i>setTo</i>;
0095   } // end fun <i>setMinimumOption</i>.
0096   
0097 
0098   <b>protected void</b> <i>setMaximumOption</i>( <b>char</b> <i>setTo</i>){ 
0099      <i>maximumOption</i> = <i>setTo</i>;
0100   } // end fun <i>setMinimumOption</i>.<br>

</pre>

<p>
The <i><font SIZE="2" FACE="Arial">showTitle</font></i>() action
will only output a title for the menu if one has been set by the
constructor, otherwise it outputs nothing. The implementation
of <i><font SIZE="2" FACE="Arial">setMinimumOption</font></i>()
and <i><font SIZE="2" FACE="Arial">setMaximumOption</font></i><font SIZE="2" FACE="Arial">()
</font>is straightforward, setting the value of the appropriate
attribute from their single argument. The <i><font SIZE="2" FACE="Arial">showMenuLine</font></i>()
action has two arguments; the first is a <b><font SIZE="2" FACE="Arial">char</font></b>acter
called <i><font SIZE="2" FACE="Arial">menuLabel</font></i> which
is output directly as the label for the menu line. The second
argument, an <b><font SIZE="2" FACE="Arial">int</font></b>eger called
<i><font SIZE="2" FACE="Arial">menuText</font></i>, is used to index
into <i><font SIZE="2" FACE="Arial">theOptions</font></i> array
to obtain the text which is to be output on the line.<br>
<br>



<p>
<hr>
<h2>
<ul>
<a HREF="chap6p6.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter6/chap6p6.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
6.6. The <i>BasicMenu</i> <i>getValidatedMenuChoice</i>() action</a>.
<p>
<a HREF="chap6p4.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter6/chap6p4.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
6.4 The <i>BasicMenu</i> constructor</a>.
</ul>
</h2>
<hr>
</body>

</html>
&#26;