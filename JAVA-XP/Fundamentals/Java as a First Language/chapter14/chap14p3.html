<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>14.3 The Stack class</title>

</head>

<body BGCOLOR="WHITE">

<h2>14.3 The <i>Stack</i> class<br>
</h2>

<p>
The essential characteristic of a stack is that elements can only
be added to or removed from it at the front. Its behaviour can
be described as <i><b>l</b></i>ast <i><b>i</b></i>n <i><b>f</b></i>irst
<i><b>o</b></i>ut (<i><b>lifo</b></i>) as opposed to a queue which
would be <i><b>f</b></i>irst <i><b>i</b></i>n <i><b>f</b></i>irst
<i><b>o</b></i>ut (<i><b>fifo</b></i>). The action of adding an
element to a stack is commonly known as <i><b>push</b></i>ing
it onto the stack and the action of removing it <i><b>pop</b></i>ping.
Stacks usually also allow the first element on the stack to be
obtained without removing it, known as <i><b>peek</b></i>ing.
These actions are shown on the class diagram in Figure 14.5.<br>

<p>
<center><img SRC="c14p3i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p3i1.gif" WIDTH="389" HEIGHT="363">
</center>
<p>
As with the <i>Queue</i> class,
the <i>Stack</i> class can be
very simply implemented by making public a limited set of actions
from the <i>UnorderedList</i>
class, as follows. <br>

<pre>
0001  // Filename <i>Stack.java</i>.
0002  // A generic stack structure allowing elements of  
0003  // the specified class to be added and removed at   
0004  // the front only.
0005  //
0006  // Written for JFL book, chapter 14.
0007  // Fintan Culwin, v0.1, August 1997.
0008  
0009  <b>package</b> <i>Generics</i>;
0010  
0011  <b>import</b> <i>Generics.UnorderedList</i>;
0012  <b>import</b> <i>Generics.GenericException</i>;
0013  
0014  <b>import</b> java.util.NoSuchElementException;
0015  
0016  <b>public class</b> <i>Stack</i> <b>extends</b> <i>UnorderedList</i> { 
0017  
0018     <b>public</b> <i>Stack</i>( Class <i>theBaseClass</i>) { 
0019        <b>super</b>( <i>theBaseClass</i>);     
0020     } // end <i>Stack</i> constructor.
0021  
0022     <b>public void</b> <i>push</i>( Object <i>toAdd</i>) 
0023                       <b>throws</b> <i>GenericException</i> { 
0024        <b>super</b>.<i>addAtFront</i>( <i>toAdd</i>);   
0025     } // End add.   
0026     
0027     <b>public</b> Object <i>pop</i>()
0028                       <b>throws</b> NoSuchElementException {
0029        <b>return</b> <b>super</b>.<i>removeFromFront</i>();
0030     } // End <i>pop</i>.
0031     
0032     <b>public</b> Object <i>peek</i>()
0033                       <b>throws</b> NoSuchElementException {
0034        <b>return</b> <b>super</b>.<i>obtainFromFront</i>();
0035     } // End <i>peek</i>.   
0036    
0037  } // End <i>Stack</i>.<br>

</pre>

<p>
Possible applications of stacks are less common and tend to be
more technical than those of queues. The demonstration harness
will illustrate one possible use, converting a stream of digits
into an integer value. When the user types an integer value at
the keyboard the meaning of the first digit cannot be known until
all the digits have been received. For example if the user types
the character '1', this might indicate 1 if it is the only digit,
alternatively it might indicate 10 if the full sequence is '10',
or 100 if the sequence is '100', etc. To accomplish this all digit
characters are pushed onto the stack as they are received, until
the sequence is terminated with a non-digit character.<br>

<p>
At this point it is known that the first digit popped from the
stack will indicate the units, the next will indicate the tens
and the next the hundreds, etc. A design to illustrate this is
as follows. <br>

<p>
<center><img SRC="c14p3i2.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p3i2.gif" WIDTH="715" HEIGHT="624">
</center>
<p>
The first part of this design inputs characters from the system
input stream until a non-digit character is input, or an input-output
exception is thrown. As each character is obtained it is tested
and, so long as it is a digit, pushed onto the stack. The implementation
of this part of the design is as follows. <br>

<pre>
0001  // Filename <i>StackDemo.java</i>.
0002  // Demonstration harness for the <i>Stack</i> class, 
0003  // pushing a sequence of digits onto a stack and 
0004  // subsequently popping and converting them into 
0005  // an integer value. 
0006  //
0007  // Written for JFL book, Chapter 14.
0008  // Fintan Culwin, v0.1, August 1997.
0009  
0010  <b>import</b> <i>Generics.Stack</i>;
0011  <b>import</b> <i>Generics.GenericException</i>;
0012  
0013  <b>import</b> java.lang.Character;
0014  <b>import</b> java.io.*;
0015  
0016  <b>class</b> <i>StackDemo</i> {
0017  
0018    <b>public static void</b> <i>main</i>(String <i>args</i>[]) {
0019      
0020    Character <i>demoChar</i>   = <b>new</b> Character( 'a');
0021    <b>char</b>      <i>aCharacter</i> = '0';  
0022    <i>Stack</i>     <i>demoStack</i> = <b>new</b> <i>Stack</i>( <i>demoChar</i>.getClass());
0023    <b>int</b>       <i>place</i>;
0024    <b>int</b>       <i>result</i>;
0025    
0026    
0027       System.out.println( &quot;\tStack Demonstration Program\n\n&quot;);
0028       System.out.print( &quot;Please enter an integer value : &quot;);
0029       System.out.flush();
0030            
0031       <b>while</b> ( Character.isDigit( <i>aCharacter</i>)) { 
0032          <b>try</b> { 
0033            <i>aCharacter</i> = (<b>char</b>) System.in.read();
0034            <b>if</b> (  Character.isDigit( <i>aCharacter</i>)) {
0035               <i>demoChar</i> = new Character( <i>aCharacter</i>); 
0036               <i>demoStack</i>.<i>push</i>( <i>demoChar</i>);
0037            } // end if.
0038          } <b>catch</b> (IOException <i>exception</i>) { 
0039            <i>aCharacter</i> = ' ';
0040          } // End try/ catch.  
0041       } // End while.<br>

</pre>

<p>
A <i>Stack</i> called <i>demoStack</i>
is constructed on line 0022 using an instance of the Character
class to supply a Class description.
A <i>Stack</i> can only contain
classes which are, directly or indirectly, extended from the Object
class. The primitive <b>char</b>
type is not a class and so cannot be used. Instead an instance
of the Character class, called
<i>demoChar</i>, is constructed
from a simple <b>char</b> literal
on line 0020 and used in the call of the constructor.<br>

<p>
The iteration between lines 0031 and 0041 obtains a character
from the raw data input stream System.in
on line 0033 using its read()
action. This action returns an <b>int</b>eger
value which is cast to a <b>char</b>
and assigned to the <b>char</b>
variable <i>aCharacter</i>. The
class wide Character IsDigit()
enquiry action is then used to guard a call of the <i>demoStack</i>
<i>push()</i> action on line
0036. Again a primitive <b>char</b>
cannot be used so on line 0035 an instance of the Character
class, called <i>demoChar</i>,
is constructed from the value of the primitive <i>aCharacter</i>
variable. It is possible, though unlikely, that the read()
action may throw a non-runtime IOException
and so a <b>try</b>/&nbsp;<b>catch</b>
structure is used to detect this and terminates the loop by setting
the value of <i>aCharacter</i>
to a space.<br>

<p>
The design of the remaining part of the program is as follows.
<br>

<p>
<center><img SRC="c14p3i3.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p3i3.gif" WIDTH="898" HEIGHT="499">
</center>
<p>
Assuming that the <i>Stack</i>
is not empty, the conversion commences by showing the contents
of the <i>Stack</i> and setting
the variables <i>place</i> to
1 and <i>result</i> to 0. The
iteration then <i>pop</i>s each digit from the stack, converts
it to its corresponding integer value, multiplies it by the value
of <i>place</i> and adds it to
<i>result</i>. On each iteration
the value of <i>place</i> is
multiplied by 10, so that the first digit popped is multiplied
by 1, the second by 10, the third by 100, etc. The final action
of the loop is to output the current digit and the current value
of result. The implementation of this design is as follows. <br>

<p>
<pre>
0044       <b>if</b> ( <i>demoStack.isEmpty</i>()) { 
0045          System.out.println( &quot;The stack is empty!&quot;);
0046       } <b>else</b> {      
0047          System.out.println( &quot;Thank you, the stack contains&quot;);
0048          System.out.println( <i>demoStack</i>);
0049        
0050          System.out.println( &quot;\nConverting to integer and outputting&quot;); 
0051          <i>place</i>   = 1;
0052          <i>result</i>  = 0;
0053          <b>while</b> ( !<i>demoStack</i>.<i>isEmpty</i>()){
0054             <i>demoChar</i> = (Character) <i>demoStack.pop</i>();
0055             <i>result</i> += (<i>demoChar</i>.charValue() - '0') * <i>place</i>;
0056             <i>place</i> *= 10;
0057             System.out.println( &quot;Popped &quot; + <i>demoChar</i> +
0058                                 &quot; value so far &quot; + <i>result</i> + &quot;.&quot;);   
0059          } // End while.
0060       } // End if.   
0061    } // End main.<br>

</pre>

<p>
On line 0054 the <i>pop()</i>
action will return a value of the Object
class which has to be cast to its known, Character,
type and assigned to the <i>demoChar</i>
variable. On line 0055 the charValue()
action is used to obtain the value of <i>demoChar</i>
as a <b>char</b> and this is
converted to an <b>int</b>eger
by subtracting the character '0' from it. Thus if the character
is '0', '0' - '0' will be 0; if the character is '1', '1' - '0'
will be 1; etc. The resulting <b>int</b>eger
value is multiplied by the value of <i>place</i>
and added to the current value of <i>result</i>.
<br>

<p>
The other lines from this fragment should be straightforward.
A sample run of the program might produce the following interaction.
<br>

<hr>
<pre>

<ul>
         Stack Demonstration Program

Please enter an integer value : <u><b>2468
</b></u>Thank you, the stack contains
1  8
2  6
3  2
4  2


Converting to integer and outputting
Popped 8 value so far 8.
Popped 6 value so far 68.
Popped 4 value so far 468.
Popped 2 value so far 2468.

</ul>
</pre>

<hr>

<p>
The output of the stack, after the value has been input, indicates
that the first location contains the digit 8, the second 6, and
so on. Before leaving the <i>UnorderedList</i>
hierarchy it should be noted that several of the actions which
the <i>UnorderedList</i> class
introduces, for example <i>obtainFromEnd(),</i>
have not been used by the <i>Queue</i>
or <i>Stack</i> classes. The
design and implementation of the <i>UnorderedList</i>
class was made to maximise its potential for reuse. So, although
these actions are not currently required, they may be required
by other structures at some stage in the future and the costs
of providing them at this stage are minimal compared with having
to add them later. <br>
<br>



<p>
<hr>
<h2>
<ul>
<a HREF="stack.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/Stack.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>Stack.java</i> source code</a>.
<p>
<a HREF="stackdemo.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/StackDemo.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>StackDemo.java</i> source code</a>.


<p>
<a HREF="chap14p4.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/chap14p4.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
14.4 The <i>Generics</i> interfaces</a>.
<p>
<a HREF="chap14p2.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/chap14p2.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
14.2 The <i>Queue</i> class</a>.
<p>
</ul>
</h2>
<hr>
</body>

</html>
