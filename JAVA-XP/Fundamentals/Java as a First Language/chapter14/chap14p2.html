<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>14.2 The Queue class</title>

</head>

<body BGCOLOR="WHITE">

<h2>14.2 The <i>Queue</i> class<br>
</h2>

<p>
The essential characteristic of a queue is that elements can only
be <i>add</i>ed at the end of the queue and can only be <i>retrieve</i>d
from the front. The actions are shown in the class diagram in
Figure 14.4. <br>

<p>
<center><img SRC="c14p2i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p2i1.gif" WIDTH="413" HEIGHT="323">
</center>
<p>
These actions are implemented by making the appropriate actions
from the <i>UnorderedList</i>
public, as follows.<br>

<pre>
0001  // Filename <i>Queue.java</i>.
0002  // A generic queue structure allowing elements of the 
0003  // specified class to be removed from the front and 
0004  // added to the end only.
0005  //
0006  // Written for JFL book, chapter 14.
0007  // Fintan Culwin, v0.1, August 1997.
0008  
0009  <b>package</b> <i>Generics</i>;
0010  
0011  <b>import</b> <i>Generics.UnorderedList</i>;
0012  <b>import</b> <i>Generics.GenericException</i>;
0013  
0014  <b>import</b> java.util.NoSuchElementException;
0015  
0016  <b>public class</b> <i>Queue</i> <b>extends</b> <i>UnorderedList</i> { 
0017  
0018     <b>public</b> <i>Queue</i>( Class <i>theBaseClass</i>) { 
0019        <b>super</b>( <i>theBaseClass</i>);     
0020     } // end <i>Queue</i> constructor.
0021  
0022     <b>public void</b> <i>add</i>( Object <i>toAdd</i>) 
0023                             <b>throws</b> <i>GenericException</i> { 
0024        <b>super</b>.<i>addAtEnd</i>( <i>toAdd</i>);   
0025     } // End <i>add</i>.   
0026     
0027     <b>public</b> Object <i>retrieve</i>()
0028                             <b>throws</b> <i>NoSuchElementException</i> {
0029        <b>return super</b>.<i>removeFromFront</i>();
0030     } // End <i>retrieve</i>. 
0031     
0032  } // End <i>Queue</i>.<br>

</pre>

<p>
A demonstration test harness for the <i>Queue</i>
class, using a queue of <i>Persons</i>
as introduced in the last chapter, might be as follows.<br>

<pre>
0001  // Filename <i>QueueDemo.java</i>.
0002  // Demonstration harness of the <i>Queue</i> data
0003  // structure, using a queue of e-mail persons.
0004  //
0005  // Written for JFL book, chapter 14.
0006  // Fintan Culwin, v0.1, August 1997.
0007  
0008  
0009  <b>import</b> <i>Generics.Queue</i>;
0010  <b>import</b> <i>Generics.GenericException</i>;
0011  <b>import</b> <i>Persons</i>.*;
0012  
0013  <b>class</b> <i>QueueDemo</i> {
0014  
0015    <b>public static void</b> <i>main</i>(String <i>args</i>[]) {
0016    
0017    <i>NamedPerson demoNamedPerson</i>= <b>new</b> <i>NamedPerson</i>(); 
0018    <i>PhonePerson demoPhonePerson</i>;
0019    String      <i>demoString</i>;
0020    
0021    <i>Queue</i>       <i>demoQueue</i> = <b>new</b> <i>Queue</i>( <i>demoNamedPerson</i>.getClass());
0022    
0023    
0024       System.out.println( &quot;\tQueue Demonstration Program\n\n&quot;);
0025       
0026       System.out.println( &quot;Adding three instances to the queue ...&quot;);
0027       
0028       <i>demoNamedPerson</i> = <b>new</b> <i>NamedPerson</i>( &quot;anorak@boring.com&quot;,
0029                                          &quot;Andy Anorak&quot;);
0030       <i>demoQueue.add</i>( <i>demoNamedPerson</i>);
0031       
0032       <i>demoPhonePerson</i> = <b>new</b> <i>PhonePerson</i>( &quot; geek@nowhere.edu&quot;,
0033                                          &quot;Gary Geek&quot;,
0034                                          &quot;111-2222&quot;);
0035       <i>demoQueue.add</i>( <i>demoPhonePerson</i>);                                            
0036    
0037    
0038      <i>demoNamedPerson</i> = <b>new</b> <i>NamedPerson</i>( &quot;sad@lost.org&quot;,
0039                                         &quot;Suzie Sad&quot;);
0040      <i>demoQueue.add</i>( <i>demoNamedPerson</i>);  
0041   
0042      System.out.println( &quot;\nShowing the queue ...\n&quot;);
0043      System.out.println( <i>demoQueue</i>);
0044      
0045      System.out.println( &quot;\n Retrieving and showing ...\n&quot;);
0046      System.out.println( <i>demoQueue.retrieve</i>());
0047      System.out.println( &quot;\n The queue now contains &quot; + 
0048                          <i>demoQueue.size</i>() + &quot; elements.&quot;);
0049  
0050      System.out.println( &quot;\nAttempting to add an element &quot; + 
0051                          &quot;of an inappropriate class ...&quot;);
0052      <b>try</b> { 
0053         <i>demoString</i> = <b>new</b> String( &quot;Doesn't matter!&quot;);
0054         <i>demoQueue.add</i>( <i>demoString</i>);
0055         System.out.println( &quot;No exception thrown ... &quot; + 
0056                             &quot;which is incorrect.&quot;);
0057      } <b>catch</b> ( <i>GenericException exception</i>){ 
0058         System.out.println( &quot;GenericException thrown ... &quot; + 
0059                             &quot;which is correct.&quot;);    
0060      } // End try/catch.                        
0061    } // End <i>main</i>.
0062        
0063  } // End <i>QueueDemo</i>.  <br>

</pre>

<p>
The <i>Queue</i> constructor,
called on line 0021, needs to have an instance of the Class
class passed to it in order that it can know which elements may
be stored in the queue. This is accomplished by first constructing
an instance of the <i>NamedPerson</i>
class, using its default constructor on line 0017, and using its
getClass() action to obtain its
Class descriptor. The <i>NamedPerson</i>
class is the first non-abstract class in the <i>Persons</i>
hierarchy. It would have been preferable to have used the abstract
<i>EmailPerson</i> class, which
is at the root of the hierarchy, but as it is not possible to
construct an instance of an abstract class this is not possible.
<br>

<p>
Once constructed three instances of the <i>Persons</i>
hierarchy, two <i>NamedPersons</i>
and a <i>PhonePerson</i>, are
added to the <i>demoQueue</i>,
which is then output. Following this the first element from the
queue is retrieved and output, with the <i>size()</i>
action confirming that the queue now contains only two elements.
Finally an attempt is made to add an inappropriate element to
the queue in order to demonstrate that the <i>GenericException</i>
will be thrown if this is attempted. The output of this harness,
indicating that the queue appears to be working correctly, was
as follows. 
<hr>

<pre>
<ul>
          Queue Demonstration Program

Adding three instances to the queue ...

Showing the queue ...

1  E-mail : anorak@boring.com Name : Andy Anorak
2  E-mail : geek@nowhere.edu Name : Gary Geek Phone : 111-2222
3  E-mail : sad@lost.org Name : Suzie Sad


 Retrieving and showing ...

E-mail : anorak@boring.com Name : Andy Anorak

The queue now contains 2 elements.

Attempting to add an element of an inappropriate class ...
GenericException thrown ... which is correct.<br>
<p>
</ul>
</pre>



<p>
<hr>
<h2>
<ul>
<a HREF="queue.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/Queue.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>Queue.java</i> source code</a>.
<p>
<a HREF="queuedemo.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/QueueDemo.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>QueueDemo.java</i> source code</a>.


<p>
<a HREF="chap14p3.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/chap14p3.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
14.3 The <i>Stack</i> class</a>.
<p>
<a HREF="chap14p1.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/chap14p1.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
14.1 The abstract <i>UnorderedList</i>class</a>.
<p>
</ul>
</h2>
<hr>

</body>

</html>
