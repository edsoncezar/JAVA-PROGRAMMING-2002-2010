<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>14.1 The abstract UnorderedList class</title>

</head>

<body BGCOLOR="WHITE">

<h2>14.1 The abstract <i>UnorderedList</i> class
</h2>

<p>
This section will introduce two abstract classes which will subsequently
be used to implement the <i>Queue</i>
and <i>Stack</i> classes. The
class hierarchy diagram for this part of the hierarchy is given
in Figure 14.1. The classes are contained within a package called
<i>Generics</i>; a <i><b>generic</b></i>
data structure is one whose instances are capable of containing
only a specified class of objects. Should an attempt be made to
add a instance of an inappropriate class to the structure, a <i>GenericException</i>
will be thrown. <br>

<p>
<center><img SRC="c14p1i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p1i1.gif" WIDTH="565" HEIGHT="225"></center>
<p>
The abstract <i>GenericStructure</i>
class is responsible, upon construction, to record the base class
of the elements which are to be stored in the structure. It also
provides an action which will determine if an element is, or is
not, compatible with the nominated class. <br>

<p>
The <i>UnorderedList</i> class
encapsulates an instance of the <i>Vector</i>
class and makes available a number of protected and public actions
which the <i>Queue</i> and <i>Stack</i>
classes use to implement their essential behaviour. The class
diagram of the <i>GenericStructure</i>
class is presented in Figure 14.2.<br>

<p>
<center><img SRC="c14p1i2.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p1i2.gif" WIDTH="552" HEIGHT="317">
</center>
<p>
The <i>GenericStructure</i> constructor
requires an argument of the Class
class which it subsequently uses to check that the <i>toTest</i>
argument of the <i>IsAcceptableElement()</i>
action is of a compatible class, returning <b>true</b>
if so and <b>false</b> otherwise.
The implementation of this class is as follows. <br>

<pre>
0001  // Filename <i>GenericStructure.java</i>.
0002  // Abstract base class for a collection of List
0003  // actions which will implement  a number of 
0004  // different data structures.
0005  //
0006  // Written for JFL book, chapter 14.
0007  // Fintan Culwin, v0.1, August 1997.
0008  
0009  <b>package</b> <i>Generics</i>;
0010  
0011  <b>abstract</b> class <i>GenericStructure </i>{
0012  
0013  <b>private</b> Class <i>elementClass</i>;
0014  
0015     <b>protected</b> <i>GenericStructure</i>( Class <i>theElementClass</i>) { 
0016        <b>super</b>();   
0017        <i>elementClass</i> = <i>theElementClass</i>;
0018     } // end <i>GenericStructure </i>constructor.
0019  
0020     
0021     <b>protected</b> <b>boolean</b> <i>isAcceptableElement</i>( Object <i>toTest</i>) { 
0022     
0023     <b>boolean</b> <i>exhausted </i>= <b>false</b>;
0024     <b>boolean</b> <i>found     </i>= <b>false</b>;
0025     Class   <i>thisClass </i>= <i>toTest</i>.getClass();
0026     
0027          <b>while</b> ( (!<i>exhausted</i>) &amp;&amp; (!<i>found</i>)){ 
0028             <b>if</b> ( <i>elementClass</i> == <i>thisClass</i>) { 
0029                <i>found </i>= <b>true</b>;
0030             } <b>else</b> {    
0031                <i>thisClass </i>= <i>thisClass</i>.getSuperclass();
0032                <b>if</b> ( <i>thisClass </i>== <b>null</b>){ 
0033                   <i>exhausted </i>= <b>true</b>;
0034                } // End if.
0035             } // End if.
0036          } // End while.
0037          <b>return</b> <i>found</i>;      
0038     } // End <i>isAcceptableElement</i>.
0039          
0040  } // End GenericStructure.<br>

</pre>

<p>
The Class class was introduced
in Chapter 12 as a Java system class which describes the nature
of a class. Given an instance of any class, an instance of the
Class class describing it can
be obtained with its getClass()
action. The constructor takes as an argument an instance of the
Class class and stores this in
the Class instance variable <i>elementClass</i>.
<br>

<p>
Unfortunately there is no simple action which, given a Class
descriptor and an instance of an arbitrary class, will decide
if the instance is compatible with the nominated class. The <i>isAcceptableElement()</i>
action's implementation on lines 0027 to 0037 provides this facility.
If the Object <i>toTest</i> is
of the same class as the <i>elementClass</i>
then the test on line 0028 of the listing will be <b>true</b>
causing the flag <i>found</i>
to be set <b>true</b>, the <b>while</b>
loop to terminate and the value <b>true</b>
to be returned. <br>

<p>
If the test on line 0028 is <b>false</b>,
it might still be that although the class of <i>toTest</i>
is not the same as <i>elementClass</i>,
it might be an extended instance of that class. Accordingly the
Class getSuperclass()
action is used to obtain the descriptor of its superclass, or
<b>null</b> if it has no superclass.
Thus the <b>while</b> loop will
iterate up the class hierarchy terminating when a match is found
on line 0028 or when a <b>null</b>
superclass is found. If a match has been found the action will
return <b>true</b>, if no match
is found it will return <b>false</b>.
This action will be used by the <i>add()</i>
action of the <i>UnorderedList</i>
class whose class diagram is given in Figure 14.3.<br>

<p>
<center><img SRC="c14p1i3.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p1i3.gif" WIDTH="620" HEIGHT="658">
</center>
<p>
The constructor action again requires a Class
descriptor which will determine the nature of the elements which
can be stored in non-abstract extensions of the class. To implement
the list it contains an encapsulated Vector
instance, called <i>theList</i>.
The difference between an <i>obtain()</i>
action and a <i>remove()</i>
action is that an obtain action will return an element from the
structure without deleting it, whilst a remove action will return
and delete it from the structure. The implementation of this design,
as far as the end of the constructor, is as follows. <br>

<pre>
0001  // Filename <i>UnorderedList.java</i>.
0002  // Abstract class supplying the actions to 
0003  // support the <i>Stack</i> and <i>Queue</i> classes.
0004  //
0005  // Written for JFL book, chapter 14.
0006  // Fintan Culwin, v0.1, August 1997.
0007  
0008  <b>package</b> <i>Generics</i>;
0009  
0010  <b>import</b> <i>Generics.GenericStructure</i>;
0011  <b>import</b> <i>Generics.GenericException</i>;
0012  
0013  <b>import</b> java.util.Vector;
0014  <b>import</b> java.util.Enumeration;
0015  <b>import</b> java.util.NoSuchElementException;
0016  <b>import</b> java.lang.ArrayIndexOutOfBoundsException;
0017  
0018  <b>abstract class</b> <i>UnorderedList</i> <b>extends</b> <i>GenericStructure</i> { 
0019  
0020  <b>private</b> Vector <i>theList</i> = <b>new</b> Vector();
0021  
0022     <b>protected</b> <i>UnorderedList</i>( Class <i>theBaseClass</i>) { 
0023        <b>super</b>( <i>theBaseClass</i>);     
0024     } // end <i>UnorderedList</i> constructor.<br>

</pre>

<p>
The implementation of the constructor, on lines 0022 to 0024 indicates
that it dispatches immediately to its <b>super</b>
(<i>GenericStructure</i>) constructor
passing on its argument. The instance attribute <i>theList</i>,
of the <i>Vector</i>, class is
constructed on line 0020. The design of the <i>addAtFront()</i>
action is as follows. <br>
<br>

<p>
<center><img SRC="c14p1i4.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p1i4.gif" WIDTH="650" HEIGHT="356">
</center>
<p>
The action will throw a <i>GenericException</i>
if the class of the element <i>toAdd</i>
is not acceptable, otherwise it calls <i>theList</i>
insertElementAt() action to put
the element at the front of the <i>theList</i>
Vector. The implementation of
this design is as follows. <br>

<pre>
0027     <b>protected void</b> <i>addAtFront</i>( Object <i>toAdd</i>) {    
0028        <b>if</b> ( <i>isAcceptableElement</i>( <i>toAdd</i>)) { 
0029           <i>theList</i>.<i>insertElementAt</i>( <i>toAdd</i>, 0);
0030        } <b>else</b> { 
0031          <b>throw new</b> <i>GenericException</i>();
0032        } // End if.
0033     } // End <i>addAtFront</i>.<br>

</pre>

<p>
The design and implementation of the two remaining <i>front</i>
actions are as follows. <br>

<p>
<center><img SRC="c14p1i5.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p1i5.gif" WIDTH="382" HEIGHT="236">
</center>
<p>

<pre>
0036     <b>protected</b> Object <i>obtainFromFront</i>() 
0037                      <b>throws</b> NoSuchElementException { 
0038        <b>return</b> <i>theList</i>.firstElement();            
0039     } // End <i>removeFromFront</i>.  <br>

</pre>

<p>
<center><img SRC="c14p1i6.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/c14p1i6.gif" WIDTH="753" HEIGHT="357">
</center>
<p>
<pre>
0042     <b>protected</b> Object <i>removeFromFront</i>()  
0043                      <b>throws</b> NoSuchElementException { 
0044     
0045     Object <i>hold</i>;
0046                     
0047        <b>try</b> {
0048           <i>hold</i> = <i>theList</i>.firstElement();
0049           <i>theList</i>.removeElementAt( 0);  
0050           <b>return</b> <i>hold</i>;          
0051        } <b>catch</b> (ArrayIndexOutOfBoundsException exception) { 
0052           <b>throw new</b> NoSuchElementException();
0053        } // end try/catch.   
0054     } // End <i>removeFromFront</i>.  <br>

</pre>

<p>
The design and implementation of the <i>removeFromFront()</i>
action has to <i>hold</i> the
element obtained from the Vector
with FirstElement() whilst it
is removed with removeElementAt().
It is possible for the index argument supplied to the removeElementAt()
action specifies an element beyond the end of the list or any
element in an empty list. This will cause an ArrayIndexOutOfBoundsException
to be thrown which must be caught. In this implementation the
exception will only be thrown if the list is empty and causes
a NoSuchElementException to be
thrown from the action.<br>

<p>
The design and implementation of the <i>end</i>
actions are essentially identical, using <i>theList</i>
size() action to specify the element at the end of the
Vector where appropriate. Their
implementations are as follows. <br>

<p>
<pre>
0057     <b>protected void</b> <i>addAtEnd</i>( Object <i>toAdd</i>) {    
0058        <b>if</b> ( <i>isAcceptableElement</i>( <i>toAdd</i>)) { 
0059           <i>theList</i>.addElement( <i>toAdd</i>);
0060        } <b>else</b> { 
0061          <b>throw new</b> GenericException();
0062        } // End if.
0063     } // End addAtEnd.
0064        
0065        
0066     <b>protected</b> Object <i>obtainFromEnd</i>() 
0067                      <b>throws</b> NoSuchElementException { 
0068        <b>return</b> <i>theList</i>.lastElement();            
0069     } // End removeFromFront.     
0070  
0071     <b>protected</b> Object <i>removeFromEnd</i>()  
0072                      <b>throws</b> NoSuchElementException { 
0073     
0074     Object <i>hold</i>;
0075                     
0076        <b>try</b> {
0077           <i>hold</i> = <i>theList</i>.lastElement();
0078           <i>theList</i>.removeElementAt( <i>theList</i>.size());  
0079           <b>return</b> <i>hold</i>;          
0080        } <b>catch</b> (ArrayIndexOutOfBoundsException <i>exception</i>) { 
0081           <b>throw new</b> NoSuchElementException();
0082        } // end try/catch.   
0083     } // End <i>removeFromEnd</i>.  <br>

</pre>

<p>
The public actions make available the corresponding actions from
the encapsulated <i>theList</i>
instance, apart from the <i>toString()</i>
action which uses an Enumeration
to provide a numbered list of the contents. The implementation
of these actions is as follows. <br>

<p>
<pre>
0088     <b>public</b> <i>Enumeration elements</i>() {    
0089       <b>return</b> <i>theList</i>.elements();
0090     } // End elements.
0091     
0092     
0093     <b>public int</b> <i>size</i>() { 
0094        <b>return</b> <i>theList</i>.size();
0095     } // End size.
0096     
0097     
0098     <b>public boolean</b> <i>isEmpty</i>() { 
0099        <b>return</b> <i>theList</i>.isEmpty();
0100     } // End isEmpty.
0101     
0102     
0103     <b>public</b> String <i>toString</i>(){ 
0104  
0105     <b>int</b>          <i>thisElement</i> = 0;
0106     Object       <i>fromList</i>;
0107     StringBuffer <i>buffer</i>      = <b>new</b> StringBuffer();
0108     Enumeration  <i>contents</i>    = <i>theList</i>.elements();
0109     
0110        <b>while</b>( <i>contents</i>.hasMoreElements() ) { 
0111           <i>fromList</i> = <i>contents</i>.nextElement();      
0112           <i>buffer</i>.append( ++<i>thisElement</i> + &quot;  &quot; + <i>fromList</i> + &quot;\n&quot;);       
0113        } // End while;
0114        <b>return</b> <i>buffer</i>.toString();   
0115     } // End <i>toString</i>.    <br>
<br>

</pre>


<p>
<hr>
<h2>
<ul>
<a HREF="genericstructure.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/GenericStructure.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>GenericStructure.java</i> source code</a>.
<p>
<a HREF="genericexception.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/GenericException.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>GenericException.java</i> source code</a>.
<p>
<a HREF="unorderedlist.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/UnorderedList.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>UnorderedList.java</i> source code</a>.

<p>
<a HREF="chap14p2.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/chap14p2.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
14.2 The <i>Queue</i> class</a>.
<p>
<a HREF="chap14.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter14/chap14.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
Chapter 14 Developer Supplied Data Structures</a>.
<p>
</ul>
</h2>
<hr>

</body>

</html>
