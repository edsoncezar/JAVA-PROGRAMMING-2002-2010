<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>12.1 An initial example</title>

</head>

<body BGCOLOR="WHITE">

<h2>12.1 An initial example<br>
</h2>

<p>
To introduce the use of files a very simple application, equivalent
to the operating system <i><b>type</b></i> command, will be developed.
When this command is used it is usually followed by the name of
a file on the disk, the contents of which are then displayed on
the terminal screen. The first version of this program will always
output the contents of a file called &quot;<i>test.txt&quot;</i>,
in order to allow the use of files to be introduced. The next
section will introduce the use of command line arguments to allow
the name of any file to be specified on the command line. The
design for this initial version is as follows. <br>

<p>
<center><img SRC="c12p1i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter12/c12p1i1.gif" WIDTH="683" HEIGHT="336">
</center>
<p>
As was mentioned in Chapter 6 the input and output of information
is always fraught with potential problems and so has to be associated
with exception handlers. Thus the basis of this design is a posit/&nbsp;admit
structure which guards against a file called <i>test.txt</i> not
being available, or other possible errors, and informs the user
if it could not be found or opened. <br>

<p>
Assuming that the file can be opened, the processing of the file
involves preparing an input stream, iteratively obtaining a line
of information from it and outputting it to the screen before
closing the file when no more lines remain in it. The implementation
of this design is as follows. <br>

<pre>
<font>0001  // Filename TrivialFileDemo.java.
0002  // Read a text file called &quot;test.txt&quot; and output 
0003  // it to the screen. 
0004  //
0005  // Written for JFL Book Chapter 12.
0006  // Fintan Culwin, V 0.1, Jan 1997. 
0007  
0008  <b>import</b> java.io.*;
0009  
0010  <b>class</b> TrivialFileDemo { 
0011   
0012      <b>public static void</b> main(String args[]) {
0013      
0014      DataInputStream inStream;
0015      
0016         <b>try</b> { 
0017            inStream = <b>new</b> DataInputStream( 
0018                          <b>new</b> FileInputStream( &quot;test.txt&quot;));
0019                          
0020            <b>while</b> ( inStream.available() &gt; 0 ) { 
0021               System.out.println( inStream.readLine());
0022            } // End while.
0023            
0024            inStream.close(); 
0025         } <b>catch</b> ( java.io.IOException exception)  { 
0026           <b>if</b> ( exception <b>instanceof</b> FileNotFoundException) { 
0027              System.out.println(
0028                 &quot;A file called test.txt could not be found, \n&quot; +
0029                 &quot;or could not be opened.\n&quot;                     +
0030                 &quot;Please investigate and try again.&quot;);
0031           } // End if.
0032         } // End try/ catch block.
0033      } // End main.
0034      
0035   } // End class.<br>
</font>
</pre>

<p>
In Chapter 6, when it was required to obtain data from the keyboard,
the raw input stream from the keyboard, available to the program
as <font FACE="Arial">System.in</font>, was used to construct
a <font FACE="Arial">DataInputStream</font> called <i><font FACE="Arial">keyboard</font></i>
as follows. 

<p>
<hr>
<ul>
<pre>
<font> java.io.DataInputStream <i>keyboard</i> = 
             <b>new</b> java.io.DataInputStream( System.in);
</font>
</pre>
</ul>
<hr>

<p>
The reason for this was that an instance of the <font FACE="Arial">DataInputStream</font>
class is able to interpret the raw data arriving in the stream,
as individual characters, and convert then into strings, which
can be obtained with the <font FACE="Arial">DataInputStream</font>'s
<i><font FACE="Arial">readLine()</font></i> action. On
lines 0017 and 0018 a similar process is used to obtain a <font FACE="Arial">DataInputStream</font>
called <i><font FACE="Arial">inStream</font></i> connected
to the file called &quot;<i>test.txt&quot;</i>.<br>

<p>
The phrase on line 0018, <b><font FACE="Arial">new</font></b><font FACE="Arial">
FileInputStream( &quot;test.txt&quot;)</font>, creates an anonymous
instance of the <font FACE="Arial">FileInputStream</font>
class which provides a raw input stream to the file. In line 0017
this anonymous instance is used as an argument to the <font FACE="Arial">DataInputStream</font>
class constructor to provide a stream called <i><font FACE="Arial">inStream</font></i>.
Should the file not exist a <font FACE="Arial">FileNotFoundException</font>
will be thrown and caught and on lines 0027 to 0030 where advice
is given to the user before the program finishes. <br>

<p>
Otherwise, if the file is opened and the stream is constructed,
the <font FACE="Arial">available()</font> action of the
<font FACE="Arial">DataInputStream</font> <i><font FACE="Arial">inStream</font></i>
instance can be used to determine if any more information is available
from the stream. So long as information is known to be available
the <i><font FACE="Arial">inStream</font></i> <font FACE="Arial">readLine()</font>
action can be used to obtain a line of text from the stream which
is immediately output to the screen using the <font FACE="Arial">System.out.println()</font>
action.<br>

<p>
Once the <font FACE="Arial">available()</font> action indicates
that there is no more information available the <i><font FACE="Arial">inStream</font></i>
<font FACE="Arial">close()</font> action is used to close
the stream, and thus the file, before the program terminates.
<br>

<p>
This program can be demonstrated, or tested, by executing it within
a directory which contains a text file called &quot;<i>test.txt&quot;</i>.
The result should be that the contents of the file are displayed
on the screen. However if the file does not exist the advice on
lines 0028 to 0030 should be given to the user. <br>
<br>

<p>
<hr>
<h2>
<ul>
<a HREF="trivialfiledemo.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter12/TrivialFileDemo.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>TrivialFileDemo.java</i> source code</a>.
<p>
<a HREF="chap12p2.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter12/chap12p2.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
12.2 The <i>type</i> application</a>.
<p>
<a HREF="chap12.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter12/chap12.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
Chapter 12 Streams</a>.
</ul>
</h2>
<hr>
</body>

</html>
&#26;