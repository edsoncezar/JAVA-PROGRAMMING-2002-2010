<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>11.5 White box considerations</title>

</head>

<body BGCOLOR="WHITE">

<h2>11.5 White box considerations<br>
</h2>

<p>
All of the testing presented so far in this chapter have employed
<i><b>black box</b></i> techniques. The term black box indicates
that the component under test has inputs and outputs and a specification
which states the relationship between those inputs and outputs.
The test rationale works on this knowledge only and does not take
any account of the internal construction of the component. The
alternative possibility should really be known as <i><b>glass
box</b></i> testing as it is allowed to take account of the internal
structure of the component, although it is conventionally known
as <i><b>white&nbsp;box</b></i> testing.<br>

<p>
One way in which this can be useful is to note that the black
box testing implicitly tests some actions other than those which
it is formally testing, and to take advantage of this in subsequent
tests. For example the implementation of the alternative constructor,
as shown in Chapter 10 section 2, is essentially a call of the
semi-public <i><font SIZE="2" FACE="Arial">makeJulianDate</font></i>()
action.<br>

<p>
<pre>
0047    // Alternative constructor from the <i>BasicJulianDate</i> class.
0048    <b>public</b> <i>BasicJulianDate</i>( <b>int</b> year, <b>int</b> month, <b>int</b> day ) 
0049                                                 <b>throws</b> <i>JulianDateException</i> {
0050        <i>dayNumber</i> = <i>makeJulianDate</i>( <i>year</i>, <i>month</i>, <i>day</i>);
0051    } // End <i>JulianDate</i> alternative default constructor 
<br>
</pre>

<p>
The implementation of the <i><font SIZE="2" FACE="Arial">JulianDate
getDate()</font></i> action also makes use of the <i><font SIZE="2" FACE="Arial">makeJulianDate()</font></i>
action.<br>

<p>
<pre>
              // Extract from the <i>JulianDate</i> <i>getDate</i>() action.
0080          <b>if</b> ( <i>theLocale</i> == <i>EUROPEAN</i>) { 
0081             <i>makeJulianDate</i>( <i>yearField</i>, <i>secondField</i>, <i>firstField</i>);
0082          } <b>else</b> { 
0083             <i>makeJulianDate</i>( <i>yearField</i>, <i>firstField</i>, <i>secondField</i>);
0084          } // End if. <br>

</pre>

<p>
All of the other parts of the <i><font SIZE="2" FACE="Arial">getDate</font></i>()
action are concerned with obtaining input from the user, extracting
the various fields and preparing for this part of the action.
Using this knowledge the testing of the <i><font SIZE="2" FACE="Arial">getDate</font></i>()
action can be restricted to those tests designed to differentiate
between the European and American formats and ensuring that incorrectly
formatted inputs raise an exception.<br>

<p>
The second use of white box techniques is to make sure that all
possible paths through and action have been exercised whilst the
software is under test. To do this a <i><b>flowgraph</b></i> representing
the action's structure has to be prepared and this can only be
done once the source code for the action is available.<br>

<p>
A flowgraph is constructed from three basic constituent parts,
representing sequence, selection and iteration. These components
are shown in Figure 11.5. <br>

<p>
<center><img SRC="c11p5i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter11/c11p5i1.gif" WIDTH="332" HEIGHT="190"> </center>
<p>
<center><font SIZE="2">Figure 11.5 Flowgraph components.<br>
</font></center>
<p>
The first of these flowgraphs shows a sequence of actions where
flow of control will enter at point <i><b>a</b></i> and leave
at point <i><b>b</b></i>. The second shows a selective structure
where flow of control can move from point <i><b>c</b></i> to point
<i><b>d</b></i> via the left or right hand path. This structure
can be used to represent an <i><font SIZE="2" FACE="Arial">if</font></i>
structure, a <i><font SIZE="2" FACE="Arial">case</font></i> structure
and a <i><font SIZE="2" FACE="Arial">try/&nbsp;catch</font></i>
structure; if required the number of paths can be increases beyond
two. The final flowgraph shows an iterative structure where flow
of control can enter at point <i><b>d</b></i> and leave immediately
at point <i><b>f</b></i> without ever executing the body of the
loop. Otherwise flow of control must enter at point <i><b>d</b></i>
and follow the path to point <i><b>e</b></i>, representing the
body of the loop and then return to point <i><b>d</b></i> for
the loop condition to be re-evaluated. <br>

<p>
To illustrate how these components are used to construct a flowgraph
for an action the <i><font SIZE="2" FACE="Arial">BasicDate makeJulianDate</font></i>()
action will be considered; the implementation of this action is
as follows. <br>

<p>
<pre>
0062    <b>protected int</b> <i>makeJulianDate</i>( <b>int</b> <i>year</i>, <b>int</b> <i>month</i>, <b>int</b> <i>day</i> ) 
0063                                                 <b>throws</b> <i>JulianDateException</i> { 
0064 
0065    <b>int</b> <i>localDayNumber</i> = 0;
0066    <b>int</b> <i>thisMonth</i>; 
0067 
0068       <b>if</b> ( ! <i>isValidDate</i>( <i>year</i>, <i>month</i>, <i>day</i>)) { 
0069         <b>throw new</b> <i>JulianDateException</i>( 
0070                         <i>JulianDateException</i>.DATE_CONSTRUCTION_ERROR); 
0071       } // End if. 
0072 
0073       // Start with the day of the month
0074       <i>localDayNumber</i> = <i>day</i>;
0075
0076       // Add the number of days for the month.
0077       <b>for</b> ( <i>thisMonth</i> = 1; <i>thisMonth</i> &lt; <i>month</i>; <i>thisMonth</i> ++) { 
0078          <i>localDate</i> += <i>daysThisMonth</i>( <i>year</i>, <i>thisMonth</i>);
0079       } 
0080 
0081       // Add the number of days for the year (ignoring leap years).
0082       <i>localDayNumber</i> += (<i>year</i> - <i>MINIMUM_YEAR</i>) * <i>DAYS_PER_YEAR</i>; 
0083    
0084       // Correct for the number of leap years passed. 
0085       <i>localDayNumber</i> = <i>localDayNumber</i> + ((<i>year</i> - <i>MINIMUM_YEAR</i>)<i> </i>/4)   - 
0086                                         ((<i>year</i> - <i>MINIMUM_YEAR</i>)<i> </i>/100);
0087      <b>if</b> ( <i>year</i> &gt; 2000) { 
0088          localDayNumber++;
0089      } // End if.
0090
0088       <b>return</b> <i>localDayNumber</i>;
0089    } // end fun <i>MakeJulianDate</i>.<br>

</pre>

<p>
The flowgraph is derived in stages, starting with a simple flowgraph
where a single path connects the two points where flow of control
can enter the action and where it must eventually leave. This
is shown as the left hand flowgraph on Figure 11.6. The first
refinement of this is to divide it into the initialisation part
where the local variables are declared (lines 0063 to 0067), the
main part of the action (lines 0068 to 0088) and the leaving of
the action represented by line 0089. This is shown on the first
refinement of the flowgraph.<br>

<p>
<center><img SRC="c11p5i2.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter11/c11p5i2.gif" WIDTH="530" HEIGHT="355"> </center>
<p>
<center><font SIZE="2">Figure 11.6 The derivation of the flowgraph
for the </font><i><font SIZE="2" FACE="Arial">makeJuliandate</font></i><font SIZE="2">()
action.<br>
</font></center>
<p>
The derivation continues by refining the actions in the main part
of the action. The first of these is an <b><font SIZE="2" FACE="Arial">if</font></b>
structure which might result in an exception being thrown. Should
this happen then flow of control will pass immediately to the
point where flow of control leaves. If the condition on the <b><font SIZE="2" FACE="Arial">if</font></b>
structure is not <b><font SIZE="2" FACE="Arial">true,</font></b>
flow of control will pass through the rest of the action. This
is shown on the second refinement with the left hand path between
<i><b>b</b></i> and <i><b>g</b></i> representing the throwing
of the exception and the right hand path the rest of the actions.
 <br>

<p>
The next part of the actions is a single statement followed by
a for structure. This can be accommodated into the flowgraph by
replacing the right hand side of the path between <i><b>b</b></i>
and <i><b>g</b></i> with an iterative flowgraph component; as
shown on the third refinement. The path between <i><b>b</b></i>
and <i><b>c</b></i> represents the action between the <b><font SIZE="2" FACE="Arial">if</font></b>
and the <b><font SIZE="2" FACE="Arial">for</font></b> structure
and the path between <i><b><font SIZE="2" FACE="Arial">e</font></b></i>
and <i><b>g</b></i> the actions following the for structure. 
<br>

<p>
The final refinement introduces the <b><font SIZE="2" FACE="Arial">if</font></b>
structure on lines 0087 and 0089. With this in place the path
between <i><b>c</b></i> and <i><b>e</b></i> represents the actions
between the end of the <b><font SIZE="2" FACE="Arial">for</font></b>
structure and the start of the <b><font SIZE="2" FACE="Arial">if</font></b>
structure. The path between <i><b>f</b></i> and <i><b>g</b></i>
represent the actions between the end of the if and the end of
the action. <br>

<p>
Having derived the flowgraph it can be used to calculate the number
of possible paths which can be used to traverse it. This can be
done by counting the number of regions on the graph, including
the outside enclosing region and adding 1. The final flowgraph
in Figure 11.6 has a total of 4 regions giving a total of five
possible paths. These paths are listed in Table 11.8.<br>

<p>
<center>
<table BORDER="1">

<tr><td WIDTH="189"><center><i><font SIZE="2" FACE="Arial">makeJulianDate</font></i><font SIZE="2"> flowgraph possible paths</font></center>
</td></tr>

<tr><td WIDTH="189"><font SIZE="2">a b g h</font></td></tr>

<tr><td WIDTH="189"><font SIZE="2">a b c e <sup>left</sup> f g h</font>
</td></tr>

<tr><td WIDTH="189"><font SIZE="2">a b c e <sup>right</sup> f g h</font>
</td></tr>

<tr><td WIDTH="189"><font SIZE="2">a b c d e <sup>any</sup> f g h </font>
</td></tr>

</table>
</center>

<p>
<center><font SIZE="2">Table 11.8 The possible paths through the
last flowgraph in Figure 11.6<br>
</font></center>
<p>
The final part of this white box process is to review the black
box trials to make sure that all of the possible paths obtained
from the flowgraph are traversed. Should any of the paths not
be traversed it could be because the path is not possible, for
example a while structure could be constructed so that the body
of the loop must be executed at least once. Otherwise the black
box test plan has been shown to be inadequate and additional trials
will be needed to make sure that the component is adequately tested.
<br>
<br>

<p>
<hr>
<h2>
<ul>

<a HREF="chap11p6.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter11/chap11p6.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
11.6 Comparison of methods and techniques</a>.
<p>
<a HREF="chap11p4.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter11/chap11p4.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
11.4 Composite and interactive testing of the remaining facilities</a>.
<p>
</ul>
</h2>
<hr>
</body>

</html>
&#26;