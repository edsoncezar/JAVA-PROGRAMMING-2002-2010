<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>11.2 Testing the <i>BasicJulianDate</i> alternative constructor</title>

</head>

<body BGCOLOR="WHITE">

<h2>11.2 Testing the <i>BasicJulianDate</i> alternative constructor
<br>
</h2>

<p>
The testing of the default constructor above followed a complete
black box process which seemed overkill for the complexity of
the facility being tested. However the value of the process will
become apparent in this example which is significantly more complex.
The black box diagram for this test is shown in Figure 11.3.<br>

<p>
<center><img SRC="c11p2i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter11/c11p2i1.gif" WIDTH="499" HEIGHT="79"></center>
<p>
<center><font SIZE="2">Figure 11.3. </font><i><font SIZE="2" FACE="Arial">JulianDate</font></i><font SIZE="2">
alternative constructor and </font><i><font SIZE="2" FACE="Arial">toString</font></i><font SIZE="2">()
black box diagram.<br>
</font></center>
<p>
The three arguments to the alternative constructor are now shown
as inputs to the black box and will have to appear on the range
diagram, which is shown in Figure 11.4.<br>

<p>
<center><img SRC="c11p2i2.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter11/c11p2i2.gif" WIDTH="552" HEIGHT="393"></center>
<p>
<center><font SIZE="2">Figure 11.4. </font><i><font SIZE="2" FACE="Arial">JulianDate</font></i><font SIZE="2">
alternative constructor &amp; </font><i><font SIZE="2" FACE="Arial">toString</font></i><font SIZE="2">()
range diagrams.<br>
</font></center>
<p>
The year, month and day inputs are shown on this diagram as continuous
ranges with the limits indicating the minimum and maximum valid
values for the argument and with other significant points marked.
The terminal output and exception outputs are shown as discrete
ranges with the significant points marked. <br>

<p>
Taking the year input as an example, point <i><b>a</b></i> is
the value 1899 which was chosen as the largest invalid value below
the acceptable range and is taken as indicative of all values
between the minimum integer value and 1899. A prediction will
be made that this value will cause an exception to be thrown whenever
it is used and, by extension, all other values below it will also
cause an exception. Point <i><b>b</b></i> is the value 1900 and
is the minimum valid year which should not cause the exception
to be thrown, nor should any value as far as point <i><b>f</b></i>
which is 2199. Point <i><b>g</b></i> is the value 2200 and is
the smallest invalid value above the acceptable range and is taken
as representative of all values between it and the largest integer
value. This value should cause an exception to be thrown and,
by extension, so should all others above it.<br>

<p>
Taking these four predictions together, it is assumed that any
year value between 1900 and 2199 should not cause an exception
to be thrown, given that their year and month components are acceptable,
and any value outside this range will cause the exception to be
thrown. Thus exhaustive testing which would have required 2<sup>32</sup>
(the full integer range) separate trials has been reduced to 4.
<br>

<p>
Point <i><b>c</b></i> is the value 1904 and has been arbitrarily
chosen as representative of all common leap years. Point <i><b>d</b></i>
is 1905 and is the arbitrarily representative of all non-leap
years. Finally point <i><b>e</b></i> is 2000 and is the special
case of a year which is divisable by 4 but is not a leap year.
These reasons, and the reasons for selecting all the other points,
are summarised in Table 11.3. The possibility of the <i><font SIZE="2" FACE="Arial">toString</font></i>()
action not producing any output has been discounted following
the previous test and the two possibilities are now to produce
the correct output or the wrong output.<br>

<p>
<center>
<table BORDER="1">

<tr><td WIDTH="95"><center><b><font SIZE="2">case</font></b></center>
</td><td WIDTH="213"><center><b><font SIZE="2">value</font></b></center>
</td><td WIDTH="307"><center><b><font SIZE="2">notes</font></b></center>
</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">a</font></center></td><td WIDTH="213">year 1899
</td><td WIDTH="307">largest invalid value below 1900</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">b</font></center></td><td WIDTH="213">year 1900
</td><td WIDTH="307">smallest valid value</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">c</font></center></td><td WIDTH="213">year 1904
</td><td WIDTH="307">common leap years</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">d</font></center></td><td WIDTH="213">year 1905
</td><td WIDTH="307">non-leap years</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">e</font></center></td><td WIDTH="213">year 2000
</td><td WIDTH="307">special case - not a leap year</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">f</font></center></td><td WIDTH="213">year 2199
</td><td WIDTH="307">largest valid value</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">g</font></center></td><td WIDTH="213">year 2200
</td><td WIDTH="307">smallest invalid value above 2199</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">h</font></center></td><td WIDTH="213">month 0
</td><td WIDTH="307">largest invalid value below 1</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">i</font></center></td><td WIDTH="213">month 1
</td><td WIDTH="307">smallest valid value</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">j</font></center></td><td WIDTH="213">months 1,3,5,7,8,10,11,12
</td><td WIDTH="307">months with 31 days</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">k</font></center></td><td WIDTH="213">months 4,6,9,11
</td><td WIDTH="307">thirty days have September &#133;</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">l</font></center></td><td WIDTH="213">month 2
</td><td WIDTH="307">February</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">m</font></center></td><td WIDTH="213">month 12
</td><td WIDTH="307">largest valid value</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">n</font></center></td><td WIDTH="213">month 13
</td><td WIDTH="307">smallest invalid value above 12</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">u</font></center></td><td WIDTH="213">day 0
</td><td WIDTH="307">largest invalid value below 1</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">p</font></center></td><td WIDTH="213">day 1
</td><td WIDTH="307">smallest valid value</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">q</font></center></td><td WIDTH="213">day 28
</td><td WIDTH="307">largest always valid day</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">r</font></center></td><td WIDTH="213">day 29 
</td><td WIDTH="307">invalid for month 2 apart from leap years</td>
</tr>

<tr><td WIDTH="95"><center><font SIZE="2">s</font></center></td><td WIDTH="213">day 30
</td><td WIDTH="307">invalid for month 2</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">t</font></center></td><td WIDTH="213">day 31
</td><td WIDTH="307">invalid for months 2,4,6,9,11,</td></tr>

<tr>
<td WIDTH="95"><center><font SIZE="2">u</font></center></td>
<td WIDTH="213">day 32</td>
<td WIDTH="307">smallest invalid value above 31</td>
</tr>

<tr>
<td WIDTH="95"><center><font SIZE="2">v</font></center></td>
<td WIDTH="213">output correct</td>
<td WIDTH="307">&nbsp;</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">w</font></center></td><td WIDTH="213">output not correct
</td><td WIDTH="307">&nbsp;</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">x</font></center></td><td WIDTH="213">exception thrown
</td><td WIDTH="307">&nbsp;</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">y</font></center></td><td WIDTH="213">exception not thrown
</td><td WIDTH="307">&nbsp;</td></tr>

</table>
</center>

<p>
<center><font SIZE="2">Table 11.3 </font><i><font SIZE="2" FACE="Arial">JulianDate</font></i><font SIZE="2">
alternative constructor &amp; </font><i><font SIZE="2" FACE="Arial">toString</font></i><font SIZE="2">()
test cases.<br>
</font></center>
<p>
These cases are then combined to produce the minimum number of
trials which can be used to ensure that every case, and significant
combinations of cases, is demonstrated at least once. The list
of trials for this requirement is given in Table 11.4. <br>

<p>
<center>
<table BORDER="1">

<tr><td WIDTH="95"><center><b><font SIZE="2">trail</font></b></center>
</td><td WIDTH="95"><center><b><font SIZE="2">day</font></b></center>
</td><td WIDTH="95"><center><b><font SIZE="2">month</font></b></center>
</td><td WIDTH="95"><center><b><font SIZE="2">year</font></b></center>
</td><td WIDTH="95"><center><b><font SIZE="2">outcome</font></b></center>
</td><td WIDTH="236"><center><b><font SIZE="2">cases</font></b></center>
</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">1</font></center></td><td WIDTH="95"><center><font SIZE="2">31</font></center>
</td><td WIDTH="95"><center><font SIZE="2">12</font></center></td>
<td WIDTH="95"><center><font SIZE="2">1899</font></center></td><td WIDTH="95"><center><font SIZE="2">exception</font></center>
</td><td WIDTH="236">a, x</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">2</font></center></td><td WIDTH="95"><center><font SIZE="2">1</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1</font></center></td>
<td WIDTH="95"><center><font SIZE="2">1900</font></center></td><td WIDTH="95"><center><font SIZE="2">1 Jan 1900</font></center>
</td><td WIDTH="236">b, p, v, y</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">3</font></center></td><td WIDTH="95"><center><font SIZE="2">31</font></center>
</td><td WIDTH="95"><center><font SIZE="2">12</font></center></td>
<td WIDTH="95"><center><font SIZE="2">2199</font></center></td><td WIDTH="95"><center><font SIZE="2">31 Dec 1900</font></center>
</td><td WIDTH="236">f, m, t, v, y</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">4</font></center></td><td WIDTH="95"><center><font SIZE="2">1</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1</font></center></td>
<td WIDTH="95"><center><font SIZE="2">2200</font></center></td><td WIDTH="95"><center><font SIZE="2">exception</font></center>
</td><td WIDTH="236">g, x</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">5</font></center></td><td WIDTH="95"><center><font SIZE="2">1</font></center>
</td><td WIDTH="95"><center><font SIZE="2">0</font></center></td>
<td WIDTH="95"><center><font SIZE="2">1900</font></center></td><td WIDTH="95"><center><font SIZE="2">exception</font></center>
</td><td WIDTH="236">h, x</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">6</font></center></td><td WIDTH="95"><center><font SIZE="2">1</font></center>
</td><td WIDTH="95"><center><font SIZE="2">13</font></center></td>
<td WIDTH="95"><center><font SIZE="2">1900</font></center></td><td WIDTH="95"><center><font SIZE="2">exception</font></center>
</td><td WIDTH="236">n, x</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">7</font></center></td><td WIDTH="95"><center><font SIZE="2">0</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1</font></center></td>
<td WIDTH="95"><center><font SIZE="2">1900</font></center></td><td WIDTH="95"><center><font SIZE="2">exception</font></center>
</td><td WIDTH="236">o, x</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">8</font></center></td><td WIDTH="95"><center><font SIZE="2">32</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1</font></center></td>
<td WIDTH="95"><center><font SIZE="2">1900</font></center></td><td WIDTH="95"><center><font SIZE="2">exception</font></center>
</td><td WIDTH="236">u, x</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">9</font></center></td><td WIDTH="95"><center><font SIZE="2">31</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1</font></center></td>
<td WIDTH="95"><center><font SIZE="2">1900</font></center></td><td WIDTH="95"><center><font SIZE="2">31 Jan 1900</font></center>
</td><td WIDTH="236">j, i, v, y</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">10</font></center></td>
<td WIDTH="95"><center><font SIZE="2">31</font></center></td><td WIDTH="95"><center><font SIZE="2">4</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1900</font></center></td>
<td WIDTH="95"><center><font SIZE="2">exception</font></center></td>
<td WIDTH="236">t, x</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">11</font></center></td>
<td WIDTH="95"><center><font SIZE="2">30</font></center></td><td WIDTH="95"><center><font SIZE="2">4</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1900</font></center></td>
<td WIDTH="95"><center><font SIZE="2">30 Apr 1900</font></center>
</td><td WIDTH="236">k, v, y</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">12</font></center></td>
<td WIDTH="95"><center><font SIZE="2">30</font></center></td><td WIDTH="95"><center><font SIZE="2">2</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1904</font></center></td>
<td WIDTH="95"><center><font SIZE="2">exception</font></center></td>
<td WIDTH="236">s, l, x</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">13</font></center></td>
<td WIDTH="95"><center><font SIZE="2">29 </font></center></td><td WIDTH="95"><center><font SIZE="2">2</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1904</font></center></td>
<td WIDTH="95"><center><font SIZE="2">29 Feb 1904</font></center>
</td><td WIDTH="236">r, c, v, y</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">14</font></center></td>
<td WIDTH="95"><center><font SIZE="2">29 </font></center></td><td WIDTH="95"><center><font SIZE="2">2</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1905</font></center></td>
<td WIDTH="95"><center><font SIZE="2">exception</font></center></td>
<td WIDTH="236">r, d, x</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">15</font></center></td>
<td WIDTH="95"><center><font SIZE="2">28</font></center></td><td WIDTH="95"><center><font SIZE="2">2</font></center>
</td><td WIDTH="95"><center><font SIZE="2">1905</font></center></td>
<td WIDTH="95"><center><font SIZE="2">28 Feb 1905</font></center>
</td><td WIDTH="236">q, l, d, v, y</td></tr>

<tr><td WIDTH="95"><center><font SIZE="2">16</font></center></td>
<td WIDTH="95"><center><font SIZE="2">29 </font></center></td><td WIDTH="95"><center><font SIZE="2">2</font></center>
</td><td WIDTH="95"><center><font SIZE="2">2000</font></center></td>
<td WIDTH="95"><center><font SIZE="2">29 Feb 2000</font></center>
</td><td WIDTH="236">r, c, e, v, y</td></tr>

</table>
</center>
<p>
<center><font SIZE="2">Table 11.4 </font><i><font SIZE="2" FACE="Arial">JulianDate</font></i><font SIZE="2">
default constructor &amp; </font><i><font SIZE="2" FACE="Arial">toString</font></i><font SIZE="2">()
test run.<br>
</font></center>
<p>
The trials cover all cases with the exception of case <i><b>w</b></i>
whose omission is an implicit predication that it should never
happen. The test harness program can be extended to allow these
trials to be applied. Only trials 1 and 2 are shown, te rest can
be implemented in a similar manner.<br>

<pre>
0028       System.out.println( &quot;\t Test run 2 - alternative constructor \n&quot;);
0029
0030       System.out.println( &quot;\n Trial 1 - attempt to construct 31/12/1899 \n&quot;);
0031       <b>try</b> { 
0032          <i>testDate</i> = <b>new</b> <i>JulianDate</i>( 1899, 12, 31, <i>JulianDate.EUROPEAN</i>);
0033          System.out.println( &quot;No exception thrown,  ... trial failed.&quot;);
0034       } <b>catch</b> ( ) { 
0035          System.out.println( &quot;Exception thrown ... trial passed.&quot;);
0036       } // End try/ catch.
0037
0038       System.out.println( &quot;\n Trial 2 - attempt to construct 1/1/1900 \n&quot;);
0039       <b>try</b> { 
0040          <i>testDate</i> = <b>new</b> <i>JulianDate</i>( 1900, 1, 1, <i>JulianDate.EUROPEAN</i> );
0041          System.out.println( &quot;No exception thrown,  ... trial passed.&quot;);
0042          System.out.println( &quot;Date is &quot; + <i>testDate </i>+ &quot;.&quot;);
0043       } <b>catch</b> ( ) { 
0044          System.out.println( &quot;Exception thrown ... trial failed.&quot;);
0045       } // End try/ catch.<br>
</pre>

<p>
The <i><font SIZE="2" FACE="Arial">JulianDate.EUROPEAN</font></i>
argument has to be included to satisfy the calling requirements
of the constructor and is not part of the test. The output from
this fragment is as follows. <br>

<p>
<hr>
<pre>
	 	Test run 2 - alternative constructor 

Trial 1 - attempt to construct 31/12/1899.
Exception thrown ... trial passed.

Trial 2 - attempt to construct 1/1/1900.
No exception thrown,  ... trial passed.
Date is Sun Jan  1 1900.<br>

</pre>
<hr>
<p>
The 109573 valid days which this implementation of the Julian
date concept is able to represent have been adequately tested
with only sixteen trials. This output does not prove, for example,
that the 12<sup>th</sup> March 1986 will not throw an exception
nor that the 43<sup>rd</sup> day of the 19<sup>th</sup> month
in 2699 will not. However it is more convincing than a mere demonstration
that some randomly selected possible dates do, or do not, throw
exceptions or produce the anticipated output. It has increased
the confidence that the constructor is operating correctly and
the quality of the rationale expresses the degree of confidence
obtained. <br>

<p>
Should the output indicate that any of the trials had failed the
first step is to double check the test harness to make sure that
it is not faulty. For example an arguments of the constructor
might have been typed incorrectly causing an exception to be thrown
in a trial which should not throw one. Otherwise the cause of
the fault will have to be determined and corrected, a process
known as <i><b>debugging</b></i>. Having located and corrected
the fault, testing should recommence from the first test run,
as the correction of the fault may cause the artefact to now fail
a trial which it had previously passed. This process can be facilitated
by the use of automated test harnesses, as are being constructed
here.<br>
<br>


<p>
<hr>
<h2>
<ul>

<p>
<a HREF="chap11p3.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter11/chap11p3.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
11.3 Relational and inverse testing of the <i>ArithmeticJulianDate</i>
actions</a>.
<p>
<a HREF="chap11p1.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter11/chap11p1.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
11.1 Testing the <i>BasicJulianDate</i> default constructor</a>.
<p>
</ul>
</h2>
<hr>

</body>

</html>
&#26;