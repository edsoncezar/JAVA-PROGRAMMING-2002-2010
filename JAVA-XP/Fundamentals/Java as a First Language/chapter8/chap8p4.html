<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>8.4 Problems with concurrency </title>

</head>

<body BGCOLOR="WHITE">

<h2>8.4 Problems with concurrency <br>
</h2>

<p>
This chapter has necessarily only been an introduction to the
design and implementation of concurrent processes, which are recognised
as being one of the most specialised and difficult aspects of
software development. Although it may not seem so at this stage
the <font SIZE="2" FACE="Arial">Thread</font> facilities supplied
by Java greatly ease the development of multi-threaded programs.
<br>

<p>
The commonest fault which will be encountered as more complex
concurrent programs are developed is a <i><b>mutual deadlock</b></i>.
This occurs when two processes each synchronize, or <i><b>lock</b></i>,
a resource which the other is waiting to obtain. For example process
<i>A</i> may have locked variable <i>one</i> and is not prepared
to release the lock until it can have access to variable <i>two</i>.
Meanwhile process <i>B</i> has locked variable <i>two</i> and
is not prepared to release it until it has access to variable
<i>one</i>. The effect is that each process cannot proceed as
the other process is preventing it: this situation is commonly
known as a <i><b>deadly&nbsp;embrace</b></i>. <br>

<p>
The advice given to reduce the possibility of this situation arising
include making any synchronized actions as short and as simple
as possible and designing and implementing concurrent software
with a particular degree of care. Actions should be constructed
so that if they find themselves blocked, after retrying a small
number of times, they should release any locks and wait a random
amount of time before trying again.<br>

<p>
When implementing any class the possibility that the class might
at some stage in future be used in a concurrent program should
be borne in mind. Any action which changes the state of an instance
of the class should always leave the class in a well defined state
and should be declared as a <i><font SIZE="2" FACE="Arial">synchronized</font></i>
action. This may have a small penalty when the class is used by
a non-concurrent program. But it will be of immense benefit if
the class is ever used by a concurrent program as it will avoid
introducing faults which are very difficult to detect and correct.
<br>

<p>
In the discussion in this chapter it has been implicitly suggested
that an interruption can only occur between two Java statements.
This is quite simply not true! A single Java statement will be
compiled into a number of Java virtual machine instructions and
these in turn might be executed as a number of native processor
instructions. An interruption can occur between any two native
instructions and this is more likely to occur in the middle of
a Java statement than between two Java statements. This was illustrated
by the wildly differing values in the <i><font SIZE="2" FACE="Arial">DangerousDemo</font></i>
client which suggested that the updating of one, or other, of
the attributes was suspended before it had completed.<br>
<br>


<p>
<hr>
<h2>
<ul>


<a HREF="chap8sum.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter8/chap8sum.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
Summary of Chapter 8</a>.
<p>
<a HREF="chap8p3.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter8/chap8p3.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
8.3 Synchronisation of actions</a>.

</ul>
</h2>
<hr>
</body>

</html>
&#26;