<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>10.2 The BasicJulianDates class</title>

</head>

<body bgcolor="white">

<h2>10.2 The <i>BasicJulianDates</i> class<br>
</h2>

<p>
<font SIZE="2">The </font><i><font SIZE="2" FACE="Arial">BasicJulianDates</font></i><font SIZE="2">
class is the most complex class which will be presented in this
book. Consequently its design and implementation will be presented
in two stages, starting with the partial class diagram in Figure
10.2.</font>
<p>
<center><img SRC="c10p2i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/c10p2i1.gif" WIDTH="523" HEIGHT="305"></font></center>
<p>
<center><font SIZE="2">Figure 10.2 The start of the <i>BasicJulianDate</i>
class diagram.<br>
</font></center>
<p>
<font SIZE="2">The first, default, constructor will construct a
<i>JulianDate</i> instance which contains an invalid null date.
The second constructor will attempt to construct an instance containing
a representation of the date expressed in its arguments. It is
possible that the arguments specify an invalid date, for example
the 31<sup>st</sup> June 1997, and so the action is shown as throwing
an exception. The <i>today</i> action will set the instance to
the current date. <br>
</font>
<p>
<font SIZE="2">Both of these latter two actions will make use of
a protected action called <i>makeJulianDate</i> which may also
throw an exception. It is theoretically possible that <i>today</i>
could cause an exception to be propagated from its call of the
<i>makeJulianDate</i> action, but as it obtains its arguments
from the system clock this is impossible and so it is not noted
as throwing an exception. The diagram also indicates a single
private data attribute called <i>dayNumber</i> and a semi-public
action to obtain this value called <i>DayNumberIs</i>. <br>
</font>
<p>
<font SIZE="2">The implementation of this class, as far as the end
of the constructors,<i> </i>is as follows. The actions are preceded
by a large number of manifest declarations whose use will be explained
as they are used. <br>
</font>
<pre>
0001 // Filename BasicJulianDate.java.
0002 // Base of the JulianDate hierarchy providing the 
0003 // essential functionality.
0004 //
0005 // Written for JFL Book Chapter 10.
0006 // Fintan Culwin, V 0.1, Jan 1997. 
0007 
0008 <b>package</b> JulianDates;
0009 
0010 <b>import</b> java.util.Date;
0011 <b>import</b> JulianDates.JulianDateException;
0012 
0013 <b>protected abstract class</b> BasicJulianDate <b>extends</b> Object { 
0014 
0015 <b>protected int</b> dayNumber;
0016 
0017 <b>private static final int</b> DAYS_PER_YEAR      = 365;
0018 <b>private static final int</b> DAYS_PER_LEAP_YEAR = 366;
0019 
0020
0021 <b>private static final int</b> MINIMUM_YEAR       = 1900;
0022 <b>private static final int</b> MAXIMUM_YEAR       = 2199;
0023 <b>private static final int</b> MINIMUM_MONTH      = 1;
0024 <b>private static final int</b> MAXIMUM_MONTH      = 12;
0025 <b>private static final int</b> MINIMUM_DAY        = 1;
0026 
0027 
0028 <b>private static final</b> String DAY_NAMES[]   = { 
0029                                       &quot;Sat&quot;, &quot;Sun&quot;, &quot;Mon&quot;, &quot;Tue&quot;, 
0030                                       &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot; };
0031 
0032 <b>private static final</b> String MONTH_NAMES[] = { &quot;&quot; ,
0033                                       &quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;,
0034                                       &quot;May&quot;, &quot;Jun&quot;, &quot;Jly&quot;, &quot;Aug&quot;,
0035                                       &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot; };
0036                                      
0000 <b>protected static final int </b>NULL_JULIAN_DATE     = 0;
0037 <b>protected static final int</b> MINIMIUM_JULIAN_DATE = 1; 
0038 <b>protected static final int</b> MAXIMIUM_JULIAN_DATE = 109573;
0039 
0040    // Default constructor - set to a null date.
0041    <b>public</b> BasicJulianDate(){ 
0042       dayNumber =<b> </b>NULL_JULIAN_DATE;
0043    } // End JulianDate default constructor
0044 
0045 
0046    // Alternative constructor - to construct specific date,
0047    // will throw exception if invalid date requested. 
0048    <b>public</b> BasicJulianDate( <b>int</b> year, <b>int</b> month, <b>int</b> day ) 
0049                                                 <b>throws</b> JulianDateException {
0050        dayNumber = makeJulianDate( year, month, day);
0051    } // End JulianDate alternative default constructor <br>
</pre>

<p>
<font SIZE="2">The design of the <i>makeJulianDate</i> action is
as follows. <br>
</font>
<p>
<center><img SRC="c10p2i2.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/c10p2i2.gif" WIDTH="682" HEIGHT="398"></center>
<p>
<font SIZE="2">The basis of this design, after ensuring that the
arguments represent a valid date and throwing an exception if
not, is to count the number of days since the 1<sup>st</sup> January
1900 to the date represented by the arguments. It starts by adding
the number of days in the current month and then iteratively adding
the number of days in each month elapsed before adding the number
of days in each elapsed year. This last stage makes no allowance
for leap years and the final stage is to make an correction for
this. The implementation of this design is as follows.<br>
</font>
<pre>
0062    <b>protected int</b> <i>makeJulianDate</i>( <b>int</b> <i>year</i>, <b>int</b> <i>month</i>, <b>int</b> <i>day</i> ) 
0063                                                 <b>throws</b> <i>JulianDateException</i> { 
0064 
0065    <b>int</b> <i>localDayNumber</i> = 0;
0066    <b>int</b> <i>thisMonth</i>; 
0067 
0068       <b>if</b> ( ! <i>isValidDate</i>( <i>year</i>, <i>month</i>, <i>day</i>)) { 
0069         <b>throw new</b> <i>JulianDateException</i>( 
0070                         <i>JulianDateException</i>.DATE_CONSTRUCTION_ERROR); 
0071       } // End if. 
0072 
0073       // Start with the day of the month
0074       <i>localDayNumber</i> = <i>day</i>;
0075
0076       // Add the number of days for the month.
0077       <b>for</b> ( <i>thisMonth</i> = 1; <i>thisMonth</i> &lt; <i>month</i>; <i>thisMonth</i> ++) { 
0078           <i>localDayNumber</i> += <i>daysThisMonth</i>( <i>year</i>, <i>thisMonth</i>);
0079       } // End for.
0080 
0081       // Add the number of days for the year (ignoring leap years).
0082       <i>localDayNumber</i> += (<i>year</i> - <i>MINIMUM_YEAR</i>) * <i>DAYS_PER_YEAR</i>; 
0083    
0084       // Correct for the number of leap years passed. 
0085       <i>localDayNumber</i> += ((<i>year</i> - <i>MINIMUM_YEAR</i>)<i> </i>/4)   - 
0086                         ((<i>year</i> - <i>MINIMUM_YEAR</i>)<i> </i>/100);
0087      <b>if</b> ( <i>year</i> &gt; 2000) { 
0088          localDayNumber++;
0089      } // End if.
0090
0088       <b>return</b> <i>localDayNumber</i>;
0089    } // End <i>MakeJulianDate</i>.<br>
</pre>

<p>
<font SIZE="2">Omitting the validation of the arguments, line 0074
starts computing the number of days by assigning the day of the
month to a local variable called </font><i><font SIZE="2" FACE="Arial">localDayNumber</font></i><font SIZE="2">.
It then adds the number of days in each month elapsed, using a
private action called </font><i><font SIZE="2" FACE="Arial">daysThisMonth()</font></i><font SIZE="2">
to obtain a value for the number of days in the month. The number
of days in the years elapsed since 1900 is then added on line
0082, without considering leap years. Finally, using the rule
that every 4th year is a leap year, apart from every 100th year
unless it is a 400<sup>th</sup> year, the number of leap years
is added. The expression on lines 0085 to 0086 will allow for
1900 not being a leap year but will not recognise that 2000 is
a leap year. Consequently a correction for this has to be included
on lines 0087 to 0089.<br>
</font>
<p>
<font SIZE="2">The implementation of the </font><i><font SIZE="2" FACE="Arial">isValidDate</font></i><font SIZE="2">()
action is as follows. <br>
</font>
<pre>
0254    <b>protected boolean</b> <i>isValidDate</i>( <b>int</b> <i>year</i>, <b>int</b> <i>month</i>, <b>int</b> <i>day</i> ) { 
0255    
0256    <b>boolean</b> <i>isGoodYear</i>  = (<i>year</i>  &gt;= <i>MINIMUM_YEAR</i>) &amp;&amp;
0257                          (<i>year</i>  &lt;= <i>MAXIMUM_YEAR)</i>;
0258    <b>boolean</b> <i>isGoodMonth</i> = (<i>month</i> &gt;= <i>MINIMUM_MONTH</i>) &amp;&amp; 
0259                          (<i>month</i> &lt;= <i>MAXIMUM_MONTH)</i>;
0260    <b>boolean</b> <i>isGoodDay</i>   = <b>false</b>; 
0261 
0262       <b>if</b> ( <i>isGoodYear</i> &amp;&amp; <i>isGoodMonth</i>) {     
0263          <i>isGoodDay</i> = (<i>day</i> &gt;= <i>MINIMUM_DAY</i>) &amp;&amp; 
0264                      (<i>day</i> &lt;= <i>daysThisMonth</i>( <i>year</i>, <i>month</i>)); 
0265       } // End if. 
0266       <b>return</b> <i>isGoodYear</i> &amp;&amp; <i>isGoodMonth</i> &amp;&amp; <i>isGoodDay</i>; 
0267    } // End <i>isValidDate<br>
</i>
</pre>

<p>
<font SIZE="2">The validation of the </font><i><font SIZE="2" FACE="Arial">year</font></i><font SIZE="2">
and </font><i><font SIZE="2" FACE="Arial">month</font></i><font SIZE="2">
arguments is accomplished on lines 0256 to 0259. Only if they
are validated is the </font><i><font SIZE="2" FACE="Arial">day</font></i><font SIZE="2">
validated by comparing its value against the minimum and maximum
days of the specified month. The result of the function is the
</font><b><font SIZE="2" FACE="Arial">and</font></b><font SIZE="2">ed
combination of the three </font><b><font SIZE="2" FACE="Arial">boolean</font></b><font SIZE="2">
flags containing the validations of the three arguments. The action
will only return true if all three of these flags are </font><b><font SIZE="2" FACE="Arial">true</font></b><font SIZE="2">.
This action also relies upon the </font><i><font SIZE="2" FACE="Arial">daysThisMonth</font></i><font SIZE="2">()
action whose implementation is as follows.<br>
</font>
<pre>
0223    <b>private int</b> <i>daysThisMonth</i>( <b>int</b> <i>thisYear</i>, <b>int</b> <i>thisMonth</i>) { 
0224 
0225    <b>int</b> <i>localDays</i>;
0226 
0227       <b>switch</b> ( <i>thisMonth</i>) { 
0228          <b>case</b> 4:
0229          <b>case</b> 6:
0230          <b>case</b> 9:
0231          <b>case</b> 11:
0232             <i>localDays</i> = 30;
0233             <b>break</b>; 
0234          <b>case</b> 2:
0235             <b>if</b> ( <i>isLeapYear</i>( <i>thisYear</i>)) { 
0236                <i>localDays</i> = 29;
0237             } <b>else</b> { 
0238                <i>localDays</i> = 28;
0239             } // end if
0240             <b>break</b>;
0241          <b>default</b>:
0242            <i>localDays</i> = 31;
0243       } // End switch.
0244       <b>return</b> <i>localDays</i>;
0245    } // End <i>daysThisMonth.</i>
0256 
0257 
0258    <b>private boolean</b> <i>isLeapYear</i>( <b>int</b> <i>thisYear</i>) { 
0259 
0260       <b>return</b> (  (<i>thisYear</i>  % 400) == 0) ||
0261              ( ((<i>thisYear</i>  % 4)   == 0) &amp;&amp;
0262                ((<i>thisYear</i> % 100) != 0) );
0263    } // End <i>isLeapYear</i>.<br>

</pre>

<p>
<font SIZE="2">The implementation of </font><i><font SIZE="2" FACE="Arial">daysThisMonth</font></i><font SIZE="2">()
is based upon the rhyme:<br>
</font>
<p>
<ul>
Thirty days hath September,
<br>
April, June and November.
<br>
All the rest have 31; save February alone
<br>
which has 28 in each year clear,
<br>
and 29 in each leap year.<br>
</ul>
<p>
<font SIZE="2">This is the basis of the </font><b><font SIZE="2" FACE="Arial">switch</font></b><font SIZE="2">
structure between lines 00227 and 00243, with February considered
between lines 00235 and 00239. This option is supported by the
</font><b><font SIZE="2" FACE="Arial">boolean</font></b><font SIZE="2">
action </font><i><font SIZE="2" FACE="Arial">isLeapYear</font></i><font SIZE="2">()
whose implementation is also presented and is based upon the same
rules for leap years as stated above. <br>
</font>
<p>
<font SIZE="2">The actions shown so far have explained how the alternative
constructor is implemented by a call of </font><i><font SIZE="2" FACE="Arial">makeJulianDate</font></i><font SIZE="2">()
which relies upon </font><i><font SIZE="2" FACE="Arial">isValidDate</font></i><font SIZE="2">(),
which itself is dependent upon </font><i><font SIZE="2" FACE="Arial">daysThisMonth</font></i><font SIZE="2">()
and through it </font><i><font SIZE="2" FACE="Arial">IsLeapYear</font></i><font SIZE="2">().
The implementation of </font><i><font SIZE="2" FACE="Arial">today</font></i><font SIZE="2">()
is as follows. <br>
</font>
<pre>
0092    <b>public void</b> <i>today</i>(){ 
0093 
0094    Date <i>theSystemDate</i> = <b>new</b> java.util.Date();
0095    <b>int</b>  <i>theYear</i>       = theSystemDate.getYear()  + MINUMUM_YEAR;
0096    <b>int</b>  <i>theMonth</i>      = theSystemDate.getMonth() +1;
0097    <b>int</b>  <i>theDay</i>        = theSystemDate.getDate();
0098    
0099       <i>dayNumber</i> = <i>makeJulianDate</i>( <i>theYear</i>, <i>theMonth</i>, <i>theDay</i>);
0100    }  // End <i>today</i>.<br>
</pre>

<p>
<font SIZE="2">The standard class </font><font SIZE="2" FACE="Arial">java.util.Date</font><font SIZE="2">
supplies facilities to obtain the date from the system clock.
An instance of this class is declared and automagically initialised
upon construction to the current data and time. Three enquiry
actions are then used to obtain the year, month and data components.
The year value returned by </font><font SIZE="2" FACE="Arial">getYear()</font><font SIZE="2">
starts with a value of 0 indicating the year 1900 and has the
value of </font><i><font SIZE="2" FACE="Arial">MINIMUM_YEAR</font></i><font SIZE="2">
(1900) added to it to make it compatible with the </font><i><font SIZE="2" FACE="Arial">makeJulianDate</font></i><font SIZE="2">
requirements. Likewise the </font><font SIZE="2" FACE="Arial">getMonth</font><font SIZE="2">()
action will return 0 to represent January and 11 to represent
December and has to have 1 added to it to make it comply. Having
obtained the year, month and day in formats which are compatible
with </font><i><font SIZE="2" FACE="Arial">JulianDates</font></i><font SIZE="2">
conventions the </font><i><font SIZE="2" FACE="Arial">makeJulianDate</font></i><font SIZE="2">()
action can be called. <br>
</font>
<p>
<font SIZE="2">The <i>BasicJulianDate</i> class supplies a <i>toString</i>
action which provides a basic output facility which can be used
until the <i>JulianDate</i> class is completed. It will output
the date in the format &quot;ddd nn mmm yyyy&quot;, for example
'Sun  1 Jan 1900'. The implementation of the <i>toString</i> action
will require access to a number of other actions which are shown
on the completion of the class diagram in Figure 10.3. <br>
</font>
<p>
<center><img SRC="c10p2i3.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/c10p2i3.gif" WIDTH="335" HEIGHT="280"></center>
<p>
<center><font SIZE="2">Figure 10.3 Completion of the <i>BasicJulianDate</i>
class diagram.<br>
</font></center>
<p>
The implementation of the </font><i><font SIZE="2" FACE="Arial">toString</font><font SIZE="2">()</font></i><font SIZE="2">
action is as follows. <br>

<pre>
0270    <b>public</b> String <i>toString</i>(){ 
0271      <b>if</b> ( <b>this.</b><i>dayNumber</i> == <i>NULL_JULIAN_DATE</i> ) { 
0272         <b>return</b> &quot;Date not yet set.&quot;;
0273      } <b>else</b> { 
0271          <b>return</b>   <b>this</b>.<i>dayNameIs</i>() + &quot; &quot; + <b>this</b>.<i>dayIs</i>() + &quot; &quot; + 
0272                   <b>this</b>.<i>MONTH_NAMES</i>[ <i>monthIs</i>()] + &quot; &quot; + <b>this</b>.<i>yearIs</i>();
0273      } // End if.
0273    } // End <i>toString</i>.<br>

</pre>

<p>
<font SIZE="2">This makes use of the three enquiry actions which
precede it on the class diagram. The first of these is </font><i><font SIZE="2" FACE="Arial">yearIs</font></i><font SIZE="2">()
which is implemented by iteratively subtracting the number of
days in each year from a copy of the instance attribute </font><i><font SIZE="2" FACE="Arial">dayNumber</font></i><font SIZE="2">,
called </font><i><font SIZE="2" FACE="Arial">daysRemaining</font></i><font SIZE="2">,
whilst incrementing the number of years elapsed, until the number
of days remaining is less than the number of days in the next
year. The design and implementation of this action is as follows.
<br>
</font>
<p>
<center><img SRC="c10p2i4.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/c10p2i4.gif" WIDTH="684" HEIGHT="425"> </center>
<pre>
0107    <b>public int</b> <i>yearIs</i>() <b>throws</b> <i>JulianDateException</i> { 
0108    
0109    <b>int</b> <i>daysThisYear</i> = <i>DAYS_PER_YEAR</i>; // 1900 is not a leap year!
0110    <b>int</b> <i>daysRemaining</i> = <i>dayNumber</i>;
0111    <b>int</b> <i>localYear</i>    = <i>MINIMUM_YEAR</i>;
0112 
0000       <b>if</b> ( <b>this</b>.<i>dayNumber</i> == <i>NULL_JULIAN_DATE</i>) { 
0000          <b>throw new</b> <i>JulianDateException</i>( <i>JulianDateException.NULL_DATE</i>);
0000       } // End if.
0000
0113       <b>while</b> ( <i>daysRemaining</i> &gt; <i>daysThisYear</i> ) {
0114          <i>daysRemaining</i> -= <i>daysThisYear</i>; 
0115          <i>localYear</i>++;
0116          <b>if</b> ( <i>isLeapYear</i>( <i>localYear</i>)){ 
0117             <i>daysThisYear</i> = <i>DAYS_PER_LEAP_YEAR</i>;
0118          } <b>else</b> { 
0119             <i>daysThisYear</i> = <i>DAYS_PER_YEAR</i>;
0120          } // End if.      
0121       } // End while;     
0122       <b>return</b> <i>localYear</i>;
0123    } // End <i>YearIs.</i>
</pre>

<p>
<font SIZE="2">The </font><i><font SIZE="2" FACE="Arial">monthIs()</font></i><font SIZE="2">
action is somewhat similar, starting by initialising a local variable,
called </font><i><font SIZE="2" FACE="Arial">daysRemaining</font></i><font SIZE="2">,
to the value of the instance attribute </font><i><font SIZE="2" FACE="Arial">dayNumber</font></i><font SIZE="2">
minus the number of days up to this year, obtained by calling
the private action </font><i><font SIZE="2" FACE="Arial">daysToThisYear().</font></i><font SIZE="2">
The design and implementation of </font><i><font SIZE="2" FACE="Arial">monthIs()</font></i><font SIZE="2">
is as follows.<br>
</font>
<p>
<center><img SRC="c10p2i5.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/c10p2i5.gif" WIDTH="539" HEIGHT="356"></center>
<pre>
0125    <b>public int</b> <i>monthIs</i>() <b>throws</b> <i>JulianDateException</i> { 
0126 
0127    <b>int</b>  <i>daysRemaining</i> = <i>dayNumber</i> - <i>daysToThisYear</i>();
0128    <b>int</b>  <i>localYear</i>     = <i>yearIs</i>();
0129    <b>int</b>  <i>localMonth</i>    = 1;
0130   
0000       <b>if</b> ( <b>this</b>.<i>dayNumber</i> == <i>NULL_JULIAN_DATE</i>) { 
0000          <b>throw new</b> <i>JulianDateException</i>( <i>JulianDateException.NULL_DATE</i>);
0000       } // End if.
0131       <b>while</b> ( <i>daysRemaining</i> &gt; <i>daysThisMonth</i>( <i>localYear</i>, <i>localMonth</i>)) {       
0132          <i>daysRemaining</i> -= <i>daysThisMonth</i>( <i>localYear</i>, <i>localMonth</i>);
0133          <i>localMonth</i>++;
0134       } // End while.
0135       <b>return</b> <i>localMonth</i>;
0136    } // End <i>MonthIs</i>.<br>

</pre>

<p>
<font SIZE="2">This implementation depends upon the implementation
of the private action </font><i><font SIZE="2" FACE="Arial">daysToThisYear()</font></i><font SIZE="2">
whose design considerations are similar to those required for
the </font><i><font SIZE="2" FACE="Arial">makeJulianDate() </font></i><font SIZE="2">
action described above. The implementation of this action is as
follows.<br>
</font>
<pre>
0160    <b>private</b> <b>int</b> <i>daysToThisYear</i>(){ 
0161 
0162    <b>int</b> <i>localYears</i>   = <i>yearIs</i>() - <i>MINIMUM_YEAR</i>;
0163    <b>int</b> <i>daysElapsed</i>  = 0;
0164  
0165       <i>daysElapsed</i> =  ( (<i>localYears</i>  * DAYS_PER_YEAR) + 
0166                        (<i>localYears</i>  /4)              - 
0167                        (<i>localYears</i> /100)             ); 
0168       <b>if</b> ( <i>localYears</i> &gt; 100) { 
0169         <i>daysElapsed</i>++;
0170       } // End if.
0171       <b>return</b> <i>daysElapsed</i>;                 
0171    } // End <i>daysToThisYear</i>
</pre>

<p>
<font SIZE="2">The value returned from the </font><i><font SIZE="2" FACE="Arial">monthIs()</font></i><font SIZE="2">
action is an integer indicating the month number, with January
having the value 1. Within the </font><i><font SIZE="2" FACE="Arial">toString()</font></i><font SIZE="2">
action this value is used as an index into the </font><i><font SIZE="2" FACE="Arial">MONTH_NAMES</font></i><font SIZE="2">
array to obtain the name of the month. As arrays in Java must
start from index 0 the first (zeroth) element of this array is
a null String, as shown on line 0028 of the declarations above.
<br>
</font>
<p>
<font SIZE="2">The implementation of the </font><i><font SIZE="2" FACE="Arial">dayIs()</font></i><font SIZE="2">
action subtracts from the instance attribute the number of days
up to this year and month, obtained from the private </font><i><font SIZE="2" FACE="Arial">daysToThisYearAndMonth()</font></i><font SIZE="2">
action, the resulting value is the day number in the current month.
The implementation of these two actions is as follows. <br>
</font>
<pre>
0139    <b>public</b> <b>int</b> <i>dayIs</i>() <b>throws</b> <i>JulianDateException</i> { 
0000       <b>if</b> ( <b>this</b>.<i>dayNumber</i> == <i>NULL_JULIAN_DATE</i>) { 
0000          <b>throw new</b> <i>JulianDateException</i>( <i>JulianDateException.NULL_DATE</i>);
0000       } // End if.
0140       <b>return</b> <i>dayNumber</i> - <i>daysToThisYearAndMonth</i>();;
0141    } // End <i>dayIs</i>.<br>

0173    <b>private int</b> <i>daysToThisYearAndMonth</i>(){ 
0174    
0175    <b>int</b> <i>daysElapsed</i>   = <i>daysToThisYear</i>();
0176    <b>int</b> <i>daysRemaining</i> = <i>dayNumber</i> - <i>daysElapsed</i>;
0177    <b>int</b> <i>localYear</i>     = <i>yearIs</i>();
0178    <b>int</b> <i>localMonth</i>    = 1;
0179 
0180       <b>while</b> ( <i>daysRemaining</i> &gt; <i>daysThisMonth</i>( <i>localYear</i>, <i>localMonth</i>)) { 
0181          <i>daysRemaining</i> -= <i>daysThisMonth</i>( <i>localYear</i>, <i>localMonth</i>);
0182          <i>daysElapsed</i>   += <i>daysThisMonth</i>( <i>localYear</i>, <i>localMonth</i>);
0183          <i>localMonth</i>++;
0184       } // End while.
0185       <b>return</b> <i>daysElapsed</i>;
0186    } // End <i>daysToThisYearAndMonth.</i>
</pre>

<p>
<font SIZE="2">The construction of the </font><i><font SIZE="2" FACE="Arial">daysToThisYearAndMonth</font><font SIZE="2">()</font></i><font SIZE="2">
action is similar to the </font><i><font SIZE="2" FACE="Arial">monthIs()</font></i><font SIZE="2">
action described above. The final action used by the </font><i><font SIZE="2" FACE="Arial">toString()</font></i><font SIZE="2">
action is </font><i><font SIZE="2" FACE="Arial">dayNameIs()</font></i><font SIZE="2">
whose implementation is as follows. <br>
</font>
<pre>
0144    <b>public</b> String <i>dayNameIs</i>(){ 
0145       <b>return</b> DAY_NAMES[ dayNumber % 7];
0146    } // End DayNameIs.
</pre>

<p>
<font SIZE="2">The modular division results in a value between 0
and 6 and as the 1<sup>st</sup> January 1900 happened to be a
Sunday and has the </font><i><font SIZE="2" FACE="Arial">JulianDay</font></i><font SIZE="2">
number 1, &quot;Sun&quot; has to be in the second location of
the </font><i><font SIZE="2" FACE="Arial">DAY_NAMES</font></i><font SIZE="2">
array. This determines the location of the other day names as
shown on lines 0028 to 0030 of the listing above. <br>
</font>
<p>
<font SIZE="2">The only remaining action of the </font><i><font SIZE="2" FACE="Arial">BasicJulianDate</font></i><font SIZE="2">
class is the protected </font><i><font SIZE="2" FACE="Arial">dayNumberIs</font></i><font SIZE="2">()
enquiry action whose implementation is as follows. <br>
</font>
<pre>
0000    <b>protected int</b> <i>dayNumberIs</i>() { 
0000      <b>return</b> <b>this</b>.<i>dayNumber</i>;
0000    } // End <i>dayNumberIs</i>.
</pre>

<p>
<font SIZE="2">The demonstration of this class will be considered
in the next chapter. <br>
<br>
</font>

<p>
<hr>
<h2>
<ul>
<a HREF="basicjuliandate.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/BasicJulianDate.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>BasicJulianDate.java</i> source code</a>.
<p>
<a HREF="chap10p3.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/chap10p3.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
10.3 The <i>ArithmeticJulianDates</i> class </a>.
<p>
<a HREF="chap10p1.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/chap10p1.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
10.1 The <i>JulianDates</i> class hierarchy</a>.
</ul>
</h2>
<hr>



</body>

</html>
&#26;
