<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>10.3 The ArithmeticJulianDates class</title>

</head>

<body BGCOLOR="WHITE">

<h2>10.3 The <i>ArithmeticJulianDates</i> class<br>
</h2>

<p>
<font SIZE="2">The <i>ArithmeticJulianDates</i> class introduces
actions which allow dates to be calculated, and actions which
allow two dates to be compared returning a boolean value. The
object diagram for this class is given in Figure 10.4. <br>
</font>
<p>
<center><img SRC="c10p3i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/c10p3i1.gif" WIDTH="364" HEIGHT="685"></center>
<p>
<center><font SIZE="2">Figure 10.4 The <i>ArithmeticJulianDate</i>
class diagram.<br>
</font></center>
<p>
<font SIZE="2">The diagram indicates that two constructors, comparable
to the <i>BasicJulianDate</i> constructors, will be supplied.
The <i>tomorrow</i> and <i>yesterday</i> actions will increment
or decrement the date by 1 day. This may cause the date to attempt
to go beyond the maximum date or below the minimum date and so
each might throw an exception. Likewise the <i>daysHence</i> and
<i>daysPast</i> actions will increment or decrement the date by
the number of <i>days</i> specified in the argument. The implementation
of this design as far as the end of the <i>daysPast</i> action
is as follows. <br>
</font>
<pre>
0001 // Filename ArithmeticJulianDate.java.
0002 // First extension of the JulianDate hierarchy 
0003 // to provide (pseudo)-arithmetic operations.
0004 //
0005 // Written for JFL Book Chapter 10.
0006 // Fintan Culwin, V 0.1, Jan 1997. 
0007 
0008 <b>package</b> JulianDates;
0009 
0010 <b>import</b> JulianDates.JulianDateException;
0011 
0012 <b>protected abstract</b> <b>class</b> ArithmeticJulianDate <b>extends</b> BasicJulianDate {
0013 
0014    <b>public</b> ArithmeticJulianDate(){ 
0015       <b>super</b>();
0016    } // End ArithmeticJulianDate default constructor.
0017    
0018    <b>public</b> ArithmeticJulianDate( <b>int</b> year, <b>int</b> month, <b>int</b> day) {
0019                                          <b>throws</b> JulianDateException;
0020        <b>super</b>( year, month, day);
0021    } // End ArithmeticJulianDate alternative constructor.
0022 
0023
0024    <b>public void</b> tomorrow() <b>throws</b> JulianDateException { 
0025       <b>this</b>.add( 1);
0026    } // End tomorrow. 
0027 
0028    <b>public void</b> yesterday() <b>throws</b> JulianDateException { 
0029      <b>this</b>.add( -1);
0030    } // End yesterday. 
0031 
0032    <b>public void</b> daysHence( <b>int</b> toElapse) <b>throws</b> JulianDateException { 
0033       <b>this</b>.add( toElapse);   
0034    } // End daysHence.
0035    
0036    <b>public void</b> daysPast( <b>int</b> hasPassed) <b>throws</b> JulianDateException { 
0037       <b>this</b>.add( -hasPassed);   
0038    } // End daysPast.
</pre>

<p>
<font SIZE="2">The two constructors are implemented by calling the
appropriate super, </font><i><font SIZE="2" FACE="Arial">BasicJulianDate</font></i><font SIZE="2">
constructor; passing on the arguments, if any. All of the actions
are implemented as a call to the private <i>add</i> action whose
implementation is as follows. <br>
</font>
<pre>
0000    <b>private void</b> <i>add</i>( <b>int</b> <i>toAdd</i>) <b>throws</b> <i>JulianDateException</i> { 
0000       <b>if</b> ( (<b>this</b>.<i>dayNumberIs</i>() + <i>toAdd</i> &gt;  MAXIMIUM_JULIAN_DATE) ||
0000            (<b>this</b>.<i>dayNumberIs</i>() + <i>toAdd</i> &lt;  MINIMIUM_JULIAN_DATE)   ) { 
0000         <b>throw new</b> <i>JulianDateException</i>( 
0000                         <i>JulianDateException</i>.<i>ARITHMETIC_ERROR</i>);          
0000       } // End if.
0000       <b>this</b>.<i>dayNumber</i> += <i>toAdd</i>; 
0000    } // End <i>add</i>. 
</pre>

<p>
<font SIZE="2">The action is guarded by a test which attempts to
make sure that the result of the addition would not result in
a value which was too large or too small and if so throws a suitable
</font><i><font SIZE="2" FACE="Arial">JulianDateException</font></i><font SIZE="2">,
otherwise the addition is performed. So for example the calculation
of yesterday is implemented by adding -1 to the current </font><i><font SIZE="2" FACE="Arial">dayNumber</font></i><font SIZE="2">,
which will throw an exception if the current date is the minimum
date. The <i>daysBetween</i> action will return the number of
dates between this date and the <i>otherDate</i> passed to it;
its implementation is as follows. <br>
</font>
<pre>
0040    <b>public long</b> daysBetween( ArithmeticJulianDate since) { 
0041       <b>return this</b>.dayNumberIs() - since.dayNumberIs();
0042    } // End daysBetween.
</pre>

<p>
<font SIZE="2">It returns the result of subtracting the </font><i><font SIZE="2" FACE="Arial">dayNumber</font></i><font SIZE="2">
of the argument </font><i><font SIZE="2" FACE="Arial">since</font></i><font SIZE="2">
from the current </font><i><font SIZE="2" FACE="Arial">dayNumber</font></i><font SIZE="2">.
This will result in a negative number of days if </font><i><font SIZE="2" FACE="Arial">since</font></i><font SIZE="2">
is in the future compared with the instance date. The implementations
of the remaining actions are somewhat similar. <br>
</font>
<pre>
0045    <b>public boolean </b>equals( ArithmeticJulianDate toCompare) { 
0046       <b>return</b> <b>this</b>.dayNumberIs() == toCompare.dayNumberIs();
0047    } // End equals.
0048    
0049    <b>public boolean</b> isLaterThan( ArithmeticJulianDate toCompare) { 
0050       <b>return</b> <b>this</b>.dayNumberIs() &gt; toCompare.dayNumberIs();
0051    } // End isLaterThan.   
0052 
0053    <b>public boolean</b> isEarlierThan( ArithmeticJulianDate toCompare) { 
0054       <b>return</b> <b>this</b>.dayNumberIs() &lt; toCompare.dayNumberIs();
0055    } // End <i>isEarierThan</i>.
</pre>

<p>
<font SIZE="2">The first of these actions, </font><i><font SIZE="2" FACE="Arial">equals()</font></i><font SIZE="2">,
overloads the default </font><i><font SIZE="2" FACE="Arial">equals()</font></i><font SIZE="2">
action supplied by the </font><font SIZE="2" FACE="Arial">Object</font><font SIZE="2">
class. This action is used by a number of the pre-supplied utility
classes and should always be implemented in a developer supplied
class. All three actions are implemented as relational comparisons
of the </font><i><font SIZE="2" FACE="Arial">dayNumber</font></i><font SIZE="2">
values contained in the two instances being compared. There is
no need to supply actions equivalent to </font><i><font SIZE="2" FACE="Arial">notEquals</font></i><font SIZE="2">(),
</font><i><font SIZE="2" FACE="Arial">isEarlierThanOrEqualTo()</font></i><font SIZE="2">
or </font><i><font SIZE="2" FACE="Arial">isLaterThanOrEqualTo()</font></i><font SIZE="2">
as these actions can be obtained by a negation of the supplied
actions if required. That is: </font><i><font SIZE="2" FACE="Arial">notEquals()</font></i><font SIZE="2">
is the same as not </font><i><font SIZE="2" FACE="Arial">equals()</font></i><font SIZE="2">
,</font><i><font SIZE="2" FACE="Arial">isEarlierThanOrEqualTo()</font></i><font SIZE="2">
is equivalent to not </font><i><font SIZE="2" FACE="Arial">isLaterThan()</font></i><font SIZE="2">
and </font><i><font SIZE="2" FACE="Arial">isLaterThanOrEqualTo()</font></i><font SIZE="2">
is equivalent to </font><font SIZE="2" FACE="Arial">not</font><font SIZE="2">
</font><i><font SIZE="2" FACE="Arial">isEarlierThan().</font></i><font SIZE="2">
The demonstration of these actions will be considered in the next
chapter.<br>
<br>
</font>

<p>
<hr>
<h2>
<ul>
<a HREF="arithmeticjuliandate.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/ArithmeticJulianDate.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>ArithmeticJulianDate.java</i> source code</a>.
<p>

<a HREF="chap10p4.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/chap10p4.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
10.4 The <i>JulianDate</i> class</a>.
<p>
<a HREF="chap10p2.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter10/chap10p2.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
10.2 The <i>BasicJulianDates</i> class</a>.
</ul>
</h2>
<hr>
</body>

</html>
