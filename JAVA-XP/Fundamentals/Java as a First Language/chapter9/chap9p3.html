<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>9.3 The design and implementation of the ValidatedInput class</title>

</head>

<body BGCOLOR="WHITE">

<h2>9.3 The design and implementation of the <i>ValidatedInput</i> class <br>
</h2>

<p>
The intention of the non-abstract <i>ValidatedInput</i> class
is to supply clients with <i>readLong</i> and <i>readDouble</i>
actions which will initiate a dialogue with the user to obtain
an integer or floating point value between two values supplied
as arguments. The <i>ValidatedInput</i> class diagram is presented
in Figure 9.3.<br>

<p>
<center><img SRC="c9p3i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter9/c9p3i1.gif" WIDTH="551" HEIGHT="273"></center>
<p>
<center><font>Figure 9.3 The <i>ValidatedInput</i> class diagram
<br>
</font></center>
<p>
The class diagram indicates, by the use of bold boxes, that both
actions supplied by <i>ValidatedInput</i> class are class-wide
actions which means that a client using these facilities will
not have to declare an instance of the <i>ValidatedInput</i> class.
The design of the <i>getLong</i> action is as follows. <br>

<p>
<center><img SRC="c9p3i2.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter9/c9p3i2.gif" WIDTH="640" HEIGHT="558">
</center>
<p>
The essence of the design is to iterate until a valid input has
been obtained from the user, because it can be guaranteed that
this action will always return a valid numeric response there
is no need for it to throw an exception. The mail iteration consists
of a posit/&nbsp;admit structure which assumes that the input
supplied will be acceptable and provides advice if it turns out
that it isn't. <br>

<p>
The posit part of the structure commences by outputting the prompt
and continues by calling the <i>SimpleInput getLong</i> action
which, as described above, may throw an IOexception. As the throwing
of this exception is outside the control of this design it is
shown on the key as an implicit exception. If <i>getLong</i> does
not throw an exception then the value obtained from it, shown
as <i>localLong</i>, is checked to make sure it is within the
range specified by the arguments <i>minimiumAcceptable</i> and
<i>maximumAcceptable</i>. If it is not then an explicit Ioexception
is thrown. Finally should neither of these exceptions be thrown
the design component <i>set NOK flag false</i> is executed which
will cause the iteration to terminate and the value in <i>localLong
</i>to be returned<i>.</i> The implementation of this design is
as follows. <br>

<pre>
<font>0012    <b>public long</b> <i>readLong</i>( String <i>prompt</i>,
0013                          <b>long</b>   <i>minimumAcceptable</i>,
0014                          <b>long</b>   <i>maximumAcceptable</i>){
0015    
0016    <b>long</b>    <i>localLong</i>  = 0;
0017    <b>boolean</b> <i>inputNotOK</i> = <b>true</b>;
0018    
0019       <b>if</b> ( <i>prompt</i> == <b>null</b> ) { 
0020          <i>prompt</i> = <b>new</b> String( &quot;Please enter an integer :&quot;);
0021       } // End if. 
0022          
0023       <b>while</b> ( <i>inputNotOK</i>) { 
0024          System.out.print( <i>prompt</i>);
0025          <b>try</b> {  
0026             <i>localLong</i>  = <i>readLong</i>();
0027             <b>if</b> ( (<i>localLong</i> &lt; <i>minimumAcceptable</i>) ||
0028                  (<i>localLong</i> &gt; <i>maximumAcceptable</i>) ){
0029               <b>throw new</b>  java.io.IOException();
0030             } <b>else</b> {      
0031               <i>inputNotOK</i> = <b>false</b>;
0032             } // End if.
0033          } <b>catch</b> ( java.io.IOException <i>exception</i>) {
0034               System.out.println( &quot;Please enter a value between &quot; + 
0035                                   <i>minimumAcceptable</i> + &quot; and &quot;     + 
0036                                   <i>maximumAcceptable</i> + &quot;.&quot;);              
0037          } // End try/ catch;
0038       } // End while;
0039       <b>return</b> <i>localLong</i>;
0040    } // End <i>readLong</i>.<br>
</font>
</pre>

<p>
The <b><font FACE="Arial">try/&nbsp;catch</font></b> structure
is implemented within the while loop on lines 0025 to 0038. If
either the call of the <i><font FACE="Arial">SimpleInput
readLong</font></i>() action on line 0026 throws an exception
or the condition on line 0027 and 0028 evaluates true causing
an exception to be thrown on line 0029 then flow of control is
immediately passed to the <b><font FACE="Arial">catch</font></b>
part of the structure. Where, on lines 0034 to 0036, advice is
given to the user. <br>

<p>
Should this happen then the value of the <b><font FACE="Arial">boolean</font></b>
variable <i><font FACE="Arial">inputNotOK</font></i> will
still be <b><font FACE="Arial">true</font></b> and the
loop will iterate again. Only if no exception is thrown will line
0031 be executed which will set the value of <i><font FACE="Arial">inputNotOK</font></i>
to <b><font FACE="Arial">false</font></b> and cause the
loop to terminate. Following which, on line 0039, the value of
<i><font FACE="Arial">localLong</font></i> will be returned
as the result of the action. <br>

<p>
The implementation of <i><font FACE="Arial">getDouble</font></i>()
is essentially identical and will be omitted from this chapter.
Details of how it can be obtained are in Appendix B.<br>
<br>


<p>
<hr>
<h2>
<ul>
<a HREF="validatedinput.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter9/ValidatedInput.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>ValidatedInput.java</i> source code</a>.
<p>

<a HREF="chap9p4.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter9/chap9p4.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
9.4 The <i>ValidatedInputDemonstration</i> client</a>.
<p>
<a HREF="chap9p2.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter9/chap9p2.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
9.2 The design and implementation of the <i>SimpleInput</i> class</a>.
</ul>
</h2>
<hr>

</body>

</html>
