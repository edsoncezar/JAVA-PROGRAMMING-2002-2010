<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>7.3 The offerMenuAsInt() action</title>

</head>

<body BGCOLOR="WHITE">

<h2>7.3 The <i>offerMenuAsInt</i>() action<br>
</h2>

<p>
The final action of the <i>AdaptingMenu</i> class is the <i>offerMenuAsInt</i>
action. The design for this action is as follows.  
<p>
<center><img SRC="c7p3i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter7/c7p3i1.gif" WIDTH="579" HEIGHT="365">
</center>
<p>
The basis of this design is to show the menu, using <i>showMenu</i>(),
and obtain a validated character choice, using <i>getValidatedMenuChoice</i>
inherited from <i>BasicMenu</i>. The character obtained from the
user is then converted into the appropriate integer value by searching
through the <i>optionKey</i> array until the character entered
by the user is located. The index of this location is then used
as the value to be returned by the action. <br>

<p>
Using the visualisation shown in Figure 7.3 and assuming that
the user entered 'B', the search would locate 'B' in the <i>optionKey</i>
array at location 2 and return this as the user's choice from
the menu options. Thus it is always the manifest value of the
option which is returned by this action, not the position which
the option might occupy on the menu. The implementation of this
design is as follows. <br>

<pre>
0034   <b>public int</b> <i>offerMenuAsInt</i>() { 
0035   
0036   <b>char</b>    <i>responseAsChar</i>;
0037   <b>int</b>     <i>thisOne</i>       = 0;
0038   <b>boolean</b> <i>isNotFound</i>    = <b>true</b>;
0039 
0040        <i>showMenu</i>();
0041        <i>responseAsChar</i> = <i>getValidatedMenuChoice</i>();
0042        
0043        <b>while</b> ( <i>isNotFound</i>) { 
0044           <b>if</b> ( <i>optionKey</i>[ <i>thisOne</i>] == <i>responseAsChar</i>) { 
0045               <i>isNotFound</i>  = <b>false</b>;
0046           } <b>else</b> {     
0047               <i>thisOne</i>++;
0048           } // End if.
0049        } // End while.
0050        <b>return</b> <i>thisOne</i>;
0051   } // End <i>offerMenuAsInt.</i>
</pre>

<p>
The indefinite loop controlling the search of the <i><font SIZE="2" FACE="Arial">optionKey</font></i>
array is controlled by a boolean variable called <i><font SIZE="2" FACE="Arial">isNotFound</font></i>
in a similar way to the control of the loop in <i><font SIZE="2" FACE="Arial">getValidatedMenuChoice</font></i>,
as described in the previous chapter. This action trusts the <i>showMenu</i>()
action to make sure that the values of <i><font SIZE="2" FACE="Arial">minimumOption</font></i>
and <i><font SIZE="2" FACE="Arial">maximumOption</font></i> and
the <i><font SIZE="2" FACE="Arial">optionKey</font></i> array are
set as specified above. Thus the value obtained by <i><font SIZE="2" FACE="Arial">getValidatedMenuChoice</font></i>()
must be one of the values stored in the <i><font SIZE="2" FACE="Arial">optionKey</font></i>
array and this guarantees that the loop in this action will terminate
without attempting to access a value outside the range of the
array.<br>
<br>


<p>
<hr>
<h2>
<ul>
<a HREF="chap7p4.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter7/chap7p4.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
7.4 The <i>AdaptingMenu </i>demonstration client</a>.
<p>
<a HREF="chap7p2.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter7/chap7p2.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
7.2 The <i>enableMenuOption</i>(), <i>disableMenuOption</i>() and <i>showMenu</i>() actions</a>.
</ul>
</h2>
<hr>
</body>

</html>
&#26;