<html>

<head><meta http-equiv="pragma" content="no-cache">

<meta NAME="GENERATOR" CONTENT="Internet Assistant for Microsoft Word 2.0z">
<title>7.5 The RoomMenuDemonstration client</title>

</head>

<body BGCOLOR="WHITE">

<h2>7.5 The <i>RoomMenuDemonstration </i>client<br>
</h2>

<p>
In order to illustrate how an <i>AdaptingMenu</i> can be used
in a more realistic situation a client which can be used to interact
with a <i>RoomMonitor</i> instance will be presented. The menu
to control this client will contain four options, one to record
a person entering the room, one to record a person leaving the
room, one to show the state of the monitor and one to exit from
the application. <br>

<p>
Of these options the option to enter a room should be unavailable
when the room is full and the option to leave the room should
be unavailable when it is empty. Additionally the exit option
should only be available when the room is empty; the option to
show the state of the monitor should always be available. The
high level design of this client is as follows: <br>

<p>
<center><img SRC="c7p5i1.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter7/c7p5i1.gif" WIDTH="723" HEIGHT="528">
</center>
<p>
The essence of this design is based upon the standard menu/&nbsp;dispatch
design given in the previous chapter. It differs in having the
options of the dispatch replaced with calls of the appropriate
action of the <i>RoomMonitor</i> instance, and by being enclosed
within an iterative structure which ensures that the menu is repeatedly
presented to the user until they indicate that they wish to exit.
The remaining change from the standard design is the call of the
local action <i>prepareMenu</i>() at the start of each iteration.
The design of this action is as follows.<br>

<p>
<center><img SRC="c7p5i2.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter7/c7p5i2.gif" WIDTH="619" HEIGHT="328">
</center>
<p>
Each of the actions <i>prepare&nbsp;empty&nbsp;room</i>, <i>prepare&nbsp;full&nbsp;room</i>
and <i>prepare&nbsp;room</i> are implemented by disabling the
options which are not to be offered in each of the circumstances
identified. The implementation of this design is as follows. 
<br>

<pre>
0001 // Filename <i>RoomMonitorMenuDemonstration.java</i>.
0002 // Providing a second demonstration of the Adapting Menu.
0003 //
0004 // Written for JFL book Chapter 7 see text.
0005 // Fintan Culwin, v0.1, January 1997.
0006 
0007 <b>import</b> Menus.AdaptingMenu;
0008 <b>import</b> Counters.RoomMonitor;
0009 
0010 <b>public class</b> RoomMonitorMenuDemonstration { 
0011 
0012 <b>private static final int</b> INVALID_OPTION<b> </b>= -1;
0013 <b>private static final int</b> ENTER_OPTION   = 0;
0014 <b>private static final int</b> LEAVE_OPTION   = 1;
0015 <b>private static final int</b> STATUS_OPTION  = 2;
0016 <b>private static final int</b> EXIT_OPTION    = 3;
0017
0018<b> private static final int</b> ROOM_LIMIT    = 3;
0019 
0020 
0021 <b>public static void</b> main( String argv[]) { 
0022 
0023    String roomMenuOptions[] =  { &quot;Enter the room&quot;,
0024                                  &quot;Leave the room&quot;,
0025                                  &quot;Show room status&quot;,
0026                                  &quot;Exit program&quot;};
0027                              
0028 
0029    AdaptingMenu roomMenu   = <b>new</b> AdaptingMenu( &quot;Room Monitor menu&quot;,
0030                                                roomMenuOptions,
0031                                                &quot;&quot; );
0032    RoomMonitor roomMonitor = <b>new</b> RoomMonitor( ROOM_LIMIT); 
0033                                                 
0034 
0035    <b>int</b>  usersChoice = INVALID_OPTION;  
0036         
0037       System.out.println( &quot;\t Room menu demonstration client \n&quot;);
0038       
0039       <b>while</b> ( usersChoice != EXIT_OPTION ) { 
0040       
0041          prepareMenu( roomMenu, roomMonitor);
0042       
0043          usersChoice = roomMenu.offerMenuAsInt();
0044          
0045          <b>switch</b> ( usersChoice){ 
0046             
0047             <b>case</b> ENTER_OPTION :
0048                roomMonitor.enterRoom();
0049                <b>break</b>;
0050                
0051             <b>case</b> LEAVE_OPTION :
0052                roomMonitor.exitRoom();
0053                <b>break</b>;
0054                
0055             <b>case</b> STATUS_OPTION :
0056                System.out.println( roomMonitor);
0057                <b>break</b>;                 
0058                
0059             <b>case</b> EXIT_OPTION :
0060                <b>break</b>;
0061                
0062          } // End switch.
0063        } // End while.   
0064          
0065       
0066       System.out.println( &quot;\n\t Have a nice day! \n&quot;); 
0067    } // End main.
0068    
0069    
0070    <b>private static void</b> prepareMenu( AdaptingMenu theMenu, 
0071                                     RoomMonitor  theMonitor) {
0072                                     
0073       theMenu.enableMenuOption( ENTER_OPTION);
0074       theMenu.enableMenuOption( LEAVE_OPTION);                              
0075       theMenu.enableMenuOption( STATUS_OPTION);
0076       theMenu.enableMenuOption( EXIT_OPTION);
0077       
0078       
0079       <b>if</b> ( theMonitor.numberCurrentlyInRoomIs() == 0) { 
0080          theMenu.disableMenuOption( LEAVE_OPTION);         
0081       } <b>else if</b> ( theMonitor.numberCurrentlyInRoomIs() == ROOM_LIMIT) { 
0082          theMenu.disableMenuOption( EXIT_OPTION);
0083          theMenu.disableMenuOption( ENTER_OPTION);
0084       } <b>else</b> { 
0085          theMenu.disableMenuOption( EXIT_OPTION);
0086       } // End if.                                     
0087    } // End prepareMenu.                                   
0088
0089 } // RoomMonitorMenuDemonstration.
</pre>

<p>
A complete set of manifest values to represent the four possible
menu choices is declared on lines 0012 to 0016. The manifest values
include an <i><font SIZE="2" FACE="Arial">INVALID_OPTION</font></i>
in order to allow the value of the <i><font SIZE="2" FACE="Arial">usersChoice</font></i>
variable to be given a safe value which will ensure the loop starts
iterating on line 0039.<br>

<p>
The other manifest value <i><font SIZE="2" FACE="Arial">ROOM_LIMIT</font></i>
is declared on line 0018 with the value 3 and is used on line
0032 to delimit the maximum number of people in the room as the
<i>RoomMonitor</i> constructor is called. The value 3 was chosen
to allow the actions to be readily demonstrated and a higher limit
might be required for a more realistic client. Apart from this
the implementation follows the designs presented very closely,
and should be comprehensible from previous clients. An annotated
interaction with this client might be as follows. <br>

<p>
When the menu is presented for the first time, it is not possible
for anyone to leave the room and it is possible to exit the program.
<br>

<hr>

<ul><pre>
	 Room menu demonstration client 

	Room Monitor menu

A.   Enter the room
B.   Show room status
C.   Exit program

Please enter your choice : <u><i><b>a</b></i></u>
</pre></ul>

<hr>

<p>
Selecting option <i><b>a</b></i> from the opening menu admits
one person into the room. This should enable the leave room option
and disable the exit program option. <br>

<hr>

<ul><pre>
 	Room Monitor menu


A.   Enter the room
B.   Leave the room
C.   Show room status

Please enter your choice : <u><i><b>a</b></i></u>

	Room Monitor menu


A.   Enter the room
B.   Leave the room
C.   Show room status

Please enter your choice : <u><i><b>a</b></i></u>
</pre></ul>

<hr>

<p>
Having admitted three people the room should now be full and only
the leave room and show status options should be presented. <br>

<hr>


<ul><pre>
 	Room Monitor menu


A.   Leave the room
B.   Show room status

Please enter your choice : <u><i><b>a</b></i></u>
</pre></ul>

<hr>

<p>
As the room is no longer full the enter room option should be
re-enabled.<br>

<hr>

<ul><pre>
 	Room Monitor menu


A.   Enter the room
B.   Leave the room
C.   Show room status

Please enter your choice : <u><i><b>b</b></i></u>

 	Room Monitor menu


A.   Enter the room
B.   Leave the room
C.   Show room status

Please enter your choice : <u><i><b>b</b></i></u>
</pre></ul>

<hr>

<p>
With all three people now having left the room the same options
as in the opening menu should be available, and selecting the
exit option will allow the program to terminate.<br>

<hr>

<ul><pre>
		Room Monitor menu


A.   Enter the room
B.   Show room status
C.   Exit program

Please enter your choice : <u><i><b>c</b></i></u>	

Have a nice day! 

</pre></ul>


<p>
<hr>
<h2>
<ul>
<a HREF="roommonitormenudemonstration.java" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter7/RoomMonitorMenuDemonstration.java"><img SRC="..\list.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/list.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="40" HEIGHT="35">
<i>RoomMonitorMenuDemonstration.java</i> source code</a>.
<p>
<a HREF="chap7p6.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter7/chap7p6.html"><img SRC="..\next.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/next.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
7.6 Menu driven user interfaces</a>.
<p>
<a HREF="chap7p4.html" tppabs="http://www.scism.sbu.ac.uk/jfl/Chapter7/chap7p4.html"><img SRC="..\last.gif" tppabs="http://www.scism.sbu.ac.uk/jfl/last.gif" ALIGN="MIDDLE" BORDER="0" WIDTH="50" HEIGHT="40">
7.4 The <i>AdaptingMenu </i>demonstration client</a>.
</ul>
</h2>
<hr>
</body>

</html>
&#26;