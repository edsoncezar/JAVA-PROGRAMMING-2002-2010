










<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Drawing</title>
</head>
<body BGCOLOR="#ffffff">








<table width="100%">
<tr>
<td align=left>
<a href="comphierarchy.html"><img src="http://docs.rinet.ru/OLDui/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="events.html"><img src="http://docs.rinet.ru/OLDui/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="http://docs.rinet.ru:8080/OLDui/trailmap.html"><img src="http://docs.rinet.ru/OLDui/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/OLDui/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a User Interface (AWT Only) | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Overview of the Java UI</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/OLDui/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/OLDui/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Drawing
</h2>
<p>
<blockquote>

When a Java program with a GUI needs to draw itself --
whether for the first time,
or in response to becoming unhidden
or because its appearance needs to change to reflect something happening
inside the program --
it starts with the highest component that needs to be redrawn
(for example, the top Component in the hierarchy)
and works its way down to the bottom-most Components.
This is orchestrated by the AWT drawing system.

<p>

Here, as a reminder, is the component hierarchy
for the converter program:

<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/13ui5.gif" WIDTH="462" HEIGHT="181" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote><p>

When the Converter application draws itself,
here's what happens:
<ol>
<li> The Frame draws itself.
<li> The Converter object draws itself,
     drawing a box around its area.
<li> One of the two ConversionPanels draws itself,
     drawing a box around its area.
<br>
<strong>Note:</strong>
You can't rely on the order 
that two Components at the same level
will be drawn in.
For example, you can't rely on the metric panel
being drawn before the U.S. one.
Similarly, you can't rely on the order of drawing two Components
at <em>different</em> levels 
if the lower Component isn't contained in the higher Component.
<li> The contents of the ConversionPanel --
     the Label, TextField, Scrollbar, and Choice -- draw themselves.
</ol>

In this way, each Component draws itself
before any of the Components it contains.
This ensures that a Panel's background, for example, 
is visible only where it isn't covered by one of the Components it contains.


<h4>How Drawing Requests Occur</h4>
<blockquote>

Programs can draw only when the AWT tells them to.
The reason is that each occurrence of a Component drawing itself
must execute without interruption.
Otherwise, unpredictable results could occur,
such as a button being drawn halfway,
and then being interrupted by some lengthy animation.
The AWT orders drawing requests by making them run in a single thread.
A Component can use the 
<code>repaint()</code> method
to request to be scheduled for drawing.
<p>

<a name=update>
The AWT requests that a Component draw itself
by invoking the Component's
<code>update()</code> method.
The default (Component) implementation of the <code>update()</code> method
simply clears the Component's background
(drawing a rectangle over the component's clipping area
in the Component's background color)
and then calling the Component's 
<code>paint()</code> method.
The default implementation of the <code>paint()</code> method does nothing.
</a>


</blockquote>
<h4>The Graphics Object</h4>
<blockquote>

The only argument to the <code>paint()</code> and <code>update()</code> methods is a Graphics object
that represents the context
in which the Component can perform its drawing.
The Graphics class provides methods for the following:
<ul>
<li> Drawing and filling 
     rectangles, arcs, lines, ovals, polygons, text, and images.
<li> Getting or setting the current color, font, or clipping area.
<li> Setting the paint mode.
</ul>
</blockquote>

<h4>How to Draw</h4>
<blockquote>

The simplest way for a Component to draw itself
is to put drawing code in its <code>paint()</code> method.
This means that when the AWT makes a drawing request
(by calling the Component's <code>update()</code> method, 
which is implemented as described
<a href=#update>above</a>),
the Component's entire area is cleared
and then its <code>paint()</code> method is called.
For programs that don't repaint themselves often,
the performance of this scheme is fine.
<p>

<strong>Important:</strong>
The <code>paint()</code> and <code>update()</code> methods must execute very quickly!
Otherwise, they'll destroy the perceived performance of your program.
If you need to perform some lengthy operation as the result of
a paint request,
do it by starting up another thread 
(or somehow sending a request to another thread)
to perform the operation.
For help on using threads, 
see 
<a target="_top" href="http://docs.rinet.ru:8080/OLDui/essential/threads/index.html">Threads of Control</a><a href="http://docs.rinet.ru:8080/OLDui/essential/threads/index.html"><img src="http://docs.rinet.ru/OLDui/images/javaIcon.gif" width=20 height=20 border=0 alt="(in the Learning the Java Language trail)"></a>.
<p>

Below is an example of implementing the <code>paint()</code> method.
Both the Converter and ConversionPanel classes 
draw a box around their area using this code.
Both classes also implement an <code>insets()</code> method
that specifies the padding around the panels' contents.
If they didn't have this method, 
the box drawn in the <code>paint()</code> method
would overlap the external boundaries
of the panels' contents.
<blockquote>
<pre>
public void paint(Graphics g) {
    Dimension d = size();
    g.drawRect(0,0, d.width - 1, d.height - 1);
}
</pre>
</blockquote>
<p>

Programs that repaint themselves often
can use two techniques to improve their performance:
implementing both <code>update()</code> and <code>paint()</code>,
and using double buffering.
These techniques are discussed in 
<a target="_top" href="..\drawing\noflashing.html">Eliminating Flashing</a><a target="_top" href="..\drawing\noflashing.html"><img src="http://docs.rinet.ru/OLDui/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a>.

<p>

For more information on how to draw, see the
<a target="_top" href="..\drawing\index.html">Working with Graphics</a><a target="_top" href="..\drawing\index.html"><img src="http://docs.rinet.ru/OLDui/images/uiIcon.gif" width=20 height=20 border=0 alt="(in the Creating a User Interface trail)"></a> lesson.

</blockquote>
</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="comphierarchy.html"><img src="http://docs.rinet.ru/OLDui/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="events.html"><img src="http://docs.rinet.ru/OLDui/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="http://docs.rinet.ru:8080/OLDui/trailmap.html"><img src="http://docs.rinet.ru/OLDui/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/OLDui/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a User Interface (AWT Only) | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Overview of the Java UI</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
