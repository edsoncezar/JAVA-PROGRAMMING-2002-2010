










<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Moving an Image Across the Screen</title>
</head>
<body BGCOLOR="#ffffff">








<table width="100%">
<tr>
<td align=left>
<a href="doublebuffer.html"><img src="http://docs.rinet.ru/OLDui/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="imagesequence.html"><img src="http://docs.rinet.ru/OLDui/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="http://docs.rinet.ru:8080/OLDui/trailmap.html"><img src="http://docs.rinet.ru/OLDui/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/OLDui/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a User Interface (AWT Only) | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/OLDui/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/OLDui/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Moving an Image Across the Screen
</h2>
<p>
<blockquote>


This page features an example applet 
that moves one image (a rocketship that currently looks like a slice of pizza)
in front of a background image (a field of stars).
This page shows only applet code.
The code for an application would be similar,
except you would use different code to load the images,
as described in 
<a href=loadingimages.html>Loading Images</a>.

<p>

Below are the two images this applet uses.

<p>

rocketship.gif:

<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/rocketship.gif" WIDTH="85" HEIGHT="62" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
<p>
starfield.gif:

<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/starfield.gif" WIDTH="500" HEIGHT="100" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
<p>

<strong>Note:</strong>
The rocketship image has a transparent background.
The transparent background makes
the rocketship image appear to have a rocketship shape,
no matter what color background it's drawn on top of.
If the rocketship background weren't transparent,
then instead of the illusion of a rocketship moving through space,
you'd see a rocketship on top of a rectangle 
moving through space.

<p>

Here's the applet in action.
Remember that you can click on the applet
to stop or start the animation.

<p>

<applet codebase=http://docs.rinet.ru:8080/OLDui/OLDui/drawing/example code=MovingImage.class width=500 height=100>
<blockquote>
<hr>
<em>
Your browser can't run 1.0 Java applets,
so here is a snapshot of what you'd see.
<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/MovingImage.gif" WIDTH="500" HEIGHT="100" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
</em>
<hr>
</blockquote>
</applet>

<p>

The code for performing this animation isn't complex.
Essentially, it's the applet animation template,
plus the double buffering code you saw on the previous page,
plus a few additional lines of code.
The additional code loads the images,
draws the background image,
and then uses a simple algorithm 
to determine where to draw the moving image.
Here is the additional code:
<blockquote>
<pre>
<em>...//Where instance variables are declared:</em>
Image stars;
Image rocket;

<em>...//In the init() method:</em>
stars = getImage(getCodeBase(), "../images/starfield.gif");
rocket = getImage(getCodeBase(), "../images/rocketship.gif");

<em>...//In the update() method:</em>
//Paint the frame into the image.
paintFrame(offGraphics);

<em>...//A new method:</em>
void paintFrame(Graphics g) {
    Dimension d = size();
    int w;
    int h;

    //If we have a valid width and height for the background image,
    //draw it.
    w = stars.getWidth(this);
    h = stars.getHeight(this);
    if ((w > 0) && (h > 0)) {
        g.drawImage(stars, (d.width - w)/2,
                    (d.height - h)/2, this);
    }

    //If we have a valid width and height for the background image,
    //draw it.
    w = rocket.getWidth(this);
    h = rocket.getHeight(this);
    if ((w > 0) && (h > 0)) {
        g.drawImage(rocket, ((frameNumber*5) % (w + d.width)) - w,
                    (d.height - h)/2, this);
    }
}
</pre>
</blockquote>

You might think that this program
doesn't need to clear the background,
since it uses a background image.
However, clearing the background is still necessary.
One reason is that the applet usually starts drawing before 
the images are fully loaded.
If the rocketship image loaded before the background image,
you would see parts of multiple rocketship 
until the background image loaded.
Another reason is that
if the applet drawing area were wider than the background image,
for some reason,
then you'd see multiple rocketships to either side of the background image.

<p>

You could solve the first problem
by delaying all drawing until both images are fully loaded.
The second problem could be solved 
by scaling the background image to fit the entire applet area.
You'll learn how to wait for images to be fully loaded in
<a href=improvingimageanim.html>Improving
the Appearance and Performance of Image Animation</a>,
later in this lesson.
Scaling is described in
<a href=drawingimages.html>Displaying Images</a>.


</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="doublebuffer.html"><img src="http://docs.rinet.ru/OLDui/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="imagesequence.html"><img src="http://docs.rinet.ru/OLDui/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="http://docs.rinet.ru:8080/OLDui/trailmap.html"><img src="http://docs.rinet.ru/OLDui/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/OLDui/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a User Interface (AWT Only) | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
