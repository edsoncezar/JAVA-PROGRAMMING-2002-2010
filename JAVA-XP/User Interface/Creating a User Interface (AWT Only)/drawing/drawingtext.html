










<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Working with Text</title>
</head>
<body BGCOLOR="#ffffff">








<table width="100%">
<tr>
<td align=left>
<a href="drawingshapes.html"><img src="http://docs.rinet.ru/OLDui/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="usingimages.html"><img src="http://docs.rinet.ru/OLDui/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="http://docs.rinet.ru:8080/OLDui/trailmap.html"><img src="http://docs.rinet.ru/OLDui/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/OLDui/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a User Interface (AWT Only) | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/OLDui/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/OLDui/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Working with Text
</h2>
<p>
<blockquote>

Support for working with primitive text is spread between the AWT
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Graphics.html">Graphics</a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Graphics.html"><img src="http://docs.rinet.ru/OLDui/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>, 
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Font.html">Font,</a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Font.html"><img src="http://docs.rinet.ru/OLDui/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a>, and 
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.FontMetrics.html">FontMetrics</a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.FontMetrics.html"><img src="http://docs.rinet.ru/OLDui/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> classes.


<h4>Drawing Text</h4>
<blockquote>

When you're writing code to draw text,
you should first consider 
whether you can use a text-oriented Component,
such as the Label, TextField, or TextArea class.
If a Component isn't appropriate,
you can use the Graphics
<code>drawBytes()</code>,
<code>drawChars()</code>, or
<code>drawString()</code>
methods.

<p>

Here is an example 
of code that draws a string to the screen:

<blockquote>
<pre>
g.drawString("Hello World!", x, y);
</pre>
</blockquote>

For the text drawing methods,
<code>x</code> and
<code>y</code>
are integers that specify the position
of the <em>lower left</em> corner of the text.
To be precise, the <code>y</code> coordinate
specifies the <em>baseline</em> of the text --
the line that most letters rest on --
which doesn't include room for the tails (<em>descenders</em>)
on letters such as "y".
Be sure to make <code>y</code> large
enough to allow vertical space for the text,
but small enough to allow room for descenders.

<p>

Here's a figure that shows the baseline,
as well as the ascender and descender lines.
You'll learn more about ascenders and descenders
a bit later.

<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/13ui38.gif" WIDTH="353" HEIGHT="69" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote><p>

Here is a simple applet that illustrates
what can happen when you're not careful
about where you position your text:

<p>
<applet codebase=http://docs.rinet.ru:8080/OLDui/OLDui/drawing/example code=TextXY.class width=300 height=60>
<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/13ui39.gif" WIDTH="149" HEIGHT="53" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote></applet>

<blockquote><hr><strong>Note:</strong> Because some old browsers don't support 1.1, the above applet is a <em>1.0</em> version (here is the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example/TextXY.java">1.0 code</a>; here's the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example-1dot1/TextXY.java">1.1 code</a>).  To run the <em>1.1</em> version of the applet, go to <a href="example-1dot1\textxy.html"><code>example-1dot1/TextXY.html</code></a>. <hr></blockquote>
The top string is probably cut off,
since its <code>y</code> argument is <code>5</code>, 
which leaves only 5 pixels above the baseline for the string --
not enough for most fonts.
The middle string probably shows up just fine,
unless you have a huge default font.
Most of the letters in the bottom string display fine,
except for letters with descenders.
All descenders in the bottom string are cut off,
since the code that displays this string doesn't allow room for them.

<p>

<strong>Note:</strong>
The text-drawing methods' interpretation of
<code>x</code> and
<code>y</code>
is different from that of the shape-drawing methods.
When drawing a shape (such as a rectangle),
<code>x</code> and
<code>y</code>
specify the <em>upper</em> left corner of the shape's bounding rectangle,
instead of the lower left corner.

</blockquote>
<h4>
<a name=fontMetrics>
Getting Information about a Font: FontMetrics
</a>
</h4>
<blockquote>

The shape-drawing example from 
<a href=drawingshapes.html>before</a>
could be improved by choosing a font
that's smaller than the usual default font.
The following example does this
and also enlarges the shapes
to take up the space freed by the font's smaller height.
Here is the improved applet:

<p>

<applet codebase=http://docs.rinet.ru:8080/OLDui/OLDui/drawing/example code=FontDemo.class width=550 height=100>
<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/13ui40.gif" WIDTH="438" HEIGHT="185" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote></applet>

<blockquote><hr><strong>Note:</strong> Because some old browsers don't support 1.1, the above applet is a <em>1.0</em> version (here is the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example/FontDemo.java">1.0 code</a>; here's the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example-1dot1/FontDemo.java">1.1 code</a>).  To run the <em>1.1</em> version of the applet, go to <a href="example-1dot1\fontdemo.html"><code>example-1dot1/FontDemo.html</code></a>. <hr></blockquote>
The example chooses the appropriate font
by using a FontMetrics object 
to get details of the font's size.
For example, the following loop 
ensures that the longest string displayed 
by the applet ("drawRoundRect()")
fits within the space each shape is allotted.

<blockquote>
<pre>
boolean fontFits = false;
Font font = g.getFont();
FontMetrics fontMetrics = g.getFontMetrics();
int size = font.getSize();
String name = font.getName();
int style = font.getStyle();

while (!fontFits) {
    if ( (fontMetrics.getHeight() <= maxCharHeight)
      && (fontMetrics.stringWidth(longString) 
	  <= xSpace)) {
        fontFits = true;
    } else {
        if (size <= minFontSize) {
            fontFits = true;
        } else {
            g.setFont(font = new Font(name,
                                      style,
                                      --size));
            fontMetrics = g.getFontMetrics();
        }
    }
}
</pre>
</blockquote>

The example code above uses the Graphics
<code>getFont()</code>,
<code>setFont()</code>, and
<code>getFontMetrics()</code>
methods to get and set the current font
and to get the FontMetrics object that corresponds to the font.
From the FontMetrics
<code>getHeight()</code> and
<code>getStringWidth()</code> methods,
the example code gets
vertical and horizontal size information about the font.

<p>

The following figure shows some of the information
that a FontMetrics object can provide about a font's size.

<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/13ui41.gif" WIDTH="433" HEIGHT="145" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote>
<p>

Here's a summary of the FontMetrics methods
that return information about a font's vertical size:
<p>

<dl>
<dt> <code>getAscent()</code>, <code>getMaxAscent()</code>
<dd> The <code>getAscent()</code> method
     returns the number of pixels 
     between the ascender line and the baseline.
     Generally, the ascender line represents
     the typical height of capital letters.
     Specifically, the ascent and descent values
     are chosen by the font's designer
     to represent the correct text "color",
     or density of ink, 
     so that the text appears as the designer planned it.
     The ascent typically provides enough room 
     for almost all of the characters in the font,
     except perhaps for accents on capital letters.
     The <code>getMaxAscent()</code> method accounts
     for these exceptionally tall characters.

     <p>

<dt> <code>getDescent()</code>, <code>getMaxDescent()</code>
<dd> The <code>getDescent()</code> method
     returns the number of pixels 
     between the baseline and the descender line.
     In most fonts, all characters fall within the descender line
     at their lowest point.
     Just in case, though, you can use
     the <code>getMaxDescent()</code> method to get
     a distance guaranteed to encompass all characters.

     <p>

<dt> <code>getHeight()</code>
<dd> Returns the number of pixels normally found
     between the baseline of one line of text 
     and the baseline of the next line of text.
     Note that this includes an allowance for leading.

     <p>

<dt> <code>getLeading()</code>
<dd> Returns the suggested distance (in pixels)
     between one line of text and the next.
     Specifically the leading is the distance
     between the descender line of one line of text
     and the ascender line of the next line of text.
     By the way, <em>leading</em> is pronounced
     <em>LEDDing.</em>
</dl>
<p>

Note that the font size
(returned by the Font class <code>getSize()</code> method)
is an abstract measurement.
Theoretically, it corresponds to the ascent plus the descent.
Practically, however, 
the font designer decides exactly how tall a "12 point" font
(for example) is.
For example, 12-point Times is often slightly shorter
than 12-point Helvetica.
Typically, font size is measured in <em>points</em>,
which are approximately 1/72 of an inch.

<p>

The following list shows the methods that
FontMetrics provides 
to return information about the horizontal size
of a font's characters.
These methods take into account
the spacing around each character.
More precisely, each method returns 
<em>not</em> the number of pixels taken up
by a particular character (or characters),
but the number of pixels by which the <em>current point</em>
will be advanced when that character (or characters) is shown.
We call this the <em>advance width</em>
to distinguish it from the character or text width.

<p>
<!--It'd be nice to have a figure illustrating this.-->

<dl>
<dt><code>getMaxAdvance()</code>
<dd>The advance width (in pixels) of the widest character in the font.

<dt><code>bytesWidth(byte[], int, int)</code>
<dd>The advance width of the text represented
    by the specified array of bytes.
    The first integer argument specifies
    the starting offset of the data within the byte array.
    The second integer argument specifies
    the maximum number of bytes to check.

<dt><code>charWidth(int)</code>,
    <code>charWidth(char)</code> 
<dd>The advance width of the specified character.

<dt><code>charsWidth(char[], int, int)</code> 
<dd>The advance width of the string
    represented by the specified character array.

<dt><code>stringWidth(String)</code>
<dd>The advance width of the specified string.

<dt><code>getWidths()</code>
<dd>The advance width of each of the first 256 characters in the font.
</dl>


</blockquote>
</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="drawingshapes.html"><img src="http://docs.rinet.ru/OLDui/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="usingimages.html"><img src="http://docs.rinet.ru/OLDui/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="http://docs.rinet.ru:8080/OLDui/trailmap.html"><img src="http://docs.rinet.ru/OLDui/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/OLDui/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a User Interface (AWT Only) | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
