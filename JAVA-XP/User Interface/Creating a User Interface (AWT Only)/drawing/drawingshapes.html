










<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--NewPage-->
<html>
<head>
<title>Drawing Shapes</title>
</head>
<body BGCOLOR="#ffffff">








<table width="100%">
<tr>
<td align=left>
<a href="usingprimitives.html"><img src="http://docs.rinet.ru/OLDui/images/PreviousArrow.gif" width=26 height=26 align=bottom border=0 alt="Previous | "></a><a
href="drawingtext.html"><img src="http://docs.rinet.ru/OLDui/images/NextArrow.gif" width=26 height=26 align=bottom border=0 alt="Next | "></a><a
href="http://docs.rinet.ru:8080/OLDui/trailmap.html"><img src="http://docs.rinet.ru/OLDui/images/WayUpArrow.gif" width=26 height=26 align=bottom border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/OLDui/images/uiHeader.gif" width=26 height=26 align=bottom border=0 alt="Creating a User Interface (AWT Only) | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
<p>
<center>
<IMG SRC="http://docs.rinet.ru/OLDui/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
<IMG SRC="http://docs.rinet.ru/OLDui/images/shoeline2.GIF" ALIGN="BOTTOM" BORDER="0" WIDTH="202"
    HEIGHT="25" NATURALSIZEFLAG="3">
</center>
<p> 

<h2>
    Drawing Shapes
</h2>
<p>
<blockquote>

The 
<a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Graphics.html">Graphics</a><a target="_top" href="http://java.sun.com/products/jdk/1.1/api/java.awt.Graphics.html"><img src="http://docs.rinet.ru/OLDui/images/apiIcon.gif" width=20 height=20 border=0 alt="(in the API reference documentation)"></a> class defines methods for drawing
the following kinds of shapes:
<ul>
<li> Lines
     (<code>drawLine()</code>, which draws a line in the Graphics object's
     current color, which is initialized to the Component's foreground color)
<li> Rectangles
     (<code>drawRect()</code>, <code>fillRect()</code>, and <code>clearRect()</code>
     -- where <code>fillRect()</code> fills a rectangle
     with the Graphics object's current color,
     and <code>clearRect()</code> fills a rectangle
     with the Component's background color)
<li> Raised or lowered rectangles
     (<code>draw3DRect()</code> and <code>fill3DRect()</code>)
<li> Round-edged rectangles
     (<code>drawRoundRect()</code> and <code>fillRoundRect()</code>)
<li> Ovals
     (<code>drawOval()</code> and <code>fillOval()</code>)
<li> Arcs
     (<code>drawArc()</code> and <code>fillArc()</code>)
<li> Polygons
     (<code>drawPolygon()</code> and <code>fillPolygon()</code>)
</ul>

Except for polygons and lines,
all shapes are specified using their bounding rectangle.
Once you understand rectangles,
drawing other shapes is relatively easy.
For this reason, 
this page concentrates on rectangle drawing.


<h4>Example 1: Simple Rectangle Drawing</h4>
<blockquote>

The applet on the previous page 
used the <code>draw3DRect()</code> and <code>fillRect()</code> methods
to draw its interface.
Here's the applet again:

<p>

<applet codebase=http://docs.rinet.ru:8080/OLDui/OLDui/drawing/example code=CoordinatesDemo.class width=450 height=100>
<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/13ui35.gif" WIDTH="358" HEIGHT="100" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote></applet>

<blockquote><hr><strong>Note:</strong> Because some old browsers don't support 1.1, the above applet is a <em>1.0</em> version (here is the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example/CoordinatesDemo.java">1.0 code</a>; here's the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example-1dot1/CoordinatesDemo.java">1.1 code</a>).  To run the <em>1.1</em> version of the applet, go to <a href="example-1dot1\coordinatesdemo.html"><code>example-1dot1/CoordinatesDemo.html</code></a>. <hr></blockquote>
Below is just the drawing code:

<blockquote>
<pre>
<em>//In FramedArea (a Panel subclass):</em>
public void paint(Graphics g) {
    Dimension d = size();
    Color bg = getBackground();
 
    //Draw a fancy frame around the applet.
    g.setColor(bg);
    g.draw3DRect(0, 0, d.width - 1, d.height - 1, true);
    g.draw3DRect(3, 3, d.width - 7, d.height - 7, false);
}

<em>//In CoordinateArea (a Canvas subclass):</em>
public void paint(Graphics g) {
    //If user has clicked, paint a tiny rectangle where click occurred
    if (point != null) {
        g.fillRect(point.x - 1, point.y - 1, 2, 2);
    }
}
</pre>
</blockquote>

The applet creates (and contains) a FramedArea object,
which in turn creates (and contains) a CoordinateArea object.
The first call to <code>draw3DRect()</code>
creates a rectangle as big as the FramedArea's drawing area.
The <code>true</code> argument specifies
that the rectangle should appear to be raised.
The second call to <code>draw3DRect()</code>
creates a second rectangle just a bit smaller,
with <code>false</code> specifying
that the rectangle should appear to be sunken.
Together, the two calls produce the effect
of a raised frame that contains the CoordinateArea.
(FramedArea implements the <code>insets()</code> method
so that the CoordinateArea's drawing area
is a few pixels inside of the FramedArea.)

<p>

The CoordinateArea uses <code>fillRect()</code>
to draw a two-by-two-pixel rectangle
at the point that the user clicks.


</blockquote>
<h4>
<a name=eg2>
Example 2: Using a Rectangle to Indicate a Selected Area
</a>
</h4>
<blockquote>

Here's an applet
that you could use as a basis
for implementing selection in a drawing program.
When the user drags the mouse,
the applet continuously displays a rectangle.
The rectangle starts at the cursor position
where the user first pressed the mouse button
and ends at the current cursor position.

<p>

<applet codebase=http://docs.rinet.ru:8080/OLDui/OLDui/drawing/example code=RectangleDemo.class width=450 height=100>
<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/13ui36.gif" WIDTH="450" HEIGHT="99" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote></applet>

<blockquote><hr><strong>Note:</strong> Because some old browsers don't support 1.1, the above applet is a <em>1.0</em> version (here is the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example/RectangleDemo.java">1.0 code</a>; here's the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example-1dot1/RectangleDemo.java">1.1 code</a>).  To run the <em>1.1</em> version of the applet, go to <a href="example-1dot1\rectangledemo.html"><code>example-1dot1/RectangleDemo.html</code></a>. <hr></blockquote><p>

Below is the significant new code:

<blockquote>
<pre>
class SelectionArea extends Canvas {
    . . .

    public boolean mouseDown(Event event, int x, int y) {
        currentRect = new Rectangle(x, y, 0, 0);
        repaint();
        return false;
    }
    
    public boolean mouseDrag(Event event, int x, int y) {
        currentRect.resize(x - currentRect.x, y - currentRect.y);
        repaint();
        return false;
    }
    
    public boolean mouseUp(Event event, int x, int y) {
        currentRect.resize(x - currentRect.x, y - currentRect.y);
        repaint();
        return false;
    }
    
    public void paint(Graphics g) {
        Dimension d = size();
    
        //If currentRect exists, paint a rectangle on top.
        if (currentRect != null) {
            Rectangle box = getDrawableRect(currentRect, d);
            controller.rectChanged(box);
        
            //Draw the box outline.
            g.drawRect(box.x, box.y, box.width - 1, box.height - 1);
        }
    }
    
    Rectangle getDrawableRect(Rectangle originalRect, Dimension drawingArea) {
        . . .
        <em>//Make sure rectangle width and height are positive.</em>
        . . .
        <em>//The rectangle shouldn't extend past the drawing area.</em>
        . . .
    }
}
</pre>
</blockquote>

As you can see, the SelectionArea
keeps track of the currently selected rectangle,
using a Rectangle object called <code>currentRect</code>.
As implemented, the <code>currentRect</code>
keeps the same origin
(<code>currentRect.x</code>, <code>currentRect.y</code>)
for as long as the user drags the mouse.
This means that the height and width of the rectangle
can be negative.

<p>

However, the 
<code>draw<em>Xxx</em>()</code> and
<code>fill<em>Xxx</em>()</code>
methods don't draw anything
if either the height or width is negative.
For this reason, 
when the SelectionArea draws the rectangle,
it must specify the upper left vertex of the rectangle
so that the width and height are positive.
The SelectionArea class defines a <code>getDrawableRect()</code> method
to perform the necessary calculations to find the upper left vertex.
The <code>getDrawableRect()</code> method also makes sure
that the rectangle doesn't
extend beyond the boundaries of its drawing area.
Here, again is a link to the
<a href=http://docs.rinet.ru/OLDui/OLDui/drawing/example/RectangleDemo.java>source code</a>.
You'll find the definition of <code>getDrawableRect()</code>
at the bottom of the file.

<p>

<strong>Note:</strong>
It's perfectly legal to specify x, y, height, or width values
that are negative or cause a result larger than the drawing area.
Values outside the drawing area don't matter too much
because they're clipped to the drawing area.
You just won't see part of the shape.
Negative height or width results
in the shape not being drawn at all.


</blockquote>
<h4>Example 3: A Shape Sampler</h4>
<blockquote>

The following applet demonstrates all the shapes you can draw and fill.

<p>

<applet codebase=http://docs.rinet.ru:8080/OLDui/OLDui/drawing/example code=ShapesDemo.class width=550 height=100>
<blockquote><IMG SRC="http://docs.rinet.ru/OLDui/figures/ui/13ui37.gif" WIDTH="433" HEIGHT="181" ALIGN="BOTTOM" NATURALSIZEFLAG="3" ALT=""></blockquote></applet>

<blockquote><hr><strong>Note:</strong> Because some old browsers don't support 1.1, the above applet is a <em>1.0</em> version (here is the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example/ShapesDemo.java">1.0 code</a>; here's the <a href="http://docs.rinet.ru/OLDui/OLDui/drawing/example-1dot1/ShapesDemo.java">1.1 code</a>).  To run the <em>1.1</em> version of the applet, go to <a href="example-1dot1\shapesdemo.html"><code>example-1dot1/ShapesDemo.html</code></a>. <hr></blockquote>
Unless your applet viewer's default font is very small,
the text displayed in the above applet might look ugly in places.
Words might be drawn on top of each other.
And because this applet doesn't use the <code>insets()</code> method
to protect its boundaries,
text might be drawn on top of the 
frame around the applet.
The next page improves on this example,
teaching you how to make sure
text fits within a given space.

<p>

Here's just the code that draws the geometric shapes.
The <code>rectHeight</code>
and <code>rectWidth</code> variables
specify the size in pixels of the area
each shape must be drawn in.
The <code>x</code>
and <code>y</code> variables
are changed for every shape,
so that the shapes aren't drawn
on top of each other.

<blockquote>
<pre>
Color bg = getBackground();
Color fg = getForeground();
. . .

// drawLine() 
g.drawLine(x, y+rectHeight-1, x + rectWidth, y); // x1, y1, x2, y2
. . .

// drawRect() 
g.drawRect(x, y, rectWidth, rectHeight); // x, y, width, height
. . .

// draw3DRect() 
g.setColor(bg);
g.draw3DRect(x, y, rectWidth, rectHeight, true);
g.setColor(fg);
. . .

// drawRoundRect() 
g.drawRoundRect(x, y, rectWidth, rectHeight, 10, 10); // x, y, w, h, arcw, arch
. . .

// drawOval() 
g.drawOval(x, y, rectWidth, rectHeight); // x, y, w, h
. . .

// drawArc() 
g.drawArc(x, y, rectWidth, rectHeight, 90, 135); // x, y, w, h
. . .

// drawPolygon() 
Polygon polygon = new Polygon();
polygon.addPoint(x, y);
polygon.addPoint(x+rectWidth, y+rectHeight);
polygon.addPoint(x, y+rectHeight);
polygon.addPoint(x+rectWidth, y);
//polygon.addPoint(x, y); //don't complete; fill will, draw won't
g.drawPolygon(polygon); 
. . .

// fillRect() 
g.fillRect(x, y, rectWidth, rectHeight); // x, y, width, height
. . .

// fill3DRect() 
g.setColor(bg);
g.fill3DRect(x, y, rectWidth, rectHeight, true);
g.setColor(fg);
. . .

// fillRoundRect() 
g.fillRoundRect(x, y, rectWidth, rectHeight, 10, 10); // x, y, w, h, arcw, arch
. . .

// fillOval() 
g.fillOval(x, y, rectWidth, rectHeight); // x, y, w, h
. . .

// fillArc() 
g.fillArc(x, y, rectWidth, rectHeight, 90, 135); // x, y, w, h
. . .

// fillPolygon() 
Polygon filledPolygon = new Polygon();
filledPolygon.addPoint(x, y);
filledPolygon.addPoint(x+rectWidth, y+rectHeight);
filledPolygon.addPoint(x, y+rectHeight);
filledPolygon.addPoint(x+rectWidth, y);
//filledPolygon.addPoint(x, y);
g.fillPolygon(filledPolygon); 
</pre>
</blockquote>

</blockquote>

</blockquote>
<p>
<hr size=4>
<p> 
<table width="100%">
<tr>
<td align=left>
<a href="usingprimitives.html"><img src="http://docs.rinet.ru/OLDui/images/PreviousArrow.gif" width=26 height=26 align=top border=0 alt="Previous | "></a><a
href="drawingtext.html"><img src="http://docs.rinet.ru/OLDui/images/NextArrow.gif" width=26 height=26 align=top border=0 alt="Next | "></a><a
href="http://docs.rinet.ru:8080/OLDui/trailmap.html"><img src="http://docs.rinet.ru/OLDui/images/WayUpArrow.gif" width=26 height=26 align=top border=0 alt="Trail Map | "></a><a
href="..\index.html"><img src="http://docs.rinet.ru/OLDui/images/uiHeader.gif" width=26 height=26 align=top border=0 alt="Creating a User Interface (AWT Only) | "></a>
</td>
<td align=right>
<a href="index.html"><strong><em>Working with Graphics</em></strong></a>
</td>
</tr>
</table>
</body>
</html>
