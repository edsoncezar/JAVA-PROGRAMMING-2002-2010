<HTML>
<HEAD>


<TITLE>Developing Java Enterprise Applications:Using JNDI</TITLE>





<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="05-03.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="05-05.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<TABLE WIDTH="90%">
<TD CAPTION COLSPAN="2"><B>Table 5.3</B> NameClassPair Methods
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TH WIDTH="40%" VALIGN="TOP" ALIGN="LEFT">METHOD 
<TH WIDTH="50%" VALIGN="TOP" ALIGN="LEFT">USE
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>NameClassPair(String name,String className)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">This constructor creates an instance of a NameClassPair and sets the name and class name associated with it.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>NameClassPair(Stringname, String className,boolean</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">This constructor creates an instance of a NameClassPair and sets the name and class isRelative) name associated with it. If isRelative is set to true, the name is set relative to the target context of the listing. If isRelative is set to false, the name is a complete URL string.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>StringgetClassName()</SMALL> <TD VALIGN="TOP" ALIGN="LEFT">Returns the class name of the object bound to this NameClassPair instance.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>String getName()</SMALL> <TD VALIGN="TOP" ALIGN="LEFT">Returns the name of this binding.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>boolean isRelative()</SMALL> <TD VALIGN="TOP" ALIGN="LEFT">Returns true if the name of this binding is relative to the target context.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>void setClassName(String name)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Sets the class name for this binding.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>void setName(String name)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Sets the name associated with this binding.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>void setRelative(boolean r)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Sets whether the name of this binding should be considered relative to the target context.
<TR>
<TD COLSPAN="2"><HR>
<TR>
</TABLE>
<P>The code listing that follows for a class List demonstrates how these methods work. This example program uses an initial context of /tmp/marketing and lists the contents of the context and the bindings for each object in the context. The JNDI elements of this example are in bold.
</P>
<PRE>
import javax.naming.*;
import javax.naming.directory.*;
import java.util.Hashtable;
import java.util.Enumeration;
import java.io.*;

// example use: java List

public class List
{
    public static void main(String[] args)
    {
        // Create a list of environment settings for our example.
        Hashtable env = new Hashtable();

        /*
          By specifying we are using refFSContextFactory, we will
          have the ability to access the file system and lookup and
</PRE>
<TABLE WIDTH="90%">
<TD CAPTION COLSPAN="2"><B>Table 5.4</B> Binding Methods
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TH WIDTH="35%" VALIGN="TOP" ALIGN="LEFT">METHOD 
<TH WIDTH="55%" VALIGN="TOP" ALIGN="LEFT">USE
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>Binding(String name, Object obj)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">This constructor creates an instance of a binding with specific non-null name relative to the target context and the bound object, which can be null.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>Binding(String name, Object obj, boolean isRelative)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">This constructor creates an instance of a binding with specific non-null name and the bound object, which can be null. If isRelative is set to true, name is considered to be relative to the target context. If isRelative is false, name is considered to be a complete URL.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>Binding(String name, String className, Object obj)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">This constructor creates an instance of a binding with specific non-null name relative to the target context. If className, the class name of object (obj, the possibly null object bound to name) is returned using getClassName(). If obj is also null, getClassName() returns null.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>Binding(String name, String className, Object obj, boolean isRelative)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">This constructor creates an instance of a binding with specific non-null name. If className, the class name of object (obj, the possibly null object bound to name) is returned using getClassName(). If obj is also null, getClassName() returns null. If isRelative is set to true, name is considered to be relative to the target context. If isRelative is false, name is considered to be a complete URL.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>String getClassName()</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Returns the class name of the object bound to the name of this binding.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>Object getObject()</SMALL> <TD VALIGN="TOP" ALIGN="LEFT">Returns the actual object bound to the name of this binding.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>void setObject(Object obj)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Sets the object associated with this binding to obj.
<TR>
<TD COLSPAN="2"><HR>
<TR>
</TABLE>
<PRE>
         store objects as well.     
         */
        <B>env.put(Context.INITIAL_CONTEXT_FACTORY,
            &#147;com.sun.jndi.fscontext.RefFSContextFactory&#148;);</B>

        // Specify the file system to search in this example.
        <B>env.put(Context.PROVIDER_URL,&#147;file:/tmp/marketing&#148;);</B>

        try
        {
            // Place holder for items in a context.
            Object item = null;

            // Based on our environment, set an initial context.
            <B>Context initCtx = new InitialContext(env);</B>

            <B>NamingEnumeration nl = initCtx.list(&#147;reports&#148;);</B>

            System.out.println(&#147;*** Printing context list ***&#148;);

            if (nl == null)
                System.out.println(&#147;\nNo items in name list&#148;);
            else
            <B>    while (nl.hasMore())
                {
                    item=nl.next();</B>
                    System.out.println(&#147;item's class is &#148; &#43;
                      item.getClass().getName());
                    System.out.println(item);
                    System.out.println(&#147;&#148;);
                }

            System.out.println(&#147;<B> Printing context&#148; &#43; </B>
                &#147; list bindings &#148;);

            <B>nl = initCtx.listBindings(&#147;reports&#148;);</B>
            if (nl == null)
                System.out.println(&#147;\nNo items in name list&#148;);
            else
            <B>    while (nl.hasMore())
                {
                    item=nl.next();</B>
                    System.out.println(&#147;item's class is &#148; &#43;
                        item.getClass().getName());
                    System.out.println(item);
                    System.out.println(&#147;&#148;);
                <B>}</B>
        }catch(Exception e)
        {
            System.out.println(e);
            e.printStackTrace(System.out);
        }
    }
}
</PRE>
<P>Figure 5.4 shows what would so far be returned from our example, assuming the previous code above was executed.
</P>
<P>In addition to accessing a list of objects in a context, you can also access a specific object by using the lookup or lookupLink methods. These methods look for a specific object in the current context and return the object bound to the name you provide. Here is the code for an example, Print, that uses the lookup operation to retrieve the file report1.txt based on the directory structure in Figure 5.2 and displays the file.</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="05-03.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="05-05.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

