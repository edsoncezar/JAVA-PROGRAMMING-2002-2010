<HTML>
<HEAD>


<TITLE>Developing Java Enterprise Applications:Basic JDBC Programming</TITLE>





<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="03-07.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="03-09.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<H3><A NAME="Heading11"></A><FONT COLOR="#000077">Fetching Data</FONT></H3>
<P>Selecting data from a single table is done by using the Statement method executeQuery(). The steps for fetching data are as follows:
</P>
<DL>
<DD><B>1.</B>&nbsp;&nbsp;Create a statement from a connection.
<DD><B>2.</B>&nbsp;&nbsp;Execute the query.
<DD><B>3.</B>&nbsp;&nbsp;Fetch a result set from the Statement object.
<BR>For example, the following call returns a list of all inventory items:
</DL>
<PRE>
...
 Connection con = DriverManager.getConnection(&#147;jdbc:odbc:Inventory&#148;,
                                             &#147;&#148;,&#147;&#148;);
Statement stmt = con.createStatement();
ResultSet rs = stmt.executeQuery(&#147;SELECT * FROM Inventory&#148;);
...
</PRE>
<P>A database query returns a result set. If no values are returned, ResultSet will not contain values.
</P>
<H4 ALIGN="LEFT"><A NAME="Heading12"></A><FONT COLOR="#000077">Working with a Result Set</FONT></H4>
<P>Once you have fetched a result set from a database call, you will want to process it. ResultSet is organized into logical rows and columns of data. It maintains a cursor to the current row. You can instruct ResultSet to move to the next row by calling next().
</P>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>JDBC 2.0 contains methods for traversing to the next, previous, first, and last row of ResultSet. It has methods for deleting current row, jumping to the insert row, and so on. In general, ResultSet is much more feature rich. However, with some work, most of these features can be duplicated in JDBC 1.0.</FONT><HR>
</BLOCKQUOTE>
<P>The columns of ResultSet can be accessed in any order and as often as needed. Columns can be accessed by their positions in the column list or by name. For instance, if you had the following SQL:
</P>
<PRE>
SELECT name, address, city FROM Customers
</PRE>
<P>you could access the address attribute by name, address, or by index, 2. To get values from ResultSet, use the getXXX methods included in the ResultSet object. Table 3.10 lists these methods.
</P>
<TABLE WIDTH="85%"><TD CAPTION VALIGN="TOP" ALIGN="LEFT" COLSPAN="3"><B>Table 3.10</B> ResultSet getXXX Methods
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TH WIDTH="25%" VALIGN="TOP" ALIGN="LEFT">INDEX GETXXX METHOD
<TH WIDTH="30%" VALIGN="TOP" ALIGN="LEFT">NAME GETXXX<BR>METHOD
<TH WIDTH="30%" VALIGN="TOP" ALIGN="LEFT">USE
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">InputStream getAsciiStream(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">InputStream getAsciiStream(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get a column value as a stream of ASCII characters.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">BigDecimal getBigDecimal(int columnIndex, int scale)
<TD VALIGN="TOP" ALIGN="LEFT">BigDecimal getBigDecimal(String columnName, int scale)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a java.lang.BigDecimal object.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">InputStream getBinaryStream(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">InputStream getBinaryStream(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get a column value as a stream of bytes.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Boolean getBoolean(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">boolean getBoolean(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a Boolean integer.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">byte getByte(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">byte getByte(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a byte.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">byte[] getBytes(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">byte[] getBytes(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as an array of bytes.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Date getDate(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">Date getDate(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a java.sql.Date object. Date is a thin wrapper around java.util.Date.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">double getDouble(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">double getDouble(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a double.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">FloatgetFloat(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">float getFloat(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a float.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">int getInt(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">int getInt(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as an int.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Object getObject(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">Object getObject(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as an Object. The mapping is based on the JDBC spec and is listed in Appendix A.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">short getShort(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">short getShort(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a short.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">String getString(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">String getString(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a String.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Time getTime(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">Time getTime(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a java.sql.Time object. Time is a wrapper around java.util.Date that adds formatting and parsing operations to support the JDBC escape syntax for time values.
<TR>
<TD COLSPAN="3"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Timestamp getTimestamp(int columnIndex)
<TD VALIGN="TOP" ALIGN="LEFT">Timestamp getTimestamp(String columnName)
<TD VALIGN="TOP" ALIGN="LEFT">Get the value of a column as a java.sql.Timestamp object. Timestamp is a wrapper around java.util.Date that adds the ability to hold the SQL TIMESTAMP nanos value and provides formatting andparsing operations to support the JDBC escape syntax for timestamp values.
<TR>
<TD COLSPAN="3"><HR>
</TABLE>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>If two columns have the same name, the first one matching your column name will be returned. For this reason, it is recommended that you use the position or index to reference the column. This way, programmers can guarantee they are returning the correct column.
</FONT><HR>
</BLOCKQUOTE>
<P>The next example fetches a list of all suppliers and the beverage products they sell from the ProductSuppliersView view in the INV database. Once the list is loaded, the program prints these values. To get data from the database, this example uses the executeQuery method, which returns a ResultSet. Because the names of the returned data are known, the actual column names are used to retrieve the values. Initially, the ResultSet cursor is positioned before the first row of results. Each time rs.next() is called, the ResultSet places its cursor on the next row and returns true until it reaches the end of the results. Then it returns false. Figure 3.11 illustrates what your results will look like.
</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="03-07.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="03-09.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

