<HTML>
<HEAD>


<TITLE>Developing Java Enterprise Applications:Programming Servlets</TITLE>





<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="07-03.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="07-05.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>Because the content type is used to determine the character encoding for the output writer, set the content type before accessing the writer. Also, in the case of HTTP style servlets, the content type is returned to the client in the header of the HTTP reply, while the output stream and writer return data in the body. This means that you should set the content type first, before using either method to return data to the client. Bottom line: Set the content type before sending any output. Also, use the content length, if possible.
</P>
<TABLE WIDTH="100%"><TD CAPTION ALIGN="LEFT" COLSPAN="2"><B>Table 7.5</B> ServletResponse Methods
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TH ALIGN="LEFT" VALIGN="TOP">METHOD
<TH ALIGN="LEFT" VALIGN="TOP">DESCRIPTION
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>String getCharacterEncoding()</SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns the character set encoding used for this MIME body. Use the setContentType method to change this encoding. This method is used to create the appropriate writer for sending text data to the client.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>ServletOutputStream getOutputStream()</SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns an output stream for writing binary response data.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>PrintWriter getWriter() </SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns a print writer for writing formatted text responses.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>void setContentLength(int)</SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Sets the content length for this response in bytes. If the servlet knows how much data is going to be written, it should provide this information here.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>void setContentType(String)</SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Sets the content type for this response as a standard MIME type. The default is text/plain.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
</TABLE>
<H4 ALIGN="LEFT"><A NAME="Heading7"></A><FONT COLOR="#000077">ServletConfig</FONT></H4>
<P>When a servlet is initialized, it is passed an object that implements the ServletConfig interface. Table 7.6 lists the methods defined in this interface. This object is designed to provide information to the servlet about the server and how the servlet is currently configured. Essentially, the configuration object provides two pieces of information. First, the configuration provides access to configuration parameters defined when the servlet was installed on the server. Second, the configuration object provides access to the servlet&#146;s context.
</P>
<P>Depending on the server you install, a servlet on the initialization parameters may be defined differently. For example, the Java Web Server provided by Sun uses a configuration applet to set initialization parameters; the JSDK uses a properties file.</P>
<H4 ALIGN="LEFT"><A NAME="Heading8"></A><FONT COLOR="#000077">ServletContext</FONT></H4>
<P>The ServletConfig interface provides specific information about the servlet&#146;s configuration, but the ServletContext interface defines methods that provide information about the environment in which the servlet itself is running. These methods are listed in Table 7.7. The context is accessed via the configuration object using the method getServletContext.
</P>
<P>The context provides access to both the servlet log file and the other servlets on the server. Like the similar feature in AppletContext, access to other servlets may be considered a security risk and therefore not to be implemented on all servers. Refer to your server&#146;s documentation for information on what these methods do.</P>
<H4 ALIGN="LEFT"><A NAME="Heading9"></A><FONT COLOR="#000077">GenericServlet</FONT></H4>
<P>Perhaps the easiest way to create a servlet is to subclass GenericServlet. GenericServlet implements the Servlet interface and provides a number of convenient methods for accessing information from the servlet configuration. These methods are listed in Table 7.8.
</P>
<TABLE WIDTH="100%"><TD CAPTION ALIGN="LEFT" COLSPAN="2"><B>Table 7.6</B> ServletConfig Methods
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TH ALIGN="LEFT" VALIGN="TOP">METHOD
<TH ALIGN="LEFT" VALIGN="TOP">DESCRIPTION
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>String getInitParameter(String)</SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns a string containing the value of the named initialization parameter of the servlet or null if the parameter does not exist.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>Enumeration getInitParameterNames()</SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns the names of the servlet&#146;s initialization parameters as an enumeration of strings or an empty enumeration if there are no initialization parameters. Use the getInitParameter method to get the value for each named parameter.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>ServletContext getServletContext()</SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns the servlet&#146;s context, as defined by the server.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
</TABLE>
<P>
</P>
<TABLE WIDTH="100%"><TD CAPTION ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><B>Table 7.7</B> ServletContext Methods
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TH ALIGN="LEFT" VALIGN="TOP">METHOD
<TH ALIGN="LEFT" VALIGN="TOP">DESCRIPTION
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>Object getAttribute(String) </SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Like the request method of the same name, this method provides access to server-specific information.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>String getMimeType(String) </SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns the MIME type of the specified file or null if not known. This method may or may not be implemented by the server, and servlets should plan for the possible null return value.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>String getRealPath(String) </SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Applies alias rules to the specified virtual path and returns the corresponding real path.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>String getServerInfo() </SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns the name and version of the network service under which the servlet is running.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>Servlet getServlet(String) </SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns the servlet of the specified name or null if not found.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>Enumeration getServletNames() </SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Returns an enumeration of the Servlet object names in this server.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>void log(Exception, String) </SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Writes the stacktrace and the given message string to the servlet log file.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
<TR>
<TD ALIGN="LEFT" VALIGN="TOP"><SMALL>void log(String) </SMALL>
<TD ALIGN="LEFT" VALIGN="TOP">Writes the given message string to the servlet log file.
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2"><HR>
</TABLE>
<P>Many of these methods are covers for ServletConfig or ServletContext methods. These methods simply forward messages to the appropriate object.
</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="07-03.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="07-05.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>





</BODY>
</HTML>

