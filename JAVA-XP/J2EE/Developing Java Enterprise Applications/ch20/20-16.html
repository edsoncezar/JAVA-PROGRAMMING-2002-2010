<HTML>
<HEAD>


<TITLE>Developing Java Enterprise Applications:Programming with the Java Messaging Service</TITLE>





<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="20-15.html">Previous</A></TD>
<TD><A HREF="..\ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="20-17.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<TABLE WIDTH="100%">
<TR>
<TD CAPTION ALIGN="LEFT" COLSPAN="2"><B>Table 20.12</B> TopicPublisher Methods
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TH VALIGN="TOP" WIDTH="50%" ALIGN="LEFT">METHOD
<TH VALIGN="TOP" ALIGN="LEFT">DESCRIPTION
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void publish(Message message) throws JMSException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Publish a method to the publisher&#146;s default topic with the default priority, timeToLive, and mode.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void publish(Message message, int deliveryMode, int priority, long timeToLive) throws JMSException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Publish a method to the publisher&#146;s default topic with the specified priority, timeToLive, and mode.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void publish(Topic topic, Message message) throws JMSException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Publish a method to the specified topic with the default priority, timeToLive, and mode.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void publish(Topic topic, Message message, int deliveryMode, int priority, long timeToLive) throws JMSException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Publish a method to the specified topic with the specified priority, timeToLive, and mode.
<TR>
<TD COLSPAN="2"><HR>
</TABLE>
<P><A NAME="Fig6"></A><A HREF="images\20-06.jpg"><IMG SRC="images\20-06t.jpg"></A>
<BR><A HREF="images\20-06.jpg"><FONT COLOR="#000077"><B>Figure 20.6</B></FONT></A>&nbsp;&nbsp;Topic publisher test.</P>
<PRE>
import javax.jms.*;
import javax.naming.*;
import minijms.*;

import com.sun.java.swing.*;
import java.awt.*;
import java.awt.event.*;

public class TopicPublisherTest extends JPanel
 implements ActionListener
{
    JTextField sendField;
    JTextField topicField;

    javax.jms.TopicSession session;
    javax.jms.TopicPublisher sender;
    javax.jms.TopicConnection conn;
    javax.jms.TopicConnectionFactory factory;

    public static final String send_action=&#147;send&#148;;
    public static final String topic_action=&#147;topic&#148;;
</PRE>
<P>The constructor for TopicPublisherTest creates the user interface and the initial object for accessing JMS. The MiniJMSUtils class, described in &#147;MiniJMSUtils&#148; at the beginning of the chapter, is used to create the JNDI context for this program.
</P>
<PRE>
    public TopicPublisherTest(String user)
    {
        JLabel label;
        JButton button;
        JPanel tmp;
        Context context;
        Font f = new Font(&#147;Serif&#148;,Font.PLAIN,16);

        setFont(f);

        try
        {
            <B>MiniJMSUtils.init(&#147;topicpublisher.properties&#148;);
            context = MiniJMSUtils.context;

            factory
             = (TopicConnectionFactory)
                 context.lookup(&#147;TopicConnectionFactory&#148;);

            conn
             = factory.createTopicConnection(user,null);

            session

             = conn.createTopicSession(false
                      ,Session.AUTO_ACKNOWLEDGE);</B>

            if(session == null) throw new Exception();
        }
        catch(Exception exp)
        {
            exp.printStackTrace();
            System.exit(0);
        }

        setLayout(new GridLayout(2,1,6,6));

        topicField = new JTextField(20);
        topicField.addActionListener(this);
        topicField.setActionCommand(topic_action);

        label = new JLabel(&#147;Topic:&#148;);

        button = new JButton(&#147;Change&#148;);
        button.addActionListener(this);
        button.setActionCommand(topic_action);

        tmp = new JPanel();
        tmp.setLayout(new FlowLayout(FlowLayout.L