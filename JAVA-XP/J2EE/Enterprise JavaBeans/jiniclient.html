<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>Developing a Jini Client by Gopalan Suresh Raj</title>
</head>

<body bgcolor="#FFFFFF">

<p align="center"><font color="#000080" size="5" face="Arial"><strong>Developing
A Simple Jini Client</strong></font><font face="Verdana"><br>
</font><a href="http://www.execpc.com/~gopalan/personal/cv.html"><font
color="#000080" size="4" face="Verdana">Gopalan Suresh Raj</font></a></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#808080"><font color="#FFCC00" size="4"
        face="Verdana">Note</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="3" face="Verdana"><strong>To
        work with any of these samples, you will need the
        following:</strong></font><font face="Verdana"><br>
        </font><font size="2" face="Verdana"><strong>.........................................</strong></font><a
        href="http://java.sun.com/"><font size="2" face="Verdana"><strong>The
        Java 2 compiler and API - JDK 1.2</strong></font></a><font
        size="2" face="Verdana"><strong><br>
        .........................................</strong></font><a
        href="http://www.sun.com/jini/licensing/"><font size="2"
        face="Verdana"><strong>The Jini 1.x System Software</strong></font></a><font
        size="2" face="Verdana"><strong><br>
        </strong></font></td>
    </tr>
</table>
</center></div>

<p align="left"><font color="#000000" size="4" face="Verdana">This
simple Jini client Queries the Jini Service for it's current time
in milliseconds by invoking it's </font><font color="#000080"
size="4" face="Courier New"><strong>getTime()</strong></font><font
color="#000000" size="4" face="Verdana"> method. It then computes
the time taken for the message to reach it and prints it out in
milliseconds.</font></p>

<p align="left"><font color="#000000" size="4" face="Verdana">The
Steps involved in developing a Jini Client are</font></p>

<blockquote>
    <p align="left"><font face="Verdana">1. Code the Jini Client<br>
    2. Start the Client<br>
    </font></p>
</blockquote>

<p align="left"><font face="Verdana"><strong>1. Code the Jini
Client</strong></font></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">MyClient.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="2" face="Courier New"><strong>import
        net.jini.core.entry.*; <br>
        import net.jini.core.lookup.*; <br>
        import net.jini.core.discovery.*; <br>
        import net.jini.lookup.*; <br>
        import net.jini.lookup.entry.*; <br>
        import net.jini.discovery.*; </strong></font><p><font
        size="2" face="Courier New">import java.rmi.*; <br>
        </font><font color="#008000" size="2" face="Courier New"><em>/***************************************************************************
        </em></font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;MyClient
        -- The Jini Client Class </em></font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;***************************************************************************/
        </em></font></p>
        <p><font size="2" face="Courier New">class MyClient { <br>
        &nbsp;public static void main (String[] args) { <br>
        &nbsp; <strong>int iPort; <br>
        &nbsp; String sHost; <br>
        &nbsp; Entry[] aeAttributes; <br>
        &nbsp; LookupLocator lookup; <br>
        &nbsp; ServiceID id; <br>
        &nbsp; ServiceRegistrar registrar; <br>
        &nbsp; ServiceTemplate template; </strong><br>
        &nbsp; MyServerInterface myServerInterface; </font></p>
        <p><font size="2" face="Courier New">&nbsp; try { <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>/* <br>
        &nbsp;&nbsp; Setting the security manager to allow the
        RMI class loader <br>
        &nbsp;&nbsp; to go to the codebase for classes that are
        not available <br>
        &nbsp;&nbsp; locally. <br>
        &nbsp;&nbsp;
        ==========================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; <strong>System.setSecurityManager (new
        RMISecurityManager ());</strong> <br>
        &nbsp; </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>/* <br>
        &nbsp;&nbsp; Find the Jini lookup service (reggie) and
        print its location. <br>
        &nbsp;&nbsp;
        =============================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; <strong>lookup = new LookupLocator
        (&quot;jini://localhost&quot;); <br>
        &nbsp;&nbsp; sHost = lookup.getHost (); <br>
        &nbsp;&nbsp; iPort = lookup.getPort (); </strong><br>
        &nbsp;&nbsp; System.out.println (); <br>
        &nbsp;&nbsp; System.out.println (&quot;client:
        LookupLocator = &quot; + lookup); <br>
        &nbsp;&nbsp; System.out.println (&quot;client:
        LookupLocator.host = &quot; + sHost); <br>
        &nbsp;&nbsp; System.out.println (&quot;client:
        LookupLocator.port = &quot; + iPort); <br>
        &nbsp; </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>/* <br>
        &nbsp;&nbsp; Get the lookup service's ServiceRegistrar
        (the class by which <br>
        &nbsp;&nbsp; interaction with the lookup service is
        possible). <br>
        &nbsp;&nbsp;
        =============================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; <strong>registrar = lookup.getRegistrar (); <br>
        &nbsp;&nbsp; id = registrar.getServiceID (); </strong><br>
        &nbsp;&nbsp; System.out.println (&quot;client:
        ServiceRegistrar = &quot; + registrar); <br>
        &nbsp;&nbsp; System.out.println (&quot;client: ServiceID
        = &quot; + id); <br>
        &nbsp; </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>/* <br>
        &nbsp;&nbsp; Perform a search on the lookup server to
        find the service <br>
        &nbsp;&nbsp; that has the name attribute of
        &quot;MyServer&quot;. The lookup <br>
        &nbsp;&nbsp; service returns an interface object to the
        service. <br>
        &nbsp;&nbsp;
        =========================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; <strong>aeAttributes = new Entry[1]; <br>
        &nbsp;&nbsp; aeAttributes[0] = new Name
        (&quot;MyServer&quot;); <br>
        &nbsp;&nbsp; template = new ServiceTemplate (null, null,
        aeAttributes); <br>
        &nbsp;&nbsp; myServerInterface = (MyServerInterface)
        registrar.lookup (template); </strong><br>
        &nbsp;&nbsp; System.out.println (&quot;client:
        ServiceTemplate = &quot; + template); <br>
        &nbsp;&nbsp; System.out.println (&quot;client: Service
        object = &quot; + myServerInterface); <br>
        &nbsp; </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>/* <br>
        &nbsp;&nbsp; If the correct object was returned, call one
        of its methods. <br>
        &nbsp;&nbsp;
        ============================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; if (<strong>myServerInterface instanceof
        MyServerInterface</strong>) { <br>
        &nbsp;&nbsp;&nbsp; long startTime = <strong>myServerInterface.getTime()</strong>;
        <br>
        &nbsp;&nbsp;&nbsp; System.out.println (&quot;client: Time
        at server is &quot; + startTime); <br>
        &nbsp;&nbsp;&nbsp; long stopTime =
        System.currentTimeMillis(); <br>
        &nbsp;&nbsp;&nbsp; System.out.println (&quot;client: Time
        at client is &quot; + stopTime); <br>
        &nbsp;&nbsp;&nbsp; float difference= stopTime-startTime; <br>
        &nbsp;&nbsp;&nbsp; System.out.println (&quot;client: Time
        for message to traverse the net is ---&gt;&quot; <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        + difference + &quot; msecs&lt;---&quot;); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } catch (Exception e) { System.out.println
        (&quot;client: MyClient.main() exception: &quot; + e); } <br>
        &nbsp;} <br>
        } <br>
        &nbsp; </font></p>
        </td>
    </tr>
</table>
</center></div>

<p>&nbsp;</p>

<p><font face="Verdana"><strong>4. Startup the Client</strong></font></p>

<table border="1">
    <tr>
        <td bgcolor="#000000"><font color="#FFFFFF" size="2"
        face="Courier New">H:\jini\TimeServer&gt;<br>
        H:\jini\TimeServer&gt;set
        CLASSPATH=.;G:\sun\jini\jini1_0\lib\jini-core.jar;G:\sun\jini\jini1_0\lib\jini-ext.jar;<br>
        G:\sun\jini\jini1_0\lib\mahalo.jar;G:\sun\jini\jini1_0\lib\mahalo-dl.jar;G:\sun\jini\jini1_0\lib\reggie.jar;<br>
        G:\sun\jini\jini1_0\lib\reggie-dl.jar;G:\sun\jini\jini1_0\lib\sun-util.jar;G:\sun\jini\jini1_0\lib\tools.jar;<br>
        %CLASSPATH%<br>
        <br>
        H:\jini\TimeServer&gt;<br>
        H:\jini\TimeServer&gt;java
        -Djava.security.policy=H:\jini\TimeServer\policy.all
        -Djava.rmi.server.codebase=http://localhost/ MyClient<br>
        <br>
        client: LookupLocator = jini://localhost/<br>
        client: LookupLocator.host = localhost<br>
        client: LookupLocator.port = 4160<br>
        client: ServiceRegistrar =
        com.sun.jini.reggie.RegistrarProxy@2cd27317<br>
        client: ServiceID = 88fc7d88-8ea6-4db9-9cac-ddeab6249ecc<br>
        client: ServiceTemplate =
        net.jini.core.lookup.ServiceTemplate@f82dd4d7<br>
        client: Service object = MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3980](remote),objID:[4c85d4c7:d5f<br>
        eec9ba4:-8000, 0]]]]<br>
        client: Time at server is 919104970506<br>
        client: Time at client is 919104970506<br>
        client: Time for message to traverse the net is
        ---&gt;0.0 msecs&lt;---<br>
        <br>
        H:\jini\TimeServer&gt;java
        -Djava.security.policy=H:\jini\TimeServer\policy.all
        -Djava.rmi.server.codebase=http://localhost/ MyClient<br>
        <br>
        client: LookupLocator = jini://localhost/<br>
        client: LookupLocator.host = localhost<br>
        client: LookupLocator.port = 4160<br>
        client: ServiceRegistrar =
        com.sun.jini.reggie.RegistrarProxy@2cd27317<br>
        client: ServiceID = 88fc7d88-8ea6-4db9-9cac-ddeab6249ecc<br>
        client: ServiceTemplate =
        net.jini.core.lookup.ServiceTemplate@f82dd4b8<br>
        client: Service object = MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3980](remote),objID:[4c85d4c7:d5feec9ba4:-8000,
        0]]]]<br>
        client: Time at server is 919105007119<br>
        client: Time at client is 919105007119<br>
        client: Time for message to traverse the net is
        ---&gt;0.0 msecs&lt;---<br>
        <br>
        H:\jini\TimeServer&gt;java
        -Djava.security.policy=H:\jini\TimeServer\policy.all
        -Djava.rmi.server.codebase=http://localhost/ MyClient<br>
        <br>
        client: LookupLocator = jini://localhost/<br>
        client: LookupLocator.host = localhost<br>
        client: LookupLocator.port = 4160<br>
        client: ServiceRegistrar =
        com.sun.jini.reggie.RegistrarProxy@2cd27317<br>
        client: ServiceID = 88fc7d88-8ea6-4db9-9cac-ddeab6249ecc<br>
        client: ServiceTemplate =
        net.jini.core.lookup.ServiceTemplate@f821d4bf<br>
        client: Service object = MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3980](remote),objID:[4c85d4c7:d5feec9ba4:-8000,
        0]]]]<br>
        client: Time at server is 919105010724<br>
        client: Time at client is 919105010734<br>
        client: Time for message to traverse the net is
        ---&gt;10.0 msecs&lt;---<br>
        <br>
        H:\jini\TimeServer&gt;java
        -Djava.security.policy=H:\jini\TimeServer\policy.all
        -Djava.rmi.server.codebase=http://localhost/ MyClient<br>
        <br>
        client: LookupLocator = jini://localhost/<br>
        client: LookupLocator.host = localhost<br>
        client: LookupLocator.port = 4160<br>
        client: ServiceRegistrar =
        com.sun.jini.reggie.RegistrarProxy@2cd27317<br>
        client: ServiceID = 88fc7d88-8ea6-4db9-9cac-ddeab6249ecc<br>
        client: ServiceTemplate =
        net.jini.core.lookup.ServiceTemplate@fb79d483<br>
        client: Service object = MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3980](remote),objID:[4c85d4c7:d5feec9ba4:-8000,
        0]]]]<br>
        client: Time at server is 919105014360<br>
        client: Time at client is 919105014370<br>
        client: Time for message to traverse the net is
        ---&gt;10.0 msecs&lt;---<br>
        <br>
        H:\jini\TimeServer&gt;java
        -Djava.security.policy=H:\jini\TimeServer\policy.all
        -Djava.rmi.server.codebase=http://localhost/ MyClient<br>
        <br>
        client: LookupLocator = jini://localhost/<br>
        client: LookupLocator.host = localhost<br>
        client: LookupLocator.port = 4160<br>
        client: ServiceRegistrar =
        com.sun.jini.reggie.RegistrarProxy@2cd27317<br>
        client: ServiceID = 88fc7d88-8ea6-4db9-9cac-ddeab6249ecc<br>
        client: ServiceTemplate =
        net.jini.core.lookup.ServiceTemplate@f82dd486<br>
        client: Service object = MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3980](remote),objID:[4c85d4c7:d5feec9ba4:-8000,
        0]]]]<br>
        client: Time at server is 919105017744<br>
        client: Time at client is 919105017754<br>
        client: Time for message to traverse the net is
        ---&gt;10.0 msecs&lt;---<br>
        <br>
        H:\jini\TimeServer&gt;java
        -Djava.security.policy=H:\jini\TimeServer\policy.all
        -Djava.rmi.server.codebase=http://localhost/ MyClient<br>
        <br>
        client: LookupLocator = jini://localhost/<br>
        client: LookupLocator.host = localhost<br>
        client: LookupLocator.port = 4160<br>
        client: ServiceRegistrar =
        com.sun.jini.reggie.RegistrarProxy@2cd27317<br>
        client: ServiceID = 88fc7d88-8ea6-4db9-9cac-ddeab6249ecc<br>
        client: ServiceTemplate =
        net.jini.core.lookup.ServiceTemplate@f82dd48a<br>
        client: Service object = MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3980](remote),objID:[4c85d4c7:d5feec9ba4:-8000,
        0]]]]<br>
        client: Time at server is 919105021370<br>
        client: Time at client is 919105021380<br>
        client: Time for message to traverse the net is
        ---&gt;10.0 msecs&lt;---<br>
        <br>
        H:\jini\TimeServer&gt;java
        -Djava.security.policy=H:\jini\TimeServer\policy.all
        -Djava.rmi.server.codebase=http://localhost/ MyClient<br>
        <br>
        client: LookupLocator = jini://localhost/<br>
        client: LookupLocator.host = localhost<br>
        client: LookupLocator.port = 4160<br>
        client: ServiceRegistrar =
        com.sun.jini.reggie.RegistrarProxy@2cd27317<br>
        client: ServiceID = 88fc7d88-8ea6-4db9-9cac-ddeab6249ecc<br>
        client: ServiceTemplate =
        net.jini.core.lookup.ServiceTemplate@fb79d489<br>
        client: Service object = MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3980](remote),objID:[4c85d4c7:d5feec9ba4:-8000,
        0]]]]<br>
        client: Time at server is 919105024785<br>
        client: Time at client is 919105024785<br>
        client: Time for message to traverse the net is
        ---&gt;0.0 msecs&lt;---<br>
        <br>
        H:\jini\TimeServer&gt;<br>
        <br>
        <br>
        <br>
        <br>
        </font></td>
    </tr>
</table>

<p>&nbsp;</p>
<div align="left">

<table border="1" bgcolor="#C0C0C0">
    <tr>
        <td><a
        href="jiniservice.html"><font
        color="#000000" size="2" face="Verdana">click here to go
        to the</font><font color="#000000"><br>
        </font><font color="#000000" size="4" face="Verdana">Developing
        a Simple Jini Service Page...</font><br>
        </a><a
        href="jini.html"></a></td>
    </tr>
    <tr>
        <td><a
        href="jini.html"><font
        size="3" face="Verdana">click here to go to</font><font
        size="5" face="Verdana"> </font><font size="4"><br>
        </font><font size="5" face="Verdana">My Jini HomePage...</font><font
        size="4"><br>
        </font></a></td>
    </tr>
</table>
</div>

<hr>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center"><p align="center"><a
        href="http://www.execpc.com/~gopalan/index.html"><font
        color="#000000"><img
        src="..\resources\home(2).gif"
        alt="Go to the Component Engineering Cornucopia page"
        width="65" height="44" start="fileopen"></font></a></p>
        </td>
        <td align="center" colspan="2"><p align="center"><font
        color="#000080" size="4" face="Arial Narrow"><strong>This
        site was developed and is maintained by </strong></font><a
        href="http://www.execpc.com/~gopalan/personal/cv.html"
        style="COLOR: rgb(0,0,128)"><font color="#000080"
        size="4" face="Arial Narrow"><strong>Gopalan Suresh Raj</strong></font></a></p>
        <p align="center"><font color="#000080" size="4"
        face="Arial Narrow"><strong>This page has been visited </strong></font><font
        color="#000080"><img
        src="..\..\..\counter.execpc.com\cgi-bin\nph-count\width=5&link=~gopalan_java_jiniservice.html"></font><font
        color="#000080" size="4" face="Arial Narrow"><strong>
        times since February 12,1999.</strong></font></p>
        </td>
    </tr>
</table>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center"><p align="center"><font
        color="#800000" size="3">Last Updated : Feb 12, '99</font></p>
        </td>
        <td colspan="2"><p align="center"><a
        href="mailto:gopalan@execpc.com"><font color="#800000"
        size="4" face="Arial Narrow">If you have any questions,
        comments, or problems regarding this site, please write
        to me I would love to hear from you</font></a><font
        color="#800000" size="4" face="Arial Narrow">.</font></p>
        </td>
    </tr>
</table>

<hr>
<div align="center"><center>

<table border="0" cellspacing="1" width="693" height="54">
    <tr>
        <td width="689" height="27"><p align="center"><font
        color="#000000" size="1" face="Courier New">Copyright (c)
        1997-99, </font><a
        href="http://www.execpc.com/~gopalan/personal/cv.html"
        style="COLOR: rgb(0,0,128)"><font color="#000000"
        size="1" face="Courier New">Gopalan Suresh Raj</font></a><font
        color="#000000" size="1" face="Courier New"> - All rights
        reserved. </font><a
        href="http://www.execpc.com/~gopalan/misc/cpright.html"
        style="COLOR: rgb(0,0,128)"><font color="#000000"
        size="1" face="Courier New">Terms of use</font></a><font
        color="#000000" size="1" face="Courier New">.</font></p>
        </td>
    </tr>
    <tr>
        <td width="689" height="27"><p align="center"><font
        color="#000000" size="1" face="Courier New">All products
        and companies mentioned at this site,are trademarks of
        their respective owners.</font></p>
        </td>
    </tr>
</table>
</center></div><!-- start of NedStat code -->

<p align="center"><a
href="http://usa.nedstat.net/cgi-bin/viewstat?name=java_tutorial"><img
src="..\..\..\usa.nedstat.net\cgi-bin\nedstat.gif\name=java_tutorial"
align="right" border="0" hspace="0"></a> <!-- end of NedStat code --> </p>
<script language="JavaScript">
<!--
  document.write("<img src=\"http://usa.nedstat.net/cgi-bin/referstat.gif?name=java_tutorial&refer="+escape(top.document.referrer)+"\" width=1 height=1 alt=\"\">");
// -->
</script>

<!--  Web Tracking Code Starts Here -->
<a target="_top" href="http://w.extreme-dm.com/?login=javatrac">
<img name=im src="..\..\..\w1.extreme-dm.com\i.gif" height=38
border=0 width=41 alt=""></a><script language="javascript"><!--
an=navigator.appName;d=document;function
pr(){d.write("<img src=\"http://w0.extreme-dm.com",
"/0.gif?tag=javatrac&j=y&srw="+srw+"&srb="+srb+"&",
"rs="+r+"&l="+escape(d.referrer)+"\" height=1 ",
"width=1>");}srb="na";srw="na";//-->
</script><script language="javascript1.2"><!--
s=screen;srw=s.width;an!="Netscape"?
srb=s.colorDepth:srb=s.pixelDepth;//-->
</script><script language="javascript"><!--
r=41;d.images?r=d.im.width:z=0;pr();//-->
</script><noscript><img height=1 width=1 alt=""
src="..\..\..\w0.extreme-dm.com\0.gif\tag=javatrac&j=n"></noscript>
<!-- eXTReMe digital Web Tracking Code Ends Here  -->


</body>
</html>
