<!-- saved from url=(0022)http://internet.e-mail -->
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<title>Entity EJB with Bean Managed Persistence by Gopalan Suresh Raj</title>
</head>

<body bgcolor="#FFFFFF" text="#000000">

<p align="center"><a
        href="http://www.execpc.com/~gopalan/index.html"><img
        src="..\resources\wc.gif"
        border="0" width="200" height="45"></a></p>

<p align="center"><font color="#FF0000" size="6" face="Arial"><strong>B</strong></font><font
color="#000080" size="6" face="Arial"><strong>ean </strong></font><font
color="#FF0000" size="6" face="Arial"><strong>M</strong></font><font
color="#000080" size="6" face="Arial"><strong>anaged </strong></font><font
color="#FF0000" size="6" face="Arial"><strong>P</strong></font><font
color="#000080" size="6" face="Arial"><strong>ersistence (BMP) in
Entity Beans</strong></font><font size="4" face="Verdana"><br>
</font><a href="http://www.execpc.com/~gopalan/personal/cv.html"><font
color="#000080" size="4" face="Verdana">Gopalan Suresh Raj</font></a></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#808080"><font color="#FFCC00" size="4"
        face="Verdana">Note</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="3" face="Verdana"><strong>To
        work with any of these samples, you will need the
        following:</strong></font><font face="Verdana"><br>
        </font><font size="2" face="Verdana"><strong>.........................................</strong></font><a
        href="http://java.sun.com/products/jdk/1.1/index.html"><font
        size="2" face="Verdana"><strong>JDK 1.1.6 or higher (I
        use JDK 1.1.7B)</strong></font></a><font size="2"
        face="Verdana"><strong><br>
        .........................................</strong></font><a
        href="http://java.sun.com/products/jfc/download.html"><font
        size="2" face="Verdana"><strong>Swing 1.1 or higher for
        JDK 1.1 (required if you wanna use the HomeBase GUI)</strong></font></a><font
        size="2" face="Verdana"><strong><br>
        .........................................</strong></font><a href="http://www.ejbhome.com/download/download.htm"><font size="2"
        face="Verdana"><strong>The HomeBase (Scunthorpe version 0.5.1)
        - a free EJB Server from http://ejbhome.iona.com/</strong></font></a><font
        size="2" face="Verdana"><strong><br>
        </strong></font></td>
    </tr>
</table>
</center></div>

<p align="left"><font color="#000080" size="4" face="Arial"><strong>Developing
a Bank Checking Account Server and Client</strong></font><font
color="#808000" size="4" face="Arial"><strong> </strong></font><font
face="Verdana"><br>
</font><font size="3" face="Tahoma">The Checking Account Server
component has methods for managing a typical Bank Checking
Account. Consequently, it has methods to create an account, and
credit &amp; debit money from the Account.</font></p>

<p align="left"><font color="#000000" size="4" face="Verdana">The
Steps involved in developing and deploying an Entity Bean are</font></p>

<blockquote>
    <p align="left"><font face="Verdana">1. Set up your Data
    Source to the Database<br>
    2. Define your Home Interface.<br>
    3. Define your Remote Interface.<br>
    4. Develop your EntityBean<br>
    5. Define a Primary Key class<br>
    </font><font color="#FF0000" face="Verdana"><strong>*** Note
    : From this point onwards, whatever we do becomes vendor (</strong></font><a
    href="http://ejbhome.iona.com/"><font color="#FF0000"
    face="Verdana"><strong>HomeBase</strong></font></a><font
    color="#FF0000" face="Verdana"><strong>) specific ***</strong></font><font
    face="Verdana"><br>
    6. Define your Deployment Descriptor<br>
    7. Compile your classes and generate the Container code using
    the tools provided by the vendor<br>
    8. Startup your Server<br>
    </font></p>
</blockquote>

<p><font face="Verdana"><strong>1. Set up your Data Source to the
Database</strong></font></p>

<blockquote>
    <p><font face="Verdana">The example program requires a
    database table named CHECKINGS --the Data Manipulation
    Language (DML) of which is shown below-- with the following
    fields:<br>
    </font></p>
    <div align="center"><center><table border="0">
        <tr>
            <td><font face="Verdana">CREATE TABLE CHECKINGS</font></td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td><font face="Verdana">ACCOUNT_NUMBER</font></td>
            <td><font face="Verdana">Number</font></td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td><font face="Verdana">CUSTOMER_NAME</font></td>
            <td><font face="Verdana">Text</font></td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td><font face="Verdana">BALANCE</font></td>
            <td><font face="Verdana">Currency</font></td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td><font face="Verdana">*primary key (ACCOUNT_NUMBER)</font></td>
        </tr>
    </table>
    </center></div><p>&nbsp;</p>
</blockquote>

<p><font face="Verdana"><strong>2. Define your Home Interface</strong></font></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">Bank\CheckingHome.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="2" face="Courier New">package
        Bank; </font><p><font size="2" face="Courier New">import
        javax.ejb.*; <br>
        import java.rmi.*; </font></p>
        <p><font size="2" face="Courier New">public interface <strong>CheckingHome</strong>
        extends EJBHome { <br>
        &nbsp; <br>
        &nbsp;Checking <strong>create (AccountKey key, String
        name, double startingBalance) </strong><br>
        &nbsp; throws CreateException, RemoteException; <br>
        &nbsp; <br>
        &nbsp;Checking <strong>findByPrimaryKey (AccountKey key) </strong><br>
        &nbsp; throws FinderException, RemoteException; <br>
        }</font></p>
        </td>
    </tr>
</table>
</center></div>

<p><font face="Verdana"><strong>3. Define your Remote Interface</strong></font></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">Bank\Checking.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="2" face="Courier New">package
        Bank; </font><p><font size="2" face="Courier New">import
        javax.ejb.*; <br>
        import java.rmi.*; </font></p>
        <p><font size="2" face="Courier New">public interface <strong>Checking</strong>
        extends EJBObject { <br>
        &nbsp; <br>
        &nbsp; void <strong>credit (double amount)</strong>
        throws RemoteException; <br>
        &nbsp; void <strong>debit (double amount) </strong>throws
        RemoteException; <br>
        &nbsp; double <strong>getBalance ()</strong> throws
        RemoteException; <br>
        &nbsp; public String <strong>getCustomerName () </strong>throws
        RemoteException; <br>
        &nbsp; <br>
        }</font></p>
        </td>
    </tr>
</table>
</center></div>

<p><font face="Verdana"><strong>4. Develop your EntityBean</strong></font></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">Bank\CheckingBean.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="2" face="Courier New">package
        Bank; </font><p><font size="2" face="Courier New">import
        java.rmi.*; <br>
        import javax.ejb.*; <br>
        import java.util.*; <br>
        import java.sql.*; </font></p>
        <p><font size="2" face="Courier New">public class <strong>CheckingBean</strong>
        implements <strong>EntityBean</strong> { <br>
        &nbsp; <br>
        </font><font color="#000000" size="2" face="Courier New">&nbsp;
        protected <strong>EntityContext _entityContext</strong>; <br>
        &nbsp; <br>
        &nbsp; public&nbsp;&nbsp;&nbsp; <strong>int</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <strong>account_number</strong>; </font><font
        color="#008000" size="2" face="Courier New"><em>//ACCOUNT_NUMBER
        </em></font><font color="#000000" size="2"
        face="Courier New"><br>
        &nbsp; public&nbsp;&nbsp;&nbsp; <strong>String</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <strong>customer_name</strong>; &nbsp;</font><font
        color="#008000" size="2" face="Courier New"><em>//CUSTOMER_NAME
        </em></font><font color="#000000" size="2"
        face="Courier New"><br>
        &nbsp; public&nbsp;&nbsp;&nbsp; <strong>double</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <strong>balance</strong>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &nbsp;&nbsp;</font><font color="#008000" size="2"
        face="Courier New"><em>//BALANCE</em></font><font
        color="#000000" size="2" face="Courier New"> <br>
        </font><font size="2" face="Courier New">&nbsp; <br>
        &nbsp;static final int ALL_FIELDS&nbsp;&nbsp; = 0; <br>
        &nbsp;static final int NAME_FIELD&nbsp;&nbsp; = 1; <br>
        &nbsp;static final int BALANCE_FIELD= 2; <br>
        &nbsp; <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        &nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        Home Interface methods <br>
        &nbsp;////////////////////////////////////////////////////////////////////
        <br>
        &nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>CheckingPK ejbCreate (AccountKey key, String name,
        double startingBalance)</strong> <br>
        &nbsp; throws CreateException, RemoteException{ <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp; if (startingBalance
        &gt; 0) { <br>
        &nbsp;&nbsp; this.m_accountNumber = ((CheckingPK)key).m_accountNumber;
        <br>
        &nbsp;&nbsp; this.m_name = name; <br>
        &nbsp;&nbsp; this.m_balance = startingBalance; <br>
        &nbsp;&nbsp; truePut (CheckingBean.ALL_FIELDS); <br>
        &nbsp; } <br>
        &nbsp; else { <br>
        &nbsp;&nbsp; key = null; <br>
        &nbsp;&nbsp; throw new CreateException (&quot;CheckingBean
        : ejbCreate exception&quot;); <br>
        &nbsp; } <br>
        &nbsp; return ((CheckingPK)key); <br>
        &nbsp;} <br>
        &nbsp; <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>void ejbPostCreate (AccountKey key, String name, <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        double startingBalance)</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>CheckingPK ejbFindByPrimaryKey (AccountKey key)</strong>
        { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        Connection connection = null; <br>
        &nbsp; PreparedStatement stmt= null; <br>
        &nbsp; ResultSet&nbsp; rset = null; <br>
        &nbsp; String query = <br>
        &nbsp; &quot;SELECT CUSTOMER_NAME, BALANCE FROM Checkings
        WHERE ACCOUNT_NUMBER = ?&quot;; <br>
        &nbsp; <br>
        &nbsp; try { <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP1 : open the connection </em></font><font
        size="2" face="Courier New"><br>
        &nbsp;&nbsp; connection = this.getConnection (); <br>
        &nbsp;&nbsp; stmt = connection.prepareStatement (query); <br>
        &nbsp;&nbsp; stmt.setInt (1, ((CheckingPK)key).m_accountNumber);
        <br>
        &nbsp; <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP 2: Obtain the desired
        resultset with a query </em></font><font size="2"
        face="Courier New"><br>
        &nbsp;&nbsp; rset = stmt.executeQuery (); <br>
        &nbsp;&nbsp; if(rset.next ()) { <br>
        &nbsp;&nbsp;&nbsp; this.m_accountNumber = ((CheckingPK)key).m_accountNumber;
        <br>
        &nbsp;&nbsp;&nbsp; this.m_name = rset.getString (1); <br>
        &nbsp;&nbsp;&nbsp; this.m_balance = rset.getDouble (2); <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; else { <br>
        &nbsp;&nbsp;&nbsp; key = null; <br>
        &nbsp;&nbsp;&nbsp; throw new FinderException (&quot;CheckingBean
        : FindPrimaryKey&quot;); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp; } <br>
        &nbsp; finally { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;&nbsp;
        // Cleanup that needs to occur whether we leave via a
        return or exception <br>
        </em></font><font size="2" face="Courier New">&nbsp;&nbsp;
        try { <br>
        &nbsp;&nbsp;&nbsp; if (stmt != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp;&nbsp; if (connection != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp; return ((CheckingPK)key); <br>
        &nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        &nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        Remote Interface methods <br>
        &nbsp;////////////////////////////////////////////////////////////////////
        <br>
        &nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>void credit (double amount)</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        System.out.println(&quot;changing Checking::balance from
        &quot; + this.m_balance); </font></p>
        <p><font size="2" face="Courier New">&nbsp; try { <br>
        &nbsp;&nbsp; if( amount &gt; 0 ) { <br>
        &nbsp;&nbsp;&nbsp; this.m_balance += amount; <br>
        &nbsp;&nbsp;&nbsp; truePut (CheckingBean.BALANCE_FIELD); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp; } <br>
        &nbsp; System.out.println(&quot; to &quot; + this.m_balance);
        <br>
        &nbsp;} <br>
        &nbsp; <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>void debit (double amount)</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        System.out.println(&quot;changing CheckingBean::balance
        from &quot; + this.m_balance); <br>
        &nbsp; <br>
        &nbsp; try { <br>
        &nbsp;&nbsp; if ( (amount &gt; 0) &amp;&amp; (this.m_balance
        &gt;= amount) ) { <br>
        &nbsp;&nbsp;&nbsp; this.m_balance -= amount; <br>
        &nbsp;&nbsp;&nbsp; truePut (CheckingBean.BALANCE_FIELD); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp; } <br>
        &nbsp; System.out.println(&quot; to &quot; + this.m_balance);
        <br>
        &nbsp;} <br>
        &nbsp; <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>double getBalance ()</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        System.out.println(&quot;CheckingBean::balance is &quot;
        + this.m_balance); <br>
        &nbsp; return this.m_balance; <br>
        &nbsp;} <br>
        &nbsp; <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>String getCustomerName ()</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        System.out.println (&quot;Checking::customer_name is
        &quot; + this.m_name); <br>
        &nbsp; return this.m_name; <br>
        &nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        &nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        Other Internal methods <br>
        &nbsp;////////////////////////////////////////////////////////////////////
        <br>
        &nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>Connection getConnection ()</strong> throws
        Exception { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        return DriverManager.getConnection (&quot;jdbc:odbc:Bank&quot;);
        <br>
        &nbsp;} <br>
        &nbsp; <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;<strong>String
        trueGet (int type, CheckingPK key)</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        Connection connection = null; <br>
        &nbsp; PreparedStatement stmt= null; <br>
        &nbsp; ResultSet&nbsp; rset = null; <br>
        &nbsp; String&nbsp;&nbsp;&nbsp;&nbsp; result = null; <br>
        &nbsp; String&nbsp;&nbsp;&nbsp;&nbsp; query = null; <br>
        &nbsp; String&nbsp;&nbsp;&nbsp;&nbsp; fieldName = null; <br>
        &nbsp; <br>
        &nbsp; switch (type) { <br>
        &nbsp;&nbsp; case CheckingBean.NAME_FIELD: <br>
        &nbsp;&nbsp;&nbsp; query = &quot;SELECT CUSTOMER_NAME
        FROM Checkings WHERE ACCOUNT_NUMBER = ?&quot;; <br>
        &nbsp;&nbsp;&nbsp; fieldName = &quot;CUSTOMER_NAME&quot;;
        <br>
        &nbsp;&nbsp;&nbsp; break; </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; case
        CheckingBean.BALANCE_FIELD: <br>
        &nbsp;&nbsp;&nbsp; query = &quot;SELECT BALANCE FROM
        Checkings WHERE ACCOUNT_NUMBER = ?&quot;; <br>
        &nbsp;&nbsp;&nbsp; fieldName = &quot;BALANCE&quot;; <br>
        &nbsp;&nbsp;&nbsp; break; <br>
        &nbsp; } <br>
        &nbsp; <br>
        &nbsp; try { <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP1 : open the connection </em></font><font
        size="2" face="Courier New"><br>
        &nbsp;&nbsp; connection = this.getConnection (); <br>
        &nbsp;&nbsp; stmt = connection.prepareStatement (query); <br>
        &nbsp;&nbsp; stmt.setInt (1, key.m_accountNumber); <br>
        &nbsp; <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP 2: Obtain the desired
        resultset with a query </em></font><font size="2"
        face="Courier New"><br>
        &nbsp;&nbsp; rset = stmt.executeQuery (); <br>
        &nbsp; <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP 3:Get the appropriate
        fields </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; if (!rset.wasNull ()) { <br>
        &nbsp;&nbsp;&nbsp; rset.next (); <br>
        &nbsp;&nbsp;&nbsp; result = rset.getString (fieldName); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp; } <br>
        &nbsp; finally { <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>// Cleanup that needs to occur
        whether we leave via a return or exception </em></font><font
        size="2" face="Courier New"><br>
        &nbsp;&nbsp; try { <br>
        &nbsp;&nbsp;&nbsp; if (stmt != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp;&nbsp; if (connection != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp; return result; <br>
        &nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;<strong>String
        truePut (int type)</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        Connection connection = null; <br>
        &nbsp; PreparedStatement stmt= null; <br>
        &nbsp; ResultSet&nbsp; rset = null; <br>
        &nbsp; String&nbsp;&nbsp;&nbsp;&nbsp; result = null; <br>
        &nbsp; String&nbsp;&nbsp;&nbsp;&nbsp; query = null; <br>
        &nbsp; <br>
        &nbsp; switch (type) { <br>
        &nbsp;&nbsp; case CheckingBean.BALANCE_FIELD: <br>
        &nbsp;&nbsp;&nbsp; query = &quot;UPDATE Checkings SET
        BALANCE = ? WHERE ACCOUNT_NUMBER = ?&quot;; <br>
        &nbsp;&nbsp;&nbsp; break; </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; case
        CheckingBean.ALL_FIELDS: <br>
        &nbsp;&nbsp;&nbsp; query = &quot;INSERT INTO Checkings
        VALUES ( ?, ?, ? )&quot;; <br>
        &nbsp;&nbsp;&nbsp; break; <br>
        &nbsp; } <br>
        &nbsp; <br>
        &nbsp; try { <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP1 : open the connection </em></font><font
        size="2" face="Courier New"><br>
        &nbsp;&nbsp; connection = this.getConnection (); <br>
        &nbsp;&nbsp; stmt = connection.prepareStatement (query); <br>
        &nbsp;&nbsp; if (type == CheckingBean.BALANCE_FIELD) { <br>
        &nbsp;&nbsp;&nbsp; stmt.setDouble (1, this.m_balance); <br>
        &nbsp;&nbsp;&nbsp; stmt.setInt (2, this.m_accountNumber);
        <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; else { <br>
        &nbsp;&nbsp;&nbsp; stmt.setInt (1, this.m_accountNumber);
        <br>
        &nbsp;&nbsp;&nbsp; stmt.setString (2, this.m_name); <br>
        &nbsp;&nbsp;&nbsp; stmt.setDouble (3, this.m_balance); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP 2: Obtain the desired
        resultset with a query </em></font><font size="2"
        face="Courier New"><br>
        &nbsp;&nbsp; rset = stmt.executeQuery (); <br>
        &nbsp;&nbsp; rset.next (); <br>
        &nbsp; <br>
        &nbsp; } <br>
        &nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp; } <br>
        &nbsp; finally { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;&nbsp;
        // Cleanup that needs to occur whether we leave via a
        return or exception <br>
        </em></font><font size="2" face="Courier New">&nbsp;&nbsp;
        try { <br>
        &nbsp;&nbsp;&nbsp; if (stmt != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp;&nbsp; if (connection != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp; return result; <br>
        &nbsp;} <br>
        &nbsp; <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;<strong>public
        CheckingBean () </strong>{ <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        &nbsp;//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        Mandatory callback methods required by the EJB Spec <br>
        &nbsp;////////////////////////////////////////////////////////////////////
        <br>
        &nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;<strong>public
        void ejbActivate ()</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;<strong>public
        void ejbPassivate ()</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;<strong>public
        void ejbLoad ()</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        Connection connection = null; <br>
        &nbsp; PreparedStatement stmt= null; <br>
        &nbsp; ResultSet&nbsp; rset = null; <br>
        &nbsp; String query = <br>
        &nbsp; &quot;SELECT CUSTOMER_NAME, BALANCE FROM Checkings
        WHERE ACCOUNT_NUMBER = ?&quot;; <br>
        &nbsp; <br>
        &nbsp; try { <br>
        &nbsp;&nbsp; CheckingPK key = (CheckingPK)_entityContext.getPrimaryKey
        (); </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>//STEP1 :
        open the connection </em></font><font size="2"
        face="Courier New"><br>
        &nbsp;&nbsp; connection = this.getConnection (); <br>
        &nbsp;&nbsp; stmt = connection.prepareStatement (query); <br>
        &nbsp;&nbsp; stmt.setInt (1, key.m_accountNumber); <br>
        &nbsp; <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP 2: Obtain the desired
        resultset with a query </em></font><font size="2"
        face="Courier New"><br>
        &nbsp;&nbsp; rset = stmt.executeQuery (); <br>
        &nbsp;&nbsp; if(rset.next ()) { <br>
        &nbsp;&nbsp;&nbsp; this.m_accountNumber = key.m_accountNumber;
        <br>
        &nbsp;&nbsp;&nbsp; this.m_name = rset.getString (1); <br>
        &nbsp;&nbsp;&nbsp; this.m_balance = rset.getDouble (2); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp; } <br>
        &nbsp; finally { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;&nbsp;
        // Cleanup that needs to occur whether we leave via a
        return or exception <br>
        </em></font><font size="2" face="Courier New">&nbsp;&nbsp;
        try { <br>
        &nbsp;&nbsp;&nbsp; if (stmt != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp;&nbsp; if (connection != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;<strong>public
        void ejbStore () </strong>{ <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        Connection connection = null; <br>
        &nbsp; PreparedStatement stmt= null; <br>
        &nbsp; ResultSet&nbsp; rset = null; <br>
        &nbsp; String query = <br>
        &nbsp; &quot;UPDATE Checkings SET CUSTOMER_NAME = ?,
        BALANCE = ? WHERE ACCOUNT_NUMBER = ?&quot;; <br>
        &nbsp; <br>
        &nbsp; try { </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>//STEP1 :
        open the connection </em></font><font size="2"
        face="Courier New"><br>
        &nbsp;&nbsp; connection = this.getConnection (); <br>
        &nbsp;&nbsp; stmt = connection.prepareStatement (query); <br>
        &nbsp;&nbsp; stmt.setString (1, this.m_name); <br>
        &nbsp;&nbsp; stmt.setDouble (2, this.m_balance); <br>
        &nbsp;&nbsp; stmt.setInt (3, this.m_accountNumber); <br>
        &nbsp; <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP 2: Obtain the desired
        resultset with a query </em></font><font size="2"
        face="Courier New"><br>
        &nbsp;&nbsp; rset = stmt.executeQuery (); <br>
        &nbsp;&nbsp; rset.next (); <br>
        &nbsp; } <br>
        &nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp; } <br>
        &nbsp; finally { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;&nbsp;
        // Cleanup that needs to occur whether we leave via a
        return or exception <br>
        </em></font><font size="2" face="Courier New">&nbsp;&nbsp;
        try { <br>
        &nbsp;&nbsp;&nbsp; if (stmt != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp;&nbsp; if (connection != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp;} <br>
        &nbsp; <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;<strong>public
        void ejbRemove ()</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;
        Connection connection = null; <br>
        &nbsp; PreparedStatement stmt= null; <br>
        &nbsp; ResultSet&nbsp; rset = null; <br>
        &nbsp; String query = &quot;DELETE FROM Checkings WHERE
        ACCOUNT_NUMBER = ?&quot;; <br>
        &nbsp; <br>
        &nbsp; try { <br>
        &nbsp;&nbsp; CheckingPK key = (CheckingPK)_entityContext.getPrimaryKey
        (); </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>//STEP1 :
        open the connection </em></font><font size="2"
        face="Courier New"><br>
        &nbsp;&nbsp; connection = this.getConnection (); <br>
        &nbsp;&nbsp; stmt = connection.prepareStatement (query); <br>
        &nbsp;&nbsp; stmt.setInt (1, this.m_accountNumber); <br>
        &nbsp; <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>//STEP 2: Obtain the desired
        resultset with a query </em></font><font size="2"
        face="Courier New"><br>
        &nbsp;&nbsp; rset = stmt.executeQuery (); <br>
        &nbsp;&nbsp; rset.next (); <br>
        &nbsp; <br>
        &nbsp; } <br>
        &nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp; } <br>
        &nbsp; finally { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;&nbsp;
        // Cleanup that needs to occur whether we leave via a
        return or exception <br>
        </em></font><font size="2" face="Courier New">&nbsp;&nbsp;
        try { <br>
        &nbsp;&nbsp;&nbsp; if (stmt != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; stmt = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp;&nbsp; if (connection != null) { <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection.close (); <br>
        &nbsp;&nbsp;&nbsp;&nbsp; connection = null; <br>
        &nbsp;&nbsp;&nbsp; } <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp;&nbsp; } <br>
        &nbsp; } <br>
        &nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>void setEntityContext (EntityContext context)</strong>
        <br>
        &nbsp; throws RemoteException { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp; this._entityContext
        = context; <br>
        &nbsp;} </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp;public
        <strong>void unsetEntityContext ()</strong> throws
        RemoteException { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font size="2" face="Courier New">&nbsp; this._entityContext
        = null; <br>
        &nbsp;} <br>
        }</font></p>
        </td>
    </tr>
</table>
</center></div>

<p><font face="Verdana"><strong>5. Define a Primary Key class</strong></font></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">Bank\AccountKey.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="2" face="Courier New">package
        Bank; </font><p><font size="2" face="Courier New">public
        interface <strong>AccountKey</strong> { <br>
        &nbsp;<strong>void setKey (int key)</strong> throws
        Exception; <br>
        }</font></p>
        </td>
    </tr>
</table>
</center></div>

<p>&nbsp;</p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">Bank\CheckingPK.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="2" face="Courier New">package
        Bank; </font><p><font size="2" face="Courier New">import
        java.util.*; </font></p>
        <p><font size="2" face="Courier New">public class <strong>CheckingPK</strong>
        implements <strong>AccountKey</strong>, <strong>java.io.Serializable</strong>
        { <br>
        &nbsp; <br>
        &nbsp;public static final int CHECKING_BASE = 11; <br>
        &nbsp;public static final int CHECKING_HIGH = 10000; </font></p>
        <p><font size="2" face="Courier New">&nbsp;public <strong>int
        m_accountNumber</strong>; </font></p>
        <p><font size="2" face="Courier New">&nbsp;public <strong>void
        setKey (int key)</strong> throws Exception { <br>
        &nbsp; System.out.println(&quot;Invoking CheckingsPK::setKey&quot;);
        <br>
        &nbsp; if ( (key &lt; CHECKING_BASE) || <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (key &gt; CHECKING_HIGH)
        ) { <br>
        &nbsp;&nbsp; throw new Exception (&quot;Invalid Checking
        Primary Key&quot;); <br>
        &nbsp; } </font></p>
        <p><font size="2" face="Courier New">&nbsp; m_accountNumber
        = key; <br>
        &nbsp;} <br>
        }</font></p>
        </td>
    </tr>
</table>
</center></div>

<p align="center">&nbsp;</p>

<p align="center"><font color="#FF0000" face="Verdana"><strong>***
Note : From this point onwards, whatever we do becomes vendor (</strong></font><a
href="http://ejbhome.iona.com/"><font color="#FF0000"
face="Verdana"><strong>HomeBase</strong></font></a><font
color="#FF0000" face="Verdana"><strong>) specific ***</strong></font></p>

<p align="center">&nbsp;</p>

<p><font face="Verdana"><strong>6. Write the Deployment
Descriptor for your Server</strong></font></p>

<blockquote>
    <p><font size="3" face="Tahoma">I had to manually edit the
    ejbml file to replace container-managed with bean-managed (not
    that it really mattered one way or the other. This is
    probably a bug in HomeBase). </font></p>
</blockquote>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">conf\Bank.ejbml</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font color="#000000" size="2"
        face="Courier New">&lt;ejbml&gt; <br>
        &nbsp; &lt;<strong>entity-bean</strong> <br>
        &nbsp;&nbsp;&nbsp; name=<strong>&quot;checking&quot;</strong>
        <br>
        &nbsp;&nbsp;&nbsp; descriptor=<strong>&quot;Bank/CheckingDeployment&quot;</strong>
        <br>
        &nbsp;&nbsp;&nbsp; package=<strong>&quot;Bank&quot;</strong>
        <br>
        &nbsp;&nbsp;&nbsp; home=<strong>&quot;Bank.CheckingHome&quot;</strong>
        <br>
        &nbsp;&nbsp;&nbsp; remote=<strong>&quot;Bank.Checking&quot;
        </strong><br>
        &nbsp;&nbsp;&nbsp; bean=<strong>&quot;Bank.CheckingBean&quot;</strong>
        <br>
        &nbsp;&nbsp;&nbsp; primary-key=<strong>&quot;Bank.CheckingPK&quot;</strong>
        <br>
        &nbsp;&nbsp;&nbsp; tx-attribute=<strong>&quot;TX_SUPPORTS&quot;</strong>
        <br>
        &nbsp; &gt; <br>
        &nbsp;&nbsp;&nbsp; &lt;<strong>bean-managed </strong><br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; storage-helper=&quot;com.ejbhome.generator.helpers.RelationalPersistenceCodeHelper&quot;
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; table=&quot;checking&quot;
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data-source=&quot;&quot; <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user=&quot;&quot; <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; password=&quot;&quot; <br>
        &nbsp;&nbsp;&nbsp; &gt; <br>
        &nbsp;&nbsp;&nbsp; &lt;<strong>/bean-managed</strong>&gt;
        <br>
        &nbsp; &lt;/entity-bean&gt; <br>
        &lt;/ejbml&gt; </font><p><font color="#000000" size="2"
        face="Courier New">&nbsp; </font></p>
        </td>
    </tr>
</table>
</center></div>

<p><font face="Verdana"><strong>7. Compile your classes and
generate the Container code using the tools provided by the
vendor</strong></font></p>
<div align="center"><center>

<table border="0" width="97%" bgcolor="#DDDDDD">
    <tr>
        <td bgcolor="#000080"><font color="#FFFFFF" size="2"
        face="Verdana"><strong>MS-DOS Command Prompt</strong></font></td>
    </tr>
    <tr>
        <td bgcolor="#000000"><font color="#FFFFFF" size="2"
        face="Courier New"><br>
        H:\com\gopalan\AccountEJB&gt;cd Bank<br>
        <br>
        H:\com\gopalan\AccountEJB\Bank&gt;javac *.java<br>
        <br>
        H:\com\gopalan\AccountEJB\Bank&gt;cd ..<br>
        <br>
        H:\com\gopalan\AccountEJB&gt;java com.ejbhome.Deployer .\conf\Bank.ejbml<br>
        EJBHome EJB Deployer version 0.5.1 (Scunthorpe)<br>
        (c) Copyright IONA Technologies PLC 1999. All Rights
        Reserved.<br>
        Windows NT x86 4.0<br>
        A nonfatal internal JIT (3.00.072b(x)) error 'regvarHI'
        has occurred in :<br>
        'com/ejbhome/Deployer.&lt;init&gt; (Ljava/util/Properties;Ljava/util/Vector;)V':
        Interpreting method.<br>
        Please report this error in detail to http://java.sun.com/cgi-bin/bugreport.cgi<br>
        <br>
        Deploying: checking...<br>
        Generating: IonaCheckingHome...done.<br>
        Generating: IonaRemoteChecking...done.<br>
        Generating: IonaCheckingBean...done.<br>
        Generating: IonaCheckingContext...done.<br>
        Implementing Communications: Home Stubs &amp; Skels...done.<br>
        Implementing Communications: Remote Stubs &amp; Skels...done.<br>
        Compiling: IonaCheckingHome.java...done.<br>
        Compiling: IonaRemoteChecking.java...done.<br>
        Compiling: IonaCheckingBean.java...done.<br>
        Compiling: IonaCheckingContext.java...done.<br>
        Compiling: IonaCheckingHome_Stub.java...done.<br>
        Compiling: IonaCheckingHome_Skel.java...done.<br>
        Compiling: IonaRemoteChecking_Stub.java...done.<br>
        Compiling: IonaRemoteChecking_Skel.java...done.<br>
        <br>
        H:\com\gopalan\AccountEJB&gt;<br>
        <br>
        </font></td>
    </tr>
</table>
</center></div>

<p><font face="Verdana"><strong>8. Startup your Server</strong></font></p>
<div align="center"><center>

<table border="0" width="97%" bgcolor="#DDDDDD">
    <tr>
        <td bgcolor="#000080"><font color="#FFFFFF" size="2"
        face="Verdana"><strong>MS-DOS Command Prompt</strong></font></td>
    </tr>
    <tr>
        <td bgcolor="#000000"><font color="#FFFFFF" size="2"
        face="Courier New"><br>
        H:\com\gopalan\AccountEJB&gt;<br>
        H:\com\gopalan\AccountEJB&gt;java com.ejbhome.Server<br>
        com.ejbhome.server.EnterpriseServer, initializing.<br>
        com.ejbhome.server.EnterpriseServer.fireContainerAdded()
        at (Compiled Code)<br>
        com.ejbhome.VendorConfiguration.&lt;init&gt;() at (VendorConfiguration.java:57)<br>
        com.ejbhome.VendorConfiguration.getSystemCodeHelper() at
        (VendorConfiguration.java:174)<br>
        com.ejbhome.VendorConfiguration.getTransactionCodeHelper()
        at (VendorConfiguration.java:138)<br>
        com.ejbhome.VendorConfiguration.getCommsCodeHelper() at (VendorConfiguration.java:163)<br>
        com.ejbhome.VendorConfiguration.getTracingCodeHelper() at
        (VendorConfiguration.java:152)<br>
        com.ejbhome.VendorConfiguration.getPersistenceCodeHelper()
        at (VendorConfiguration.java:125)<br>
        com.ejbhome.VendorConfiguration.getSessionPassivationCodeHelper()
        at (VendorConfiguration.java:185)<br>
        com.ejbhome.VendorConfiguration.getVendorPrefix() at (VendorConfiguration.java:100)<br>
        starting RMI registry on port 1099...<br>
        RMI registry on port 1099, has started.<br>
        com.ejbhome.server.EnterpriseServer.bindDataSources() at
        (Compiled Code)<br>
        com.ejbhome.naming.spi.rmi.RMICtx.&lt;init&gt;() at (RMICtx.java:20)<br>
        registering XA data sources<br>
        com.ejbhome.sql.XADataSourceImpl.&lt;init&gt;(jdbc:odbc:Bank,{password=mouse,
        user=user}) at (XADataSourceImpl.java:75)<br>
        com.ejbhome.naming.spi.rmi.RMICtx.bind() at (RMICtx.java:168)<br>
        com.ejbhome.server.EnterpriseServer.fireDataSourceAdded()
        at (Compiled Code)<br>
        registered: Bank -&gt; jdbc:odbc:Bank, as an XA pooled
        data source [main]<br>
        com.ejbhome.naming.spi.rmi.RMICtx.&lt;init&gt;() at (RMICtx.java:20)<br>
        loading beans from: Bank.ejbml<br>
        com.ejbhome.server.EnterpriseServer$2.startElement(ejbml)
        at (EnterpriseServer.java:228)<br>
        com.ejbhome.server.EnterpriseServer$2.startElement(entity-bean)
        at (EnterpriseServer.java:228)<br>
        com.ejbhome.VendorConfiguration.getHomeContainerClassName()
        at (VendorConfiguration.java:226)<br>
        com.ejbhome.VendorConfiguration.getVendorPrefix() at (VendorConfiguration.java:100)<br>
        com.ejbhome.container.AbstractEJBHome.&lt;init&gt;() at (AbstractEJBHome.java:136)<br>
        com.ejbhome.naming.spi.rmi.RMICtx.bind() at (RMICtx.java:168)<br>
        registered Bank.IonaCheckingHome, as: checking.<br>
        com.ejbhome.server.EnterpriseServer$2.startElement(bean-managed)
        at (EnterpriseServer.java:228)<br>
        finished loading beans from: Bank.ejbml</font></td>
    </tr>
</table>
</center></div>

<blockquote>
    <p><font face="Verdana">The Server is now up and ready and is
    waiting for connections from the client.</font></p>
</blockquote>

<p align="left"><font size="3" face="Tahoma"><strong>Develop the
Client Code</strong></font></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">CheckingClient.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font color="#000000" size="2"
        face="Courier New">import java.rmi.*; <br>
        import java.util.*; <br>
        import Bank.*; </font><p><font color="#000000" size="2"
        face="Courier New">public <strong>class CheckingClient </strong>{
        <br>
        &nbsp; <br>
        &nbsp;static final int INITIAL_RECORD = 11; <br>
        &nbsp; <br>
        &nbsp;int&nbsp;&nbsp;&nbsp; accountNo; <br>
        &nbsp;String name; <br>
        &nbsp;double balance; <br>
        &nbsp;int&nbsp;&nbsp;&nbsp; count; <br>
        &nbsp;Vector accountList = null; <br>
        &nbsp; <br>
        &nbsp;public <strong>CheckingHome home</strong> = null; <br>
        &nbsp;public <strong>Checking server </strong>= null; </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font color="#000000" size="2"
        face="Courier New">&nbsp;<strong>public void
        fillAccountList() throws Exception</strong> { <br>
        </font><font color="#008000" size="2" face="Courier New"><em>&nbsp;////////////////////////////////////////////////////////////////////
        <br>
        </em></font><font color="#000000" size="2"
        face="Courier New">&nbsp; count = 0; <br>
        &nbsp; accountList = new Vector (); <br>
        &nbsp; int numRecords = 4; <br>
        &nbsp; do { <br>
        &nbsp;&nbsp; try { <br>
        &nbsp;&nbsp; <strong>CheckingPK key = new CheckingPK ();</strong>
        <br>
        &nbsp;&nbsp; <strong>key.setKey (count+INITIAL_RECORD)</strong>;
        </font></p>
        <p><font color="#000000" size="2" face="Courier New">&nbsp;&nbsp;&nbsp;
        server = <strong>home.findByPrimaryKey (key)</strong>; <br>
        &nbsp;&nbsp;&nbsp; if (server == null) <br>
        &nbsp;&nbsp;&nbsp;&nbsp; break; </font></p>
        <p><font color="#000000" size="2" face="Courier New">&nbsp;&nbsp;&nbsp;
        name = <strong>server.getCustomerName ()</strong>; <br>
        &nbsp;&nbsp;&nbsp; if(name == null) <br>
        &nbsp;&nbsp;&nbsp;&nbsp; break; <br>
        &nbsp;&nbsp;&nbsp; balance = <strong>server.getBalance ()</strong>;
        <br>
        &nbsp; <br>
        &nbsp;&nbsp;&nbsp; System.out.println (&quot;Account =
        &quot; + (count+INITIAL_RECORD)+ <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &quot; Customer = &quot; + name + <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        &quot; Balance = &quot; + balance); <br>
        &nbsp;&nbsp;&nbsp; accountList.addElement (new Integer (count+INITIAL_RECORD));
        <br>
        &nbsp;&nbsp;&nbsp; key = null; <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; catch (Exception ex) { <br>
        &nbsp;&nbsp;&nbsp; ex.printStackTrace (); <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; ++count; <br>
        &nbsp; } while (count &lt; numRecords); <br>
        &nbsp;} </font></p>
        <p><font color="#000000" size="2" face="Courier New">&nbsp;<strong>public
        static void main(String[] args) </strong>{ <br>
        &nbsp; <br>
        &nbsp; try { <br>
        &nbsp; CheckingClient client = new CheckingClient (); <br>
        &nbsp; <strong>client.home = (CheckingHome)Naming.lookup(&quot;checking&quot;);
        </strong><br>
        &nbsp; System.out.println( &quot;Naming.lookup successful...&quot;
        ); <br>
        &nbsp; if( client.home == null ) { <br>
        &nbsp;&nbsp; System.out.println( &quot;null TellerHome
        returned...&quot; ); <br>
        &nbsp; } <br>
        &nbsp; client.fillAccountList (); <br>
        &nbsp; } <br>
        &nbsp; catch (Exception e) { <br>
        &nbsp;&nbsp; e.printStackTrace (); <br>
        &nbsp; } <br>
        &nbsp; <br>
        &nbsp;} <br>
        } </font></p>
        </td>
    </tr>
</table>
</center></div>

<p><font size="3" face="Tahoma"><strong>Compile and Run the
Client</strong></font></p>
<div align="center"><center>

<table border="0" width="97%" bgcolor="#DDDDDD">
    <tr>
        <td bgcolor="#000080"><font color="#FFFFFF" size="2"
        face="Verdana"><strong>MS-DOS Command Prompt</strong></font></td>
    </tr>
    <tr>
        <td bgcolor="#000000"><font color="#FFFFFF" size="2"
        face="Courier New"><br>
        H:\com\gopalan\AccountEJB&gt;javac CheckingClient.java<br>
        <br>
        H:\com\gopalan\AccountEJB&gt;java CheckingClient<br>
        Naming.lookup successful...<br>
        Invoking CheckingsPK::setKey<br>
        Account = 11 Customer = Athul Raj Balance = 100032.32<br>
        Invoking CheckingsPK::setKey<br>
        Account = 12 Customer = Adithya Ramesh Balance = 50000.15<br>
        Invoking CheckingsPK::setKey<br>
        Account = 13 Customer = Somebody Balance = 132.12<br>
        Invoking CheckingsPK::setKey<br>
        Account = 14 Customer = Somebody Balance = 45.32<br>
        <br>
        H:\com\gopalan\AccountEJB&gt;<br>
        <br>
        </font></td>
    </tr>
</table>
</center></div>

<p align="center"><a
href="http://members.tripod.com/gsraj/ejb/bmp_ejb.zip"><font
size="3" face="Tahoma"><strong>Download the entire source code as
a zip file.</strong></font></a></p>

<p><a href="ejb.html"><font
color="#000000" size="2" face="Verdana">click here to go to</font><font
color="#000000" size="4" face="Verdana"> </font><font
color="#000000" size="3"><br>
</font><font color="#000000" size="4" face="Verdana">My EJB
HomePage...</font></a></p>

<p><a
href="java_tutorial.html"><font
color="#000000" size="1" face="Verdana"><strong>click here to go
to</strong></font><font color="#000000" size="3" face="Verdana"><strong>
</strong></font><font color="#000000" size="2"><strong><br>
</strong></font><font color="#000000" size="3" face="Verdana"><strong>My
Advanced Java Tutorial Page...</strong></font></a></p>

<div align="center">
  <center>

<table border="1" cellpadding="2" width="95%">
    <tr>
        <td valign="top" width="100%" bgcolor="#004080"><font
        color="#FFCC00" size="4" face="Verdana">About the Author...</font></td>
    </tr>
    <tr>
        <td valign="top" width="100%" bgcolor="#FFF2F2"><a
        href="http://www.execpc.com/~gopalan/personal/cv.html"><font
        color="#000080" size="2" face="Tahoma"><strong>Gopalan
        Suresh Raj</strong></font></a><font size="2"
        face="Tahoma"><strong> </strong>is a Software Architect,
        Developer and an active Author. He is contributing author
        to a couple of books &quot;<strong>Enterprise Java
        Computing-Applications and Architecture</strong>&quot;
        and &quot;<strong>The Awesome Power of JavaBeans</strong>&quot;.
        His expertise spans enterprise component architectures
        and distributed object computing. Visit him at his </font><a
        href="http://www.execpc.com/~gopalan"><font size="2"
        face="Tahoma"><strong>Web Cornucopia</strong><sup><strong></strong></sup></font></a><font
        size="2" face="Tahoma"> site (<strong>http://www.execpc.com/~gopalan</strong>)
        or mail him at </font><a href="mailto:gopalan@execpc.com"><font
        size="2" face="Tahoma"><strong>gopalan@execpc.com</strong></font></a><font
        size="2" face="Tahoma">.</font></td>
    </tr>
</table>
  </center>
</div>

<hr>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center"><p align="center"><a
        href="http://www.execpc.com/~gopalan/index.html"><font
        color="#000000"><img
        src="..\resources\home(2).gif"
        alt="Go to the Component Engineering Cornucopia page"
        width="65" height="44" start="fileopen"></font></a></p>
        </td>
        <td align="center" colspan="2"><p align="center"><font
        color="#000080" size="4" face="Arial Narrow"><strong>This
        site was developed and is maintained by </strong></font><a
        href="http://www.execpc.com/~gopalan/personal/cv.html"
        style="COLOR: rgb(0,0,128)"><font color="#000080"
        size="4" face="Arial Narrow"><strong>Gopalan Suresh Raj</strong></font></a></p>
        <p align="center"><font color="#000080" size="4"
        face="Arial Narrow"><strong>This page has been visited </strong></font><font
        color="#000080"><img
        src="..\..\..\counter.execpc.com\cgi-bin\nph-count\width=5&link=~gopalan_misc_compare3.html"></font><font
        color="#000080" size="4" face="Arial Narrow"><strong>
        times since September 21,1998.</strong></font></p>
        </td>
    </tr>
</table>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center"><p align="center"><font
        color="#800000" size="3">Last Updated : Mar 27, '99</font></p>
        </td>
        <td colspan="2"><p align="center"><a
        href="mailto:gopalan@execpc.com"><font color="#800000"
        size="4" face="Arial Narrow">If you have any questions,
        comments, or problems regarding this site, please write
        to me I would love to hear from you</font></a><font
        color="#800000" size="4" face="Arial Narrow">.</font></p>
        </td>
    </tr>
</table>

<hr>
<div align="center"><center>

<table border="0" cellspacing="1" width="693" height="54">
    <tr>
        <td width="689" height="27"><p align="center"><font
        color="#000000" size="1" face="Courier New">Copyright (c)
        1997-99, </font><a
        href="http://www.execpc.com/~gopalan/personal/cv.html"
        style="COLOR: rgb(0,0,128)"><font color="#000000"
        size="1" face="Courier New">Gopalan Suresh Raj</font></a><font
        color="#000000" size="1" face="Courier New"> - All rights
        reserved. </font><a
        href="http://www.execpc.com/~gopalan/misc/cpright.html"
        style="COLOR: rgb(0,0,128)"><font color="#000000"
        size="1" face="Courier New">Terms of use</font></a><font
        color="#000000" size="1" face="Courier New">.</font></p>
        </td>
    </tr>
    <tr>
        <td width="689" height="27"><p align="center"><font
        color="#000000" size="1" face="Courier New">All products
        and companies mentioned at this site are trademarks of
        their respective owners.</font></p>
        </td>
    </tr>
</table>
</center></div><!-- start of NedStat code -->

<p align="center"><a
href="http://usa.nedstat.net/cgi-bin/viewstat?name=java_tutorial"><img
src="..\..\..\usa.nedstat.net\cgi-bin\nedstat.gif\name=java_tutorial"
align="right" border="0" hspace="0"></a> <!-- end of NedStat code --> </p>
<script language="JavaScript">
<!--
  document.write("<img src=\"http://usa.nedstat.net/cgi-bin/referstat.gif?name=java_tutorial&refer="+escape(top.document.referrer)+"\" width=1 height=1 alt=\"\">");
// -->
</script>

<p><img
src="..\..\..\usa.nedstat.net\cgi-bin\referstat.gif\name=page_tracker&refer=">
<a
href="http://cgi2.fxweb.com/v2-openstat.cgi?userid=J59138&password2=tracker"><img
src="..\..\..\cgi2.fxweb.com\v2-trackrun.cgi\userid=j59138&boost=3461.html"></a></p>

<!--  Web Tracking Code Starts Here -->
<a target="_top" href="http://w.extreme-dm.com/?login=javatrac">
<img name=im src="..\..\..\w1.extreme-dm.com\i.gif" height=38
border=0 width=41 alt=""></a><script language="javascript"><!--
an=navigator.appName;d=document;function
pr(){d.write("<img src=\"http://w0.extreme-dm.com",
"/0.gif?tag=javatrac&j=y&srw="+srw+"&srb="+srb+"&",
"rs="+r+"&l="+escape(d.referrer)+"\" height=1 ",
"width=1>");}srb="na";srw="na";//-->
</script><script language="javascript1.2"><!--
s=screen;srw=s.width;an!="Netscape"?
srb=s.colorDepth:srb=s.pixelDepth;//-->
</script><script language="javascript"><!--
r=41;d.images?r=d.im.width:z=0;pr();//-->
</script><noscript><img height=1 width=1 alt=""
src="..\..\..\w0.extreme-dm.com\0.gif\tag=javatrac&j=n"></noscript>
<!-- eXTReMe digital Web Tracking Code Ends Here  -->


</body>
</html>
