<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>Developing a Jini Service by Gopalan Suresh Raj</title>
</head>

<body bgcolor="#FFFFFF">

<p align="center"><font color="#000080" size="5" face="Arial"><strong>Developing
A Simple Jini Service</strong></font><font face="Verdana"><br>
</font><a href="http://www.execpc.com/~gopalan/personal/cv.html"><font
color="#000080" size="4" face="Verdana">Gopalan Suresh Raj</font></a></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#808080"><font color="#FFCC00" size="4"
        face="Verdana">Note</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="3" face="Verdana"><strong>To
        work with any of these samples, you will need the
        following:</strong></font><font face="Verdana"><br>
        </font><font size="2" face="Verdana"><strong>.........................................</strong></font><a
        href="http://java.sun.com/"><font size="2" face="Verdana"><strong>The
        Java 2 compiler and API - JDK 1.2</strong></font></a><font
        size="2" face="Verdana"><strong><br>
        .........................................</strong></font><a
        href="http://www.sun.com/jini/licensing/"><font size="2"
        face="Verdana"><strong>The Jini 1.x System Software</strong></font></a><font
        size="2" face="Verdana"><strong><br>
        </strong></font></td>
    </tr>
</table>
</center></div>

<p align="left"><font color="#000000" size="4" face="Verdana">This
simple Jini service returns the current time in milliseconds when
it's </font><font color="#000080" size="4" face="Courier New"><strong>getTime()</strong></font><font
color="#000000" size="4" face="Verdana"> method in invoked.</font></p>

<p align="left"><font color="#000000" size="4" face="Verdana">The
Steps involved in developing a Jini Service are</font></p>

<blockquote>
    <p align="left"><font face="Verdana">1. Code the Jini Service
    Interface<br>
    2. Code the Jini Service<br>
    3. Compile the Code and generate stubs<br>
    4. Start up the Service<br>
    </font></p>
</blockquote>

<p align="left"><font face="Verdana"><strong>1. Code the Jini
Service Interface</strong></font></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">MyServerInterface.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="2" face="Courier New">import
        java.rmi.*; </font><p><font color="#008000" size="2"
        face="Courier New"><em>/***************************************************************************
        <br>
        &nbsp;MyServerInterface -- The Server's Methods that are
        Available Remotely <br>
        &nbsp;***************************************************************************/
        </em></font></p>
        <p><font size="2" face="Courier New">public interface <strong>MyServerInterface</strong>
        extends Remote { <br>
        &nbsp;public long <strong>getTime</strong>() throws
        RemoteException; <br>
        } <br>
        &nbsp; </font></p>
        </td>
    </tr>
</table>
</center></div>

<p align="left"><font face="Verdana"><strong>2. Code the Jini
Service</strong></font></p>
<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font color="#FFCC00" size="4"
        face="Verdana">MyServer.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="2" face="Courier New"><strong>import
        net.jini.core.entry.*; <br>
        import net.jini.core.lookup.*; <br>
        import net.jini.core.discovery.*; <br>
        import net.jini.lookup.entry.*; <br>
        import net.jini.discovery.*; <br>
        import com.sun.jini.lookup.*; <br>
        import com.sun.jini.lease.*; </strong></font><p><font
        size="2" face="Courier New">import java.io.*; <br>
        import java.rmi.*; <br>
        import java.rmi.server.*; </font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>/***************************************************************************
        </em></font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;MyServer
        -- The Jini Server Class </em></font></p>
        <p><font color="#008000" size="2" face="Courier New"><em>&nbsp;***************************************************************************/
        </em></font></p>
        <p><font size="2" face="Courier New">public class <strong>MyServer</strong>
        extends <strong>UnicastRemoteObject</strong> <br>
        &nbsp;implements <strong>MyServerInterface</strong>, <strong>ServiceIDListener</strong>,
        <strong>Serializable</strong> { </font></p>
        <p><font size="2" face="Courier New">&nbsp;public
        MyServer() throws RemoteException { super (); } <br>
        &nbsp; </font></p>
        <p><font size="2" face="Courier New">&nbsp;<strong>public
        long getTime() throws RemoteException</strong> { </font><font
        color="#008000" size="2" face="Courier New"><em>//
        MyServiceInterface </em></font><font size="2"
        face="Courier New"><br>
        &nbsp; System.out.println
        (&quot;====================================================&quot;);
        <br>
        &nbsp; System.out.println (&quot;MyServer: The method
        getTime() in MyServer was called&quot;); <br>
        &nbsp; long serverTime = System.currentTimeMillis(); <br>
        &nbsp; System.out.println (&quot;MyServer: Time at server
        is &quot; + serverTime + &quot; msecs&quot;); <br>
        &nbsp; System.out.println
        (&quot;====================================================&quot;);
        <br>
        &nbsp; return(serverTime); <br>
        &nbsp;} </font></p>
        <p><font size="2" face="Courier New">&nbsp;<strong>public
        void serviceIDNotify (ServiceID serviceId)</strong> { } </font><font
        color="#008000" size="2" face="Courier New"><em>//
        ServiceIDListener</em></font><font size="2"
        face="Courier New"> <br>
        &nbsp; </font></p>
        <p><font size="2" face="Courier New">&nbsp;public static
        void main (String[] args) { <br>
        &nbsp; int i; <br>
        &nbsp; int iPort; <br>
        &nbsp; String sHost; <br>
        &nbsp; MyServer myServer; <br>
        &nbsp; <strong>LookupLocator lookup; <br>
        &nbsp; Entry[] aeAttributes; <br>
        &nbsp; JoinManager joinmanager; <br>
        &nbsp; ServiceID id; <br>
        &nbsp; ServiceMatches matches; <br>
        &nbsp; ServiceRegistrar registrar; </strong></font></p>
        <p><font size="2" face="Courier New">&nbsp; try { <br>
        &nbsp;&nbsp; </font><font color="#008000" size="2"
        face="Courier New"><em>/* <br>
        &nbsp;&nbsp; Setting the security manager to allow the
        RMI class loader <br>
        &nbsp;&nbsp; to go to the codebase for classes that are
        not available <br>
        &nbsp;&nbsp; locally. <br>
        &nbsp;&nbsp;
        ==========================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; <strong>System.setSecurityManager (new
        RMISecurityManager ()); </strong></font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>/* <br>
        &nbsp;&nbsp; Create the attributes (an array of entry
        objects) that describe <br>
        &nbsp;&nbsp; this server and use it to register this
        server with the lookup <br>
        &nbsp;&nbsp; service. JoinManager finds and registers
        with the lookup <br>
        &nbsp;&nbsp; service. <br>
        &nbsp;&nbsp;
        ===============================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; <strong>aeAttributes = new Entry[1]; <br>
        &nbsp;&nbsp; aeAttributes[0] = new
        Name(&quot;MyServer&quot;); </strong><br>
        &nbsp;&nbsp; myServer = new MyServer(); <br>
        &nbsp;&nbsp; <strong>joinmanager = new
        JoinManager(myServer,aeAttributes,myServer,new
        LeaseRenewalManager()); </strong><br>
        &nbsp;&nbsp; System.out.println(&quot;MyServer:
        JoinManager = &quot; + joinmanager); </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>/* <br>
        &nbsp;&nbsp; Find the Jini lookup service (reggie) and
        print its location. <br>
        &nbsp;&nbsp;
        =============================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; <strong>lookup = new LookupLocator
        (&quot;jini://localhost&quot;); <br>
        &nbsp;&nbsp; sHost = lookup.getHost (); <br>
        &nbsp;&nbsp; iPort = lookup.getPort (); </strong><br>
        &nbsp;&nbsp; System.out.println (&quot;MyServer:
        LookupLocator = &quot; + lookup); <br>
        &nbsp;&nbsp; System.out.println (&quot;MyServer:
        LookupLocator.host = &quot; + sHost); <br>
        &nbsp;&nbsp; System.out.println (&quot;MyServer:
        LookupLocator.port = &quot; + iPort); <br>
        &nbsp; </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>/* <br>
        &nbsp;&nbsp; Get the lookup service's ServiceRegistrar
        (the class by which <br>
        &nbsp;&nbsp; interaction with the lookup service is
        possible). <br>
        &nbsp;&nbsp;
        =============================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; <strong>registrar = lookup.getRegistrar(); <br>
        &nbsp;&nbsp; id = registrar.getServiceID (); </strong><br>
        &nbsp;&nbsp; System.out.println (&quot;MyServer:
        ServiceRegistrar = &quot; + registrar); <br>
        &nbsp;&nbsp; System.out.println (&quot;MyServer:
        ServiceID = &quot; + id); <br>
        &nbsp; </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; </font><font
        color="#008000" size="2" face="Courier New"><em>/* <br>
        &nbsp;&nbsp; Itemize the service items and the service
        objects that are <br>
        &nbsp;&nbsp; available in the lookup service. Note:
        Sometimes this is <br>
        &nbsp;&nbsp; executed too quickly for the service that
        was registered above <br>
        &nbsp;&nbsp; to show up. <br>
        &nbsp;&nbsp;
        ==============================================================
        */ </em></font><font size="2" face="Courier New"><br>
        &nbsp;&nbsp; try {Thread.sleep (2000);} catch (Exception
        e) {} </font></p>
        <p><font size="2" face="Courier New">&nbsp;&nbsp; <strong>matches
        = registrar.lookup(new ServiceTemplate (null, null,
        null),50); <br>
        &nbsp;&nbsp; </strong>System.out.println (&quot;MyServer:
        ServiceMatches = &quot; + matches); <br>
        &nbsp;&nbsp; System.out.println (&quot;MyServer: num
        matches = &quot;+ <strong>matches.totalMatches</strong>);
        <br>
        &nbsp;&nbsp; for (i = 0; i &lt; <strong>matches.totalMatches</strong>;
        i++) { <br>
        &nbsp;&nbsp;&nbsp; System.out.println (&quot;MyServer:
        svc item &quot; + i + &quot;: &quot; + <strong>matches.items[i]</strong>);
        <br>
        &nbsp;&nbsp;&nbsp; System.out.println (&quot;MyServer:
        svc object &quot; + i + &quot;: &quot;+ <strong>matches.items[i].service</strong>);
        <br>
        &nbsp;&nbsp; } <br>
        &nbsp;&nbsp; System.out.println
        (&quot;*-----------------------------------------*&quot;);
        <br>
        &nbsp; } catch (Exception e) {
        System.out.println(&quot;MyServer: MyServer.main():
        Exception &quot; + e); } <br>
        &nbsp;} <br>
        } </font></p>
        <p><font color="#000000" size="1" face="Courier New"><br>
        </font></p>
        </td>
    </tr>
</table>
</center></div>

<p><font face="Verdana"><strong>3. Compile the code and generate
the RMI Stubs</strong></font></p>

<table border="1">
    <tr>
        <td bgcolor="#000000"><font color="#FFFFFF" size="2"
        face="Courier New">H:\jini\TimeServer&gt;<br>
        H:\jini\TimeServer&gt;set
        CLASSPATH=.;G:\sun\jini\jini1_0\lib\jini-core.jar;G:\sun\jini\jini1_0\lib\jini-ext.jar;<br>
        G:\sun\jini\jini1_0\lib\mahalo.jar;G:\sun\jini\jini1_0\lib\mahalo-dl.jar;<br>
        G:\sun\jini\jini1_0\lib\reggie.jar;G:\sun\jini\jini1_0\lib\reggie-dl.jar;G:\sun\jini\jini1_0\lib\sun-util.jar;<br>
        G:\sun\jini\jini1_0\lib\tools.jar;%CLASSPATH%<br>
        <br>
        H:\jini\TimeServer&gt;javac *.java<br>
        <br>
        H:\jini\TimeServer&gt;rmic MyServer<br>
        <br>
        H:\jini\TimeServer&gt;<br>
        </font></td>
    </tr>
</table>

<p><font face="Verdana"><strong>4. Startup the Jini Service</strong></font></p>

<table border="1">
    <tr>
        <td bgcolor="#000000"><font color="#FFFFFF" size="2"
        face="Courier New">H:\jini\TimeServer&gt;start java -jar
        G:\sun\jini\jini1_0\lib\tools.jar -port 8080 -dir
        G:\sun\jini\jini1_0\lib -verbose<br>
        <br>
        H:\jini\TimeServer&gt;start rmid<br>
        <br>
        H:\jini\TimeServer&gt;java -jar
        -Djava.security.policy=H:\jini\TimeServer\policy.all
        G:/sun/jini/jini1_0/lib/reggie.jar
        http://localhost:8080/reggie-dl.jar
        H:\jini\TimeServer\policy.all /reggie_log public<br>
        using absolute dbdir path: H:\reggie_log<br>
        <br>
        H:\jini\TimeServer&gt;java
        -Djava.security.policy=H:\jini\TimeServer\policy.all
        -Djava.rmi.server.codebase=http://localhost/ MyServer<br>
        <br>
        MyServer: JoinManager =
        com.sun.jini.lookup.JoinManager@1bfdd4c7<br>
        MyServer: LookupLocator = jini://localhost/<br>
        MyServer: LookupLocator.host = localhost<br>
        MyServer: LookupLocator.port = 4160<br>
        MyServer: ServiceRegistrar =
        com.sun.jini.reggie.RegistrarProxy@2cd27317<br>
        MyServer: ServiceID =
        88fc7d88-8ea6-4db9-9cac-ddeab6249ecc<br>
        MyServer: ServiceMatches =
        net.jini.core.lookup.ServiceMatches@5f01d4c7<br>
        MyServer: num matches = 4<br>
        MyServer: svc item 0:
        net.jini.core.lookup.ServiceItem@4b5d4c7<br>
        MyServer: svc object 0: MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3924](remote),objID:[4c91d33d:d5fe<br>
        eb8b2d:-8000, 0]]]]<br>
        MyServer: svc item 1:
        net.jini.core.lookup.ServiceItem@7f49d4c7<br>
        MyServer: svc object 1:
        com.sun.jini.reggie.RegistrarProxy@2cd27317<br>
        MyServer: svc item 2:
        net.jini.core.lookup.ServiceItem@70a1d4c7<br>
        MyServer: svc object 2: MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3859](remote),objID:[4c91d3c4:d5fe<br>
        e8b522:-8000, 0]]]]<br>
        MyServer: svc item 3:
        net.jini.core.lookup.ServiceItem@6d19d4c7<br>
        MyServer: svc object 3: MyServer_Stub[RemoteStub [ref:
        [endpoint:[130.151.69.105:3980](remote),objID:[0]]]]<br>
        *-----------------------------------------*<br>
        ====================================================<br>
        MyServer: The method getTime() in MyServer was called<br>
        MyServer: Time at server is 919104970506 msecs<br>
        ====================================================<br>
        ====================================================<br>
        MyServer: The method getTime() in MyServer was called<br>
        MyServer: Time at server is 919105007119 msecs<br>
        ====================================================<br>
        ====================================================<br>
        MyServer: The method getTime() in MyServer was called<br>
        MyServer: Time at server is 919105010724 msecs<br>
        ====================================================<br>
        ====================================================<br>
        MyServer: The method getTime() in MyServer was called<br>
        MyServer: Time at server is 919105014360 msecs<br>
        ====================================================<br>
        ====================================================<br>
        MyServer: The method getTime() in MyServer was called<br>
        MyServer: Time at server is 919105017744 msecs<br>
        ====================================================<br>
        ====================================================<br>
        MyServer: The method getTime() in MyServer was called<br>
        MyServer: Time at server is 919105021370 msecs<br>
        ====================================================<br>
        ====================================================<br>
        MyServer: The method getTime() in MyServer was called<br>
        MyServer: Time at server is 919105024785 msecs<br>
        ====================================================<br>
        </font></td>
    </tr>
</table>

<p>&nbsp;</p>
<div align="left">

<table border="1" bgcolor="#C0C0C0">
    <tr>
        <td><a
        href="jiniclient.html"><font
        color="#000000" size="2" face="Verdana">click here to go
        to the</font><font color="#000000"><br>
        </font><font color="#000000" size="4" face="Verdana">Developing
        a Simple Jini Client Page...</font><br>
        </a><a
        href="jini.html"></a></td>
    </tr>
    <tr>
        <td><a
        href="jini.html"><font
        size="3" face="Verdana">click here to go to</font><font
        size="5" face="Verdana"> </font><font size="4"><br>
        </font><font size="5" face="Verdana">My Jini HomePage...</font><font
        size="4"><br>
        </font></a></td>
    </tr>
</table>
</div>

<p>&nbsp;</p>

<hr>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center"><p align="center"><a
        href="http://www.execpc.com/~gopalan/index.html"><font
        color="#000000"><img
        src="..\resources\home(2).gif"
        alt="Go to the Component Engineering Cornucopia page"
        width="65" height="44" start="fileopen"></font></a></p>
        </td>
        <td align="center" colspan="2"><p align="center"><font
        color="#000080" size="4" face="Arial Narrow"><strong>This
        site was developed and is maintained by </strong></font><a
        href="http://www.execpc.com/~gopalan/personal/cv.html"
        style="COLOR: rgb(0,0,128)"><font color="#000080"
        size="4" face="Arial Narrow"><strong>Gopalan Suresh Raj</strong></font></a></p>
        <p align="center"><font color="#000080" size="4"
        face="Arial Narrow"><strong>This page has been visited </strong></font><font
        color="#000080"><img
        src="..\..\..\counter.execpc.com\cgi-bin\nph-count\width=5&link=~gopalan_java_jiniservice.html"></font><font
        color="#000080" size="4" face="Arial Narrow"><strong>
        times since February 12,1999.</strong></font></p>
        </td>
    </tr>
</table>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center"><p align="center"><font
        color="#800000" size="3">Last Updated : Feb 12, '99</font></p>
        </td>
        <td colspan="2"><p align="center"><a
        href="mailto:gopalan@execpc.com"><font color="#800000"
        size="4" face="Arial Narrow">If you have any questions,
        comments, or problems regarding this site, please write
        to me I would love to hear from you</font></a><font
        color="#800000" size="4" face="Arial Narrow">.</font></p>
        </td>
    </tr>
</table>

<hr>
<div align="center"><center>

<table border="0" cellspacing="1" width="693" height="54">
    <tr>
        <td width="689" height="27"><p align="center"><font
        color="#000000" size="1" face="Courier New">Copyright (c)
        1997-99, </font><a
        href="http://www.execpc.com/~gopalan/personal/cv.html"
        style="COLOR: rgb(0,0,128)"><font color="#000000"
        size="1" face="Courier New">Gopalan Suresh Raj</font></a><font
        color="#000000" size="1" face="Courier New"> - All rights
        reserved. </font><a
        href="http://www.execpc.com/~gopalan/misc/cpright.html"
        style="COLOR: rgb(0,0,128)"><font color="#000000"
        size="1" face="Courier New">Terms of use</font></a><font
        color="#000000" size="1" face="Courier New">.</font></p>
        </td>
    </tr>
    <tr>
        <td width="689" height="27"><p align="center"><font
        color="#000000" size="1" face="Courier New">All products
        and companies mentioned at this site,are trademarks of
        their respective owners.</font></p>
        </td>
    </tr>
</table>
</center></div><!-- start of NedStat code -->

<p align="center"><a
href="http://usa.nedstat.net/cgi-bin/viewstat?name=java_tutorial"><img
src="..\..\..\usa.nedstat.net\cgi-bin\nedstat.gif\name=java_tutorial"
align="right" border="0" hspace="0"></a> <!-- end of NedStat code --> </p>
<script language="JavaScript">
<!--
  document.write("<img src=\"http://usa.nedstat.net/cgi-bin/referstat.gif?name=java_tutorial&refer="+escape(top.document.referrer)+"\" width=1 height=1 alt=\"\">");
// -->
</script>

<!--  Web Tracking Code Starts Here -->
<a target="_top" href="http://w.extreme-dm.com/?login=javatrac">
<img name=im src="..\..\..\w1.extreme-dm.com\i.gif" height=38
border=0 width=41 alt=""></a><script language="javascript"><!--
an=navigator.appName;d=document;function
pr(){d.write("<img src=\"http://w0.extreme-dm.com",
"/0.gif?tag=javatrac&j=y&srw="+srw+"&srb="+srb+"&",
"rs="+r+"&l="+escape(d.referrer)+"\" height=1 ",
"width=1>");}srb="na";srw="na";//-->
</script><script language="javascript1.2"><!--
s=screen;srw=s.width;an!="Netscape"?
srb=s.colorDepth:srb=s.pixelDepth;//-->
</script><script language="javascript"><!--
r=41;d.images?r=d.im.width:z=0;pr();//-->
</script><noscript><img height=1 width=1 alt=""
src="..\..\..\w0.extreme-dm.com\0.gif\tag=javatrac&j=n"></noscript>
<!-- eXTReMe digital Web Tracking Code Ends Here  -->


</body>
</html>
