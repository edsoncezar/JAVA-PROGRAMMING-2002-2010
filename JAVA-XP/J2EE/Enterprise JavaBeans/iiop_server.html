<!-- saved from url=(0022)http://internet.e-mail -->
<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<title>Building an RMI/IIOP Server by Gopalan Suresh Raj</title>
</head>

<body bgcolor="#FFFFFF" text="#000000">

<p align="center"><a href="http://gsraj.tripod.com/index.html">
<img
        src="..\resources\wc.gif"
        border="0" width="200" height="45"></a></p>

<p align="center"><strong><font size="6" face="Arial" color="#808080">RMI-IIOP</font></strong><font size="4" face="Verdana"><br>
</font><b><font color="#800000" size="4" face="Verdana">Building an RMI/IIOP 
Server Component</font></b></p>

<p align="center"><a href="http://www.execpc.com/~gopalan/personal/cv.html"><font
color="#000080" size="4" face="Verdana">Gopalan Suresh Raj</font></a></p>

<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#808080"><font color="#FFCC00" size="4"
        face="Verdana">Note</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6"><font size="3" face="Verdana"><strong>To
        work with any of these samples, you will need the
        following:</strong></font><font face="Verdana"><br>
        </font><font size="2" face="Verdana"><strong>.........................................</strong></font><a
        href="http://java.sun.com/"><font size="2" face="Verdana"><strong>JDK 1.3 
        or Higher</strong></font></a><font size="2"
        face="Verdana"><strong> (I use JDK version 1.4)</strong></font><font face="Verdana"><br>
        </font><font size="2"
        face="Verdana"><strong>.........................................<a href="http://java.sun.com/products/jndi/index.html">The 
        COS Naming JNDI Service Provider </a>(I use JNDI version 1.2.1)<br>
        </strong></font></td>
    </tr>
</table>
</center></div>

<p align="left"><b><font face="Arial">Building Java/RMI Server Components that 
use OMG's IIOP (Internet Inter-ORB Protocol) wire protocol</font></b></p>

<p align="left"><font face="Verdana" size="2">JavaSoft provides the RMI-IIOP set 
of libraries which allow Java/RMI applications to use OMG's Internet Inter-ORB 
Protocol (IIOP) instead of Sun's proprietary Java Remote Method Protocol (JRMP). 
This has made it possible to write Java/RMI Servers that can be accessed not 
only by regular Java clients, but also from CORBA clients and vice versa. </font>
</p>

<table border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber6">
  <tr>
    <td width="100%" bgcolor="#EEEEEE">

<p align="left"><b><font face="Arial" size="2">Caveat Emptor</font></b></p>

<p align="left"><font face="Verdana" size="2">Using RMI/IIOP, however, also 
means that there are restrictions imposed on the Remote interfaces that you 
define for your components. They are:</font></p>

    <ul>
      <li>

<p align="left"><font face="Verdana" size="2">You have to make sure that your 
Java names don't conflict with the names generated by the IDL compiler (idlj.exe). 
You can get away with this by using underscores either at the start or within 
the name. Most Java names are fine.</font></p>

      </li>
      <li>

<p align="left"><font face="Verdana" size="2">Names that differ only by case may 
not work fine. Even though there is support for special conditions, it is better 
to avoid these situations altogether by making sure that you use non-conflicting 
names.</font></p>

      </li>
      <li>

<p align="left"><font face="Verdana" size="2">Please be aware that your object 
references that you share, may not be preserved exactly by the IIOP framework.</font></p>

      </li>
      <li>

<p align="left"><font face="Verdana" size="2">You cannot use constants in remote 
interfaces. If you have to, make sure these constants are either primitive types 
or strings that can be evaluated at compile time.</font></p>

      </li>
      <li>

<p align="left"><font face="Verdana" size="2">When you create your interfaces, 
make sure that it does not inherit the same method from more than one parent.</font></p>

      </li>
      <li>

<p align="left"><font face="Verdana" size="2">If you want distributed garbage 
collection, you will have to explicitly unexport objects to allow them to be 
cleaned up.</font></p>

      </li>
      <li>

<p align="left"><font face="Verdana" size="2">Finally, don't use 
UnicastRemoteObject, RMISocketFactory, Unreferenced, or other distributed 
garbage collection facilities that you use when you use RMI over JRMP.</font></p>

      </li>
    </ul>
    </td>
  </tr>
</table>

<p align="left"><font face="Verdana" size="2">The good news is, just like RMI/JRMP, 
RMI/IIOP allows server objects to receive messages from multiple threads, so 
they should be thread-safe. Also make sure that the CORBA Object Request Broker 
(ORB) that you use supports <i><b>CORBA 2.3 or higher</b></i>. This allows you 
to pass objects by value across the wire. If you are using the ORB&nbsp; 
supplied by Sun, you should be fine.</font></p>

<p align="left"><font face="Verdana" size="2">In this article, we will build an 
RMI Server that can return the stock price of a stock given the symbol.</font></p>

<p align="left"><font face="Verdana" size="2">The various steps that are 
involved in creating an RMI Server that uses the IIOP protocol are as follows:</font></p>

<ol>
  <li>
<p align="left"><font face="Verdana" size="2">Create the Servant interface and 
the Servant component class</font></p>

  </li>
  <li>
<p align="left"><font face="Verdana" size="2">Create the RMI Server that can 
host these servant classes</font></p>

  </li>
  <li>
<p align="left"><font face="Verdana" size="2">Compile the class files and 
generate the Skeletons and IDL File</font></p>

  </li>
  <li>
<p align="left"><font face="Verdana" size="2">Start up the Server</font></p>

  </li>
</ol>

<p align="left"><font face="Arial" size="4">1. Create the Servant Interface and 
Component Class File</font></p>

<p align="left"><font face="Verdana" size="2">Create the Servant interface -
</font><font size="2" face="Courier New">StockMarket.java</font><font face="Verdana" size="2"> 
- in a package called </font><font size="2" face="Courier New">SimpleStocks</font><font face="Verdana" size="2">.&nbsp;
</font></p>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font face="Verdana" size="4" color="#FFCC00">
        SimpleStocks/StockMarket.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6">
<table width="100%" cellpadding=5 cellspacing=0 border=0>
  <tr>
  <td width=30 valign=top align=right bgcolor=#EEEEEE bordercolor="#FFFFE6"><nobr>
  <font color=#000000 face="Trebuchet MS" size="2">1:<br>2:<br>3:<br>4:<br>5:<br>6:<br>7:<br>8:<br>9:<br>10:<br>11:<br>12:<br>13:<br>14:<br>15:<br>16:<br>17:<br>18:<br>19:<br>20:<br>21:<br>22:<br>23:<br>24:<br>25:<br>26:<br>27:<br>28:<br>29:<br>30:<br></font></nobr></td>
  <td bgcolor=#FFFFE6 width="100%" valign=top>
  <font face="Trebuchet MS" size="2"><nobr><font color=#008000>/**<br> &nbsp;* The following example illustrates an RMI Server<br> &nbsp;* <br> &nbsp;* author: 
  <a href="http://www.execpc.com/~gopalan/personal/cv.html" style="text-decoration: none">
  <font color="#008000">Gopalan Suresh Raj</font></a><br> &nbsp;* Copyright (c), 2002. All Rights Reserved.<br> &nbsp;* URL: 
  <a href="http://gsraj.tripod.com/" style="text-decoration: none">
  <font color="#008000">http://gsraj.tripod.com/</font></a><br> &nbsp;* email: 
  <a href="mailto:gopalan@gmx.net" style="text-decoration: none">
  <font color="#008000">gopalan@gmx.net</font></a><br> &nbsp;*/</font><br><font color=#0000b8><br></font><font color=#0000ff><b>package</b></font> <font color=#000000>SimpleStocks</font><font color=#0000b8>;</font> <br><font color=#0000b8><br></font><font color=#0000ff><b>import</b></font> <font color=#000000>java</font><font color=#0000b8>.</font><font color=#000000>rmi</font><font color=#0000b8>.</font><font color=#000000>Remote</font><font color=#0000b8>; <br></font><font color=#0000ff><b>import</b></font> <font color=#000000>java</font><font color=#0000b8>.</font><font color=#000000>rmi</font><font color=#0000b8>.</font><font color=#000000>RemoteException</font><font color=#0000b8>;</font> <br><br><font color=#008000>/**<br> &nbsp;* This is an interface to a component that looks up <br> &nbsp;* the price of a given Stock Symbol<br> &nbsp;* <br> &nbsp;* @author Gopalan Suresh Raj<br> &nbsp;*/</font><font color=#0000b8><br></font><font color=#0000ff><b>public interface</b></font> <font color=#000000>StockMarket</font> <font color=#0000ff><b>extends</b></font> <font color=#000000>Remote</font> <font color=#0000b8>{</font> <br><br>&nbsp;&nbsp;<font color=#008000>/**<br>&nbsp;&nbsp; * Remote method that should contain the business logic.<br>&nbsp;&nbsp; * <br>&nbsp;&nbsp; * @param stock symbol String denoting the stock to look up.<br>&nbsp;&nbsp; * @return price of the stock as a float<br>&nbsp;&nbsp; */</font><br>&nbsp;&nbsp;<font color=#0000ff><b>float</b></font> <font color=#000000>getPrice</font><font color=#0000b8>(</font> <font color=#000000>String stockSymbol</font> <font color=#0000b8>)</font> <font color=#0000ff><b>throws</b></font> <font color=#000000>RemoteException</font><font color=#0000b8>;</font> <br><font color=#0000b8>}</font><br></nobr>
  </font></td>
  </tr>
</table>
        </td>
    </tr>
</table>

<p align="left">
<font face="Verdana" size="2">Create an implementation of the interface, the 
Servant class - </font><font size="2" face="Courier New">StockMarketImpl.java</font><font face="Verdana" size="2"> 
- in the same package - </font><font size="2" face="Courier New">SimpleStocks</font><font face="Verdana" size="2">. 
The easiest way to implement an RMI-IIOP Servant is to extend the 
PortableRemoteObject class as shown on Line 20. You also have the option of 
exporting non-Portable remote objects, but by extending this class you get the 
export function automatically. Your class also implements the StockMarket remote 
interface as shown on Line 21.</font></p>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font face="Verdana" size="4" color="#FFCC00">
        SimpleStocks/StockMarketImpl.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6">
<table width="100%" cellpadding=5 cellspacing=0 border=0>
  <tr>
    <td width=30 valign=top align=right bgcolor=#EEEEEE><nobr>
  <font color=#000000 face="Trebuchet MS" size="2">1:<br>2:<br>3:<br>4:<br>5:<br>6:<br>7:<br>8:<br>9:<br>10:<br>11:<br>12:<br>13:<br>14:<br>15:<br>16:<br>17:<br>18:<br>19:<br>20:<br>21:<br>22:<br>23:<br>24:<br>25:<br>26:<br>27:<br>28:<br>29:<br>30:<br>31:<br>32:<br>33:<br>34:<br>35:<br>36:<br>37:<br>38:<br>39:<br>40:<br>41:<br>42:<br>43:<br>44:<br>45:<br>46:<br>47:<br></font></nobr></td>
  <td bgcolor=#FFFFE6 width="100%" valign=top>
  <font face="Trebuchet MS" size="2"><nobr><font color=#008000>/**<br> &nbsp;* The following example illustrates an RMI-IIOP Servant<br> &nbsp;* <br> &nbsp;* author: 
  <a href="http://www.execpc.com/~gopalan/personal/cv.html" style="text-decoration: none">
  <font color="#008000">Gopalan Suresh Raj</font></a><br> &nbsp;* Copyright (c), 2002. All Rights Reserved.<br> &nbsp;* URL: 
  <a href="http://gsraj.tripod.com/" style="text-decoration: none">
  <font color="#008000">http://gsraj.tripod.com/</font></a><br> &nbsp;* email: 
  <a href="mailto:gopalan@gmx.net" style="text-decoration: none">
  <font color="#008000">gopalan@gmx.net</font></a><br> &nbsp;*/</font><br><font color=#0000b8><br></font><font color=#0000ff><b>package</b></font> <font color=#000000>SimpleStocks</font><font color=#0000b8>;</font> <br><font color=#0000b8><br></font><font color=#0000ff><b>import</b></font> <font color=#000000>java</font><font color=#0000b8>.</font><font color=#000000>rmi</font><font color=#0000b8>.</font><font color=#000000>RemoteException</font><font color=#0000b8>; <br></font><font color=#0000ff><b>import</b></font> <font color=#000000>javax</font><font color=#0000b8>.</font><font color=#000000>rmi</font><font color=#0000b8>.</font><font color=#000000>PortableRemoteObject</font><font color=#0000b8>;</font><br><br><font color=#008000>/**<br> &nbsp;* This component looks up the price of a given Stock Symbol<br> &nbsp;* <br> &nbsp;* @author Gopalan Suresh Raj<br> &nbsp;*/</font><font color=#0000b8><br></font><font color=#0000ff><b>public class</b></font> <font color=#000000>StockMarketImpl</font> <font color=#0000ff><b>extends</b></font>
  <b> <font color=#000000>PortableRemoteObject</font></b> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font color=#0000ff><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; implements</b></font> <font color=#000000>StockMarket</font> <font color=#0000b8>{</font> <br><br>&nbsp;&nbsp;<font color=#008000>/**<br>&nbsp;&nbsp; * Public No argument constructor<br>&nbsp;&nbsp; */</font><br>&nbsp;&nbsp;<font color=#0000ff><b>public</b></font> <font color=#000000>StockMarketImpl</font><font color=#0000b8>()</font> <font color=#0000ff><b>throws</b></font> <font color=#000000>RemoteException</font> <font color=#0000b8>{</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#008000>// Invoke the superclass to export this object</font><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#0000ff><b>super</b></font><font color=#0000b8>();</font><br>&nbsp;&nbsp;<font color=#0000b8>}</font> <br><br>&nbsp;&nbsp;<font color=#008000>/**<br>&nbsp;&nbsp; * Remote method that actually contains the business logic.<br>&nbsp;&nbsp; * <br>&nbsp;&nbsp; * @param stock symbol String denoting the stock to look up.<br>&nbsp;&nbsp; * @return price of the stock as a float<br>&nbsp;&nbsp; */</font><br>&nbsp;&nbsp;<font color=#0000ff><b>public float</b></font> <font color=#000000>getPrice</font><font color=#0000b8>(</font> <font color=#000000>String stockSymbol</font> <font color=#0000b8>)</font> <font color=#0000ff><b>throws</b></font> <font color=#000000>RemoteException</font> <font color=#0000b8>{</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#0000ff><b>float</b></font> <font color=#000000>price</font> <font color=#0000b8>=</font> <font color=#000000>0</font><font color=#0000b8>;</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#0000ff><b>for</b></font><font color=#0000b8>(</font> <font color=#0000ff><b>int</b></font> <font color=#000000>index</font> <font color=#0000b8>=</font> <font color=#000000>0</font><font color=#0000b8>;</font> <font color=#000000>index</font> <font color=#0000b8>&lt;</font> <font color=#000000>stockSymbol</font><font color=#0000b8>.</font><font color=#000000>length</font><font color=#0000b8>();</font> <font color=#000000>index</font><font color=#0000b8>++ ) {</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>price</font> <font color=#0000b8>+= (</font><font color=#0000ff><b>int</b></font><font color=#0000b8>)</font> <font color=#000000>stockSymbol</font><font color=#0000b8>.</font><font color=#000000>charAt</font><font color=#0000b8>(</font> <font color=#000000>index</font> <font color=#0000b8>);</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#0000b8>}</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>price</font> <font color=#0000b8>/=</font> <font color=#000000>5</font><font color=#0000b8>;</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>System</font><font color=#0000b8>.</font><font color=#000000>out</font><font color=#0000b8>.</font><font color=#000000>println</font> <font color=#0000b8>(</font><font color=#000000><b>&quot;Value of &quot;</b></font><font color=#0000b8>+</font><font color=#000000>stockSymbol</font><font color=#0000b8>+</font><font color=#000000><b>&quot; is US $&quot;</b></font><font color=#0000b8>+</font><font color=#000000>price</font><font color=#0000b8>);</font><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#0000ff><b>return</b></font> <font color=#000000>price</font><font color=#0000b8>;</font> <br>&nbsp;&nbsp;<font color=#0000b8>}</font> <br><br><font color=#0000b8>}</font><br></nobr>
  </font></td>
  </tr>
</table>
        </td>
    </tr>
</table>

<p><font face="Arial" size="4">2. Develop an RMI Server that can host these 
Servant Classes</font></p>

<p><font face="Verdana" size="2">Develop a Server Application called </font>
<font face="Courier New" size="2">StockMarketServer.java</font><font face="Verdana" size="2">. 
Instead of using the RMI Registry to make your servant objects available, you 
need to use the JNDI context that supports CosNaming. Using the InitialContext 
class as shown on Line 47, you need to rebind the Server onject to its known 
name as shown on Line 50.</font></p>

<div align="center"><center>

<table border="2" width="97%">
    <tr>
        <td bgcolor="#004080"><font face="Verdana" size="4" color="#FFCC00">
        StockMarketServer.java</font></td>
    </tr>
    <tr>
        <td bgcolor="#FFFFE6">
<table width="100%" cellpadding=5 cellspacing=0 border=0>
  <tr>
    <td width=30 valign=top align=right bgcolor=#EEEEEE><nobr>
  <font color=#000000 face="Trebuchet MS" size="2">1:<br>2:<br>3:<br>4:<br>5:<br>6:<br>7:<br>8:<br>9:<br>10:<br>11:<br>12:<br>13:<br>14:<br>15:<br>16:<br>17:<br>18:<br>19:<br>20:<br>21:<br>22:<br>23:<br>24:<br>25:<br>26:<br>27:<br>28:<br>29:<br>30:<br>31:<br>32:<br>33:<br>34:<br>35:<br>36:<br>37:<br>38:<br>39:<br>40:<br>41:<br>42:<br>43:<br>44:<br>45:<br>46:<br>47:<br>48:<br>49:<br>50:<br>51:<br>52:<br>53:<br>54:<br>55:<br>56:<br>57:<br>58:<br></font></nobr></td>
  <td bgcolor=#FFFFE6 width="100%" valign=top>
  <font face="Trebuchet MS" size="2"><nobr><font color=#008000>/**<br> &nbsp;* The following example illustrates an RMI-IIOP Server<br> &nbsp;* <br> &nbsp;* author: 
  <a href="http://www.execpc.com/~gopalan/personal/cv.html" style="text-decoration: none">
  <font color="#008000">Gopalan Suresh Raj</font></a><br> &nbsp;* Copyright (c), 2002. All Rights Reserved.<br> &nbsp;* URL: 
  <a href="http://gsraj.tripod.com/" style="text-decoration: none">
  <font color="#008000">http://gsraj.tripod.com/</font></a><br> &nbsp;* email: 
  <a href="mailto:gopalan@gmx.net" style="text-decoration: none">
  <font color="#008000">gopalan@gmx.net</font></a><br> &nbsp;*/</font><br><font color=#0000b8><br></font><font color=#0000ff><b>import</b></font> <font color=#000000>java</font><font color=#0000b8>.</font><font color=#000000>util</font><font color=#0000b8>.</font><font color=#000000>Properties</font><font color=#0000b8>;<br></font><font color=#0000ff><b>import</b></font> <font color=#000000>javax</font><font color=#0000b8>.</font><font color=#000000>naming</font><font color=#0000b8>.</font><font color=#000000>InitialContext</font><font color=#0000b8>;<br></font><font color=#0000ff><b>import</b></font> <font color=#000000>javax</font><font color=#0000b8>.</font><font color=#000000>rmi</font><font color=#0000b8>.</font><font color=#000000>PortableRemoteObject</font><font color=#0000b8>;</font><br><font color=#0000b8><br></font><font color=#0000ff><b>import</b></font> <font color=#000000>SimpleStocks</font><font color=#0000b8>.</font><font color=#000000>StockMarketImpl</font><font color=#0000b8>;</font> <br><br><font color=#008000>/**<br> &nbsp;* Creates a Server and binds the RMI Servant with the IIOP Registry<br> &nbsp;* <br> &nbsp;* Pre-requisites: You will need to have the COS naming server<br> &nbsp;* running for the registration code to work.<br> &nbsp;* <br> &nbsp;* @author Gopalan Suresh Raj<br> &nbsp;*/</font><font color=#0000b8><br></font><font color=#0000ff><b>public class</b></font> <font color=#000000>StockMarketServer</font> <font color=#0000b8>{</font> <br><br>&nbsp;&nbsp;<font color=#0000ff><b>static final</b></font> <font color=#000000>String CONTEXT_NAME</font> <font color=#0000b8>=</font> <font color=#000000><b>&quot;java.naming.factory.initial&quot;</b></font><font color=#0000b8>;</font><br>&nbsp;&nbsp;<font color=#0000ff><b>static final</b></font> <font color=#000000>String IIOP_STRING</font>&nbsp;&nbsp;<font color=#0000b8>=</font> <font color=#000000><b>&quot;com.sun.jndi.cosnaming.CNCtxFactory&quot;</b></font><font color=#0000b8>;</font><br><br>&nbsp;&nbsp;<font color=#0000ff><b>static final</b></font> <font color=#000000>String URL_NAME</font> <font color=#0000b8>=</font> <font color=#000000><b>&quot;java.naming.provider.url&quot;</b></font><font color=#0000b8>;</font><br>&nbsp;&nbsp;<font color=#0000ff><b>static final</b></font> <font color=#000000>String IIOP_URL_STRING</font>&nbsp;&nbsp;<font color=#0000b8>=</font> <font color=#000000><b>&quot;iiop://localhost:1000&quot;</b></font><font color=#0000b8>;</font><br><br>&nbsp;&nbsp;<font color=#008000>/**<br>&nbsp;&nbsp; * Entry Point to this application<br>&nbsp;&nbsp; */</font><br>&nbsp;&nbsp;<font color=#0000ff><b>public static void</b></font> <font color=#000000>main</font><font color=#0000b8>(</font><font color=#000000>String</font><font color=#0000b8>[]</font> <font color=#000000>args</font><font color=#0000b8>) {</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#0000ff><b>try</b></font> <font color=#0000b8>{</font><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#008000>// Create the Object</font><br>&nbsp;&nbsp;&nbsp;<b>&nbsp;&nbsp;&nbsp;<font color=#000000>StockMarketImpl myObject</font> <font color=#0000b8>=</font>
  </b> <font color=#0000ff><b>new</b></font><b> <font color=#000000>StockMarketImpl</font><font color=#0000b8>();</font>
  </b> <br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#008000>// Create the IIOP Initial Context</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>Properties iiopProperties</font> <font color=#0000b8>=</font> <font color=#0000ff><b>new</b></font> <font color=#000000>Properties</font><font color=#0000b8>();</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>iiopProperties</font><font color=#0000b8>.</font><font color=#000000>put</font><font color=#0000b8>(</font> <font color=#000000>StockMarketServer</font><font color=#0000b8>.</font><font color=#000000>CONTEXT_NAME</font><font color=#0000b8>,</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>StockMarketServer</font><font color=#0000b8>.</font><font color=#000000>IIOP_STRING</font> <font color=#0000b8>);</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>iiopProperties</font><font color=#0000b8>.</font><font color=#000000>put</font><font color=#0000b8>(</font> <font color=#000000>StockMarketServer</font><font color=#0000b8>.</font><font color=#000000>URL_NAME</font><font color=#0000b8>,</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>StockMarketServer</font><font color=#0000b8>.</font><font color=#000000>IIOP_URL_STRING</font> <font color=#0000b8>);</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>InitialContext iiopContext</font> <font color=#0000b8>=</font> <font color=#0000ff><b>new</b></font> <font color=#000000>InitialContext</font><font color=#0000b8>(</font> <font color=#000000>iiopProperties</font> <font color=#0000b8>);</font><br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#008000>// Bind the object to the IIOP registry</font><br>
  <b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>iiopContext</font><font color=#0000b8>.</font><font color=#000000>rebind</font><font color=#0000b8>(</font>
  </b> <font color=#000000><b>&quot;NASDAQ&quot;</b></font><b><font color=#0000b8>,</font> <font color=#000000>myObject</font> <font color=#0000b8>);</font><br>
  </b><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>System</font><font color=#0000b8>.</font><font color=#000000>out</font><font color=#0000b8>.</font><font color=#000000>println</font><font color=#0000b8>(</font> <font color=#000000><b>&quot;StockMarket bound in the IIOP Registry as NASDAQ and is up and ready for eCommerce...&quot;</b></font> <font color=#0000b8>);</font> <br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#0000b8>}</font><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#0000ff><b>catch</b></font> <font color=#0000b8>(</font> <font color=#000000>Exception exception</font> <font color=#0000b8>) {</font><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=#000000>exception</font><font color=#0000b8>.</font><font color=#000000>printStackTrace</font> <font color=#0000b8>();</font><br>&nbsp;&nbsp;&nbsp;&nbsp;<font color=#0000b8>}</font><br>&nbsp;&nbsp;<font color=#0000b8>}</font> <br><font color=#0000b8>}</font><br></nobr>
  </font></td>
  </tr>
</table>
        </td>
    </tr>
</table>
</center></div>

<p><font face="Verdana" size="2">To run the server, make sure you have the COS 
Naming Server (</font><font size="2" face="Courier New">tnameservice.exe</font><font face="Verdana" size="2">) 
provided by Sun up and running for this registration code to work. </font></p>

<p><strong><font face="Verdana">3</font></strong><font face="Verdana"><strong>. </strong>
<font size="4">Compile the Class Files and Generate the IIOP Skeletons and the 
IDL File</font></font></p>

<p><font face="Verdana" size="2">Compile the Server and Servant Classes.</font></p>

<table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber4">
  <tr>
    <td width="100%" bgcolor="#000080"><b>
    <font face="Lucida Console" color="#FFFFFF" size="2">Command Prompt</font></b></td>
  </tr>
  <tr>
    <td width="100%" bgcolor="#000000"><b>
    <font face="Lucida Console" size="1" color="#FFFFFF">C:\MyProjects\Cornucopia\iiop&gt;</font><font face="Lucida Console" size="1" color="#FFFF00">javac 
    -classpath . StockMarketServer.java<br>
    </font>
    <font face="Lucida Console" size="1" color="#FFFFFF"><br>
    C:\MyProjects\Cornucopia\iiop&gt;</font><font face="Lucida Console" size="1" color="#FFFF00">javac 
    -classpath . .\SimpleStocks\StockMarket.java .\SimpleStocks\StockMarketImpl.java<br>
    </font>
    <font face="Lucida Console" size="1" color="#FFFFFF"><br>
    C:\MyProjects\Cornucopia\iiop&gt;</font></b></td>
  </tr>
</table>

<p><font face="Verdana" size="2">Generate the IIOP Skeletons and the IDL File
</font></p>

<table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber4">
  <tr>
    <td width="100%" bgcolor="#000080"><b>
    <font face="Lucida Console" color="#FFFFFF" size="2">Command Prompt</font></b></td>
  </tr>
  <tr>
    <td width="100%" bgcolor="#000000"><b>
    <font face="Lucida Console" size="1" color="#FFFFFF">C:\MyProjects\Cornucopia\iiop&gt;</font><font face="Lucida Console" size="1" color="#FFFF00">rmic 
    -classpath . -iiop -idl SimpleStocks.StockMarketImpl</font><font face="Lucida Console" size="1" color="#FFFFFF"><br>
    <br>
    C:\MyProjects\Cornucopia\iiop&gt;</font></b></td>
  </tr>
</table>

<p><font face="Arial" size="4">4. Startup the ORB Services and the RMI Server</font></p>

<p><font face="Verdana" size="2">Start up the servers as shown below.</font></p>

<table border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse" width="100%" id="AutoNumber7">
  <tr>
    <td width="100%" bgcolor="#000080"><b>
    <font face="Lucida Console" color="#FFFFFF" size="2">Command Prompt</font></b></td>
  </tr>
  <tr>
    <td width="100%" bgcolor="#000000"><b>
    <font face="Lucida Console" size="1" color="#FFFFFF">C:\MyProjects\Cornucopia\iiop&gt;</font><font face="Lucida Console" size="1" color="#FFFF00">start 
    tnameserv -ORBInitialPort 1000</font><font face="Lucida Console" size="1" color="#FFFFFF"><br>
    <br>
    C:\MyProjects\Cornucopia\iiop&gt;</font><font face="Lucida Console" size="1" color="#FFFF00">start 
    java -classpath . StockMarketServer</font><font face="Lucida Console" size="1" color="#FFFFFF"><br>
    <br>
    C:\MyProjects\Cornucopia\iiop&gt;</font></b></td>
  </tr>
</table>

<p><font face="Verdana" size="2">The screen shot below shows the COS Naming 
Services Server up and running.</font></p>

<p><img border="0" src="tnameserv.gif" width="668" height="139"></p>

<p><font face="Verdana" size="2">The screen shot below shows our RMI Server up 
and running across Client invocations</font></p>

<p><img border="0" src="iiopserver.gif" width="684" height="119"></p>

<p>&nbsp;</p>

<p><font face="Verdana" size="2">Now you need to build a client applications that
can access this Server. </font></p>

<table border="0" cellpadding="10" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber1">
  <tr>
    <td width="5%" align="right">
    <img border="0" src="..\resources\reddot.gif" width="14" height="14"></td>
    <td width="95%"><font face="Arial" size="4"><a href="java_rmi.html">Java/RMI</a></font></td>
  </tr>
  <tr>
    <td width="5%" align="right">
    <img border="0" src="..\resources\reddot.gif" width="14" height="14"></td>
    <td width="95%"><font face="Arial" size="4"><a href="rmi_internals.html">
    Java/RMI - Under The Hood</a></font></td>
  </tr>
  <tr>
    <td width="5%" align="right">
    <img border="0" src="..\resources\reddot.gif" width="14" height="14"></td>
    <td width="95%"><font color="#808080" size="4" face="Arial">
    <strong style="font-weight: 400"><a href="rmiserver.html">Developing
a Java/RMI Server using JRMP</a></strong></font></td>
  </tr>
  <tr>
    <td width="5%" align="right">
    <img border="0" src="..\resources\reddot.gif" width="14" height="14"></td>
    <td width="95%"><font size="4" face="Verdana"><a href="rmiclient.html">Developing
        a Java/RMI Client using JRMP</a></font></td>
  </tr>
  <tr>
    <td width="5%" align="right">
    <img border="0" src="..\resources\reddot.gif" width="14" height="14"></td>
    <td width="95%"><font size="4" face="Verdana"><font color="#808080">
    Developing a Java/RMI Server Component using IIOP</font></font></td>
  </tr>
  <tr>
    <td width="5%" align="right">
    <img border="0" src="..\resources\reddot.gif" width="14" height="14"></td>
    <td width="95%"><font size="4" face="Verdana"><a href="iiop_client.html">Developing a Java/RMI Client to our RMI/IIOP Server Component</a></font></td>
  </tr>
  <tr>
    <td width="5%" align="right">
    <img border="0" src="..\resources\reddot.gif" width="14" height="14"></td>
    <td width="95%"><font size="4" face="Verdana">
    <a href="iiop_corba_client.html">Developing a CORBA Client to our RMI/IIOP Server Component</a></font></td>
  </tr>
  </table>

<p>&nbsp;</p>

<p align="center"><font
size="3" face="Tahoma"><strong><a href="iiop.zip">Download the entire source code as
a zip file.</a></strong></font></p>

<p>&nbsp;</p>

<p><a href="java_tutorial.html"><font
color="#000000" size="1" face="Verdana"><strong>click here to go
to</strong></font><font color="#000000" size="2"><strong><br>
</strong></font><font color="#000000" size="3" face="Verdana"><strong>My
Advanced Java/J2EE Tutorial Page...</strong></font></a></p>

<table border="1" cellpadding="2" width="95%">
  <tr>
    <td valign="top" width="100%" bgcolor="#004080"><font color="#FFCC00" size="4" face="Verdana">About
      the Author...</font></td>
  </tr>
  <tr>
    <td width="100%" bgcolor="#FFF2F2"><font size="2" face="Tahoma"><strong>Gopalan
      Suresh Raj </strong>is a Software Architect, Developer and an active
      Author. He has co-authored a number of books including <strong>
    &quot;Professional JMS&quot;, &quot;Enterprise
      Java Computing-Applications and Architecture</strong>&quot; and &quot;<strong>The
      Awesome Power of JavaBeans</strong>&quot;. His expertise spans enterprise
      component architectures and distributed object computing. Visit him at his
    <a href="http://gsraj.tripod.com/"><strong>Web
      Cornucopia</strong><sup><strong>©</strong></sup></a>
      site (<strong><a href="http://gsraj.tripod.com/">http://gsraj.tripod.com/</a></strong>) or mail him at
    <strong><a href="mailto:gopalan@gmx.net">gopalan@gmx.net</a></strong>.</font></td>
  </tr>
</table>

<p>&nbsp;</p>

<hr>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center"><p align="center"><a
        href="http://www.execpc.com/~gopalan/index.html"><font
        color="#000000">
        <img
        src="..\resources\home.gif"
        alt="Go to the Component Engineering Cornucopia page" start="fileopen" width="60" height="60"></font></a></p>
        </td>
        <td align="center" colspan="2"><p align="center"><font
        color="#000080" size="4" face="Arial Narrow"><strong>This
        site was developed and is maintained by </strong></font><a
        href="http://www.execpc.com/~gopalan/personal/cv.html"
        style="COLOR: rgb(0,0,128)"><font color="#000080"
        size="4" face="Arial Narrow"><strong>Gopalan Suresh Raj</strong></font></a></p>
        <p align="center"><font color="#000080" size="4"
        face="Arial Narrow"><strong>This page has been visited </strong></font><font
        color="#000080" size="4" face="Arial Narrow"><strong>&nbsp;</strong></font><a
        href="http://member.linkexchange.com/cgi-bin/fc/fastcounter-login?143396"
        target="_top"><img
        src="http://fastcounter.linkexchange.com/digits?COUNT=1391416&STYLE=0&ACCOUNT=143396" border="0" hspace="0"></a><font
        color="#000080" size="4" face="Arial Narrow"><strong>
        times since January 13, 2002.</strong></font></p>
        </td>
    </tr>
</table>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td align="center"><p align="center"><font
        color="#800000" size="3">Last Updated : Jan 13, '0</font><font color="#800000">2</font></p>
        </td>
        <td colspan="2"><p align="center"><a
        href="mailto:gopalan@execpc.com"><font color="#800000"
        size="4" face="Arial Narrow">If you have any questions,
        comments, or problems regarding this site, please write
        to me I would love to hear from you</font></a><font
        color="#800000" size="4" face="Arial Narrow">.</font></p>
        </td>
    </tr>
</table>

<hr>
<div align="center"><center>

<table border="0" cellspacing="1" width="693" height="54">
    <tr>
        <td width="689" height="27"><p align="center"><font
        color="#000000" size="1" face="Courier New">Copyright (c) 1997-2002, </font><a
        href="http://www.execpc.com/~gopalan/personal/cv.html"
        style="COLOR: rgb(0,0,128)"><font color="#000000"
        size="1" face="Courier New">Gopalan Suresh Raj</font></a><font
        color="#000000" size="1" face="Courier New"> - All rights
        reserved. </font><a
        href="http://www.execpc.com/~gopalan/misc/cpright.html"
        style="COLOR: rgb(0,0,128)"><font color="#000000"
        size="1" face="Courier New">Terms of use</font></a><font
        color="#000000" size="1" face="Courier New">.</font></p>
        </td>
    </tr>
    <tr>
        <td width="689" height="27"><p align="center"><font
        color="#000000" size="1" face="Courier New">All products
        and companies mentioned at this site are trademarks of
        their respective owners.</font></p>
        </td>
    </tr>
</table>
</center></div><!-- start of NedStat code -->

<p align="center"><a
href="http://usa.nedstat.net/cgi-bin/viewstat?name=java_tutorial"><img
src="..\..\..\usa.nedstat.net\cgi-bin\nedstat.gif\name=java_tutorial"
align="right" border="0" hspace="0"></a> <!-- end of NedStat code --> </p>
<script language="JavaScript">
<!--
  document.write("<img src=\"http://usa.nedstat.net/cgi-bin/referstat.gif?name=csharp_tracker&refer="+escape(top.document.referrer)+"\" width=1 height=1 alt=\"\">");
// -->
</script>

<p><img
src="..\..\..\usa.nedstat.net\cgi-bin\referstat.gif\name=page_tracker&refer=">
<a
href="http://cgi2.fxweb.com/v2-openstat.cgi?userid=J59138&password2=tracker"><img
src="..\..\..\cgi2.fxweb.com\v2-trackrun.cgi\userid=j59138&boost=3461.html"></a></p>


<!--  Web Tracking Code Starts Here -->
<a target="_top" href="http://w.extreme-dm.com/?login=javatrac">
<img name=im src="..\..\..\w1.extreme-dm.com\i.gif" height=38
border=0 width=41 alt=""></a><script language="javascript"><!--
an=navigator.appName;d=document;function
pr(){d.write("<img src=\"http://w0.extreme-dm.com",
"/0.gif?tag=cshtrack&j=y&srw="+srw+"&srb="+srb+"&",
"rs="+r+"&l="+escape(d.referrer)+"\" height=1 ",
"width=1>");}srb="na";srw="na";//-->
</script><script language="javascript1.2"><!--
s=screen;srw=s.width;an!="Netscape"?
srb=s.colorDepth:srb=s.pixelDepth;//-->
</script><script language="javascript"><!--
r=41;d.images?r=d.im.width:z=0;pr();//-->
</script><noscript><img height=1 width=1 alt=""
src="..\..\..\w0.extreme-dm.com\0.gif\tag=cshtrack&j=n"></noscript>
<!-- eXTReMe digital Web Tracking Code Ends Here  -->

</body>
</html>