<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Tutoriais</title>
</head>

<body>

<table align="center" width="550">
  <tbody>
    <tr>
      <td class="titulo">Tutoriais</td>
    </tr>
    <tr>
      <td align="middle" class="a">Ação jsp:useBean</td>
    </tr>
    <tr>
      <td align="right">por: Gleydson Lima<br>
        <a href="mailto:gleydson@jspbrasil.com.br">gleydson@jspbrasil.com.br</a><br>
        <br>
      </td>
    </tr>
  </tbody>
</table>
<center>
<table align="center" width="550">
  <tbody>
    <tr>
      <td class="b">Ações possibilitam a realização de tarefas complexas
        como instanciação de objetos, comunicação com recursos do lado do
        servidor como páginas JSP e servlets sem a necessidade de código Java.
        Embora o mesmo possa ser feito com o uso de código Java dentro de
        scriptlets, o uso das tags de ações promovem reusabilidade de seus
        componentes e aumenta a capacidade de manutenção da página.<br>
        <br>
        <span class="a">Usando componentes JavaBeans</span><br>
        <br>
        A tecnologia de componentes para JSP é baseada em componentes JavaBeans
        (ver <a href="http://www.jspbrasil.com.br:8081/jspbrasil/tutobasico/javabeans.jsp">tutorial
        de JavaBeans</a>). Antes de acessar um bean dentro de uma página JSP,
        é necessário identificar o bean e obter uma referência dele. A tag
        jsp:useBean tenta obter uma referência de um bean que já esteja
        criado, dependendo do escopo em que ele foi definido. Caso não haja o
        componente definido haverá a criação de um novo objeto.<br>
        <br>
        Por exemplo a tag:<br>
        <br>
        <table bgColor="#e2ddf3" width="550">
          <tbody>
            <tr>
              <td>
                <p class="source">&lt;jsp:useBean id=&quot;contador&quot; class=&quot;jspbrasil.Contador&quot;
                scope=&quot;session&quot;/&gt;</p>
              </td>
            </tr>
          </tbody>
        </table>
        <br>
        Neste exemplo, a tag useBean instanciará um objeto que será
        identificado por contador, a partir da classe <span class="source">jspbrasil.Contador</span>.
        A definição do escopo depende muito do projeto em questão. No exemplo
        acima, este objeto criado será compartilhado por toda sessão que será
        mantida com o usuário. Caso encontre-se uma nova tag de criação de um
        objeto da classe jspbrasil.Contador, o objeto já instanciado será
        usado não havendo a necessidade de criação de outro.<br>
        <br>
        <span class="a">Passos para criação do objeto:</span><br>
        <br>
        <ol>
          <li>
            <p>Tentativa de localizar o objeto baseado nas informações (id,
            scope). Este inspesão é feita sincronizada apropriadamente por
            escopo para evitar comportamentos não-determinísticos.</p>
          <li>
            <p>Definir a variável de script identificado por id.</p>
          <li>
            <p>Se o objeto for encontrado, a variável é inicializada com a
            referência localizada e então é realizado um casting para o tipo
            específico. Se o cast falhar então uma exceção do tipo <span class="source">java.lang.ClassCastException</span>
            irá ocorrer e o processamento da tag acaba.</p>
          <li>
            <p>Se o objeto não for encontrado no escopo e a classe não poder
            ser localizada então uma exceção do tipo <span class="source">java.lang.InstantiationException</span>
            ocorrerá e o processamento da tag acabará.</p>
          <li>
            <p>Se o objeto não foi encontrado no escopo dado e a classe for
            encontrada com um construtor padrão (sem argumentos) o objeto é
            instanciado e relacionado com a variável de scriplet identificada
            por id.<br>
            Se um contrutor sem argumentos não for encontrado então uma exceção
            do tipo <span class="source">java.lang.InstantiationException</span>
            ocorrerá e o processamento da tag acabará.</p>
          <li>
            <p>O processamento do corpo da tag é então executado. Um corpo de
            uma tag <span class="source">&lt;jsp:useBean&gt; </span>é executado
            para realizar algumas inicializações desejadas, como no exemplo
            abaixo:<br>
            <br>
            <table bgColor="#e2ddf3" width="550">
              <tbody>
                <tr>
                  <td class="source">&lt;jsp:useBean id=&quot;clientes&quot;
                    class=&quot;Clientes&quot; scope=&quot;page&quot;&gt;<br>
                    &lt;jsp:setProperty name=&quot;clientes&quot; property=&quot;nome&quot;
                    value=&quot;Rafael dos Santos&quot;&gt;<br>
                    &lt;jsp:setProperty name=&quot;clientes&quot; property=&quot;telefone&quot;
                    value=&quot;648-2343&quot;/&gt; &lt;/jsp:useBean&gt;</td>
                </tr>
              </tbody>
            </table>
            <p>O exemplo acima inicializa o objeto instanciado clientes com as
            propriedades nome e telefone.</p>
          </li>
        </ol>
        <p>&nbsp;</p>
      </td>
    </tr>
    <tr>
      <td><br>
        <br>
        <span class="a">Entendendo os Escopos:</span><br>
        <br>
        <ul>
          Os escopos definem o ciclo de vida de um objeto, eles podem ser
          definidos como:<br>
          <br>
          <li><b>page</b>: Objetos definidos com o escopo page são vistos
            apenas pela página onde ele foi criado. As referências para
            objetos no contexto page são armazenados no objeto pageContext.
          <li><b>request</b>: Objetos definidos no escopo request são vistos
            nas páginas usadas para responder a requisição do usuário. Se
            uma página é redirecionada para outra os objetos de escopo request
            são preservados uma vez que fazem parte da mesma requisição. As
            referências a objetos do contexto request são armazenados no
            objeto implícito request.
          <li><b>session</b>: Objetos definidos no escopo sessão são acessíveis
            por páginas que fazem parte da mesma sessão. As referências as
            esses objetos são armazenadas no objeto session.
          <li><b>application</b>: Objetos definidos no escopo application são
            acessíveis por toda aplicação JSP em questão e são armazenadas
            no objeto implícito application.</li>
        </ul>
        <br>
        A tag &lt;jsp:useBean&gt; tem a seguinte sintáxe básica:<br>
        <br>
        <table bgColor="#e2ddf3" width="550">
          <tbody>
            <tr>
              <td class="source">&lt;jsp:useBean id=&quot;nome&quot; scope=&quot;page|request|session|application&quot;
                class=&quot;nome_completo_da_classe&quot;/&gt;</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
</center>

</body>

</html>
