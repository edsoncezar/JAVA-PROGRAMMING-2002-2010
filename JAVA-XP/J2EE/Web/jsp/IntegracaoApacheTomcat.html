<html><head>
<meta http-equiv="Content-Language" content="pt-br">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">

<title></title><style>A:link {
	FONT-SIZE: 12px; COLOR: white; FONT-FAMILY: tahoma; TEXT-DECORATION: none
}
A:visited {
	FONT-SIZE: 12px; COLOR: white; FONT-FAMILY: tahoma; TEXT-DECORATION: none
}
A:hover {
	FONT-SIZE: 12px; COLOR: white; FONT-FAMILY: tahoma; TEXT-DECORATION: underline
}
BODY {
	SCROLLBAR-FACE-COLOR: black; FONT-SIZE: 12px; SCROLLBAR-HIGHLIGHT-COLOR: #999999;
	SCROLLBAR-SHADOW-COLOR: #999999; COLOR: white; SCROLLBAR-3DLIGHT-COLOR: black;
	SCROLLBAR-ARROW-COLOR: #999999; SCROLLBAR-TRACK-COLOR: black; FONT-FAMILY: tahoma;
	SCROLLBAR-DARKSHADOW-COLOR: black
}
TD {
	FONT-SIZE: 12px; COLOR: white; FONT-FAMILY: tahoma
}
</style></head>

<body bgcolor="#000000">

<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse;" width="100%" id="AutoNumber1">
  <tbody><tr>
    <td width="100%">
    <p align="center"><b><font face="Verdana" size="2" color="#ff0000">Como 
    integrar o APACHE com o TOMCAT em sistemas W32</font></b></p>
    <ul>
      <li>
      <p align="left"><font face="Verdana" size="2">instale o JDK (última 
      versão: 1.4.1_01)
      <a target="_blank" href="http://java.sun.com/j2se/1.4.1/download.html">
      http://java.sun.com/j2se/1.4.1/download.html</a></font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">instale o APACHE (apache_2.0.44-win32-x86-no_ssl.msi)
      <a target="_blank" href="http://apache.mirrorcentral.com/dist/httpd/binaries/win32/">
      http://apache.mirrorcentral.com/dist/httpd/binaries/win32/</a></font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">quando aparecer na 
      instalação do APACHE "Server Information", delete os valores de Network 
      Domain e Server Name e insira localhost nos dois (no seu servidor 
      configure p/ o seu domínio, neste tutorial utilizaremos localhost)</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">escolha a instalação 
      personalizada "Custom", depois altere o local da instalação "Change 
      Current Destination Folder" e coloque C:\, pois o 
      local padrão "arquivos de programas" contém espaços e isso geralmente 
      causa problemas... instale em C:\ pois a instalação cria um dir chamado 
      Apache2, ficando C:\Apache2</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">após finalizar a instalação 
      abra um navegador web e digite http://localhost para testar se tudo deu 
      certo. Deve aparecer uma página padrão do apache, caso contrário aconteceu 
      algo errado.</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">em seguida abra o monitor do 
      apache que apareceu no system tray (do lado do relógio) e pare "STOP" o 
      serviço do APACHE, o APACHE será iniciado novamente mais tarde.</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">instale o TOMCAT (tomcat-4.1.18-LE-jdk14.exe)<a target="_blank" href="http://apache.mirrorcentral.com/dist/jakarta/tomcat-4/binaries/"> 
      http://apache.mirrorcentral.com/dist/jakarta/tomcat-4/binaries/ </a>
      </font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">durante a instalação escolha 
      run as "NT Service"</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">altere o diretório da 
      instalação p/ algo do tipo C:\Tomcat, pelas mesmas razões do APACHE</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">deixe a porta como 8080</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">verifique se tudo está 
      funcionando digitando em um navegador web http://localhost:8080</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">irá abrir uma página padrão 
      do TOMCAT, verifique os exemplos de JSPs e SERVLET</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Agora devemos instalar o JK 
      Connector, ele fará a ligação entre o APACHE e o TOMCAT</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">faça o download do JK 
      Connector (mod_jk-2.0.43.dll) em
      <a target="_blank" href="http://jakarta.apache.org/builds/jakarta-tomcat-connectors/jk/release/v1.2.1/bin/win32/">
      http://jakarta.apache.org/builds/jakarta-tomcat-connectors/jk/release/v1.2.1/bin/win32/
      </a></font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">esta DLL deverá ser salva na 
      pasta "modules" da instalação do APACHE</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">agora devemos editar o "httpd.conf" 
      do APACHE, que encontra-se na pasta "conf" da instalação do APACHE</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">encontre  "LoadModule" 
      e no fim desta lista (serão alguns) adicione: LoadModule jk_module 
      modules/mod_jk-2.0.43.dll</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">para verificar se tudo deu 
      certo abra uma janela de prompt (DOS), entre no diretório de instalação do 
      APACHE e mude para a pasta "bin" (dir C:\Apache2\bin). Digite apache.exe -t</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">deverá aparecer uma mensagem 
      dizendo: "Syntax OK", esta sintaxe apenas verifica as alteração efetuadas 
      no httpd.conf procurando por erros. Se não apareceu "Syntax OK" verifique 
      o httpd.conf e veja se não tem nada errado, se ainda assim não funcionar 
      verifique todos os passos até este momento.</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Agora vamos editar o server.xml 
      do TOMCAT, nas pasta "conf" do TOMCAT (C:\Tomcat\conf). Faça uma cópia deste arquivo p/ 
      questões de segurança.</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Procure uma linha que 
      contém: &lt;Server port="8005" shutdown="SHUTDOWN" debug="0"&gt; e na linha 
      seguinte adicione:</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">&lt;Listener className="org.apache.ajp.tomcat4.config.ApacheConfig" 
      modJk="C:/Apache2/modules/mod_jk-2.0.43.dll" /&gt;</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">supondo que o APACHE foi 
      instalado no dir C:/Apache2, verifique o endereço na sua máquina senão não 
      vai funcionar. Isto deve apontar p/ a DLL que está na instalação do APACHE 
      em /modules/mod_jk-2.0.43.dll.</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Agora procure por uma linha 
      que contém: &lt;Host name="localhost" debug="0" appBase="webapps" unpackWARs="true" 
      autoDeploy="true"&gt; </font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Insira na sua sequência: 
      &lt;Listener className="org.apache.ajp.tomcat4.config.ApacheConfig" 
      append="true" forwardAll="false" 
      modJk="C:/Apache2/modules/mod_jk-2.0.43.dll" /&gt;</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Novamente: preste atenção 
      aos endereços que apontam p/ a DLL.</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Salve as alterações e 
      reinicie o TOMCAT: no prompt digite net stop "Apache Tomcat 4.1" e depois 
      net start "Apache Tomcat 4.1"</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Aguarde alguns segundos e 
      verifique se foi criado um arquivo chamado mod_jk.conf no diretório 
      conf/auto do TOMCAT, se não apareceu verifique as alterações no server.xml</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Agora criaremos um arquivo 
      (modo texto) com o seguinte conteúdo:</font>
    </p></li></ul>
    <p align="left"><font face="Verdana" size="2"># BEGIN workers.properties <br>
    # Definition for Ajp13 worker <br>
    worker.list=ajp13 <br>
    worker.ajp13.port=8009 <br>
    worker.ajp13.host=localhost <br>
    worker.ajp13.type=ajp13 <br>
    # END workers.properties</font></p>
    <ul>
      <li>
      <p align="left"><font face="Verdana" size="2">Salve este arquivo no 
      diretório conf/jk do TOMCAT com o nome workers.properties</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Agora edite novamente o 
      httpd.conf do APACHE e no fim do arquivo acrescente:</font>
    </p></li></ul>
    <p align="left"><font face="Verdana" size="2">JkWorkersFile 
    "C:/Tomcat/conf/jk/workers.properties" <br>
    JkLogFile "C:/Tomcat/logs/mod_jk.log" <br>
    Include C:/Tomcat/conf/auto/mod_jk.conf</font></p>
    <ul>
      <li>
      <p align="left"><font face="Verdana" size="2">Mais uma vez: supondo que o 
      TOMCAT foi instalado em C:\TOMCAT</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Verifique novamente pelo 
      prompt se tudo está correto: apache.exe -t (do dir bin do APACHE), 
      novamente deverá aparecer "Syntax OK", caso contrário verifique se os 
      arquivos /conf/auto/mod_jk.conf e workers.properties estão nos diretórios 
      indicados.</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">Inicie novamente o APACHE, 
      pelo monitor do system tray ou então no prompt digite net start apache.</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">verifique http://localhost</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">verifique 
      http://localhost:8080</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">agora verifique a página de 
      exemplos do TOMCAT sem o 8080 http://localhost/examples/jsp/index.html 
      (verifique primeiro com 8080 e depois sem)</font>
      </p></li><li>
      <p align="left"><font face="Verdana" size="2">se esta página foi executada 
      sem o 8080 o mod_jk está funcionado corretamente e você está executando 
      JSPs e SERVLETS pelo APACHE na porta 80 via jk_mode com o TOMCAT.</font>
    </p></li></ul>
    <p align="left"><font face="Verdana" size="2">Qualquer dúvida:
    <a href="mailto:herbert@lig.df.ufscar.br">herbert@lig.df.ufscar.br</a></font></p>
    <p align="left"><font face="Verdana" size="1">Bibliografia: John Turner.</font></p>
    <p> </p></td>
  </tr>
</tbody></table>

</body></html>