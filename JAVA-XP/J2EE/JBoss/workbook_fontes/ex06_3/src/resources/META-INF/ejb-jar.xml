<?xml version="1.0"?>

<!DOCTYPE ejb-jar PUBLIC 
"-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN" 
"http://java.sun.com/dtd/ejb-jar_2_0.dtd">

<ejb-jar>
 <enterprise-beans>
	<entity>
	  <ejb-name>CustomerEJB</ejb-name>
	  <home>com.titan.customer.CustomerHomeRemote</home>
	  <remote>com.titan.customer.CustomerRemote</remote>
	  <ejb-class>com.titan.customer.CustomerBean</ejb-class>
	  <persistence-type>Container</persistence-type>
	  <prim-key-class>java.lang.Integer</prim-key-class>
	  <reentrant>False</reentrant>
	  <cmp-version>2.x</cmp-version>
	  <abstract-schema-name>Customer</abstract-schema-name>
	  <cmp-field><field-name>id</field-name></cmp-field>
	  <cmp-field><field-name>lastName</field-name></cmp-field>
	  <cmp-field><field-name>firstName</field-name></cmp-field>
	  <cmp-field><field-name>hasGoodCredit</field-name></cmp-field>
	  <primkey-field>id</primkey-field>
	  <security-identity><use-caller-identity/></security-identity>
	</entity>
	<entity>
	  <ejb-name>AddressEJB</ejb-name>
	  <local-home>com.titan.address.AddressHomeLocal</local-home>
	  <local>com.titan.address.AddressLocal</local>
	  <ejb-class>com.titan.address.AddressBean</ejb-class>
	  <persistence-type>Container</persistence-type>
	  <prim-key-class>java.lang.Integer</prim-key-class>
	  <reentrant>False</reentrant>
	  <cmp-version>2.x</cmp-version>
	  <abstract-schema-name>Address</abstract-schema-name>
	  <cmp-field><field-name>id</field-name></cmp-field>
	  <cmp-field><field-name>street</field-name></cmp-field>
	  <cmp-field><field-name>city</field-name></cmp-field>
	  <cmp-field><field-name>state</field-name></cmp-field>
	  <cmp-field><field-name>zip</field-name></cmp-field>
	  <primkey-field>id</primkey-field>
	  <security-identity><use-caller-identity/></security-identity>
	</entity>
 </enterprise-beans>

    <relationships>
	    <ejb-relation>
		    <ejb-relation-name>Customer-Address</ejb-relation-name>
		    <ejb-relationship-role>
			    <ejb-relationship-role-name>Customer-has-a-Address</ejb-relationship-role-name>
			    <multiplicity>One</multiplicity>
			    <relationship-role-source>
				    <ejb-name>CustomerEJB</ejb-name>
			    </relationship-role-source>
			    <cmr-field>
				    <cmr-field-name>homeAddress</cmr-field-name>
			    </cmr-field>
		    </ejb-relationship-role>
		    <ejb-relationship-role>
			    <ejb-relationship-role-name>Address-belongs-to-Customer</ejb-relationship-role-name>
			    <multiplicity>One</multiplicity>
			    <relationship-role-source>
				    <ejb-name>AddressEJB</ejb-name>
			    </relationship-role-source>
		    </ejb-relationship-role>
	    </ejb-relation>
    </relationships>

    <assembly-descriptor>
        <security-role>
            <role-name>Employees</role-name>
        </security-role>
        <method-permission>
            <role-name>Employees</role-name>
            <method>
                <ejb-name>CustomerEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>AddressEJB</ejb-name>
                <method-name>*</method-name>
            </method>
        </method-permission>
        <container-transaction>
            <method>
                <ejb-name>CustomerEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>AddressEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
    </assembly-descriptor>  

</ejb-jar>
