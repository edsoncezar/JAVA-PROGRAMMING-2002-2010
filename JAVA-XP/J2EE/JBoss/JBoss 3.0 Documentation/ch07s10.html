<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Specifying the deployment name of your beans</title><link rel="stylesheet" href="styles.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets Vimages/callouts/"><link rel="home" href="index.html" title="JBoss 3.0 Documentation"><link rel="up" href="ch07.html" title="Chapter 7. Advanced container configuration : use of jboss.xml"><link rel="previous" href="ch07s02.html" title="Declaring Resource Reference"><link rel="next" href="ch07s13.html" title="Declaring an EJB reference"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table border="0" cellpadding="0" cellspacing="0" height="65"><tr height="65"><td rowspan="2"><img src="images\jboss.gif" border="0"></td><td rowspan="2" background="images\gbar.gif" width="100%" align="right" valign="top"><a href="index.html"><img src="images\doc.gif" border="0"></a><a href="ch07.html"><img src="images\toc.gif" border="0"></a><a href="ch07s02.html"><img src="images\prev.gif" border="0"></a><a href="ch07s13.html"><img src="images\next.gif" border="0"></a></td></tr><tr></tr></table><div class="section"><a name="d0e2620"></a><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="d0e2620"></a>Specifying the deployment name of your beans</h2></div></div><p>You have coded your beans. You now want to deploy them and be 
able to access them from your clients. For this, JBoss will register your beans in the JNDI namespace. All you have to tell is the name under which they must be registered.</p><div class="section"><a name="d0e2625"></a><div class="titlepage"><div><h3 class="title"><a name="d0e2625"></a>Standard behaviour of jboss</h3></div></div><p>The simplest way to deploy your bean is to use the ejb-jar.xml file to give it 
the same name you
call it in the client. This is done in the &lt;ejb-name&gt; tag for the 
bean. In this case you DON'T 
need a jboss.xml file. Your ejb-jar.xml file will look like this (this is 
covered in the beginners trails):
</p><p>ejb-jar.xml: </p><pre class="programlisting">

&lt;ejb-jar&gt;
  &lt;enterprise-beans&gt;
                                                                      
    &lt;session&gt;
      &lt;ejb-name&gt;MyBeanName&lt;/ejb-name&gt;
      &lt;home&gt;MyBeanHome&lt;/home&gt;
      &lt;remote&gt;MyBean&lt;/remote&gt;
      &lt;ejb-class&gt;MyBeanEJB&lt;/ejb-class&gt;
      &lt;session-type&gt;Stateful&lt;/session-type&gt;
      &lt;transaction-type&gt;Container&lt;/transaction-type&gt;
    &lt;/session&gt;

  &lt;/enterprise-beans&gt;
&lt;/ejb-jar&gt;
</pre><p>And your bean will be available under the "MyBeanName" in JNDI.
In your client code, your call will look like this:</p><pre class="programlisting">import javax.naming.InitialContext;
import javax.rmi.PortableRemoteObject;
   
public class Client {                                                 
  
   public static void main(String args[]) {
      ...  
      InitialContext namingContext = new InitialContext();
      Object ref = namingContext.lookup("MyBeanName");
      MyBeanHome home = (MyBeanHome)PortableRemoteObject.narrow(ref, MyBeanHome.class);
      ...
   }
  
}</pre><p>Here the "MyBeanName" refers to the name of your bean in the JNDI namespace. 
JBoss does not currently allow 
you to use the java:comp/env namespace to call your beans from your clients.</p></div><div class="section"><a name="d0e2640"></a><div class="titlepage"><div><h3 class="title"><a name="d0e2640"></a>Registering a bean with a JNDI deployment name different than the ejb-name</h3></div></div><p>You may want to deploy your bean under another JNDI name. (for example, you 
may want to deploy the same 
bean under different names with different configurations). In this case, you 
must specify the JNDI name 
in a jboss.xml file. This file must be in the META-INF directory, along with 
ejb-jar.xml. Your files 
will look like this (note that the &lt;ejb-name&gt;tags in the two xml 
files must match):
</p><p>jboss.xml:</p><pre class="programlisting">

&lt;jboss&gt;                                                               
  &lt;enterprise-beans&gt;
    &lt;session&gt;
      &lt;ejb-name&gt;MyBeanName&lt;/ejb-name&gt;
      &lt;jndi-name&gt;somePath/otherName&lt;/jndi-name&gt;
    &lt;/session&gt;
  &lt;/enterprise-beans&gt;
&lt;/jboss&gt;

</pre><p>(you don't need to specify the rest of the jboss.xml file, only this 
information is sufficient in the 
new metadata, this is what we call "differential" jboss.xml).</p><p>Your bean is then available in JNDI under somePath/otherName</p><p>In your client code, your call will look like this:</p><pre class="programlisting">import javax.naming.InitialContext;
import javax.rmi.PortableRemoteObject;
   
public class Client {                                                 
   
   public static void main(String args[]) {
      ...
      InitialContext namingContext = new InitialContext();
      Object ref = namingContext.lookup("somePath/otherName");
      MyBeanHome home = (MyBeanHome)PortableRemoteObject.narrow(ref, MyBeanHome.class);
      ...
   }
   
}</pre></div></div><table border="0" cellpadding="0" cellspacing="0" height="65"><tr height="65"><td rowspan="2"><img src="images\gbar.gif" width="432" height="79"></td><td rowspan="2" background="images\gbar.gif" width="100%" align="right" valign="top"><a href="index.html"><img src="images\doc.gif" border="0"></a><a href="ch07.html"><img src="images\toc.gif" border="0"></a><a href="ch07s02.html"><img src="images\prev.gif" border="0"></a><a href="ch07s13.html"><img src="images\next.gif" border="0"></a></td></tr><tr></tr></table></body></html>