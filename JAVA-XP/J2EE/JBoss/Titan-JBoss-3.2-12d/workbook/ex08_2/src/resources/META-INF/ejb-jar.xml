<?xml version="1.0"?>

<!DOCTYPE ejb-jar PUBLIC 
"-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN" 
"http://java.sun.com/dtd/ejb-jar_2_0.dtd">

<ejb-jar>
 <enterprise-beans>
   <entity>
      <ejb-name>CustomerEJB</ejb-name>
      <local-home>com.titan.customer.CustomerHomeLocal</local-home>
      <local>com.titan.customer.CustomerLocal</local>
      <ejb-class>com.titan.customer.CustomerBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>False</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Customer</abstract-schema-name>
	  <cmp-field><field-name>id</field-name></cmp-field>
      <cmp-field><field-name>lastName</field-name></cmp-field>
      <cmp-field><field-name>firstName</field-name></cmp-field>
      <cmp-field><field-name>hasGoodCredit</field-name></cmp-field>
      <primkey-field>id</primkey-field>
      <security-identity><use-caller-identity/></security-identity>
      <query>
        <query-method>
	  <method-name>findAllCustomersWithReservations</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( cust ) FROM Reservation res, IN (res.customers) cust
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findDistinctCustomersWithReservations</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT DISTINCT OBJECT( cust ) FROM Reservation res, 
	    IN (res.customers) cust
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findByAmericanExpress</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT(c) FROM Customer AS c
	    WHERE c.creditCard.organization = 'American Express'
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findByGoodCredit</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT(c) FROM Customer AS c
	    WHERE c.hasGoodCredit = TRUE
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>ejbSelectByCity</method-name>
	  <method-params>
	    <method-param>java.lang.String</method-param>
	    <method-param>java.lang.String</method-param>
	  </method-params>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( c ) FROM Customer AS c
	    WHERE c.homeAddress.state = ?2
	    AND c.homeAddress.city = ?1
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findInStates</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( c ) FROM Customer c
	    WHERE c.homeAddress.state IN ('GA', 'MA')
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findNotInStates</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( c ) FROM Customer c
	    WHERE c.homeAddress.state NOT IN ('GA', 'MA')
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findHomeAddressIsNull</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( c ) FROM Customer c
	    WHERE c.homeAddress IS NULL
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findHomeAddressIsNotNull</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( c ) FROM Customer c
	    WHERE c.homeAddress IS NOT NULL
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findHyphenatedLastNames</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( c ) FROM Customer c
	    WHERE c.lastName LIKE '%-%'
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findByLastNameLength</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( c ) FROM Customer c
	    WHERE LENGTH(c.lastName) > 6 AND
	    LOCATE('Monson', c.lastName) > 0
	</ejb-ql>
      </query>
      <query>
        <query-method>
            <method-name>ejbSelectGeneric</method-name>
            <method-params>
               <method-param>java.lang.String</method-param>
               <method-param>java.lang.Object[]</method-param>
            </method-params>
	</query-method>
	<ejb-ql>
	</ejb-ql>
      </query>
   </entity>
   <entity>
      <ejb-name>AddressEJB</ejb-name>
	  <local-home>com.titan.address.AddressHomeLocal</local-home>	
	  <local>com.titan.address.AddressLocal</local>
	  <ejb-class>com.titan.address.AddressBean</ejb-class>	
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>False</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Address</abstract-schema-name> 
	  <cmp-field><field-name>id</field-name></cmp-field>
      <cmp-field><field-name>street</field-name></cmp-field>
      <cmp-field><field-name>city</field-name></cmp-field>
      <cmp-field><field-name>state</field-name></cmp-field>
      <cmp-field><field-name>zip</field-name></cmp-field>
      <primkey-field>id</primkey-field>
      <security-identity><use-caller-identity/></security-identity>
   </entity>
   <entity>
      <ejb-name>CreditCardEJB</ejb-name>							
	  <local-home>com.titan.customer.CreditCardHomeLocal</local-home>
	  <local>com.titan.customer.CreditCardLocal</local>
	  <ejb-class>com.titan.customer.CreditCardBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>False</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>CreditCard</abstract-schema-name>
	  <cmp-field><field-name>id</field-name></cmp-field>
      <cmp-field><field-name>expirationDate</field-name></cmp-field>
      <cmp-field><field-name>number</field-name></cmp-field>
      <cmp-field><field-name>nameOnCard</field-name></cmp-field>
      <cmp-field><field-name>organization</field-name></cmp-field>
      <primkey-field>id</primkey-field>
	  <security-identity><use-caller-identity/></security-identity>
   </entity>
   <entity>
      <ejb-name>CreditCompanyEJB</ejb-name>
      <local-home>com.titan.customer.CreditCompanyHomeLocal</local-home>
      <local>com.titan.customer.CreditCompanyLocal</local>
      <ejb-class>com.titan.customer.CreditCompanyBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>False</reentrant>
      <cmp-version>2.x</cmp-version> 
      <abstract-schema-name>CreditCompany</abstract-schema-name>
      <cmp-field><field-name>id</field-name></cmp-field>
      <cmp-field><field-name>name</field-name></cmp-field>
      <primkey-field>id</primkey-field>
      <security-identity><use-caller-identity/></security-identity>
   </entity>
   <entity>
      <ejb-name>PhoneEJB</ejb-name>							
	  <local-home>com.titan.phone.PhoneHomeLocal</local-home>
	  <local>com.titan.phone.PhoneLocal</local>
	  <ejb-class>com.titan.phone.PhoneBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>False</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Phone</abstract-schema-name>
	  <cmp-field><field-name>id</field-name></cmp-field>
      <cmp-field><field-name>number</field-name></cmp-field>
      <cmp-field><field-name>type</field-name></cmp-field>
      <primkey-field>id</primkey-field>
	  <security-identity><use-caller-identity/></security-identity>
   </entity>
   <entity>
      <ejb-name>CruiseEJB</ejb-name>							
	  <local-home>com.titan.cruise.CruiseHomeLocal</local-home>
	  <local>com.titan.cruise.CruiseLocal</local>
	  <ejb-class>com.titan.cruise.CruiseBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>False</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Cruise</abstract-schema-name>
      <cmp-field><field-name>id</field-name></cmp-field>
      <cmp-field><field-name>name</field-name></cmp-field>
      <primkey-field>id</primkey-field>
      <security-identity><use-caller-identity/></security-identity>
      <query>
        <query-method>
	  <method-name>findByShip</method-name>
	  <method-params>
	    <method-param>com.titan.ship.ShipLocal</method-param>
	  </method-params>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( crs ) FROM Cruise AS crs
	    WHERE crs.ship = ?1
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findEmptyReservations</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( crs ) FROM Cruise crs
	    WHERE crs.reservations IS EMPTY
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findNotEmptyReservations</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( crs ) FROM Cruise crs
	    WHERE crs.reservations IS NOT EMPTY
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findMemberOf</method-name>
	  <method-params>
	    <method-param>com.titan.customer.CustomerLocal</method-param>
	  </method-params>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( crs ) FROM Cruise crs, IN (crs.reservations) res, Customer cust
	    WHERE cust = ?1 AND cust MEMBER OF res.customers
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findNotMemberOf</method-name>
	  <method-params>
	    <method-param>com.titan.customer.CustomerLocal</method-param>
	  </method-params>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( crs ) FROM Cruise crs, IN (crs.reservations) res, Customer cust
	    WHERE cust = ?1 AND cust NOT MEMBER OF res.customers
	</ejb-ql>
      </query>
   </entity>
   <entity>
      <ejb-name>ShipEJB</ejb-name>							
	  <local-home>com.titan.ship.ShipHomeLocal</local-home>
	  <local>com.titan.ship.ShipLocal</local>
	  <ejb-class>com.titan.ship.ShipBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>False</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Ship</abstract-schema-name>
      <cmp-field><field-name>id</field-name></cmp-field>
      <cmp-field><field-name>name</field-name></cmp-field>
      <cmp-field><field-name>tonnage</field-name></cmp-field>
      <primkey-field>id</primkey-field>
      <security-identity><use-caller-identity/></security-identity>
      <query>
        <query-method>
	  <method-name>findByTonnage100000</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( s ) 
	    FROM Ship AS s
	    WHERE s.tonnage = 100000.0
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findByTonnageBetween</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( s ) FROM Ship s
	    WHERE s.tonnage BETWEEN 80000.0 AND 130000.0
	</ejb-ql>
      </query>
      <query>
        <query-method>
	  <method-name>findByTonnageNotBetween</method-name>
	  <method-params/>
	</query-method>
	<ejb-ql>
	    SELECT OBJECT( s ) FROM Ship s
	    WHERE s.tonnage NOT BETWEEN 80000.0 AND 130000.0
	</ejb-ql>
      </query>
   </entity>
   <entity>
      <ejb-name>ReservationEJB</ejb-name>							
	  <local-home>com.titan.reservation.ReservationHomeLocal</local-home>
	  <local>com.titan.reservation.ReservationLocal</local>
	  <ejb-class>com.titan.reservation.ReservationBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>False</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Reservation</abstract-schema-name>
      <cmp-field><field-name>id</field-name></cmp-field>
      <cmp-field><field-name>amountPaid</field-name></cmp-field>
      <cmp-field><field-name>date</field-name></cmp-field>
      <primkey-field>id</primkey-field>
      <security-identity><use-caller-identity/></security-identity>
      <query>
        <query-method>
	  <method-name>findWithPaymentGreaterThan</method-name>
	  <method-params>
	    <method-param>java.lang.Double</method-param>
	  </method-params>
	</query-method>
	<ejb-ql>
	    <![CDATA[
	    SELECT OBJECT( r ) FROM Reservation r
	    WHERE r.amountPaid > ?1
	    ]]>
	</ejb-ql>
      </query>
   </entity>
   <entity>
      <ejb-name>CabinEJB</ejb-name>
      <local-home>com.titan.cabin.CabinHomeLocal</local-home>
      <local>com.titan.cabin.CabinLocal</local>
      <ejb-class>com.titan.cabin.CabinBean</ejb-class>
      <persistence-type>Container</persistence-type>
      <prim-key-class>java.lang.Integer</prim-key-class>
      <reentrant>False</reentrant>
      <cmp-version>2.x</cmp-version>
      <abstract-schema-name>Cabin</abstract-schema-name>
      <cmp-field><field-name>id</field-name></cmp-field>
      <cmp-field><field-name>name</field-name></cmp-field>
      <cmp-field><field-name>deckLevel</field-name></cmp-field>
      <cmp-field><field-name>bedCount</field-name></cmp-field>
      <primkey-field>id</primkey-field>
      <security-identity><use-caller-identity/></security-identity>
   </entity>
   <session>
      <ejb-name>Test82EJB</ejb-name>
      <home>com.titan.test.Test82HomeRemote</home>
      <remote>com.titan.test.Test82Remote</remote>
      <ejb-class>com.titan.test.Test82Bean</ejb-class>
      <session-type>Stateless</session-type>
      <transaction-type>Container</transaction-type>
     <ejb-local-ref>
	   <ejb-ref-name>CustomerHomeLocal</ejb-ref-name>
	   <ejb-ref-type>Entity</ejb-ref-type>
	   <local-home>com.titan.customer.CustomerHomeLocal</local-home>
	   <local>com.titan.customer.CustomerHomeLocal</local>
	   <!-- ejb-link is required by jboss for local-refs. -->
	   <ejb-link>CustomerEJB</ejb-link>
     </ejb-local-ref>
     <ejb-local-ref>
	   <ejb-ref-name>PhoneHomeLocal</ejb-ref-name>
	   <ejb-ref-type>Entity</ejb-ref-type>
	   <local-home>com.titan.phone.PhoneHomeLocal</local-home>
	   <local>com.titan.phone.PhoneHomeLocal</local>
	   <!-- ejb-link is required by jboss for local-refs. -->
	   <ejb-link>PhoneEJB</ejb-link>
     </ejb-local-ref>
     <ejb-local-ref>
	   <ejb-ref-name>AddressHomeLocal</ejb-ref-name>
	   <ejb-ref-type>Entity</ejb-ref-type>
	   <local-home>com.titan.address.AddressHomeLocal</local-home>
	   <local>com.titan.phone.AddressHomeLocal</local>
	   <!-- ejb-link is required by jboss for local-refs. -->
	   <ejb-link>AddressEJB</ejb-link>
     </ejb-local-ref>
     <ejb-local-ref>
	   <ejb-ref-name>CreditCardHomeLocal</ejb-ref-name>
	   <ejb-ref-type>Entity</ejb-ref-type>
	   <local-home>com.titan.customer.CreditCardHomeLocal</local-home>
	   <local>com.titan.customer.CreditCardHomeLocal</local>
	   <!-- ejb-link is required by jboss for local-refs. -->
	   <ejb-link>CreditCardEJB</ejb-link>
     </ejb-local-ref>
     <ejb-local-ref>
	   <ejb-ref-name>CreditCompanyHomeLocal</ejb-ref-name>
	   <ejb-ref-type>Entity</ejb-ref-type>
	   <local-home>com.titan.customer.CreditCompanyHomeLocal</local-home>
	   <local>com.titan.customer.CreditCompanyHomeLocal</local>
	   <!-- ejb-link is required by jboss for local-refs. -->
	   <ejb-link>CreditCompanyEJB</ejb-link>
     </ejb-local-ref>
     <ejb-local-ref>
	   <ejb-ref-name>CruiseHomeLocal</ejb-ref-name>
	   <ejb-ref-type>Entity</ejb-ref-type>
	   <local-home>com.titan.cruise.CruiseHomeLocal</local-home>
	   <local>com.titan.cruise.CruiseHomeLocal</local>
	   <!-- ejb-link is required by jboss for local-refs. -->
	   <ejb-link>CruiseEJB</ejb-link>
     </ejb-local-ref>
     <ejb-local-ref>
	   <ejb-ref-name>ReservationHomeLocal</ejb-ref-name>
	   <ejb-ref-type>Entity</ejb-ref-type>
	   <local-home>com.titan.reservation.ReservationHomeLocal</local-home>
	   <local>com.titan.reservation.ReservationHomeLocal</local>
	   <!-- ejb-link is required by jboss for local-refs. -->
	   <ejb-link>ReservationEJB</ejb-link>
     </ejb-local-ref>
     <ejb-local-ref>
	   <ejb-ref-name>CabinHomeLocal</ejb-ref-name>
	   <ejb-ref-type>Entity</ejb-ref-type>
	   <local-home>com.titan.cabin.CabinHomeLocal</local-home>
	   <local>com.titan.cabin.CabinHomeLocal</local>
	   <!-- ejb-link is required by jboss for local-refs. -->
	   <ejb-link>CabinEJB</ejb-link>
     </ejb-local-ref>
     <ejb-local-ref>
	   <ejb-ref-name>ShipHomeLocal</ejb-ref-name>
	   <ejb-ref-type>Entity</ejb-ref-type>
	   <local-home>com.titan.ship.ShipHomeLocal</local-home>
	   <local>com.titan.cabin.shipHomeLocal</local>
	   <!-- ejb-link is required by jboss for local-refs. -->
	   <ejb-link>ShipEJB</ejb-link>
     </ejb-local-ref>
   </session>
 </enterprise-beans>

    <relationships>
	    <ejb-relation>

		    <ejb-relation-name>Customer-HomeAddress</ejb-relation-name>
		    <ejb-relationship-role>
			    <ejb-relationship-role-name>
				    Customer-has-a-Address
			    </ejb-relationship-role-name>
			    <multiplicity>One</multiplicity>
			    <relationship-role-source>
				    <ejb-name>CustomerEJB</ejb-name>
			    </relationship-role-source>
			    <cmr-field>
				    <cmr-field-name>homeAddress</cmr-field-name>
			    </cmr-field>
		    </ejb-relationship-role>
		    <ejb-relationship-role>
			    <ejb-relationship-role-name>
				    Address-belongs-to-Customer
			    </ejb-relationship-role-name>
			    <multiplicity>One</multiplicity>
			    <relationship-role-source>
				    <ejb-name>AddressEJB</ejb-name>
			    </relationship-role-source>
		    </ejb-relationship-role>
		</ejb-relation>

		<ejb-relation>
			<ejb-relation-name>Customer-CreditCard</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Customer-has-a-CreditCard
				</ejb-relationship-role-name>
				<multiplicity>One</multiplicity>
				<relationship-role-source>
					<ejb-name>CustomerEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>creditCard</cmr-field-name>
				</cmr-field>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					CreditCard-belongs-to-Customer
				</ejb-relationship-role-name>
				<multiplicity>One</multiplicity>
				<relationship-role-source>
					<ejb-name>CreditCardEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>customer</cmr-field-name>
				</cmr-field>
			</ejb-relationship-role>
		</ejb-relation>	

	        <ejb-relation>

		    <ejb-relation-name>CreditCompany-Address</ejb-relation-name>
		    <ejb-relationship-role>
			    <ejb-relationship-role-name>
				    CreditCompany-has-a-Address
			    </ejb-relationship-role-name>
			    <multiplicity>One</multiplicity>
			    <relationship-role-source>
				    <ejb-name>CreditCompanyEJB</ejb-name>
			    </relationship-role-source>
			    <cmr-field>
				    <cmr-field-name>address</cmr-field-name>
			    </cmr-field>
		    </ejb-relationship-role>
		    <ejb-relationship-role>
			    <ejb-relationship-role-name>
				    Address-belongs-to-CreditCompany
			    </ejb-relationship-role-name>
			    <multiplicity>One</multiplicity>
			    <relationship-role-source>
				    <ejb-name>AddressEJB</ejb-name>
			    </relationship-role-source>
		    </ejb-relationship-role>
		</ejb-relation>

		<ejb-relation>
			<ejb-relation-name>CreditCompany-CreditCard</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					CreditCompany-has-many-CreditCards
				</ejb-relationship-role-name>
				<multiplicity>One</multiplicity>	
				<relationship-role-source>
					<ejb-name>CreditCompanyEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>creditCards</cmr-field-name>
					<cmr-field-type>java.util.Collection</cmr-field-type>
				</cmr-field>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					CreditCard-has-a-CreditCompany
				</ejb-relationship-role-name>
				<multiplicity>Many</multiplicity>	
				<relationship-role-source>
					<ejb-name>CreditCardEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>creditCompany</cmr-field-name>
				</cmr-field>
			</ejb-relationship-role>
		</ejb-relation>

		<ejb-relation>
			<ejb-relation-name>Customer-Phones</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Customer-has-many-Phone-numbers
				</ejb-relationship-role-name>
				<multiplicity>One</multiplicity>
				<relationship-role-source>
					<ejb-name>CustomerEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>phoneNumbers</cmr-field-name>
					<cmr-field-type>java.util.Collection</cmr-field-type>
				</cmr-field>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Phone-belongs-to-Customer
				</ejb-relationship-role-name>
				<multiplicity>Many</multiplicity>
				<relationship-role-source>
					<ejb-name>PhoneEJB</ejb-name>
				</relationship-role-source>
			</ejb-relationship-role>
		</ejb-relation>

		<ejb-relation>
			<ejb-relation-name>Customer-Reservation</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Customer-has-many-Reservations
				</ejb-relationship-role-name>
				<multiplicity>Many</multiplicity>
				<relationship-role-source>
					<ejb-name>CustomerEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>reservations</cmr-field-name>
					<cmr-field-type>java.util.Collection</cmr-field-type>
				</cmr-field>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Reservation-has-many-Customers
				</ejb-relationship-role-name>
				<multiplicity>Many</multiplicity>
				<relationship-role-source>
					<ejb-name>ReservationEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>customers</cmr-field-name>
					<cmr-field-type>java.util.Set</cmr-field-type>
				</cmr-field>
			</ejb-relationship-role>
		</ejb-relation>

		<ejb-relation>
			<ejb-relation-name>Cruise-Ship</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Cruise-has-a-Ship
				</ejb-relationship-role-name>
				<multiplicity>Many</multiplicity>
				<relationship-role-source>
					<ejb-name>CruiseEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>ship</cmr-field-name>
				</cmr-field>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Ship-has-many-Cruises
				</ejb-relationship-role-name>
				<multiplicity>One</multiplicity>
				<relationship-role-source>
					<ejb-name>ShipEJB</ejb-name>
				</relationship-role-source>
			</ejb-relationship-role>
		</ejb-relation>	

		<ejb-relation>
			<ejb-relation-name>Cruise-Reservation</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Cruise-has-many-Reservations
				</ejb-relationship-role-name>
				<multiplicity>One</multiplicity>	
				<relationship-role-source>
					<ejb-name>CruiseEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>reservations</cmr-field-name>
					<cmr-field-type>java.util.Collection</cmr-field-type>
				</cmr-field>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Reservation-has-a-Cruise
				</ejb-relationship-role-name>
				<multiplicity>Many</multiplicity>	
				<relationship-role-source>
					<ejb-name>ReservationEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>cruise</cmr-field-name>
				</cmr-field>
			</ejb-relationship-role>
		</ejb-relation>

		<ejb-relation>
			<ejb-relation-name>Cabin-Ship</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Cabin-has-a-Ship
				</ejb-relationship-role-name>
				<multiplicity>Many</multiplicity>					
				<relationship-role-source>
					<ejb-name>CabinEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>ship</cmr-field-name>
				</cmr-field>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Ship-has-many-Cabins
				</ejb-relationship-role-name>
				<multiplicity>One</multiplicity>
				<relationship-role-source>
					<ejb-name>ShipEJB</ejb-name>
				</relationship-role-source>
			</ejb-relationship-role>
		</ejb-relation>				

		<ejb-relation>
			<ejb-relation-name>Cabin-Reservation</ejb-relation-name>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Cabin-has-many-Reservations
				</ejb-relationship-role-name>
				<multiplicity>Many</multiplicity>
				<relationship-role-source>
					<ejb-name>CabinEJB</ejb-name>
				</relationship-role-source>
			</ejb-relationship-role>
			<ejb-relationship-role>
				<ejb-relationship-role-name>
					Reservation-has-many-Cabins
				</ejb-relationship-role-name>
				<multiplicity>Many</multiplicity>
				<relationship-role-source>
					<ejb-name>ReservationEJB</ejb-name>
				</relationship-role-source>
				<cmr-field>
					<cmr-field-name>cabins</cmr-field-name>
					<cmr-field-type>java.util.Set</cmr-field-type>
			</cmr-field>
			</ejb-relationship-role>
		</ejb-relation>

    </relationships>

    <assembly-descriptor>
        <security-role>
            <role-name>Employees</role-name>
        </security-role>
        <method-permission>
            <role-name>Employees</role-name>
            <method>
                <ejb-name>CustomerEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>AddressEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>CreditCardEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>PhoneEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>CruiseEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>ShipEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>ReservationEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>CabinEJB</ejb-name>
                <method-name>*</method-name>
            </method>
        </method-permission>
        <container-transaction>
            <method>
                <ejb-name>CustomerEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>AddressEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>CreditCardEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>PhoneEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>CruiseEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>ShipEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>ReservationEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <method>
                <ejb-name>CabinEJB</ejb-name>
                <method-name>*</method-name>
            </method>
            <trans-attribute>Required</trans-attribute>
        </container-transaction>
    </assembly-descriptor>  

</ejb-jar>
