<HTML>
<HEAD>
<TITLE>Implementation</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="..\icons\cover75.gif" alt="Cover" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in Java</b><br>
<A NAME="tex2html5543" HREF="page296.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html5541" HREF="page294.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html5537" HREF="page294.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html5545" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html5546" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <BR><HR>
<H3><A NAME="SECTION0010681000000000000000">Implementation</A></H3>
<P>
Program&nbsp;<A HREF="page295.html#progExpressionTreea"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A> introduces the <tt>ExpressionTree</tt> class.
This class provides a static method,
called <tt>parsePostfix</tt>,
which translates a postfix expression to an infix expression
using the method described above.
This method reads an expression from the an input stream
one character at at time.
The expression is assumed to be a syntactically valid
postfix expression comprised of
single-digit numbers, single-letter variables,
and the binary operators <tt>+</tt>, <tt>-</tt>, <tt>*</tt>, and <tt>/</tt>.
<P>
<P><A NAME="17046">&#160;</A><A NAME="progExpressionTreea">&#160;</A> <IMG WIDTH=575 HEIGHT=561 ALIGN=BOTTOM ALT="program17043" SRC="img1167.gif"  ><BR>
<STRONG>Program:</STRONG> Binary tree application--postfix to infix conversion.<BR>
<P>
<P>
Since only binary operators are allowed,
the resulting expression tree is a binary tree.
Consequently,
the <tt>ExpressionTree</tt> class extends the <tt>BinaryTree</tt> class
introduced in Program&nbsp;<A HREF="page288.html#progBinaryTreea"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>.
<P>
The main program loop, lines&nbsp;13-25,
reads characters from the input stream one at a time.
If a letter or a digit is found,
a new tree with the character as its root is created
and pushed onto the stack (line&nbsp;17).
If an operator is found,
a new tree is created with the operator as its root (line&nbsp;20).
Next, two trees are popped from the stack
and attached to the new tree which is then pushed onto the stack
(lines&nbsp;21-23).
<P>
When the <tt>parsePostfix</tt> method encounters the end-of-file,
its main loop terminates.
The resulting expression tree is popped from the stack and returned
from the <tt>parsePostfix</tt> method.
<P>
Program&nbsp;<A HREF="page295.html#progExpressionTreeb"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A> defines the <tt>toString</tt> method
for the <tt>ExpressionTree</tt> class.
This method can be used to print out the expression
represented by the tree.
<P>
<P><A NAME="17060">&#160;</A><A NAME="progExpressionTreeb">&#160;</A> <IMG WIDTH=575 HEIGHT=390 ALIGN=BOTTOM ALT="program17057" SRC="img1168.gif"  ><BR>
<STRONG>Program:</STRONG> Binary tree application--printing infix expressions.<BR>
<P>
<P>
The <tt>toString</tt> method constructs a string that represents
the expression using a <tt>PrePostVisitor</tt>
which does a depth-first traversal
and accumulates its result in a string buffer like this:
At each non-terminal node of the expression tree,
the depth-first traversal first calls <tt>preVisit</tt>,
which appends a left parenthesis to the string buffer.
In between the traversals of the left and right subtrees,
the <tt>inVisit</tt> method is called,
which appends a textual representation of the object contained within the node
to the string buffer.
Finally, after traversing the right subtree,
<tt>postVisit</tt> appends a right parenthesis to the string buffer.
Given the input <tt>ab/cd-e*+</tt>,
the program constructs the expression tree as shown in Figure&nbsp;<A HREF="page294.html#figtree10"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>,
and then forms the infix expression
<P> <IMG WIDTH=363 HEIGHT=13 ALIGN=BOTTOM ALT="displaymath63144" SRC="img1169.gif"  ><P>
<P>
The running time of the <tt>parsePostfix</tt> method depends upon
the number of symbols in the input.
The running time for one iteration the main loop is <I>O</I>(1).
Therefore, the time required to construct the expression tree
given <I>n</I> input symbols is <I>O</I>(<I>n</I>).
The <tt>depthFirstTraversal</tt> method
visits each node of the expression tree exactly once
and a constant amount of work is required to print a node.
As a result, printing the infix expression is also <I>O</I>(<I>n</I>)
where <I>n</I> is the number of input symbols.
<P>
The output expression contains all of the input symbols
plus the parentheses added by the <tt>PutInfix</tt> method.
It can be shown that a valid postfix expression that contains <I>n</I> symbols,
always has (<I>n</I>-1)/2 binary operators and (<I>n</I>+1)/2 operands
(Exercise&nbsp;<A HREF="page296.html#exercisetreespostfix"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>).
Hence, the expression tree contains (<I>n</I>-1)/2 non-terminal nodes
and since a pair of parentheses is added for each non-terminal node
in the expression tree,
the output string contains 2<I>n</I>-1=<I>O</I>(<I>n</I>) symbols altogether.
Therefore, the overall running time needed to translate
a postfix expression comprised of <I>n</I> symbols to an infix expression is <I>O</I>(<I>n</I>).
<P>
<HR><A NAME="tex2html5543" HREF="page296.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html5541" HREF="page294.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html5537" HREF="page294.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html5545" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html5546" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <P><ADDRESS>
<img src="..\icons\bruno.gif" alt="Bruno" align=right>
<a href="..\copyright.html">Copyright &#169; 1998</a> by <a href="..\signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>
