<HTML>
<HEAD>
<TITLE>Hashing Containers</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="..\icons\cover75.gif" alt="Cover" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in Java</b><br>
<A NAME="tex2html4625" HREF="page222.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html4623" HREF="page217.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html4617" HREF="page220.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html4627" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html4628" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <BR><HR>
<H2><A NAME="SECTION009340000000000000000">Hashing Containers</A></H2>
<P>
As explained in Section&nbsp;<A HREF="page118.html#secadtscontainers"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>,
a container is an object which contains other objects.
The <tt>AbstractContainer</tt> class
introduced in Program&nbsp;<A HREF="page119.html#progAbstractContainera"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>
implements the <tt>Container</tt> interface defined in Program&nbsp;<A HREF="page118.html#progContainera"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>.
In this section we show how to define a <tt>hashCode</tt> method
in the <tt>AbstractContainer</tt> class
that computes a suitable hash function on any container.
<P>
Given a container <I>c</I> which contains <I>n</I> objects,
 <IMG WIDTH=14 HEIGHT=15 ALIGN=MIDDLE ALT="tex2html_wrap_inline61662" SRC="img920.gif"  >,  <IMG WIDTH=14 HEIGHT=15 ALIGN=MIDDLE ALT="tex2html_wrap_inline61662" SRC="img920.gif"  >, ...,  <IMG WIDTH=14 HEIGHT=15 ALIGN=MIDDLE ALT="tex2html_wrap_inline61666" SRC="img921.gif"  >,
we can define the hash function <I>f</I>(<I>c</I>) as follows:
<P><A NAME="eqnhashingcontainer">&#160;</A> <IMG WIDTH=500 HEIGHT=48 ALIGN=BOTTOM ALT="equation10828" SRC="img922.gif"  ><P>
That is, to hash a container,
simply compute the sum of the hash values of the contained objects.
<P>
Program&nbsp;<A HREF="page221.html#progAbstractContainerc"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A> gives the code 
for the <tt>hashCode</tt> method of the <tt>AbstractContainer</tt> class.
This method makes use of the <tt>accept</tt> method to cause a visitor
to visit all of the objects contained in the container.
When the visitor visits an object,
it calls that object's <tt>hashCode</tt> method
and accumulates the result.
<P>
<P><A NAME="10984">&#160;</A><A NAME="progAbstractContainerc">&#160;</A> <IMG WIDTH=575 HEIGHT=447 ALIGN=BOTTOM ALT="program10838" SRC="img923.gif"  ><BR>
<STRONG>Program:</STRONG> <tt>AbstractContainer</tt> class <tt>hashCode</tt> method.<BR>
<P>
<P>
Since the <tt>accept</tt> method is an abstract method,
every concrete class derived from the <tt>AbstractContainer</tt> class
must provide an appropriate implementation.
However, it is <em>not</em> necessary for any derived class to redefine
the behavior of the <tt>hashCode</tt> method--the behavior inherited from the <tt>AbstractContainer</tt> class
is completely generic and should suffice for all concrete container classes.
<P>
There is a slight problem with Equation&nbsp;<A HREF="page221.html#eqnhashingcontainer"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>.
Different container types that happen to contain identical objects
produce exactly the same hash value.
For example, an empty stack and an empty list both produce the same hash value.
We have avoided this situation in Program&nbsp;<A HREF="page221.html#progAbstractContainerc"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>
by adding to the sum the value obtained from hashing the
class of the container itself.
<P>
<HR><A NAME="tex2html4625" HREF="page222.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html4623" HREF="page217.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html4617" HREF="page220.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html4627" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html4628" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <P><ADDRESS>
<img src="..\icons\bruno.gif" alt="Bruno" align=right>
<a href="..\copyright.html">Copyright &#169; 1998</a> by <a href="..\signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>
