<HTML>
<HEAD>
<TITLE>Average Running Time</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="..\icons\cover75.gif" alt="Cover" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in Java</b><br>
<A NAME="tex2html7903" HREF="page487.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html7901" HREF="page483.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html7895" HREF="page485.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html7905" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html7906" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <BR><HR>
<H2><A NAME="SECTION0016320000000000000000">Average Running Time</A></H2>
<A NAME="secsortingavg">&#160;</A>
<P>
The best case running time of insertion sorting is <I>O</I>(<I>n</I>)
but the worst-case running time is  <IMG WIDTH=39 HEIGHT=25 ALIGN=MIDDLE ALT="tex2html_wrap_inline58122" SRC="img258.gif"  >.
Therefore, we might suspect that the average running time
falls somewhere in between.
In order to determine it,
we must define more precisely what we mean by the <em>average</em> running time.
A simple definition of average running time is to say that it is
the running time needed to sort the average sequence.
But what is the average sequence?
<P>
The usual way to determine the average running time of a sorting algorithm
is to consider only sequences that contain no duplicates.
Since every sorted sequence of length <I>n</I>
is simply a permutation of an unsorted one,
we can represent every such sequence by a permutation of
the sequence  <IMG WIDTH=131 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline68601" SRC="img2019.gif"  >.
When computing the average running time,
we assume that every permutation is equally likely.
Therefore, the average running time of a sorting algorithm
is the running time averaged over all permutations of the sequence <I>S</I>.
<P>
Consider a permutation  <IMG WIDTH=162 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline68445" SRC="img1993.gif"  >
of the sequence <I>S</I>.
An <em>inversion</em><A NAME=34801>&#160;</A>
in <I>P</I> consists of two elements,
say  <IMG WIDTH=13 HEIGHT=14 ALIGN=MIDDLE ALT="tex2html_wrap_inline57368" SRC="img85.gif"  > and  <IMG WIDTH=14 HEIGHT=16 ALIGN=MIDDLE ALT="tex2html_wrap_inline68613" SRC="img2020.gif"  >,
such that  <IMG WIDTH=49 HEIGHT=20 ALIGN=MIDDLE ALT="tex2html_wrap_inline68615" SRC="img2021.gif"  > but <I>i</I><I>&lt;</I><I>j</I>.
That is, an inversion in <I>P</I> is a pair of elements that are in the wrong order.
For example, the permutation  <IMG WIDTH=66 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline68621" SRC="img2022.gif"  > contains three inversions--(4,3), (4,2), and (3,2).
The following theorem tells us how many inversions we can expect
in the average sequence:
<P>
<BLOCKQUOTE> <b>Theorem</b><A NAME="theoremsortingi">&#160;</A>
The average number of inversions in a permutation of <I>n</I>
distinct elements is <I>n</I>(<I>n</I>-1)/4.
</BLOCKQUOTE>
<P>
	extbfProof
Let <I>S</I> be an arbitrary sequence of <I>n</I> distinct elements
and let  <IMG WIDTH=19 HEIGHT=14 ALIGN=BOTTOM ALT="tex2html_wrap_inline68637" SRC="img2023.gif"  > be the same sequence, but in reverse.
<P>
For example, if  <IMG WIDTH=157 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline68405" SRC="img1990.gif"  >,
then  <IMG WIDTH=203 HEIGHT=27 ALIGN=MIDDLE ALT="tex2html_wrap_inline68641" SRC="img2024.gif"  >.
<P>
Consider any pair of distinct elements in S,
say  <IMG WIDTH=9 HEIGHT=15 ALIGN=MIDDLE ALT="tex2html_wrap_inline68467" SRC="img2000.gif"  > and  <IMG WIDTH=12 HEIGHT=16 ALIGN=MIDDLE ALT="tex2html_wrap_inline68469" SRC="img2001.gif"  > where  <IMG WIDTH=93 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline68463" SRC="img1998.gif"  >.
There are two distinct possibilities:
Either  <IMG WIDTH=46 HEIGHT=20 ALIGN=MIDDLE ALT="tex2html_wrap_inline68649" SRC="img2025.gif"  >, in which case  <IMG WIDTH=44 HEIGHT=27 ALIGN=MIDDLE ALT="tex2html_wrap_inline68651" SRC="img2026.gif"  > is an inversion is  <IMG WIDTH=19 HEIGHT=14 ALIGN=BOTTOM ALT="tex2html_wrap_inline68637" SRC="img2023.gif"  >;
or  <IMG WIDTH=45 HEIGHT=20 ALIGN=MIDDLE ALT="tex2html_wrap_inline68655" SRC="img2027.gif"  >, in which case  <IMG WIDTH=44 HEIGHT=27 ALIGN=MIDDLE ALT="tex2html_wrap_inline68657" SRC="img2028.gif"  > is an inversion is <I>S</I>.
Therefore, every pair contributes exactly
one inversion either to <I>S</I> or to  <IMG WIDTH=19 HEIGHT=14 ALIGN=BOTTOM ALT="tex2html_wrap_inline68637" SRC="img2023.gif"  >.
<P>
The total number of pairs in <I>S</I> is  <IMG WIDTH=116 HEIGHT=27 ALIGN=MIDDLE ALT="tex2html_wrap_inline68667" SRC="img2029.gif"  >.
Since every such pair contributes an inversion either to <I>S</I> or to  <IMG WIDTH=19 HEIGHT=14 ALIGN=BOTTOM ALT="tex2html_wrap_inline68637" SRC="img2023.gif"  >,
we expect <em>on average</em> that half of the inversions will appear in <I>S</I>.
Therefore, the average number of inversions in a sequence of <I>n</I>
distinct elements is <I>n</I>(<I>n</I>-1)/4.
<P>
What do inversions have to do with sorting?
As a list is sorted, inversions are removed.
In fact, since the inner loop of the insertion sort method
swaps <em>adjacent</em> array elements,
inversions are removed <em>one at a time</em>!
Since a swap takes constant time,
and since the average number of inversions is <I>n</I>(<I>n</I>-1)/4,
the <em>average</em> running time
for the insertion sort method is  <IMG WIDTH=39 HEIGHT=25 ALIGN=MIDDLE ALT="tex2html_wrap_inline58122" SRC="img258.gif"  >.
<P>
<HR><A NAME="tex2html7903" HREF="page487.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html7901" HREF="page483.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html7895" HREF="page485.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html7905" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html7906" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <P><ADDRESS>
<img src="..\icons\bruno.gif" alt="Bruno" align=right>
<a href="..\copyright.html">Copyright &#169; 1998</a> by <a href="..\signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>
