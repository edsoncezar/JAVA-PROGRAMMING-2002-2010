<HTML>
<HEAD>
<TITLE>Array Subscript Calculations</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="..\icons\cover75.gif" alt="Cover" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in Java</b><br>
<A NAME="tex2html2994" HREF="page91.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html2992" HREF="page89.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html2986" HREF="page89.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html2996" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html2997" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <BR><HR>
<H2><A NAME="SECTION005210000000000000000">Array Subscript Calculations</A></H2>
<P>
The memory of a computer is essentially a one-dimensional array--the memory address is the array subscript.
Therefore, a natural way to implement a multi-dimensional
array is to store its elements in a one-dimensional array.
In order to do this,
we need a mapping from the <I>n</I> subscript expressions
used to access an element of the multi-dimensional array
to the one subscript expression used to access the one-dimensional array.
For example, suppose we wish to represent a  <IMG WIDTH=33 HEIGHT=22 ALIGN=MIDDLE ALT="tex2html_wrap_inline59966" SRC="img596.gif"  > array of of <tt>int</tt>s,
<tt>a</tt>, using a one-dimensional array like this:
<PRE>int[] b = new int[6];</PRE>
Then we need to determine which element of <tt>b</tt>, say <tt>b[k]</tt>,
will be accessed given a reference of the form <tt>a[i][j]</tt>.
That is, we need the mapping <I>f</I> such that  <IMG WIDTH=74 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline59970" SRC="img597.gif"  >.
<P>
The mapping function determines the way in which the elements
of the array are stored in memory.
The most common way to represent an array is in
<em>row-major order</em><A NAME=2825>&#160;</A>,
also known as <em>lexicographic order</em><A NAME=2827>&#160;</A>.
For example, consider the  <IMG WIDTH=33 HEIGHT=22 ALIGN=MIDDLE ALT="tex2html_wrap_inline59966" SRC="img596.gif"  > two-dimensional array.
The row-major layout of this array is shown in Figure&nbsp;<A HREF="page90.html#figrowmajor"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>.
<P>
<P><A NAME="3027">&#160;</A><A NAME="figrowmajor">&#160;</A> <IMG WIDTH=575 HEIGHT=214 ALIGN=BOTTOM ALT="figure2829" SRC="img598.gif"  ><BR>
<STRONG>Figure:</STRONG> Row-major order layout of a 2D array.<BR>
<P>
<P>
In row-major layout, it is the right-most subscript expression
(the column index) that increases the fastest.
As a result, the elements of the rows of the matrix
end up stored in contiguous memory locations.
In Figure&nbsp;<A HREF="page90.html#figrowmajor"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>,
the first element of the first row is at position <tt>b[0]</tt>.
The first element of the <em>second</em> row is at position <tt>b[3]</tt>,
since there are 3 elements in each row.
<P>
We can now generalize this to an arbitrary <I>n</I>-dimensional array.
Suppose we have an <I>n</I>-D array <tt>a</tt> with dimensions
<P> <IMG WIDTH=312 HEIGHT=14 ALIGN=BOTTOM ALT="displaymath59962" SRC="img599.gif"  ><P>
Then, the position of the element
<tt>a[ <IMG WIDTH=11 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline59978" SRC="img600.gif"  >][ <IMG WIDTH=12 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline59980" SRC="img601.gif"  >][ <IMG WIDTH=17 HEIGHT=2 ALIGN=BOTTOM ALT="tex2html_wrap_inline59982" SRC="img602.gif"  >][ <IMG WIDTH=12 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline59984" SRC="img603.gif"  >]</tt> is given by
<P><A NAME="eqnfdsaddress">&#160;</A> <IMG WIDTH=500 HEIGHT=46 ALIGN=BOTTOM ALT="equation3036" SRC="img604.gif"  ><P>
where
<P><A NAME="eqnfdsfactors">&#160;</A> <IMG WIDTH=500 HEIGHT=48 ALIGN=BOTTOM ALT="equation3040" SRC="img605.gif"  ><P>
<P>
The running time required to calculate the position appears to be  <IMG WIDTH=39 HEIGHT=25 ALIGN=MIDDLE ALT="tex2html_wrap_inline58122" SRC="img258.gif"  >
since the position is the sum of <I>n</I> terms and for each term
we need to compute  <IMG WIDTH=12 HEIGHT=25 ALIGN=MIDDLE ALT="tex2html_wrap_inline59990" SRC="img606.gif"  >, which  requires <I>O</I>(<I>n</I>) multiplications
in the worst case.
However, the factors  <IMG WIDTH=12 HEIGHT=25 ALIGN=MIDDLE ALT="tex2html_wrap_inline59990" SRC="img606.gif"  > are determined
solely from the dimensions of the array.
Therefore, we need only compute the factors once.
Assuming that the factors have been precomputed,
the position calculation can be done in <I>O</I>(<I>n</I>) time
using the following algorithm:
<P>
<PRE>int offset = 0;
for (int j = 1; j <= n; ++j)
    offset +=  <IMG WIDTH=11 HEIGHT=17 ALIGN=BOTTOM ALT="tex2html_wrap59958" SRC="img607.gif"  > *  <IMG WIDTH=9 HEIGHT=17 ALIGN=BOTTOM ALT="tex2html_wrap59959" SRC="img608.gif"  >;
</PRE><HR><A NAME="tex2html2994" HREF="page91.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html2992" HREF="page89.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html2986" HREF="page89.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html2996" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html2997" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <P><ADDRESS>
<img src="..\icons\bruno.gif" alt="Bruno" align=right>
<a href="..\copyright.html">Copyright &#169; 1998</a> by <a href="..\signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>
