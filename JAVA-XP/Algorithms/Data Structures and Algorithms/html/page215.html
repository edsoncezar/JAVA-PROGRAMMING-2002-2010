<HTML>
<HEAD>
<TITLE>Multiplication Method</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="..\icons\cover75.gif" alt="Cover" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in Java</b><br>
<A NAME="tex2html4550" HREF="page216.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html4548" HREF="page212.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html4542" HREF="page214.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html4552" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html4553" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <BR><HR>
<H2><A NAME="SECTION009230000000000000000">Multiplication Method</A></H2>
<P>
A very simple variation on the middle-square method that
alleviates its deficiencies is the so-called,
<em>multiplication hashing method</em><A NAME=10518>&#160;</A><A NAME=10519>&#160;</A>.
Instead of multiplying the key <I>x</I> by itself,
we multiply the key by a carefully chosen constant <I>a</I>,
and then extract the middle <I>k</I> bits from the result.
In this case,
the hashing function is
<P> <IMG WIDTH=342 HEIGHT=38 ALIGN=BOTTOM ALT="displaymath61242" SRC="img859.gif"  ><P>
<P>
What is a suitable choice for the constant <I>a</I>?
If we want to avoid the problems that the middle-square method
encounters with keys having a large number of leading or trailing zeroes,
then we should choose an <I>a</I> that has neither
leading nor trailing zeroes.
<P>
Furthermore, if we choose an <I>a</I> that is
<em>relatively prime</em><A NAME="tex2html377" HREF="footnode.html#10569"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\foot_motif.gif"></A>
to <I>W</I>,
then there exists another number <I>a</I>' such that  <IMG WIDTH=122 HEIGHT=25 ALIGN=MIDDLE ALT="tex2html_wrap_inline61270" SRC="img860.gif"  >.
In other words, <I>a</I>' is the <em>inverse</em><A NAME=10527>&#160;</A>
of <I>a</I> modulo <I>W</I>,
since the product of <I>a</I> and its inverse is one.
Such a number has the nice property that if we take a key <I>x</I>,
and multiply it by <I>a</I> to get <I>ax</I>,
we can recover the original key by multiplying the product again by <I>a</I>',
since <I>axa</I>'=<I>aa</I>'<I>x</I>=1<I>x</I>.
<P>
There are many possible constants which the desired properties.
One possibility which is suited for 32-bit arithmetic (i.e.,  <IMG WIDTH=58 HEIGHT=13 ALIGN=BOTTOM ALT="tex2html_wrap_inline61292" SRC="img861.gif"  >)
is  <IMG WIDTH=117 HEIGHT=12 ALIGN=BOTTOM ALT="tex2html_wrap_inline61294" SRC="img862.gif"  >.
The binary representation of <I>a</I> is
<P> <IMG WIDTH=392 HEIGHT=12 ALIGN=BOTTOM ALT="displaymath61243" SRC="img863.gif"  ><P>
This number has neither many leading nor trailing zeroes.
Also, this value of <I>a</I> and  <IMG WIDTH=58 HEIGHT=13 ALIGN=BOTTOM ALT="tex2html_wrap_inline61292" SRC="img861.gif"  > are relatively prime
and the inverse of <I>a</I> modulo <I>W</I> is  <IMG WIDTH=111 HEIGHT=12 ALIGN=BOTTOM ALT="tex2html_wrap_inline61306" SRC="img864.gif"  >.
<P>
The following code fragment illustrates
the multiplication method of hashing:
<PRE>public class MultiplicationMethod
{
    static final int k = 10; // M==1024
    static final int w = 32;
    static final int a = (int) 2654435769L;

    public static int h (int x)
	{ return (x * a) &gt;&gt;&gt; (w - k); }
}</PRE>
The code is a simple modification of the middle-square version.
Nevertheless, the running time remains <I>O</I>(1).
<P>
<HR><A NAME="tex2html4550" HREF="page216.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html4548" HREF="page212.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html4542" HREF="page214.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html4552" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html4553" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <P><ADDRESS>
<img src="..\icons\bruno.gif" alt="Bruno" align=right>
<a href="..\copyright.html">Copyright &#169; 1998</a> by <a href="..\signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>
