<HTML>
<HEAD>
<TITLE>Unsuccessful Search</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="..\icons\cover75.gif" alt="Cover" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in Java</b><br>
<A NAME="tex2html5711" HREF="page309.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html5709" HREF="page305.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html5703" HREF="page307.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html5713" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html5714" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <BR><HR>
<H2><A NAME="SECTION0011330000000000000000">Unsuccessful Search</A></H2>
<P>
All successful searches terminate when the object of the search is found.
Therefore, all successful searches terminate at an internal node.
In contrast, all unsuccessful searches terminate at an external node.
In terms of the binary tree shown in Figure&nbsp;<A HREF="page301.html#figtree12"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>,
a successful search terminates in one of the nodes
which are drawn as a circles
and an unsuccessful search terminates in one of the boxes.
<P>
The preceding analysis shows that the average number of nodes visited
during a successful search depends on the
<em>internal path length</em><A NAME=18395>&#160;</A><A NAME=18396>&#160;</A>,
which is simply the sum of the depths of all the internal nodes.
Similarly, the average number of nodes visited during an unsuccessful search
depends on the <em>external path length</em><A NAME=18398>&#160;</A><A NAME=18399>&#160;</A>,
which is the sum of the depths of all the external nodes.
Fortunately, there is a simple relationship between the internal
path length and the external path length of a binary tree.
<P>
<BLOCKQUOTE> <b>Theorem</b><A NAME="theoremsrchtreei">&#160;</A>
Consider a binary tree <I>T</I> with <I>n</I> internal nodes
and an internal path length of <I>I</I>.
The external path length of <I>T</I> is given by
<P> <IMG WIDTH=291 HEIGHT=13 ALIGN=BOTTOM ALT="displaymath63526" SRC="img1227.gif"  ><P></BLOCKQUOTE>
<P>
In other words, Theorem&nbsp;<A HREF="page308.html#theoremsrchtreei"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A> says that the
<em>difference</em> between the internal path length
and the external path length of a binary tree with <I>n</I> internal nodes
is <I>E</I>-<I>I</I>=2<I>n</I>.
<P>
	extbfProof (By induction).
<P>
<b>Base Case</b>
Consider a binary tree with one internal node and internal path length of zero.
Such a tree has exactly two empty subtrees immediately below the root and
its external path length is two.
Therefore, the theorem holds for <I>n</I>=1.
<P>
<b>Inductive Hypothesis</b>
Assume that the theorem holds for  <IMG WIDTH=115 HEIGHT=22 ALIGN=MIDDLE ALT="tex2html_wrap_inline63542" SRC="img1228.gif"  > for some  <IMG WIDTH=36 HEIGHT=26 ALIGN=MIDDLE ALT="tex2html_wrap_inline58520" SRC="img353.gif"  >.
Consider an arbitrary tree,  <IMG WIDTH=16 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63546" SRC="img1229.gif"  >, that has <I>k</I> internal nodes.
According to Theorem&nbsp;<A HREF="page257.html#theoremtreesi"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>,  <IMG WIDTH=16 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63546" SRC="img1229.gif"  > has <I>k</I>+1 external nodes.
Let  <IMG WIDTH=13 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63554" SRC="img1230.gif"  > and  <IMG WIDTH=17 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63556" SRC="img1231.gif"  > be the internal and external path length of  <IMG WIDTH=16 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63546" SRC="img1229.gif"  >,
respectively,
According to the inductive hypothesis,  <IMG WIDTH=90 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline63560" SRC="img1232.gif"  >.
<P>
Consider what happens when we create a new tree  <IMG WIDTH=33 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline63562" SRC="img1233.gif"  >
by removing an external node from  <IMG WIDTH=16 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63546" SRC="img1229.gif"  >
and replacing it with an internal node that has two empty subtrees.
Clearly, the resulting tree has <I>k</I>+1 internal nodes.
Furthermore, suppose the external node we remove is at depth <I>d</I>.
Then the internal path length of  <IMG WIDTH=33 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline63562" SRC="img1233.gif"  > is  <IMG WIDTH=94 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline63572" SRC="img1234.gif"  >
and the external path length of  <IMG WIDTH=33 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline63562" SRC="img1233.gif"  > is
 <IMG WIDTH=274 HEIGHT=26 ALIGN=MIDDLE ALT="tex2html_wrap_inline63576" SRC="img1235.gif"  >.
<P>
The difference between the internal path length and the external
path length of  <IMG WIDTH=33 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline63562" SRC="img1233.gif"  > is
<P> <IMG WIDTH=500 HEIGHT=63 ALIGN=BOTTOM ALT="eqnarray18416" SRC="img1236.gif"  ><P>
Therefore, by induction on <I>k</I>,
the difference between the internal path length
and the external path length of a binary tree with <I>n</I> internal nodes is 2<I>n</I>
for all  <IMG WIDTH=38 HEIGHT=25 ALIGN=MIDDLE ALT="tex2html_wrap_inline58476" SRC="img341.gif"  >.
<P>
Since the difference between the internal and external path lengths
of any tree with <I>n</I> internal nodes is 2<I>n</I>,
then we can say the same thing about the <em>average</em> internal
and external path lengths averaged over all search trees.
Therefore, <I>E</I>(<I>n</I>), the average external path length of a binary search tree
is given by
<P> <IMG WIDTH=500 HEIGHT=65 ALIGN=BOTTOM ALT="eqnarray18421" SRC="img1237.gif"  ><P>
<P>
A binary search tree with internal <I>n</I> nodes has <I>n</I>+1 external nodes.
Thus, the average depth of an external node of a binary search tree
with <I>n</I> internal nodes,  <IMG WIDTH=8 HEIGHT=10 ALIGN=BOTTOM ALT="tex2html_wrap_inline63600" SRC="img1238.gif"  >, is given by
<P> <IMG WIDTH=500 HEIGHT=87 ALIGN=BOTTOM ALT="eqnarray18424" SRC="img1239.gif"  ><P>
<P>
These very nice results are the <em>raison d'&#234;tre</em> for binary search trees.
What they say is that the average number of nodes visited
during either a successful or an unsuccessful search
in the average binary search tree having
<I>n</I> nodes is  <IMG WIDTH=55 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline58840" SRC="img400.gif"  >.
We must remember, however,
that these results are premised on the assumption that all
possible search trees of <I>n</I> nodes are equiprobable.
It is important to be aware that in practice
this may not always be the case.
<P>
<HR><A NAME="tex2html5711" HREF="page309.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html5709" HREF="page305.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html5703" HREF="page307.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html5713" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html5714" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <P><ADDRESS>
<img src="..\icons\bruno.gif" alt="Bruno" align=right>
<a href="..\copyright.html">Copyright &#169; 1998</a> by <a href="..\signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>
