<HTML>
<HEAD>
<TITLE>Comparing Trees</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="..\icons\cover75.gif" alt="Cover" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in Java</b><br>
<A NAME="tex2html5522" HREF="page294.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html5520" HREF="page268.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html5514" HREF="page292.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html5524" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html5525" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <BR><HR>
<H2><A NAME="SECTION0010670000000000000000">Comparing Trees</A></H2>
<P>
A problem which is relatively easy to solve is determining 
if two trees are equivalent.
Two trees are
<em>equivalent</em><A NAME=16449>&#160;</A><A NAME=16450>&#160;</A>
if they both have the same topology
and if the objects contained in corresponding nodes are equal.
Clearly, two empty trees are equivalent.
Consider two non-empty binary trees
 <IMG WIDTH=149 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline62974" SRC="img1148.gif"  > and  <IMG WIDTH=152 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline62976" SRC="img1149.gif"  >.
Equivalence of trees is given by
<P> <IMG WIDTH=431 HEIGHT=13 ALIGN=BOTTOM ALT="displaymath62972" SRC="img1150.gif"  ><P>
A simple, recursive algorithm suffices to test the equivalence of trees.
<P>
Since the <tt>BinaryTree</tt> class is ultimately
derived from the <tt>AbstractObject</tt> class
introduced in Program&nbsp;<A HREF="page116.html#progAbstractObjecta"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>,
it must provide a <tt>compareTo</tt> method to compare binary trees.
Recall that the <tt>compareTo</tt> method is
invoked by the <tt>compare</tt> method
when the latter is used to compare two objects,
say <tt>obj1</tt> and <tt>obj2</tt> like this:
<PRE>int result = obj1.compare (obj2);</PRE>
The <tt>compareTo</tt> method returns
a negative number if  <IMG WIDTH=88 HEIGHT=21 ALIGN=MIDDLE ALT="tex2html_wrap_inline60166" SRC="img649.gif"  >;
a positive number if  <IMG WIDTH=87 HEIGHT=21 ALIGN=MIDDLE ALT="tex2html_wrap_inline60168" SRC="img650.gif"  >; and
zero if  <IMG WIDTH=88 HEIGHT=21 ALIGN=MIDDLE ALT="tex2html_wrap_inline62982" SRC="img1151.gif"  >.
<P>
So what we need is to define a
<em>total order</em><A NAME=16475>&#160;</A>
relation on binary trees.
Fortunately, it is possible to define such a relation for binary trees
provided that the objects contained in the nodes of the trees
are drawn from a totally ordered set.
<P>
<BLOCKQUOTE> <b>Theorem</b><A NAME="theoremtreesiv">&#160;</A>
Consider two binary trees  <IMG WIDTH=18 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline62984" SRC="img1152.gif"  > and  <IMG WIDTH=19 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline62986" SRC="img1153.gif"  > and
the relation <I>&lt;</I> given by
<P> <IMG WIDTH=525 HEIGHT=88 ALIGN=BOTTOM ALT="equation16479" SRC="img1154.gif"  ><P>
where  <IMG WIDTH=18 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline62984" SRC="img1152.gif"  > is either  <IMG WIDTH=6 HEIGHT=25 ALIGN=MIDDLE ALT="tex2html_wrap_inline62528" SRC="img1075.gif"  > or  <IMG WIDTH=140 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline62994" SRC="img1155.gif"  >
and  <IMG WIDTH=19 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline62986" SRC="img1153.gif"  > is  <IMG WIDTH=141 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline62998" SRC="img1156.gif"  >.
The relation <I>&lt;</I> is a total order.
</BLOCKQUOTE>
<P>
The proof of Theorem&nbsp;<A HREF="page293.html#theoremtreesiv"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A> is straightforward albeit tedious.
Essentially we need to show the following:
<UL><LI> For any two distinct trees  <IMG WIDTH=18 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline62984" SRC="img1152.gif"  > and  <IMG WIDTH=19 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline62986" SRC="img1153.gif"  >, such that  <IMG WIDTH=60 HEIGHT=25 ALIGN=MIDDLE ALT="tex2html_wrap_inline63006" SRC="img1157.gif"  >,
	either  <IMG WIDTH=59 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63008" SRC="img1158.gif"  > or  <IMG WIDTH=60 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63010" SRC="img1159.gif"  >.<LI> For any three distinct trees  <IMG WIDTH=18 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline62984" SRC="img1152.gif"  >,  <IMG WIDTH=19 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline62986" SRC="img1153.gif"  >, and  <IMG WIDTH=18 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63016" SRC="img1160.gif"  >,
	if  <IMG WIDTH=59 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63008" SRC="img1158.gif"  > and  <IMG WIDTH=60 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63020" SRC="img1161.gif"  > then  <IMG WIDTH=59 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline63022" SRC="img1162.gif"  >.
</UL>
The details of the proof are left as
an exercise for the reader (Exercise&nbsp;<A HREF="page296.html#exercisetreestotal"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>).
<P>
Program&nbsp;<A HREF="page293.html#progBinaryTreee"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A> gives an implementation of the <tt>compareTo</tt>
method for the <tt>BinaryTree</tt> class.
This implementation is based on the total order relation <I>&lt;</I> defined
in Theorem&nbsp;<A HREF="page293.html#theoremtreesiv"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>.
The argument of the <tt>compareTo</tt> method can be any <tt>Object</tt> instance.
However, normally that object will be another <tt>BinaryTree</tt> instance.
Therefore, the cast on line&nbsp;10 is normally successful.
<P>
<P><A NAME="16581">&#160;</A><A NAME="progBinaryTreee">&#160;</A> <IMG WIDTH=575 HEIGHT=524 ALIGN=BOTTOM ALT="program16508" SRC="img1163.gif"  ><BR>
<STRONG>Program:</STRONG> <tt>BinaryTree</tt> class <tt>compareTo</tt> method.<BR>
<P>
<P>
The <tt>compareTo</tt> method compares the two binary trees
<tt>this</tt> and <tt>arg</tt>.
If they are both empty trees, <tt>compareTo</tt> returns zero.
If <tt>this</tt> is empty and <tt>arg</tt> is not,
<tt>compareTo</tt> returns -1; and
if <tt>arg</tt> is empty and <tt>this</tt> is not,
it returns 1.
<P>
Otherwise, both trees are non-empty.
In this case, <tt>compareTo</tt> first compares their respective roots.
We assume that the roots implement the <tt>Comparable</tt> interface
defined in Program&nbsp;<A HREF="page115.html#progComparablea"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>
and, therefore, we use the <tt>compare</tt> method to compare them.
If the roots are equal, then the left subtrees are compared.
Then, if the roots and the left subtrees are equal,
the right subtrees are compared.
<P>
Clearly the worst-case running occurs when comparing identical trees.
Suppose there are exactly <I>n</I> nodes in each tree.
Then, the running time of the <tt>compareTo</tt> method is
 <IMG WIDTH=111 HEIGHT=26 ALIGN=MIDDLE ALT="tex2html_wrap_inline63032" SRC="img1164.gif"  >,
where  <IMG WIDTH=48 HEIGHT=26 ALIGN=MIDDLE ALT="tex2html_wrap_inline60522" SRC="img752.gif"  > is the time needed to compare the objects contained
in the nodes of the trees.
<P>
<HR><A NAME="tex2html5522" HREF="page294.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html5520" HREF="page268.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html5514" HREF="page292.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html5524" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html5525" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <P><ADDRESS>
<img src="..\icons\bruno.gif" alt="Bruno" align=right>
<a href="..\copyright.html">Copyright &#169; 1998</a> by <a href="..\signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>
