<HTML>
<HEAD>
<TITLE>Implementation</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="..\icons\cover75.gif" alt="Cover" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in Java</b><br>
<A NAME="tex2html7965" HREF="page492.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html7963" HREF="page490.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html7959" HREF="page490.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html7967" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html7968" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <BR><HR>
<H3><A NAME="SECTION0016421000000000000000">Implementation</A></H3>
<P>
Program&nbsp;<A HREF="page491.html#progAbstractQuickSortera"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A> introduces
the <tt>AbstractQuickSorter</tt> class.
The <tt>AbstractQuickSorter</tt> class extends the <tt>AbstractSorter</tt> class
defined in Program&nbsp;<A HREF="page481.html#progAbstractSortera"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>.
It declares the abstract method <tt>selectPivot</tt>
the implementation of which is provided by a derived class.
<P>
<P><A NAME="37683">&#160;</A><A NAME="progAbstractQuickSortera">&#160;</A> <IMG WIDTH=575 HEIGHT=161 ALIGN=BOTTOM ALT="program37253" SRC="img2052.gif"  ><BR>
<STRONG>Program:</STRONG> <tt>AbstractQuickSorter</tt> fields.<BR>
<P>
<P>
Program&nbsp;<A HREF="page491.html#progAbstractQuickSorterb"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A> defines a <tt>sort</tt> method
of the <tt>AbstractQuickSorter</tt> class
that takes two integer arguments,
<tt>left</tt> and <tt>right</tt>,
which denote left and right ends, respectively,
of the section of the array to be sorted.
That is, this <tt>sort</tt> method sorts
<P> <IMG WIDTH=415 HEIGHT=16 ALIGN=BOTTOM ALT="displaymath68873" SRC="img2053.gif"  ><P>.
<P>
<P><A NAME="37686">&#160;</A><A NAME="progAbstractQuickSorterb">&#160;</A> <IMG WIDTH=575 HEIGHT=561 ALIGN=BOTTOM ALT="program37274" SRC="img2054.gif"  ><BR>
<STRONG>Program:</STRONG> <tt>AbstractQuickSorter</tt> class recursive <tt>sort</tt> method.<BR>
<P>
<P>
As discussed above, the <tt>AbstractQuickSorter</tt> only sorts sequences
whose length exceeds the <em>cut-off</em> value.
Since the implementation shown only works correctly
when the number of elements in
the sequence to be sorted is three or more,
the <em>cut-off</em> value of two is used (line&nbsp;6).
<P>
The algorithm begins by calling the method <tt>selectPivot</tt> which
chooses one of the elements to be the pivot (line&nbsp;8).
The implementation of <tt>selectPivot</tt> is discussed below.
All that we require here is that the value <I>p</I> returned by <tt>selectPivot</tt>
satisfies  <IMG WIDTH=124 HEIGHT=21 ALIGN=MIDDLE ALT="tex2html_wrap_inline68877" SRC="img2055.gif"  >.
Having selected an element to be the pivot,
we <em>hide</em> the pivot by swapping it with the right-most element
of the sequence (line&nbsp;9).
The pivot is <em>hidden</em> in order
to get it out of the way of the next step.
<P>
The next step partitions the remaining elements into two sequences--one comprised of values less than or equal to the pivot,
the other comprised of values greater than or equal to the pivot.
The partitioning is done using two array indices, <tt>i</tt> and <tt>j</tt>.
The first, <tt>i</tt>, starts at the left end and moves to the right;
the second, <tt>j</tt>, starts at the right end and moves to the left.
<P>
The variable <tt>i</tt> is increased
as long as <tt>array[i]</tt> is less than the pivot (line&nbsp;15).
Then the variable <tt>j</tt> is decreased
as long as <tt>array[j]</tt> is greater than the pivot (line&nbsp;16).
When <tt>i</tt> and <tt>j</tt> meet,
the partitioning is done (line&nbsp;17).
Otherwise,  <IMG WIDTH=35 HEIGHT=21 ALIGN=MIDDLE ALT="tex2html_wrap_inline68879" SRC="img2056.gif"  >
but  <IMG WIDTH=215 HEIGHT=23 ALIGN=MIDDLE ALT="tex2html_wrap_inline68881" SRC="img2057.gif"  >.
This situation is remedied
by swapping <tt>array[i]</tt> and <tt>array[j]</tt> (line&nbsp;18).
<P>
When the partitioning loop terminates,
the pivot is still in <tt>array[right]</tt>;
the value in <tt>array[i]</tt> is greater than or equal to the pivot;
everything to the left is less than or equal to the pivot; and
everything to the right is greater than or equal to the pivot.
We can now put the pivot in its proper place
by swapping it with <tt>array[i]</tt> (lines&nbsp;20-21).
This is called <em>restoring</em> the pivot.
With the pivot in its final resting place,
all we need to do is sort the subsequences
on either side of the pivot (lines&nbsp;22-25).
<P>
Program&nbsp;<A HREF="page491.html#progAbstractQuickSorterc"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A> defines the no-arg <tt>sort</tt> method
of the <tt>AbstractQuickSorter</tt> class.
The no-arg <tt>sort</tt> acts as the front end
to the recursive <tt>sort</tt> given in Program&nbsp;<A HREF="page491.html#progAbstractQuickSorterb"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>.
It calls the recursive <tt>sort</tt> method
with <tt>left</tt> set to zero
and <tt>right</tt> set to <I>n</I>-1,
where <I>n</I> is the length of the array to be sorted.
Finally, it uses a <tt>StraightInsertionSorter</tt>
to finish sorting the list.
<P>
<P><A NAME="37688">&#160;</A><A NAME="progAbstractQuickSorterc">&#160;</A> <IMG WIDTH=575 HEIGHT=218 ALIGN=BOTTOM ALT="program37324" SRC="img2058.gif"  ><BR>
<STRONG>Program:</STRONG> <tt>AbstractQuickSorter</tt> class <tt>sort</tt> method.<BR>
<P><HR><A NAME="tex2html7965" HREF="page492.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html7963" HREF="page490.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html7959" HREF="page490.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html7967" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html7968" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <P><ADDRESS>
<img src="..\icons\bruno.gif" alt="Bruno" align=right>
<a href="..\copyright.html">Copyright &#169; 1998</a> by <a href="..\signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>
