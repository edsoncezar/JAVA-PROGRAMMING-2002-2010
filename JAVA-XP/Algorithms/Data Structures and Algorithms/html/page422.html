<HTML>
<HEAD>
<TITLE>When Objects Refer to Other Objects</TITLE>
</HEAD>
<BODY bgcolor="#FFFFFF">
 <img src="..\icons\cover75.gif" alt="Cover" align=right>
<b>Data Structures and Algorithms 
with Object-Oriented Design Patterns in Java</b><br>
<A NAME="tex2html7114" HREF="page423.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html7112" HREF="page421.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html7106" HREF="page421.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html7116" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html7117" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <BR><HR>
<H2><A NAME="SECTION0014210000000000000000">When Objects Refer to Other Objects</A></H2>
<P>
The <tt>Integer</tt> objects considered in the preceding examples
are very simple objects--they contain no references to other objects.
Reference counting is an ideal strategy for garbage collecting such objects.
But what about objects that refer to other objects?
For example, consider the <tt>Association</tt> class described in Chapter&nbsp;<A HREF="page111.html#chapadts"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>
which represents a  <IMG WIDTH=77 HEIGHT=24 ALIGN=MIDDLE ALT="tex2html_wrap_inline66932" SRC="img1705.gif"  > pair.
We can still use reference counting,
provided we count all to an object
<em>including references from other objects</em>.
<P>
Figure&nbsp;<A HREF="page422.html#figgarbage3"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>&nbsp;(a) illustrates the contents memory following
the execution of this statement:
<PRE>Object p = new Association (new Integer (57), new Integer (99));</PRE>
The reference count of the <tt>Association</tt> is one,
because the variable <tt>p</tt> refers to it.
Similarly, the reference counts of the two <tt>Integer</tt> instances are one
because the <tt>Association</tt> refers to both of them.
<P>
<P><A NAME="30084">&#160;</A><A NAME="figgarbage3">&#160;</A> <IMG WIDTH=575 HEIGHT=422 ALIGN=BOTTOM ALT="figure29809" SRC="img1706.gif"  ><BR>
<STRONG>Figure:</STRONG> Reference counting when objects refer to other objects.<BR>
<P>
<P>
Suppose we assign the value <tt>null</tt> to the variable <tt>p</tt>.
As shown in Figure&nbsp;<A HREF="page422.html#figgarbage3"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>&nbsp;(b),
the reference count of the association becomes zero--it is now garbage.
However, until the <tt>Association</tt> instance continues to exist until
it is garbage collected.
And because it still exists, it still refers to the <tt>Integer</tt> objects.
<P>
Figure&nbsp;<A HREF="page422.html#figgarbage3"><IMG  ALIGN=BOTTOM ALT="gif" SRC="..\icons\cross_ref_motif.gif"></A>&nbsp;(d) shows that the garbage collection process
adjusts the reference counts on the objects to which the association refers
only when the association is garbage collected.
The two <tt>Integer</tt> objects are now unreferenced
and can be garbage collected as well.
<P>
<HR><A NAME="tex2html7114" HREF="page423.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="..\icons\next_motif.gif"></A> <A NAME="tex2html7112" HREF="page421.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="..\icons\up_motif.gif"></A> <A NAME="tex2html7106" HREF="page421.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="..\icons\previous_motif.gif"></A> <A NAME="tex2html7116" HREF="page9.html"><IMG WIDTH=65 HEIGHT=24 ALIGN=BOTTOM ALT="contents" SRC="..\icons\contents_motif.gif"></A> <A NAME="tex2html7117" HREF="page618.html"><IMG WIDTH=43 HEIGHT=24 ALIGN=BOTTOM ALT="index" SRC="..\icons\index_motif.gif"></A> <P><ADDRESS>
<img src="..\icons\bruno.gif" alt="Bruno" align=right>
<a href="..\copyright.html">Copyright &#169; 1998</a> by <a href="..\signature.html">Bruno R. Preiss, P.Eng.</a>  All rights reserved.

</ADDRESS>
</BODY>
</HTML>
